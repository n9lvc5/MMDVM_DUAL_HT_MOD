
ETSI TS 102 361-4 V1.12.1 (2023-07) 
TECHNICAL SPECIFICATION 
Electromagnetic compatibility and Radio spectrum Matters (ERM); Digital Mobile Radio (DMR) Systems; Part 4: DMR trunking protocol 
Reference 
RTS/ERM-TGDMR-384 
Keywords 
data, digital, MS, radio, signalling, trunking 
ETSI 
650 Route des Lucioles F-06921 Sophia Antipolis Cedex - FRANCE 
Tel.: +33 4 92 94 42 00   Fax: +33 4 93 65 47 16 
Siret N° 348 623 562 00017 -APE 7112B Association à but non lucratif enregistrée à la Sous-Préfecture de Grasse (06) N° w061004871 
Important notice 
The present document can be downloaded from: 
https://www.etsi.org/standards-search 
The present document may be made available in electronic versions and/or in print. The content of any electronic and/or print versions of the present document shall not be modified without the prior written authorization of ETSI. In case of any existing or perceived difference in contents between such versions and/or in print, the prevailing version of an ETSI deliverable is the one made publicly available in PDF format at www.etsi.org/deliver. 
Users of the present document should be aware that the document may be subject to revision or change of status. Information on the current status of this and other ETSI documents is available at 
https://portal.etsi.org/TB/ETSIDeliverableStatus.aspx 
If you find errors in the present document, please send your comment to one of the following services: 
https://portal.etsi.org/People/CommiteeSupportStaff.aspx 
If you find a security vulnerability in the present document, please report it through our Coordinated Vulnerability Disclosure Program: 
https://www.etsi.org/standards/coordinated-vulnerability-disclosure 
Notice of disclaimer & limitation of liability 
The information provided in the present deliverable is directed solely to professionals who have the appropriate degree of experience to understand and interpret its content in accordance with generally accepted engineering or other professional standard and applicable regulations. No recommendation as to products and services or vendors is made or should be implied. No representation or warranty is made that this deliverable is technically accurate or sufficient or conforms to any law and/or governmental rule and/or regulation and further, no representation or warranty is made of merchantability or fitness for any particular purpose or against infringement of intellectual property rights. In no event shall ETSI be held liable for loss of profits or any other incidental or consequential damages. 
Any software contained in this deliverable is provided "AS IS" with no warranties, express or implied, including but not limited to, the warranties of merchantability, fitness for a particular purpose and non-infringement of intellectual property rights and ETSI shall not be held liable in any event for any damages whatsoever (including, without limitation, damages for loss of profits, business interruption, loss of information, or any other pecuniary loss) arising out of or related to the use of or inability to use the software. 
Copyright Notification 
No part may be reproduced or utilized in any form or by any means, electronic or mechanical, including photocopying and microfilm except as authorized by written permission of ETSI. The content of the PDF version shall not be modified without the written authorization of ETSI. The copyright and the foregoing restriction extend to reproduction in all media. 
© ETSI 2023. All rights reserved. 
Contents 
Intellectual Property Rights...................................................................................................................... 14 
Foreword ................................................................................................................................................... 14 
Modal verbs terminology .......................................................................................................................... 14 
1 Scope.............................................................................................................................................. 15 
2 References...................................................................................................................................... 15 
2.1 Normative references .............................................................................................................................. 15 
2.2 Informative references............................................................................................................................. 16 
3 Definition of terms, symbols and abbreviations............................................................................. 16 3.1 Terms....................................................................................................................................................... 16 3.2 Symbols................................................................................................................................................... 20 
3.3 Abbreviations .......................................................................................................................................... 20 
4 Overview ........................................................................................................................................ 23 
4.0 Overview introduction ............................................................................................................................. 23 
4.1 Protocol Architecture .............................................................................................................................. 24 
4.1.0 Protocol Architecture - Introduction .................................................................................................. 24 
4.1.1 Air Interface Physical Layer (layer 1)................................................................................................ 25 
4.1.2 Air Interface Data Link Layer (layer 2) ............................................................................................. 26 
4.1.3 Air Interface Call Control Layer (layer 3) ......................................................................................... 26 
4.2 Services and Facilities ............................................................................................................................. 27 
4.3 Device Addresses .................................................................................................................................... 28 
4.3.1 MS Addresses .................................................................................................................................... 28 
4.3.2 Services and Gateway Addresses....................................................................................................... 28 
4.4 Conventional/Trunked Systems............................................................................................................... 28 
4.5 MS Location ............................................................................................................................................ 28 
4.6 Tier III Services....................................................................................................................................... 29 
4.6.0 Tier III Services - Introduction .......................................................................................................... 29 
4.6.1 MS initiating calls .............................................................................................................................. 29 
4.6.2 MS Receiving Calls ........................................................................................................................... 29 
4.6.2.0 MS Receiving Calls -Introduction ............................................................................................... 29 
4.6.2.1 MS Receiving Individual Calls .................................................................................................... 30 
4.6.2.1.0 MS Receiving Individual Calls - Introduction ........................................................................ 30 
4.6.2.1.1 Off Air Call Set-Up (OACSU) ............................................................................................... 30 
4.6.2.1.2 Full Off Air Call Set-Up (FOACSU)...................................................................................... 30 
4.6.2.2 MS Receiving Calls to Talkgroups .............................................................................................. 30 
4.6.2.3 MS Receiving Calls to All_MS.................................................................................................... 30 
4.7 Physical Link Organization ..................................................................................................................... 30 
4.7.0 Physical Link Organization - Introduction ......................................................................................... 30 
4.7.1 Radio Frequency Allocation .............................................................................................................. 31 
4.7.2 Colour Code (CC).............................................................................................................................. 31 
4.8 DMR TDMA Burst and Channel Structure............................................................................................. 31 
4.9 TS Structure............................................................................................................................................. 33 
4.9.0 Introduction to the TS Structure ........................................................................................................ 33 
4.9.1 An Individual Voice Call Example.................................................................................................... 33 
4.9.1.1 Individual Call using OACSU...................................................................................................... 33 
4.9.1.2 Individual Call using FOACSU ................................................................................................... 35 
4.9.2 A Talkgroup Call Example ................................................................................................................ 36 
4.10 Network Architecture .............................................................................................................................. 37 
4.10.0 Network Architecture - Introduction.................................................................................................. 37 
4.10.1 Network Functions............................................................................................................................. 37 
4.10.1.0 Network Functions - Introduction ................................................................................................ 37 
4.10.1.1 Establishing Service..................................................................................................................... 37 
4.10.1.2 Network Identifier ........................................................................................................................ 37 
4.10.2 MS Location by Registration ............................................................................................................. 38 
4.11 Trunking Methods ................................................................................................................................... 38 
4.11.0 Trunking Methods - Introduction ....................................................................................................... 38 
4.11.1 Message Trunking ............................................................................................................................. 38 
4.11.2 Transmission Trunking ...................................................................................................................... 38 
4.11.3 Quasi-Transmission Trunking ........................................................................................................... 38 
5 Trunking Control Channel Formats ............................................................................................... 39 
5.0 Trunking Control Channel Formats - Introduction .................................................................................. 39 
5.1 The Use of the CACH ............................................................................................................................. 39 
5.1.0 System Identity Code Structure ......................................................................................................... 39 
5.1.1 C_SYS_Parms and P_SYS Parms - System Identity Code Subset.................................................... 40 
5.1.2 C_SYS_Parms -Reg .......................................................................................................................... 40 
5.1.3 C_SYS_Parms -Common_Slot_Counter .......................................................................................... 40 
5.2 Tier III Signalling.................................................................................................................................... 40 
5.3 Modes of Control Channel ...................................................................................................................... 40 
5.3.0 Control Channel Modes - Introduction .............................................................................................. 40 
5.3.1 Dedicated TSCC ................................................................................................................................ 41 
5.3.2 Non-Dedicated TSCC........................................................................................................................ 41 
5.3.3 Operation in Shared Spectrum........................................................................................................... 41 
5.4 CSBK/MBC/UDT/USBD Block Structure ............................................................................................. 41 
5.4.0 CSBK/MBC/UDT/USBD Block Structure - Introduction ................................................................. 41 
5.4.1 CSBK/MBC/UDT/USBD Outbound Channel Structure ................................................................... 41 
5.4.2 CSBK/MBC/UDT/USBD PDUs on the TSCC Inbound Channel ..................................................... 43 
5.4.3 CSBK/MBC PDUs on the Payload Channel Outbound Channel ...................................................... 43 
5.4.4 CSBK PDUs on the Payload Channel Inbound Channel ................................................................... 44 
6 TrunkingProcedures ...................................................................................................................... 45 
6.1 Basic Structure ........................................................................................................................................ 45 
6.1.1 Channel Structure .............................................................................................................................. 45 
6.1.1.1 Fully Regulated Structure ............................................................................................................ 45 
6.1.1.2 Shared Channel Unregulated Structure ........................................................................................ 45 
6.1.1.3 TSCCAS Structure ....................................................................................................................... 45 
6.1.2 Physical Channel Addressing ............................................................................................................ 46 
6.1.3 Sub-Division of the MS Population ................................................................................................... 46 
6.2 Random Access Procedures .................................................................................................................... 47 
6.2.0 Random Access Procedures -Introduction ........................................................................................ 47 
6.2.1 The Random Access Principle ........................................................................................................... 47 
6.2.1.0 Random Access Principle -Introduction...................................................................................... 47 
6.2.1.1 Random Access Control............................................................................................................... 48 
6.2.1.1.0 Random Access Control -Introduction .................................................................................. 48 
6.2.1.1.1 Sub Dividing the MS Population............................................................................................ 48 
6.2.1.1.2 Checking the Service-Function .............................................................................................. 49 
6.2.1.1.3 Withdrawing slots from Random-Access............................................................................... 49 
6.2.1.1.4 TSCC Responses to Random Access Attempts...................................................................... 50 
6.2.1.1.5 Noting the Response Delay .................................................................................................... 50 
6.2.1.1.6 Random Backoff ..................................................................................................................... 50 
6.2.1.1.7 Retry decision and Time-outs................................................................................................. 52 
6.2.1.1.8 Random Access (non-emergency) SDL for an MS as Defined in Clause 6.2 ........................ 53 
6.2.1.1.9 Random Access (emergency) SDL for an MS as Defined in Clause 6.2 ................................ 56 
6.2.1.2 Action After Receiving an Acknowledgement............................................................................. 58 
6.2.1.3 MS Arriving on a Control Channel .............................................................................................. 59 
6.3 Control Channel Acquisition and Retention ............................................................................................ 59 
6.3.0 Control Channel Acquisition and Retention - Introduction ............................................................... 59 
6.3.1 MS Parameter Volatility .................................................................................................................... 60 
6.3.2 Control Channel Acquisition Procedures........................................................................................... 61 
6.3.2.0 Control Channel Acquisition Procedures - Introduction .............................................................. 61 
6.3.2.1 Entry into TSCC Acquisition Procedures .................................................................................... 61 
6.3.2.2 Identifying a Candidate Control Channel..................................................................................... 61 
6.3.2.2.0 Identifying a Candidate Control Channel - Introduction ........................................................ 61 
6.3.2.2.1 Checking the System Identity Code ....................................................................................... 62 
6.3.2.2.2 TSCC Authorization Procedure .............................................................................................. 64 
6.3.2.2.3 Checking the SYS_AREA Information Element.................................................................... 65 
6.3.2.3 Confirmation - Monitoring the TSCC Outbound Channel Signal Quality ................................... 66 
6.3.2.4 Reading the Colour Code ............................................................................................................. 67 6.3.3 MS Leaving a Control Channel ......................................................................................................... 67 6.3.3.1 Reasons for Leaving a Control Channel When Active But Idle ................................................... 67 6.3.3.2 Leaving a Control Channel Whilst Waiting for Signalling .......................................................... 67 6.4 Registration, Power Save, and Authentication Procedures...................................................................... 67 6.4.0 Registration, Power Save, and Auth Procedures - Introduction ......................................................... 67 6.4.1 Registration ........................................................................................................................................ 68 6.4.1.1 Introduction .................................................................................................................................. 68 6.4.1.2 The Principle................................................................................................................................ 69 6.4.2 MS Parameter Volatility .................................................................................................................... 70 6.4.3 Action on Confirmation of a TSCC ................................................................................................... 70 6.4.4 Registration Procedures ..................................................................................................................... 70 6.4.4.0 Registration Procedures - Introduction......................................................................................... 70 6.4.4.1 Registration by Random Access .................................................................................................. 71 6.4.4.1.0 Registration by Random Access - Introduction ...................................................................... 71 6.4.4.1.1 Intermediate Acknowledgement............................................................................................. 72 6.4.4.1.2 Registration Accepted ............................................................................................................ 72 6.4.4.1.3 Registration Refused .............................................................................................................. 72 6.4.4.1.4 Registration Denied ................................................................................................................ 72 6.4.4.1.5 Challenge and Response Authentication ................................................................................ 72 6.4.4.1.6 Registration Attempt Times Out............................................................................................. 73 6.4.4.1.7 Registration Demand Received During Random Access Registration ................................... 73 6.4.4.1.8 No answer response Received after the Maximum Number of Random Access Attempts.... 73 6.4.4.1.9 Registration Action on Switch-on or Equivalent.................................................................... 73 6.4.4.1.10 Registration Scenario MSC .................................................................................................... 74 6.4.4.1.11 Registration with MS Authentication ..................................................................................... 75 6.4.4.1.12 Acceptance of User Initiated Service Requests ...................................................................... 76 6.4.4.1.13 Talkgroup Subscription and Talkgroup Attachment............................................................... 76 6.4.5 Mass Re-registration .......................................................................................................................... 83 6.4.5.0 Mass Re-registration - Introduction ............................................................................................. 83 6.4.5.1 Procedure for MS on Receipt of Mass Re-registration Broadcast................................................ 83 6.4.6 De-registration ................................................................................................................................... 84 6.4.7 Power Save ........................................................................................................................................ 84 6.4.7.1 Overview...................................................................................................................................... 84 
6.4.7.2 Power Save Procedures................................................................................................................ 85 
6.4.7.2.1 Basic Power Save Procedures................................................................................................. 85 
6.4.8 Authentication Procedures................................................................................................................. 86 
6.4.8.0 Authentication Procedures - Introduction .................................................................................... 86 
6.4.8.1 Key Management ......................................................................................................................... 87 
6.4.8.1.1 Authentication Key (K) .......................................................................................................... 87 
6.4.8.1.2 PSN (Physical Serial Number) ............................................................................................... 88 
6.4.8.2 Authentication Procedures ........................................................................................................... 88 
6.4.8.3 Authentication Procedures for the MS ......................................................................................... 88 
6.4.9 MS Stun/Revive................................................................................................................................. 89 
6.4.9.0 MS Stun/Revive - Introduction .................................................................................................... 89 
6.4.9.1 MS Stun/Revive without Authentication ..................................................................................... 89 
6.4.9.1.0 MS Stun/Revive without Authentication - Introduction ......................................................... 89 
6.4.9.1.1 Stun/Revive procedures for the TSCC ................................................................................... 89 
6.4.9.1.2 Stun/Revive Procedures for the MS ....................................................................................... 90 
6.4.9.2 MS Stun/Revive with Authentication .......................................................................................... 90 
6.4.9.2.0 MS Stun/Revive with Authentication - Introduction .............................................................. 90 
6.4.9.2.1 Stun/Revive procedures with Authentication for the TSCC................................................... 90 
6.4.9.2.2 Stun/Revive procedures with Authentication for the MS ....................................................... 91 
6.4.10 MS Kill .............................................................................................................................................. 92 
6.4.10.0 MS Kill - Introduction .................................................................................................................. 92 
6.4.10.1 Kill Procedures with Authentication for the TSCC...................................................................... 93 
6.4.10.2 Kill Procedures with Authentication for the MS.......................................................................... 93 
6.4.11 IP Connection Advice........................................................................................................................ 94 
6.4.11.0 IP Connection Advice - Introduction ........................................................................................... 94 
6.4.11.1 IP Connection Advice Procedures for the MS ............................................................................. 95 
6.4.11.1.0 IP Connection Advice Procedures for the MS - Introduction ................................................. 95 
6.4.11.1.1 Registration Attempt Times Out............................................................................................. 95 
6.4.11.1.2 No Answer Response Received after the Maximum Number of Random Access Attempts.. 95 
6.4.11.1.3 MS Response to C_AHOY Inviting the MS to Send an IP address ....................................... 95 
6.4.11.1.4 Final Acknowledgment to IP Connection Advice Received by the Calling MS .................... 95 
6.4.11.2 IP Connection Advice Procedures for the TSCC ......................................................................... 96 
6.4.11.2.0 IP Connection Advice Procedures for the TSCC - Introduction............................................. 96 
6.4.11.2.1 IP Bearer Service Available at Site ........................................................................................ 96 
6.4.11.2.2 IP Bearer Service not Available at Site .................................................................................. 96 
6.4.11.2.3 Final acknowledgement to IP Connection Advice ................................................................. 96 
6.4.12 Unsolicited MS Radio Check............................................................................................................. 97 
6.4.13 Supplementary_User Data Service .................................................................................................... 98 
6.4.13.0 Supplementary_User Data Service - Introduction ........................................................................ 98 
6.4.13.1 Supplementary User Data Inbound Phase .................................................................................... 98 
6.4.13.2 Supplementary User Data Outbound Phase ................................................................................. 99 
6.4.14 MS Power Control and MS De-key ................................................................................................. 102 
6.4.14.0 MS Power Control and MS De-key - Introduction .................................................................... 102 
6.4.14.1 Reverse Channel (RC) Command .............................................................................................. 102 
6.4.14.2 Procedures for Power Control.................................................................................................... 103 
6.4.14.3 Procedures for MS De-key......................................................................................................... 103 
6.4.14.3.1 Emergency Pre-emption MS De-key (TS Initiated) ............................................................. 103 
6.4.14.3.2 Call Timer Expiration MS De-key (TS Initiated) ................................................................. 103 
6.4.14.3.3 Payload Interrupt MS De-key............................................................................................... 104 
6.4.14.3.4 Ambient Listening Service (ALS) Termination MS De-key................................................ 105 
6.4.15 Transmit Interrupt for MS De-key................................................................................................... 107 
6.4.15.1 TSCC Procedures for Transmit Interrupt ................................................................................... 107 
6.4.15.2 Interrupted MS Procedures for Transmit Interrupt..................................................................... 108 
6.5 Unified Data Transport Mechanism ...................................................................................................... 108 
6.5.0 Unified Data Transport Mechanism - Introduction .......................................................................... 108 
6.5.1 Format of the Appended Data .......................................................................................................... 111 
6.5.1.0 Format of the appended data - Introduction ............................................................................... 111 
6.5.1.1 UDT Block Structure ................................................................................................................. 112 
6.5.1.2 UDT Content for Services Carried on the Outbound Channel ................................................... 112 
6.5.1.3 UDT Mechanism for the Inbound Channel................................................................................ 113 
6.6 Call Procedures ..................................................................................................................................... 115 
6.6.0 Call Procedures - Introduction ......................................................................................................... 115 
6.6.1 Procedures Common to Voice calls and Packet Data Calls............................................................. 119 
6.6.1.1 MS Availability Checks ............................................................................................................. 119 
6.6.1.1.1 Availability of calling MS .................................................................................................... 119 
6.6.1.1.2 Availability of Called Party as part of a Call ........................................................................ 119 
6.6.1.1.3 General MS Radio Check ..................................................................................................... 119 
6.6.1.2 Call Cancellation ........................................................................................................................ 119 
6.6.1.2.0 Call Cancellation - Introduction ........................................................................................... 119 
6.6.1.2.1 Call Cancellation  Procedures for the Calling MS.............................................................. 119 
6.6.1.2.2 Call Cancellation  Procedures for the Called MS ............................................................... 119 
6.6.1.3 Acknowledgements Sent to Calling MS .................................................................................... 120 
6.6.1.4 Called Party (MS) Answering Mechanism ................................................................................ 121 
6.6.1.4.0 Called Party (MS) Answering Mechanism - Introduction .................................................... 121 
6.6.1.4.1 FOACSU -Called Party Accepts the Call............................................................................ 121 
6.6.1.4.2 FOACSU -Called Party Rejects the Call ............................................................................. 123 
6.6.1.4.3 TSCC response to the Call Answer Random Access............................................................ 124 
6.6.1.5 Maintenance of Call Progress Waiting Timers .......................................................................... 125 
6.6.1.5.1 Call Waiting Timer for the Calling MS................................................................................ 125 
6.6.1.5.2 Call Waiting Timer for the Called MS ................................................................................. 125 
6.6.1.6 Payload Channel Assignment to a Payload Channel.................................................................. 126 
6.6.1.6.1 Payload Channel Assignment............................................................................................... 126 
6.6.1.6.2 Timing requirements for the allocation of a Payload Channel and PDUs that may be sent . 126 
6.6.1.7 Calls to ALLMSID, ALLMSIDL and ALLMSIDZ ................................................................... 127 
6.6.2 Voice Call Procedures ..................................................................................................................... 128 
6.6.2.0 Voice Call Procedures - Introduction ......................................................................................... 128 
6.6.2.1 Voice Call Procedures for the TSCC ......................................................................................... 128 
6.6.2.1.0 Voice Call Procedures for the TSCC - Introduction ............................................................. 128 
6.6.2.1.1 TSCC Response to Single-part Voice Call Set-up................................................................ 129 
6.6.2.1.2 TSCC Response to Multi-part Voice Call Set-up................................................................. 129 
6.6.2.1.3 Acknowledgements Sent by the TSCC to the Calling MS (voice) ....................................... 130 
6.6.2.1.4 Voice Radio Check ............................................................................................................... 130 
6.6.2.1.5 Availability Check for Voice Calls connected through Gateways ....................................... 131 
6.6.2.2 Voice Call Procedures for MS ................................................................................................... 131 
6.6.2.2.0 Voice Call Procedures for MS - Introduction ....................................................................... 131 
6.6.2.2.1 Initiating a Single-part Voice Call Service........................................................................... 132 
6.6.2.2.2 Response to the Single-part Voice Service Request............................................................. 132 
6.6.2.2.3 Initiating a Multi-part Voice Call Service ............................................................................ 133 
6.6.2.2.4 Response to the Multi-part Voice Service Request .............................................................. 133 
6.6.2.2.5 Acknowledgements Received by the Calling MS (voice) .................................................... 134 
6.6.2.2.6 Availability Check to the Called Party (voice) ..................................................................... 135 
6.6.2.2.7 Payload Channel Allocation ................................................................................................. 135 
6.6.2.2.8 Calling MS in Single Part Voice Call Setup SDL ................................................................ 136 
6.6.2.2.9 Call Set-up MSC that also Transfers Supplementary_user Data .......................................... 138 
6.6.2.3 Procedures for the Voice Payload Channel................................................................................ 138 
6.6.2.3.0 Procedures for the Voice Payload Channel - Introduction ................................................... 138 
6.6.2.3.1 TS Procedures for the Voice Payload Channel..................................................................... 139 
6.6.2.3.2 MS Procedures for the Voice Payload Channel.................................................................... 143 
6.6.2.4 Late Entry................................................................................................................................... 145 
6.6.2.4.1 The Principle ........................................................................................................................ 145 
6.6.2.4.2 The Call Timer ..................................................................................................................... 145 
6.6.2.5 Preferential Call Notification ..................................................................................................... 146 
6.6.2.5.1 The Principle ........................................................................................................................ 146 
6.6.2.5.2 Announcing a New Call on the Payload Channel................................................................. 146 
6.6.2.6 Ambient Listening Service (ALS).............................................................................................. 146 
6.6.2.6.1 Ambient Listening Service (ALS) - Introduction ................................................................. 146 
6.6.2.6.2 Ambient Listening Service Procedures for the Call Setup ................................................... 146 
6.6.2.6.3 Ambient Listening Service Procedures for the Payload Channel......................................... 147 
6.6.2.6.4 Timeout on the ALS Payload Channel ................................................................................. 148 
6.6.2.6.5 Call Termination for the ALS service .................................................................................. 148 
6.6.2.6.6 Payload Interrupt for the ALS service .................................................................................. 148 
6.6.3 Packet Data Call Procedures............................................................................................................ 148 
6.6.3.0 Packet Data Call Procedures -Introduction ............................................................................... 148 
6.6.3.1 Packet Data Call Procedures for the TSCC................................................................................ 149 
6.6.3.1.0 Packet Data Call Procedures for the TSCC - Introduction ................................................... 149 
6.6.3.1.1 TSCC Response to Single-part Packet Data Call Set-up ...................................................... 149 
6.6.3.1.2 TSCC Response to Multi-part Packet Data Call Setup......................................................... 150 
6.6.3.1.3 Acknowledgements Sent on the TSCC to the Calling MS (packet) ..................................... 151 
6.6.3.1.4 Radio Check for Packet Data................................................................................................ 151 
6.6.3.1.5 Availability Check for Packet Calls Connected Through Gateways .................................... 151 
6.6.3.2 Packet Data Call Procedures for MS .......................................................................................... 152 
6.6.3.2.0 Packet Data Call Procedures for MS - Introduction ............................................................. 152 
6.6.3.2.1 Initiating a Single-part Packet Data Call Service ................................................................. 152 
6.6.3.2.2 Response to the Single-part Packet Data Service Request ................................................... 153 
6.6.3.2.3 Initiating a Multi-part Packet Data Service .......................................................................... 153 
6.6.3.2.4 Response to the Multi-part Packet Data Service Request..................................................... 154 
6.6.3.2.5 Acknowledgements Received by the Calling MS (packet data) ........................................... 154 
6.6.3.2.6 Availability Check to the Called MS (packet data) .............................................................. 154 
6.6.3.2.7 Payload Channel Allocation ................................................................................................. 155 
6.6.3.3 Procedures for the Packet Data Payload Channel ...................................................................... 155 
6.6.3.3.0 Procedures for the Packet Data Payload Channel - Introduction.......................................... 155 
6.6.3.3.1 TS Procedures for the Packet Data Payload Channel ........................................................... 156 
6.6.3.3.2 MS Procedures for the Packet Data Payload Channel.......................................................... 157 
6.6.3.4 Application Data Over IP Bearer Service .................................................................................. 159 
6.6.3.4.0 Application Data Over IP Bearer Service - Introduction ...................................................... 159 
6.6.3.4.1 Text Messaging .................................................................................................................... 159 
6.6.3.4.2 Location ................................................................................................................................ 159 
6.6.4 UDT Short Data Message Procedure ............................................................................................... 159 
6.6.4.0 UDT Short Data Message Procedure - Introduction .................................................................. 159 
6.6.4.1 UDT Short Data Procedures for the TSCC ................................................................................ 161 
6.6.4.1.0 UDT Short Data Procedures for the TSCC - Introduction .................................................... 161 
6.6.4.1.1 TSCC Response to a Call to an Individual MS or Talkgroup (upload phase) ...................... 162 
6.6.4.1.2 TSCC Response to a Call to an Extended_address Destination (upload phase) ................... 162 
6.6.4.1.3 Availability Check to the Called MS (UDT Short Data)...................................................... 163 
6.6.4.1.4 Sending the UDT Short Data to the Called Party (download phase).................................... 163 
6.6.4.1.5 Final Acknowledgement to the Calling Party....................................................................... 163 
6.6.4.2 UDT Short Data Message Procedures for MS ........................................................................... 164 
6.6.4.3 Initiating a UDT Short Data Message Service ........................................................................... 164 
6.6.4.4 Response to a Random Access UDT Short Data Message Call Service .................................... 164 
6.6.4.5 Acknowledgements Received by the Calling MS ...................................................................... 165 
6.6.4.6 Timeout Waiting for Further Signalling..................................................................................... 165 
6.6.4.7 MS Receiving a UDT Short Data Message................................................................................ 165 
6.6.4.8 Short Data Message Procedure MSC ......................................................................................... 166 
6.6.5 UDT Short Data Polling Service ...................................................................................................... 167 
6.6.5.0 UDT Short Data Polling Service - Introduction ......................................................................... 167 
6.6.5.1 UDT Short Data Polling Procedures for the TSCC.................................................................... 168 
6.6.5.1.0 UDT Short Data Polling Procedures for the TSCC - Introduction ....................................... 168 
6.6.5.1.1 TSCC Response to a Poll Request from an MS.................................................................... 168 
6.6.5.1.2 Availability Check to the Called MS (UDT Short Data poll)............................................... 169 
6.6.5.1.3 Delivery of the Polled Data to the Calling Party .................................................................. 169 
6.6.5.1.4 Final Acknowledgement by the Calling Party to the TSCC ................................................. 169 
6.6.5.1.5 UDT Short Data Polling Procedures from a TSCC Gateway ............................................... 169 
6.6.5.2 UDT Short Data Polling Message Procedures for MS ............................................................... 169 
6.6.5.3 Initiating a UDT Short Data Polling Service.............................................................................. 170 
6.6.5.4 Response to a Random Access UDT Short Data Polling Message ............................................ 170 
6.6.5.5 Final Acknowledgement Transmitted by the Calling MS.......................................................... 170 
6.6.5.6 Timeout Waiting for Further Signalling..................................................................................... 170 
6.6.5.7 MS Receiving a C_AHOY Poll for a Short Polling Message .................................................... 171 
6.6.6 Status Call Service ........................................................................................................................... 171 
6.6.6.0 Status Call Service -Introduction .............................................................................................. 171 
6.6.6.1 Status Service Delivery Procedure ............................................................................................. 171 
6.6.6.1.0 Status Service Delivery Procedure - Introduction ................................................................ 171 
6.6.6.1.1 Status Service Delivery Procedures for the TSCC ............................................................... 172 
6.6.6.1.2 Status Service Delivery Procedures for MS ......................................................................... 174 
6.6.6.2 Status Polling Service Procedure ............................................................................................... 177 
6.6.6.2.0 Status Polling Service Procedure - Introduction ................................................................... 177 
6.6.6.2.1 Status Service Polling Procedures for the TSCC.................................................................. 178 
6.6.6.2.2 Status Polling Service Procedures for MS............................................................................ 179 
6.6.6.3 Defined Status Values for Status Call Service ........................................................................... 181 
6.6.6.3.1 Emergency Alarm................................................................................................................. 181 
6.6.6.3.2 Cancel Emergency Alarm..................................................................................................... 181 
6.6.7 Call Diversion .................................................................................................................................. 181 
6.6.7.1 Call Diversion Service ............................................................................................................... 181 
6.6.7.1.0 Call Diversion Service -Introduction ................................................................................... 181 
6.6.7.1.1 TSCC Procedures for the Call Diversion Service................................................................. 182 
6.6.7.1.2 MS Procedures for the Call Diversion Service..................................................................... 184 
6.6.7.2 Diverting Calls ........................................................................................................................... 186 
6.6.8 Dynamic Group Numbering Assignment Service............................................................................ 188 
6.6.8.0 Dynamic Group Numbering Assignment Service - Introduction............................................... 188 
6.6.8.1 Rules for the allocation of Dynamic Group Addresses .............................................................. 189 
6.6.8.1.0 Allocation Rules - Introduction ............................................................................................ 189 
6.6.8.1.1 DGNA_Address Mode ......................................................................................................... 190 
6.6.8.1.2 DGNA_Alias Mode.............................................................................................................. 190 
6.6.8.2 Dynamic Group Numbering Assignment Procedures for the TSCC.......................................... 191 
6.6.8.2.0 Dynamic Group Numbering Assignment Procedures for the TSCC - Introduction ............. 191 
6.6.8.2.1 TSCC Response to a Call to an Individual MS or Talkgroup............................................... 191 
6.6.8.2.2 UDT Outbound Phase........................................................................................................... 191 
6.6.8.2.3 Final Acknowledgement to the Calling Party....................................................................... 192 
6.6.8.3 Dynamic Group Numbering Assignment Procedures for MS .................................................... 192 
6.6.8.3.0 DGNA Procedures for MS - Introduction............................................................................. 192 
6.6.8.3.1 Initiating a Dynamic Group Numbering Service.................................................................. 193 
6.6.8.3.2 Response to a Random Access UDT Dynamic Group Numbering Service ......................... 193 
6.6.8.3.3 MS Response to the TSCC AHOY for the UDT Inbound.................................................... 193 
6.6.8.3.4 Acknowledgements Received by the Calling MS ................................................................ 194 
6.6.8.3.5 Timeout Waiting for Further Signalling ............................................................................... 194 
6.6.8.3.6 MS Receiving a UDT Dynamic Group Numbering PDU .................................................... 195 
6.6.9 Full-Duplex MS to MS Voice Call Procedures................................................................................ 195 
6.6.9.0 Full-Duplex MS to MS Voice Call Procedures - Introduction ................................................... 195 
6.6.9.1 Full-Duplex MS to MS Voice Call Procedures for the TSCC ................................................... 195 
6.6.9.1.0 Full-Duplex MS to MS Voice Call Procedures for the TSCC - Introduction ....................... 195 
6.6.9.1.1 TSCC Response to Single-part Voice Call Set-up................................................................ 195 
6.6.9.1.2 TSCC Response to Multi-part Voice Call Set-up................................................................. 196 
6.6.9.1.3 Acknowledgements Sent by the TSCC to the Calling MS (voice) ....................................... 196 
6.6.9.1.4 Voice Radio Check ............................................................................................................... 196 
6.6.9.2 Full-Duplex MS to MS Voice Call Procedures for MS.............................................................. 196 
6.6.9.2.0 Full-Duplex MS to MS Voice Call Procedures for MS - Introduction ................................. 196 
6.6.9.2.1 Initiating a Single-part Voice Call Service........................................................................... 197 
6.6.9.2.2 Response to the Single-part Voice Service Request............................................................. 197 
6.6.9.2.3 Response to the Multi-part Voice Service Request .............................................................. 197 
6.6.9.2.4 Acknowledgements Received by the Calling MS (voice) .................................................... 198 
6.6.9.2.5 Availability Check to the Called Party (voice) ..................................................................... 198 
6.6.9.2.6 Payload Channel Allocation ................................................................................................. 199 
6.6.9.2.7 Calling MS in Single Part Voice Call Setup SDL ................................................................ 199 
6.6.9.2.8 Call Set-up MSC that also Transfers Supplementary_user Data. ......................................... 199 
6.6.9.3 Timing Requirements for the Allocation of a Payload Channel ................................................ 199 
6.6.9.4 Procedures for the Voice Payload Channel................................................................................ 199 
6.6.9.4.0 Procedures for the Voice Payload Channel - Introduction ................................................... 199 
6.6.9.4.1 TS Procedures for the Voice Payload Channel..................................................................... 200 
6.6.9.4.2 MS Procedures for the Voice Payload Channel.................................................................... 200 
6.6.10 Full-Duplex MS to MS Packet Data Call Procedures ...................................................................... 200 
6.6.10.0 Full-Duplex MS to MS Packet Data Call Procedures - Introduction ......................................... 200 
6.6.10.1 Full-Duplex MS to MS Packet Data Call Procedures for the TSCC.......................................... 200 
6.6.10.1.0 Full-Duplex MS to MS Packet Data Call Procedures for the TSCC - Introduction ............. 200 
6.6.10.1.1 TSCC Response to Single-part packet Call Set-up............................................................... 200 
6.6.10.1.2 TSCC Response to Multi-part Packet Call Setup ................................................................. 200 
6.6.10.1.3 Acknowledgements Sent on the TSCC to the Calling MS (packet) ..................................... 201 
6.6.10.1.4 Radio Check for Packet Data................................................................................................ 201 
6.6.10.2 Full-Duplex MS to MS Packet Data Call Procedures for MS .................................................... 201 
6.6.10.2.0 Full-Duplex MS to MS Packet Data Call Procedures for MS - Introduction ....................... 201 
6.6.10.2.1 Initiating a Single-part Packet Data Call Service ................................................................. 202 
6.6.10.2.2 Response to the Single-part Packet Service Request............................................................ 202 
6.6.10.2.3 Response to the Multi-part Packet Data Service Request..................................................... 202 
6.6.10.2.4 Acknowledgements Received by the Calling MS (packet data) ........................................... 202 
6.6.10.2.5 Availability Check to the Called MS (packet data) .............................................................. 203 
6.6.10.2.6 Payload Channel Allocation ................................................................................................. 203 
6.6.10.3 Procedures for the Packet Data Payload Channel ...................................................................... 203 
6.6.10.3.0 Procedures for the Packet Data Payload Channel - Introduction.......................................... 203 
6.6.10.3.1 TS Procedures for the Packet Data Payload Channel ........................................................... 204 
6.6.10.3.2 MS Procedures for the Packet Data Payload Channel.......................................................... 204 
6.6.11 Unified Single Block Data Polling Service...................................................................................... 204 
6.6.11.0 Unified Single Block Data Polling Service - Introduction ......................................................... 204 
6.6.11.1 USBD Polling Service Procedures for TSCC and TSCCAS...................................................... 206 
6.6.11.2 USBD Polling Service Procedures for MS................................................................................. 206 
6.6.11.3 Unified Single Block Data Polling Service -Location Information Protocol ............................ 206 
6.6.11.3.0 General ................................................................................................................................. 206 
6.6.11.3.1 USBD Polling Service Poll Request PDU for LIP ............................................................... 207 
6.6.11.3.2 USBD Polling Service Poll Response PDU for LIP............................................................. 208 
6.6.11.3.3 Reason for Sending Information Element ............................................................................ 208 
6.7 System Management Procedures........................................................................................................... 208 
6.7.1 Network System Announcements.................................................................................................... 208 
6.7.1.0 Network System Announcements -Introduction ....................................................................... 208 
6.7.1.1 Announce/Withdraw TSCC ....................................................................................................... 209 
6.7.1.2 Specify Call Timer parameters................................................................................................... 209 
6.7.1.3 Vote Now Advice....................................................................................................................... 209 
6.7.1.4 Announce Local Time................................................................................................................ 210 
6.7.1.5 Mass Registration ....................................................................................................................... 211 
6.7.1.6 Announce a Logical Physical Channel Relationship.................................................................. 211 
6.7.1.7 Adjacent Site Information .......................................................................................................... 211 
6.7.1.8 General Site Parameters ............................................................................................................. 211 
7 PDU description........................................................................................................................... 211 7.0 PDU description - Introduction ............................................................................................................. 211 7.1 Layer 3 PDUs........................................................................................................................................ 212 7.1.0 Layer 3 PDUs - Introduction............................................................................................................ 212 7.1.1 Control Signalling Block (CSBK/MBC/UDT) PDUs...................................................................... 212 7.1.1.0 Control Signalling Block (CSBK/MBC/UDT) PDUs - Introduction ......................................... 212 7.1.1.1 TSCC Outbound channel CSBK/MBC/UDT............................................................................. 217 7.1.1.1.1 Channel Grant CSBK/MBC PDU ........................................................................................ 217 7.1.1.1.2 Channel Grant Absolute Parameters (CG_AP) Appended MBC PDU ................................ 226 7.1.1.1.3 Move TSCC (C_MOVE) CSBK/MBC PDU........................................................................ 226 7.1.1.1.4 Aloha (C_ALOHA) CSBK PDU .......................................................................................... 228 7.1.1.1.5 Announcements (C_BCAST) CSBK/MBC PDU................................................................. 229 7.1.1.1.6 Ahoy (C_AHOY) CSBK PDU ............................................................................................. 231 7.1.1.1.7 Acknowledgement (C_ACKD) TSCC Response CSBK PDU ............................................. 232 7.1.1.1.8 Unified Data Transport Outbound Header (C_UDTHD) UDT PDU ................................... 234 7.1.1.2 TSCC Inbound Channel CSBKs/UDTs Transmitted by MS...................................................... 235 7.1.1.2.1 Random Access Request (C_RAND) PDU .......................................................................... 235 7.1.1.2.2 C_Ackvitation (C_ACKVIT) CSBK PDU ........................................................................... 236 7.1.1.2.3 C_Acknowledge (C_ACKU) MS Response CSBK PDU .................................................... 237 7.1.1.2.4 Unified Data Transport Inbound Channel Header (C_UDTHU) UDT PDU ........................ 238 7.1.1.3 Outbound Channel CSBKs Transmitted on a Payload Channel by a TS ................................... 240 7.1.1.3.1 Channel Grant (P_GRANT) CSBK/MBC PDU ................................................................... 240 7.1.1.3.2 Clear (P_CLEAR) CSBK PDU ............................................................................................ 241 7.1.1.3.3 Protect (P_PROTECT) CSBK PDU ..................................................................................... 242 7.1.1.3.4 Ahoy (P_AHOY) CSBK PDU ............................................................................................. 242 7.1.1.3.5 P_Acknowledgement Response ........................................................................................... 243 7.1.1.4 Inbound Channel CSBKs Transmitted on a Payload Channel by MS(s) ................................... 243 7.1.1.4.1 Random Access Request PDU ............................................................................................. 243 7.1.1.4.2 P_ACK Acknowledgements................................................................................................. 244 7.1.1.4.3 P_MAINT Maintenance PDUs............................................................................................. 244 7.1.2 Short Link Control PDUs ................................................................................................................ 245 7.1.2.1 Control Channel System Parameters.......................................................................................... 245 7.1.2.2 Payload Channel System Parameters ......................................................................................... 245 7.2 Layer 3 Information Element Coding.................................................................................................... 246 7.2.0 Layer 3 Information Element Coding - Introduction ....................................................................... 246 7.2.1 Mask ................................................................................................................................................ 246 7.2.2 Service Function .............................................................................................................................. 246 7.2.3 NRand_Wait .................................................................................................................................... 246 7.2.4 Reg ................................................................................................................................................... 247 7.2.5 Backoff ............................................................................................................................................ 247 7.2.6 System Identity Code ....................................................................................................................... 247 7.2.7 Response_Info ................................................................................................................................. 248 7.2.8 Reason ............................................................................................................................................. 248 7.2.8.0 Reason -Introduction ................................................................................................................. 248 7.2.8.1 Acknowledgements C_ACK...................................................................................................... 248 7.2.8.2 Acknowledgements C_NACK ................................................................................................... 249 7.2.8.3 Acknowledgements C_QACK, C_WACK ................................................................................ 253 7.2.9 Digits ............................................................................................................................................... 254 7.2.10 Active_Connection .......................................................................................................................... 254 7.2.11 HI_RATE ......................................................................................................................................... 254 7.2.12 Service_Kind ................................................................................................................................... 255 7.2.12.0 Service_Kind - Introduction ....................................................................................................... 255 7.2.12.1 Service_Kind_Flag ..................................................................................................................... 255 7.2.12.2 UDT_Option_Flag ..................................................................................................................... 256 7.2.13 Service_Options............................................................................................................................... 257 7.2.13.0 Service Options - Introduction ................................................................................................... 257 7.2.13.1 Service_Options for a Voice Service Request............................................................................ 257 7.2.13.2 Service_Options for a Packet Data Service Request.................................................................. 257 
7.2.13.3 Service_Options for a Call Diversion Service Request.............................................................. 258 7.2.13.4 Service_Options for a Registration Service Request.................................................................. 258 7.2.13.5 Service_Options for an Include Call Service Request ............................................................... 259 7.2.13.6 Service_Options for a Status Transport Request ........................................................................ 259 7.2.13.7 Service_Options for the UDT Short Data Service ..................................................................... 259 7.2.13.8 Service Options for the Supplementary Data Service ................................................................ 260 7.2.13.9 Service Options for a UDT Short Data Polling Request ............................................................ 260 7.2.14 Service_Options_Mirror .................................................................................................................. 260 7.2.14.0 Service_Options_Mirror - Introduction...................................................................................... 260 7.2.14.1 Service_Options_Mirror for MS Authentication........................................................................ 260 7.2.14.2 Service_Options_Mirror for MS Stun/Revive............................................................................ 261 7.2.14.3 Service_Options_Mirror for MS Kill......................................................................................... 261 7.2.15 Proxy Flag........................................................................................................................................ 261 7.2.16 POL_FMT........................................................................................................................................ 262 7.2.17 Appended_Block ............................................................................................................................. 262 7.2.18 Opcode............................................................................................................................................. 262 7.2.19 Announcement_type ........................................................................................................................ 263 7.2.19.0 Announcement_type -Introduction ........................................................................................... 263 7.2.19.1 Announce/Withdraw TSCC (Ann_WD_TSCC) ........................................................................ 263 7.2.19.2 Specify Call Timer Parameters (CallTimer_Parms) ................................................................... 264 7.2.19.3 Vote Now Advice (Vote_Now).................................................................................................. 264 7.2.19.3.0 Vote Now - Introduction....................................................................................................... 264 7.2.19.3.1 Vote Now Absolute Parameters (VN_AP) Appended MBC PDU ....................................... 265 7.2.19.4 Broadcast Local Time (Local_Time) ......................................................................................... 265 7.2.19.4.0 Broadcast Local Time - Introduction .................................................................................... 265 7.2.19.4.1 Broadcast Local Time - Month (B_MONTH)...................................................................... 266 7.2.19.4.2 Broadcast Local Time - Day of Week (DAYSOF_WEEK) ................................................. 266 7.2.19.5 Broadcast Mass Registration (MassReg) ................................................................................... 266 7.2.19.5.0 Broadcast Mass Registration - Introduction ......................................................................... 266 7.2.19.5.1 Reg_Window........................................................................................................................ 267 7.2.19.6 Broadcast a Logical Channel/Frequency Relationship............................................................... 267 7.2.19.7 Broadcast Adjacent Site information ......................................................................................... 267 
7.2.19.8 Broadcast General Site Parameters information......................................................................... 268 
7.2.20 Individual/Group G/I ....................................................................................................................... 268 7.2.21 Protect_Kind.................................................................................................................................... 268 7.2.22 Maint_Kind...................................................................................................................................... 269 
7.2.23 Response expected (A) .................................................................................................................... 269 
7.2.24 Data Packet Format.......................................................................................................................... 269 
7.2.25 SAP Identifier .................................................................................................................................. 270 
7.2.26 Pad Nibble (PN)............................................................................................................................... 270 
7.2.27 UDT Format..................................................................................................................................... 271 
7.2.28 Offset ............................................................................................................................................... 271 
7.2.29 Protect Flag (PF) .............................................................................................................................. 271 
7.2.30 Privacy............................................................................................................................................. 271 
7.2.31 STATUS .......................................................................................................................................... 272 
7.2.32 Version ............................................................................................................................................. 272 
7.2.33 Target Address Contents.................................................................................................................. 272 
7.2.34 Payload Channel Type ..................................................................................................................... 273 
7.2.35 Site Timeslot Synchronization ......................................................................................................... 273 
7.2.36 One Key Format Flag (OK) ............................................................................................................. 273 
7.2.37 Single Item Multi-Item(SIMI) Data ................................................................................................. 273 
7.2.38 Response Delay (RD) ...................................................................................................................... 273 
7.2.39 Payload Contents (PC)..................................................................................................................... 274 
7.2.40 Current (confirmed) Site Information .............................................................................................. 274 
7.2.41 Network Information ....................................................................................................................... 274 
7.2.42 CdefParms Absolute Frequency Relationship ................................................................................. 275 
Annex A (normative): Timers, constants levels and addresses.............................................. 276 
A.0 Timers, constants levels and addresses -Introduction ................................................................. 276 
A.1 Layer 3 timers ............................................................................................................................... 276 
A.2 Layer 3 constants.......................................................................................................................... 278 
A.3 Layer 3 levels ............................................................................................................................... 278 
A.4 Tier III Gateways/Identifiers........................................................................................................ 279 
Annex B (normative): Opcode Reference Lists....................................................................... 280 
B.1 CSBK/MBC/UDT Opcode List.................................................................................................... 280 
B.2 Short Link Control Opcode List................................................................................................... 281 
B.3 Appended Data Information Elements......................................................................................... 281 
B.3.0 Appended Data Information Elements - Introduction ........................................................................... 281 
B.3.1 Appended Data Binary Format.............................................................................................................. 281 
B.3.2 Appended Data Addressing Format ...................................................................................................... 283 
B.3.3 Appended Data BCD Format ................................................................................................................ 284 
B.3.4 Appended Data ISO 7 bit character set Format..................................................................................... 286 
B.3.5 Appended Data ISO 8 bit Character Format.......................................................................................... 288 
B.3.6 Appended Data NMEA (IEC 61162-1) Format..................................................................................... 290 
B.3.6.0 Appended Data NMEA - Introduction ............................................................................................. 290 
B.3.6.1 Short NMEA (IEC 61162-1) Format ............................................................................................... 291 
B.3.6.2 Long NMEA (IEC 61162-1) Format Specified ............................................................................... 291 
B.3.6.3 Long NMEA (IEC 61162-1) Format Unspecified ........................................................................... 291 
B.3.7 UDT DMR IP Format............................................................................................................................ 292 
B.3.8 Appended Data Unicode 16 bit UTF-16BE Character Format.............................................................. 293 
B.3.9 Appended Data Mixed Format .............................................................................................................. 295 
B.3.10 Location Information Protocol (LIP)..................................................................................................... 296 
Annex C (informative): Physical Channel Plan......................................................................... 297 
C.1 Transmission and Reception ........................................................................................................ 297 
C.1.1 RF carriers............................................................................................................................................. 297 
C.1.1.1 Nominal Carriers Frequencies ......................................................................................................... 297 
C.1.1.2 Fixed Channel Plan .......................................................................................................................... 297 
C.1.1.3 Flexible Channel Plan ...................................................................................................................... 299 
C.1.1.4 Determination of Transmitter and Receiver frequency from CdefParms ........................................ 299 
Annex D (informative): Control Channel Hunting Procedures............................................... 300 
D.1 Control Channel Hunting Procedures........................................................................................... 300 
D.1.0 Introduction ........................................................................................................................................... 300 
D.1.1 Resuming a TSCC Hunt Channel.......................................................................................................... 302 
D.1.2 Commanded TSCC Hunt Channel ........................................................................................................ 302 
D.1.2.1 Conditions to Enter a Commanded TSCC Hunt .............................................................................. 302 
D.1.2.2 Nominated Channel for the Single Channel Hunt............................................................................ 303 
D.1.2.3 Short Hunt Sequence ....................................................................................................................... 303 
D.1.2.3.0 Short Hunt Sequence - Introduction ........................................................................................... 303 
D.1.2.3.1 Conditions to Enter a Short Channel Hunt................................................................................. 303 
D.1.2.4 Comprehensive Hunt Sequence ....................................................................................................... 304 
D.1.2.4.0 Comprehensive Hunt Sequence - Introduction........................................................................... 304 
D.1.2.4.1 Conditions to Enter a Comprehensive Channel Hunt................................................................. 304 
D.1.2.5 Receiver Sensitivity During Control Channel Acquisition .............................................................. 304 
Annex E (informative): Fleet numbering and dialling plan ..................................................... 305 
E.1 Introduction.................................................................................................................................. 305 
E.2 Subscriber Mapping ..................................................................................................................... 306 
E.2.0 Subscriber Mapping -Introduction ....................................................................................................... 306 
E.2.1 User Interface - Air Interface ................................................................................................................ 306 
E.3 Numbering Plan............................................................................................................................ 307 
E.3.0 Numbering Plan - Introduction .............................................................................................................. 307 
E.3.1 Definition of User Number and Address............................................................................................... 308 
E.3.1.0 User Number - Introduction ............................................................................................................. 308 
E.3.1.1 Definition of Air Interface User Address......................................................................................... 308 E.3.1.2 Network Prefix (NP)........................................................................................................................ 309 E.3.1.3 Individual Number ........................................................................................................................... 309 E.3.1.3.1 Short Subscriber Identity (SSI) .................................................................................................. 309 E.3.1.3.2 Fleet Individual Identity ............................................................................................................. 309 E.3.1.3.3 Algorithm to Convert an Individual Number to an AI Address ................................................. 309 E.3.1.4 Group Number ................................................................................................................................. 310 E.3.1.4.1 Group Identity............................................................................................................................ 310 E.3.1.4.2 Fleet Group Identity ................................................................................................................... 310 E.3.1.4.3 Algorithm to Convert a Group Number to a CAI Address......................................................... 310 E.3.2 Dispatcher.............................................................................................................................................. 310 E.3.3 Short Dispatcher Dialling...................................................................................................................... 311 E.3.4 All Call Dialled Strings ......................................................................................................................... 311 E.3.4.0 All Call Dialled Strings Introduction ............................................................................................... 311 
E.3.4.1 Dialled Strings for Local All Calls .................................................................................................. 311 
E.3.4.2 Dialled Strings Used to Address all MS in a Subset of the System's Radio Sites as a Talkgroup ... 312 
E.3.4.3 Dialled Strings Used to Address all MS in the System as a Talkgroup ........................................... 312 
E.3.5 Call Modifiers ....................................................................................................................................... 312 
E.3.6 Dialled Function Strings........................................................................................................................ 313 
E.3.7 Calls to Line Connected Destinations ................................................................................................... 314 
E.3.7.1 Calls to the PABX and PSTN .......................................................................................................... 314 
E.3.7.1.0 Calls to the PABX and PSTN - Introduction ............................................................................. 314 
E.3.7.1.1 Calls to the PSTN....................................................................................................................... 314 
E.3.7.1.2 Calls to the PABX...................................................................................................................... 314 
Annex F (informative): Use of MSC and SDL diagrams.......................................................... 315 
F.1 Introduction.................................................................................................................................. 315 
F.2 Principle ....................................................................................................................................... 315 
F.3 Notation........................................................................................................................................ 315 
Annex G (normative): MS Native Addressing Plan ................................................................ 316 
G.1 Introduction.................................................................................................................................. 316 
Annex H (informative): Bibliography......................................................................................... 317 
History .................................................................................................................................................... 318 
Intellectual Property Rights 
Essential patents 
IPRs essential or potentially essential to normative deliverables may have been declared to ETSI. The declarations pertaining to these essential IPRs, if any, are publicly available for ETSI members and non-members, and can be found in ETSI SR 000 314: "Intellectual Property Rights (IPRs); Essential, or potentially Essential, IPRs notified to ETSI in respect of ETSI standards", which is available from the ETSI Secretariat. Latest updates are available on the ETSI Web server (https://ipr.etsi.org/). 
Pursuant to the ETSI Directives including the ETSI IPR Policy, no investigation regarding the essentiality of IPRs, including IPR searches, has been carried out by ETSI. No guarantee can be given as to the existence of other IPRs not referenced in ETSI SR 000 314 (or the updates on the ETSI Web server) which are, or may be, or may become, essential to the present document. 
Trademarks 
The present document may include trademarks and/or tradenames which are asserted and/or registered by their owners. ETSI claims no ownership of these except for any which are indicated as being the property of ETSI, and conveys no right to use or reproduce any trademark and/or tradename. Mention of those trademarks in the present document does not constitute an endorsement by ETSI of products, services or organizations associated with those trademarks. 
DECT, PLUGTESTS, UMTS and the ETSI logo are trademarks of ETSI registered for the benefit of its Members. 3GPP and LTE are trademarks of ETSI registered for the benefit of its Members and of the 3GPP Organizational Partners. oneM2M logo is a trademark of ETSI registered for the benefit of its Members and of the oneM2M Partners. GSM® and the GSM logo are trademarks registered and owned by the GSM Association. 
Foreword 
This Technical Specification (TS) has been produced by ETSI Technical Committee Electromagnetic compatibility and Radio spectrum Matters (ERM). 
The present document is part 4 of a multi-part deliverable covering the Technical Requirements for Digital Mobile Radio (DMR), as identified below: 
Part 1:  "DMR Air Interface (AI) protocol";  
Part 2:  "DMR voice and generic services and facilities";  
Part 3:  "DMR data protocol";  
Part 4:  "DMR trunking protocol".  

Modal verbs terminology 
In the present document "shall", "shall not", "should", "should not", "may", "need not", "will", "will not", "can" and "cannot" are to be interpreted as described in clause 3.2 of the ETSI Drafting Rules (Verbal forms for the expression of provisions). 
"must" and "must not" are NOT allowed in ETSI deliverables except when used in direct citation. 
Scope 
The present document contains technical requirements for Digital Mobile Radio (DMR) trunking systems operating in the existing licensed land mobile service frequency bands, as identified in CEPT/ERC/T/R 25-08 [i.5]. 
The present document describes the trunking services and facilities protocol of a scalable Digital Mobile Radio system, which covers three tiers of possible products: 
Tier I:  DMR equipment having an integral antenna and working in Direct Mode (unit-to-unit) under a general authorization with no individual rights operation.  
Tier II:  DMR systems operating under individual licences working in Direct Mode (unit-to-unit) or using a Base Station (BS) for repeating.  
Tier III:  DMR trunking systems under individual licences operating with a controller function that automatically regulates the communications.  
NOTE:  Tier II and Tier III products encompass both simulcast and non-simulcast systems.  

The DMR air interface complies with either ETSI EN 300 113 [i.2] and [i.3] or ETSI EN 300 390 [i.4], that have been specifically developed with the intention of being suitable for all identified product tiers. 
The DMR protocol is intended to be applicable to the land mobile service frequency bands, physical channel offset, duplex spacing, range assumptions and all other spectrum parameters without need for any change. 
2 References 

2.1 Normative references 
References are either specific (identified by date of publication and/or edition number or version number) or non-specific. For specific references, only the cited version applies. For non-specific references, the latest version of the referenced document (including any amendments) applies. 
Referenced documents which are not found to be publicly available in the expected location might be found at https://docbox.etsi.org/Reference. 
NOTE: While any hyperlinks included in this clause were valid at the time of publication, ETSI cannot guarantee their long term validity. 
The following referenced documents are necessary for the application of the present document. 
[1] Void. 
[2] Void. 
[3] Void. 
[4] Void. 
[5] ETSI TS 102 361-1: "Electromagnetic compatibility and Radio spectrum Matters (ERM); Digital Mobile Radio (DMR) Systems; Part 1: DMR Air Interface (AI) protocol". 
[6] ETSI TS 102 361-2: "Electromagnetic compatibility and Radio spectrum Matters (ERM); Digital Mobile Radio (DMR) Systems; Part 2: DMR voice and generic services and facilities". 
[7] ETSI TS 102 361-3: "Electromagnetic compatibility and Radio spectrum Matters (ERM); Digital Mobile Radio (DMR) Systems; Part 3: DMR data protocol". 
[8] IEC 61162-1: "Maritime navigation and radiocommunications equipment and systems - Digital Interfaces - Part 1: Single talker and multiple listeners". 
[9] The Unicode® Standard. 
[10]  Void.  
[11]  ISO/IEC 646:1991: "Information technology -- ISO 7-bit coded character set for information interchange".  
[12]  ISO/IEC 8859 series (1998-2001): "Information technology -- 8-bit single-byte coded graphic character sets".  
[13]  IETF RFC 2781: "UTF-16, an encoding of ISO 10646".  
[14]  ETSI TS 100 392-18-1: "Terrestrial Trunked Radio (TETRA); Voice plus Data (V+D) and Direct Mode Operation (DMO); Part 18: Air interface optimized applications; Sub-part 1: Location Information Protocol (LIP)".  


2.2 Informative references 
References are either specific (identified by date of publication and/or edition number or version number) or non-specific. For specific references, only the cited version applies. For non-specific references, the latest version of the referenced document (including any amendments) applies. 
NOTE: While any hyperlinks included in this clause were valid at the time of publication, ETSI cannot guarantee their long term validity. 
The following referenced documents are not necessary for the application of the present document but they assist the user with regard to a particular subject area. 
[i.1] ETSI TS 102 361-4 (previous versions): "Electromagnetic compatibility and Radio spectrum Matters (ERM); Digital Mobile Radio (DMR) Systems; Part 4: DMR trunking protocol". 
[i.2] ETSI EN 300 113 (V2.2.1) (12-2016): "Land Mobile Service; Radio equipment intended for the transmission of data (and/or speech) using constant or non-constant envelope modulation and having an antenna connector; Harmonised Standard covering the essential requirements of article 3.2 of the Directive 2014/53/EU". 
[i.3] ETSI EN 300 113 (V3.1.1) (06-2020): " Land Mobile Service; Radio equipment intended for the transmission of data (and/or speech) using constant or non-constant envelope modulation and having an antenna connector". 
[i.4] ETSI EN 300 390 (V2.1.1) (03-2016): "Land Mobile Service; Radio equipment intended for the transmission of data (and speech) and using an integral antenna; Harmonised Standard covering the essential requirements of article 3.2 of the Directive 2014/53/EU". 
[i.5] CEPT/ERC/T/R 25-08: "Planning criteria and coordination of frequencies of land mobile systems in the range 29.7-470 MHz". 
3 Definition of terms, symbols and abbreviations 
3.1 Terms 
For the purposes of the present document, the following terms apply: 1:1-mode: 1 payload channel mode NOTE: 1:1-mode supports one "MS to fixed end" duplex call or one simplex call with an optional inbound Reverse Channel using a two frequency BS. 2:1-mode: 2 payload channel mode NOTE: 2:1-mode supports two independent calls which may be either "MS to fixed end" duplex calls or simplex calls using a two frequency BS. 
ALLMSID: MS ID to address all MS in a system 
ambient listening: form of individual voice call that causes the called MS to transmit with the microphone mute open but without any action from the user of the called MS assigned channel: channel that has been allocated by the infrastructure to certain MSs using channel allocation 
command(s) addressed to those MSs NOTE: An assigned channel may be allocated for secondary control purposes or for a circuit mode call. asynchronous access: mode of operation whereby MS are permitted access to TS by employing the polite protocol defined in ETSI TS 102 361-2 [6] 
NOTE: In this mode MS are not required to listen to a TSCC to first determine their access rights. Base Station (BS): fixed end equipment that is used to obtain DMR services bearer service: telecommunication service providing the capability for information transfer between access points burst: elementary amount of bits within the physical channel 
NOTE 1: The burst may include a guard time at the beginning and end of the burst used for power ramp-up and ramp-down. NOTE 2: Two bursts with different length are defined for DMR. A TDMA bursts which has a length of 30 ms and a Reverse Channel burst which has a length of 10 ms. NOTE 3: For detailed burst definition see ETSI TS 102 361-1 [5], clause 4.2.1. NOTE 4: A burst represents the physical content (channel) of a timeslot. call: complete sequence of related transactions between MSs NOTE: Transactions may be one or more bursts containing specific call related information. 
Caller Line Identity (CLI): ability to view the calling parties number before answering the telephone channel: in the Time Division Multiple Access (TDMA) slot structure arrangement a channel comprises the pair of same numbered slots on the inbound and outbound duplex frequencies 
composite control channel: TSCC that may temporarily revert to a payload channel (if for instance the instantaneous traffic exceeds that which may be accommodated by the available payload channels) 
Control plane (C-plane): part of the DMR protocol stack dedicated to control and data services coverage area: geographical area within which the received signal strength from a radiating BS exceeds a specified threshold value 
dedicated control channel: TSCC that is continuously transmitted by a TS and never reverts to a payload channel De-key: act of ceasing the transmission of bursts containing information or signalling Digital Mobile Radio (DMR): physical grouping that contains all of the mobile and/or fixed end equipment that is 
used to obtain DMR services direct mode: mode of operation where MSs may communicate outside the control of a network NOTE: This is communication technique where any Mobile Station (MS) may communicate with one or more 
other Mobile Stations (MSs) without the need for any additional equipment (e.g. BS). downlink: process of transferring information in the outbound direction (TS to MS) duplex: mode of operation by which information can be transferred in both directions and where the two directions are 
independent NOTE: Duplex is also known as full duplex. 
extended address: source or destination that is not an MS address (such as a PABX extension, PSTN number or IP address) 
First In First Out (FIFO): storage type that retrieves information in the order in which it was stored fixed non-volatile storage: storage facility within an MS, the contents of which cannot be modified or added to by the operation of the MS or its user 
high-rate: packet data transmission that uses dual slot data timing In-Band-Ringing: MS alert ring tones are generated by the TS and encoded in the vocoder stream inbound: MS to BS transmission information element: subset (field) within a PDU intrinsic service: service which is inherent within a voice or data service 
NOTE: It forms an integral part of the signalling associated with that voice or data service. item: MS payload transmission from the point at which the PTT is pressed to the PTT released key: information that determines the functional output of an authentication algorithm line connected: call whereby one end of the call is connected to the radio system that does not use the DMR Air 
Interface 
NOTE: Examples may be connection to the PSTN or a PABX. local-ringing: MS alert ringing tones are generated by a ring tone generator embedded in the MS logical channel: distinct data path between logical endpoints message trunking: mode of operation that a payload channel is permanently allocated for the complete duration of the 
call, which may include several separate PTT items (several PTT activations by separate terminals) NOTE: The channel is only de-allocated if the call is (explicitly) released or if a time-out expires. 
Mobile Station (MS): physical grouping that contains all of the mobile equipment that is used to obtain DMR mobile services multi-item data: data session on a payload channel that consists of two or more single item data sessions between 
entities multi-part call set-up: call set-up procedure whereby the full source and destination address cannot be accommodated in a single CSBK signalling block NOTE: The UDT procedure is invoked to transfer the address information using UDT signalling. UDT is also invoked to transport supplementary_user data, user data and extended addressing between DMR entities. 
network personalization: configuration parameters appropriate to network configuration programmed into an MS that may be set by an external agency but not by the user of an MS non-volatile storage: read/write storage that stores information during operation of an MS that is protected from the 
effects of switching off the MS outbound: BS to MS transmission packet data: method for the transmission of information by which the information is transmitted as packets each 
containing a fragment of the total information to be transmitted PARtition (PAR): information element used to partition MSs on a TS that implements two control channels (TSCCs) payload: bits in the information field personalization: configuration parameters that may be set by an external agency but not by the user of an MS 
physical channel: TDMA burst NOTE: The DMR radio frequency channel contains two physical channels. polite protocol: "Listen Before Transmit" (LBT) protocol NOTE: This is a medium access protocol that implements a LBT function in order to ensure that the channel is 
free before transmitting. power-save-frame: sixteen timeslots (480 ms) defining a period for sleeping MS to wake privacy: secret transformation 
NOTE: Any transformation of transmitted information that is derived from a shared secret between the sender and 
receiver. Protocol Data Unit (PDU): unit of information consisting of protocol control information (signalling) and possibly user data exchanged between peer protocol layer entities 
radio frequency channel: radio frequency carrier (RF carrier) NOTE: This is a specified portion of the RF spectrum. In DMR, the RF carrier separation is 12,5 kHz. The physical channel may be a single frequency or a duplex spaced pair of frequencies. 
random access attempt: period from the initiation of the random access procedure until the MS receives a response from the BS or abandons the procedure (e.g. after sending the maximum permitted number of retries) read write storage: storage facility within the MS the contents of which may be modified by the operation of the MS. 
The stored data is lost when the MS is switched off Ready For Communications (RFC): MS state where the user has specifically indicated the readiness to communicate, 
e.g. the MS equivalent of a telephone off hook 
Received Signal Strength Indication (RSSI): root mean squared (rms) value of the signal received at the receiver antenna registration (MS view): network procedure whereby the MS asks for and the TSCC grants access to a particular MS 
NOTE: The MS is required to inform the system whenever it enters a new registration area. revive: mechanism whereby DMR facilities available to an MS that has been stunned may be restored Service Data Unit (SDU): all the data encapsulated within a PDU serving site: radio site that is currently proving service to the MS signalling: exchange of information specifically concerned with the establishment and control of connections, and with 
management, in a telecommunication network simplex: mode of working by which information can be transferred in both directions but not at the same time NOTE: Simplex is also known as half duplex. 
single item data: data session on a payload channel that consists of a single data item being sent from one entity to another entity single-part call set-up: call set-up procedure whereby the full source and destination address is accommodated in a 
single CSBK signalling block site: totality of BSs and trunk site control equipment that processes calls in one location slot: See time-slot. stun: mechanism whereby DMR facilities available to an MS user may be denied superframe: 6 continuous TDMA bursts labelled "A" to "F" 
NOTE: A superframe has a length of 360 ms and is used for voice payload only. 
Supplementary Data Transfer Service (SDTS): service to transfer supplementary data between DMR MS and MS/TS entities that is additional to the primary call being set-up 
TDMA-frame: two continuous time-slots 
time-slot: elementary time unit for allocation of a burst 
NOTE: A timeslot has a length of 30 ms. 
transmission: transfer period of bursts containing information or signalling 
NOTE: The transmission may be continuous, i.e. multiple bursts transmission without ramp-up, ramp-down, or discontinuous, i.e. single burst transmission with ramp-up and ramp-down period. 
transmission trunking: mode of operation that a payload channel is individually allocated for each call transaction (for each activation of the PTT) 
NOTE: The channel is immediately de-allocated at the end of the call transaction (subject to unavoidable protocol delays). 
Trunked Station (TS): physical grouping that contains all of the fixed end equipment in one location that is used to obtain DMR Tier III services 
Trunk Station Control Channel (TSCC): control channel transmitted by the infrastructure to control the MS population 
TS Authorization: complete procedure whereby an MS tests the System Identity code and an optional step of authentication to ascertain if it is permitted to gain access 
Unified Data Transport (UDT): universal methodology used to transport data in DMR systems 
uplink: process of transferring information in the inbound direction (MS to TS) 
user plane (U-plane): part of the DMR protocol stack dedicated to user voice services 
vocoder socket: 216 bits vocoder payload 

3.2 Symbols 
For the purposes of the present document, the following symbols apply: 
Hz absolute frequency Nibble 4 bits grouped together Octet 8 bits grouped together, also called a byte 

3.3 Abbreviations 
For the purposes of the present document, the following abbreviations apply: 
ACK ACKnowledgment ACKD ACKnowledgement outbound ACKU ACKnowledgement inbound AD Appended Data AI Air Interface ALS Ambient Listening Service AT Access Type BC_AP Broadcast Absolute Parameters BCD Binary Coded Decimal BER Bit Error Rate BMP Basic Multilingual Plane BS Base Station 
NOTE: A reference designating a fixed end device. 
CACH  Common Announcement CHannel  
CAI  Call User Address Identity  
CC  Colour Code  
CCITT  Comité Consultatif International Téléphonique et Télégraphique  
CCL  Call Control Layer  
CG  Channel Grant  
CG_AP  Channel Grant Absolute Parameters  
CH  CHannel  
CLI  Caller Line Identity  
COG  Course Over Ground  
C-plane  Control-plane  
CRC  Cyclic Redundancy Checksum for data error detection  
CSBK  Control Signalling BlocK  
CSBKO  CSBK Opcode  
DGNA  Dynamic Group Numbering Assignment  
DGNAHD  Dynamic Group Numbering Assignment Header Outbound  
DGNAI  Dynamic Group Number Assignment  
DISCON  DISCONnect  
DLL  Data Link Layer  
DMR  Digital Mobile Radio  
DMRLA  DMR Location Area  
DOP  Dilution Of Precision  
EDEG  Longitude Degrees  
EMB  Embedded Signalling Field  
EMINF  Longitude Fractions of minutes  
EN_PTT  Enable_Press To Talk  
EW  East West  
FEC  Forward Error Correction  
FGN  Fleet Group Number  
FID  Feature set ID  
FIFO  First In First Out  
FIN  Fleet Individual Number  
FLCO  Full Link Control Opcode  
FOACSU  Full Off Air Call Set-Up  
GN  Group Number  
GPI  Group Identity  
GPS  Global Positioning System  
ID  IDentifier  
IE  Information Element  
IEC  International Electrotechnical Commission  
IETF  Internet Engineering Task Force  
IG  Individual/talkGroup flag  
IN  Individual Number  
IP  Internet Protocol  
IPDI  International Portable DAM Identity  
IPI  Internet Protocol Identity  
ISO  International Organization for Standardization  
LB  Last Block  
LBT  Listen Before Transmit  
LC  Link Control  
LINEI  Line Identity  
LIP  Location Information Protocol  
LLID  Logical Link IDentifier  
MBC  Multiple Block Control packets  
MFID  Manufacturer's FID  
MMI  Man Machine Interface  
MS  Mobile Station  

NOTE: A reference designating a mobile or portable radio. 
MSC Message Sequence Chart MSI Mobile Station Identity NOTE: Where a network provides a service. 
MSID  Mobile Station IDentifier  
MV_AP  Move Absolute Parameters  
NACKD  Negative ACKnowledgement inbound  
NACKU  Negative ACKnowledgement outbound  
NAI  Network Area Identity  
NDEG  Latitude Degrees  
NET  NETwork  
NMEA  National Maritime Electronic Association  
NMINF  Latitude Fractions of minutes  
NP  Number Prefix  
NS  North South  
NW  Wait Number  
OACSU  Off Air Call Set-Up  
OPCODE  Operation CODE  
PABX  Private Automatic Branch eXchange  
PABXDI  Gateway address identifier for services to the PABX using payload offset timing  
PABXI  Private Automatic Branch eXchange Identity  
PAR  PARtition  
PATCS  Press And Talk Call Setup  
PC  Payload Contents  
PDU  Protocol Data Unit  
PF  Protect Flag  
PL  Physical Layer  
PN  Pad Nibble  
PPT  Push To Talk  
PS_RQ  Power Save_ReQuested  
PSN  Physical Serial Number  
PSTN  Public Switched Telephone Network  
PSTNDI  Gateway address identifier for services to the PSTN using payload offset timing  
PSTNI  Public Switched Telephone Network Identity  
PTT  Push To Talk  
QACK  Queue ACKnowledgement  
QACKD  Queue ACKnowledgement outbound  
RC  Reverse Channel  
RD  Response Delay  
RF  Radio Frequency  
RFC  Ready For Communications  
RQ  ReQuest  
RSSI  Received Signal Strength Indication  
SAP  Service Access Point  

SARQ Selective Automatic Repeat reQuest SDL Specification and Description Language SDM UDT Short Data Message SDMI UDT Short Data Message Identity SDU Service Data Unit SEP SEParation SF Standard Feature SFID Standard FID SGI Short Group Identity SIMI Single Item/Multi Item data SIP Session Initiation Protocol SLC Short Link Control SLCO Short LC Opcode SSI Short Subscriber Identity STDS Supplementary Data Transfer Service SV SerVice SYNC SYNChronization SYS SYStem TC Trunk Channel 
TDD  Time Division Duplex  
TDMA  Time Division Multiple Access  
TG  Talk Group  
TS  Trunked Station  
TSCC  Trunk Station Control Channel  
TSCCAS  Trunk Station Control Channel Alternate Slot  
TSI  Trunking Station Identifier  
UAB  UDT Appended Blocks  
UDP  User Datagram Protocol  
UDT  Unified Data Transport  
UDTHD  Unified Data Transport Header outbound  
UDTHU  Unified Data Transport Header inbound  
Unicode  16 bit character UTF-16BE encoding  
U-plane  User-plane  
USBD  Unified Single Block Data  
UTC  Universal Time Coordinated  
VN_AP  Vote Now Absolute Parameters  
WACK  Wait ACKnowledgement  
WACKD  Wait ACKnowledgement outbound  
WD  WithDrawn  

4 Overview 
4.0 Overview introduction 
The present document describes a Digital Mobile Radio (DMR) protocol for Tier III trunked mobile radio systems that employ a Time Division Multiple Access (TDMA) technology with a 2-slot TDMA solution and RF carrier bandwidth of 12,5 kHz. 
Radio equipments (fixed, mobile or portable), which conform to the present document shall be interoperable with equipment from other manufacturers. Radio equipment of the present document shall also comply with ETSI TS 102 361-1 [5]. The payload voice channel procedures specified in clause 6.6.2 closely follow the procedures specified in ETSI TS 102 361-2 [6], but additional PDUs are prescribed for Tier III operation for channel protection and cleardown. Similarly the packet data is transported on a payload channel described in clause 6.6.2.6.1 follow the procedure specified in ETSI TS 102 361-3 [7]. Where differences exist those differences are stated in the payload channel clauses of the present document. 
Slot formats, field definitions and timing are defined for MS/BS (TS/TSCC) control signalling. The standard can be used to implement a wide variety of systems, from small systems with only a few physical radio channels (even single physical radio channel systems), through to large networks, which may be formed by the interconnection of BS radio sites. 
A description of the TDMA structure is provided followed by the basic slot formats and bit definitions appropriate to the trunking protocol. Where procedures are common to the Service and Facilities defined in ETSI TS 102 361-2 [6] and ETSI TS 102 361-3 [7], only the differences are described in the present document. 
The present document does not provide the specification or operational detail for system implementation that include but are not limited to network management, vocoder, security, data, subsystems interfaces and data between private and public switched telephone networks. It describes only the appropriate access requirements compatible with the Air Interface. 
The protocol offers a broad range of user facilities and system options. However, it is not necessary to implement any or all of the facilities available; an appropriate subset of the protocol could be implemented, according to the user requirements. Also, there is scope for customization for special requirements, and provision has been made for further standardized facilities to be added to the protocol in the future. 
The present document defines only the over-air signalling and imposes only minimum constraints on system design. 
Trunked radio systems are characterized by regulating channel access. A logical channel is assigned as a control channel (TSCC). The TSCC has an Inbound path for transmissions from MSs (inbound and outbound path for transmissions from the Trunked Station (TS) to MSs (outbound channel)). Control channel packets generated by a Trunk Station Control Channel (TSCC) transmit on the outbound path that all MSs listen to when not involved in a call. MSs request access to the system by random access. The system resources are then granted by the Trunk Station Control Channel (TSCC). This trunking protocol is designed to minimize the signalling required to provide MSs with a particular service in order to provide the greatest possible throughput. 
Trunked radio systems may be characterized by the following possible configurations: 
a) 
Dedicated Control Channel: 

-A Trunk Station Control Channel (TSCC) is transmitted continuously. This channel occupies one DMR TDMA channel. MS access is strictly controlled and access is by invitation only. One TSCC can support a large number of payload channels. There are a number of Tier III services (such as UDT Short Data messaging) that only utilize the TSCC. This mode of operation yields the highest performance and throughput. 

b) 
Composite Control Channel: 

-A Trunk Station Control Channel (TSCC) may revert to a payload channel if a payload services is requested and no other payload channels are available. When the payload call is completed, the channel returns to its control channel function. The ability to have composite control channels is of benefit for TS with a very small number of physical radio channels. When the TSCC reverts to a payload function. MS who remain idle lose the control channel and cannot access the system and its services until the control channel returns. Thus the throughput and performance shall be assessed and balanced with the benefits of the additional temporary payload channel. The present document does not specify if a TSCC shall continuously transmit slots inviting access. 

c) 
"Time Share" Control Channel: 

-The term "time-shared control channel" refers to a control channel where multiple TS (whether co-sited or multi-sited) share one physical radio channel for control purposes by dividing the use of the frequency in time. (not to be confused by DMR TDMA). Each TS transmits a burst of control channel activity in turn. This mode of operation is complicated in DMR systems because each physical channel is able to support two independent TDMA logical channels. The present document does not attempt to solve the difficulty. ETSI-DMR does not support time-share control channels. 

d) 
Asynchronous Access: 


-In some radio spectrum, independent users/agencies share frequencies and national administrations mandate that when not transporting payload, the TS shall de-key and yield use of the channel(s) to the co-channel users (i.e. by default, the equipment is de-keyed). Also, there can be no interconnection between the independent users/agencies because, they are independent and may not even be co-located at a site (independent users/agencies may not wish to coordinate use of the channel). Additionally, some co-channel users may just be conventional talk-around users, in which case there is no fixed end equipment to coordinate. What may be practical in this scenario is to trade-off (or sacrifice) control channel capacity/performance for the ability to support trunking. The present document provides the facility for MS to activate a physical TSCC channel whereupon a short burst will regulate and invite access. 

4.1 Protocol Architecture 
4.1.0 Protocol Architecture -Introduction 
The purpose of this clause is to provide a model where the different functions and processes are identified and allocated to different layers in the DMR protocol stack. 
The protocol stack in this clause and all other related clauses describe and specify the interfaces, but these stacks do not imply or restrict any implementation. 
The DMR protocol architecture that is defined herein follows the generic layered structure, which is accepted for reference description and specification of layered communication architectures. 
The DMR standard defines the protocols for the following three-layered model as illustrated in figure 4.1. 
The base of the protocol stack is the Physical Layer (PL), which is the layer 1. 
The Data Link Layer (DLL), which is the layer 2, shall handle sharing of the medium by a number of users. At the DLL, the protocol stack shall be divided vertically into two parts, the User plane (U-plane), for transporting information without addressing capability (e.g. voice or data stream), and the Control plane (C-plane) for signalling with addressing capability, as illustrated by figure 4.1. 
The Call Control Layer (CCL), which is layer 3, lies in the C-plane and is responsible for control of the call (addressing, facilities), provides the services supported by DMR, and supports the Data Service. U-plane access at layer 2 (DLL) supports voice and packet data service, which is available in DMR. The Control Layer and the facilities and services offered by Tier III DMR are described in the present document. 
C Plane U Plane 


4.1.1 Air Interface Physical Layer (layer 1) 
The Air Interface layer 1 shall be the physical interface. It shall deal with the physical burst, composed of bits, which is to be sent and/or received. The Physical Layer is described in part 1 of this multi-part deliverable, see ETSI TS 102 361-1 [5]. 
The Air Interface layer 1 contains the following functions: 
 
modulation and demodulation; 

 
transmitter and receiver switching; 

 
RF characteristics; 

 
bits and symbol definition; 

 
frequency and symbol synchronization; 

 
burst building. 



4.1.2 Air Interface Data Link Layer (layer 2) 
The Air Interface layer 2 handles logical connections and hides the physical medium from the upper layers. The Data Link Layer is described in clauses 5 to 9 of ETSI TS 102 361-1 [5]. Layer 2 services are described in the present document if those services are not already described in ETSI TS 102 361-1 [5]. 
The main functions are as follows: 
 
channel coding (FEC, CRC); 

 
interleaving, de-interleaving and bit ordering; 

 
service answer response and retry mechanism; 

 
media access control and channel management; 

 
framing, superframe building and synchronization; 

 
burst and parameter definition; 

 
link addressing (source and/or destination); 

 
interfacing of voice applications (vocoder data) with the PL; 

 
data bearer services; 

 
exchanging signalling and/or user data with the CCL; 

 
authentication by challenge and response. 



4.1.3 Air Interface Call Control Layer (layer 3) 
Air Interface layer 3 (CCL) is applicable only to the C-plane, and shall be an entity for the services and facilities supported by DMR on top of the layer 2 functionality. The Call Control Layer for trunking described in the present document and may have embedded intrinsic services associated to it. 
The CCL provides the following functions: 
 
BS/TS/TSCC activation/deactivation (for asynchronous access mode); 

 
establishing, maintaining and terminating of calls; 

 
individual or talkgroup call transmission and reception; 

 
destination addressing (DMR IDs or gateways as appropriate); 

 
support of intrinsic services (emergency signalling, pre-emption, late entry, etc.); 

 
data call control; 

 
announcement signalling; 

 
management of available resources: -management of a control channel resource by a random access protocol; -queuing for payload resource; 

 
individual or talkgroup call set-up via a dedicated signalling channel; 

 
MS location information by registration; 

 
MS power save; 

 
broadcast of system parameters to radio subscriber terminals. 




4.2 Services and Facilities 
A Tier III system is able to support either a wide range or narrow range of Services and Facilities. Users who select a service specified in the present document that is not supported by a particular system shall receive an unambiguous refusal of service response. 
The services and facilities defined in the present document may be used for Tier III products and is called the "default feature set" which is allocated to the "Standards Feature ID (SFID)". There is a possibility in the DMR standard which allows manufacturers to define and implement "private" feature sets which contain additional "private" services and facilities, which may possibly not be understood by products not supporting this "private" feature set. In addition, some "Standards Feature ID" PDUs may contain optional manufacturer specific information elements. 
The "standard feature set" contains the following services and facilities: 
a) 
Generic services: 

1) MS Access control and management using a control channel and a random access protocol. 
2) MS Location within the system radio coverage by radio site identification and registration. 
3) Control Channel hunting. 
4) System acquisition authorization. 
5) A Unified Data Transport mechanism to support the UDT Short Data service, the supplementary_user data service and extended_addresses through gateways. 
6) Broadcast of system parameters to MS. 
7) MS Authentication. 
8) Feature Not Supported. 
9) MS dynamic power control. 
10) MS Pre-emption control. 

b) 
Primary voice services: 

1) Talkgroup call service. 
2) Individual call service. 

c) 
Secondary voice services: 

1) All_MS call service. 
2) Broadcast voice call service. 

d) 
Primary Data Services: 

1) UDT Short Data Service. 
2) Packet Data Service. 

e) 
Status Service: 

1) Status Delivery Service. 
2) Status Polling Service. 

f) 
Supplementary Service: 


1)  Supplementary_user data transfer service. (additional data sent as part of the primary call set-up).  
2)  MS stun and revive.  
3)  MS Kill.  

4)  Answer Call Service.  
5)  Cancel Call Service.  
6)  Talkgroup Subscription/Attachment.  

The description of the services and features use diagrams where necessary to illustrate and highlight specific points both on the control channel and payload channel. 

4.3 Device Addresses 
4.3.1 MS Addresses 
Tier I and Tier II MSs shall be personalized with at least one individual or one talkgroup identity (ETSI TS 102 361-2 [6], clause C.2.2). Tier III MSs shall be personalized with at least one individual identity and may be a member of one or more talkgroups. 
NOTE: MS individual addresses and talkgroups occupy separate address space (see ETSI TS 102 361-1 [5], Annex A). Thus it is possible that a talkgroup may have the same numeric address value as an individual MS numeric address value. There is no ambiguity because the individual and talkgroup call services are separately identified in all PDUs where a particular address information element may carry either an MS ID or talkgroup. 

4.3.2 Services and Gateway Addresses 
The Tier III protocol defines additional addresses to identify Services and Gateways in PDUs exchanged between MS and TS (ETSI TS 102 361-1 [5], Annex A). The addresses prescribed for Tier III systems are defined in clause A.4. 


4.4 Conventional/Trunked Systems 
Conventional Tier I and Tier II DMR systems permit MS to control their own channel access (subject to any polite protocol). 
Many of the conventional operations such as selection of the physical radio channel is automated by this protocol: 
a) 
A single site trunked network is characterized by multiple MS communicating with a single location Trunked Station (TS). 

b) 
A wide area trunked network is characterized by multiple MS communicating with a multiplicity of Trunked Stations (TS). 


A TS shall be equipped with one or more physical channels. Each TS may be configured with one or two control channels (TSCCs). Where two TSCCs are configured, the TSCCs may be arranged in one physical channel or separate physical channels. The Tier III protocol can separate the population of MS fleets between multiple TSCCs so that there is effective load sharing. 
The physical channel configured as the Trunk Station Control Channel (TSCC) may be configured to manage the other logical channel as the Trunk Station Control Channel Alternate Slot (TSCCAS) to support high capacity polling. 
For a fully regulated system, at least one channel shall be configured as a Trunk Station Control Channel (TSCC) for MS management, signalling, and broadcast of system parameters. MS access is strictly controlled on the TSCC. 
An unregulated asynchronous system shall permit MS access subject to polite rules. 

4.5 MS Location 
As MS travel around a wide area network they may be within range of a number of different Trunked Stations (TSs). Registration is a method by which the system can determine which radio site or group of radio sites MSs are located within a wide area network. This information avoids searching for MSs throughout the whole network, consequently reducing call set-up time and control channel loading. 
Registration may also be employed by a Single Site system to determine when MSs are active and able to receive calls. 
A secondary application of the registration process is that it enables power save parameters to be passed between MS and the system. 
If an MS is switched off or is subjected to a user selected change of network, the MS may attempt to de-register. The MS makes a de-registration random access to the TSCC on a "best endeavours" basis. If the procedure is not completed within a short time window (T_dereg) the process is abandoned. 

4.6 Tier III Services 
4.6.0 Tier III Services - Introduction 
A DMR TS can allocate resources for a range of services including individual call, talkgroup call, line connected call, and a selection of data services. 
Calls to talkgroups may be restricted by the Network to a single radio site or connected to a multiplicity of radio sites. The particular sites involved in the call may be defined by the Network using manual configuration or automatic selection. 
Supplementary data may be sent between MS and the network during the call set-up phase using the Supplementary Data Transfer Service to poll for, or deliver additional information using a Unified Data Transport method. Examples include: 
a) 
the inbound transport of extended_addressing dialling digits for calls to the PSTN, PABX extensions or dotted addresses for IP gateways; 

b) 
the transport of MS location information using data collected from IEC 61162-1 [8] compatible devices; 

c) 
the transport of any supplementary_user data; 

d) 
the outbound transport of CLI information for calls from PSTN, PABX LINE and dispatcher gateways to the called MS(s); 

e) 
the outbound transport of an IP address to called MS. 



4.6.1 MS initiating calls 
An MS may initiate a call to any of the following called parties: 
a) 
an individual MS; 

b) 
a line-connected terminal device including a PABX extension or PSTN destination; 

c) 
a talkgroup, or all MSs in the system. 


The system shall send a refusal of service response to any calls that request inappropriate Services and Facilities for a particular destination address. Some services may be addressed to the TS itself. During the call set-up phase, the TSCC may pass information back to the caller, to indicate the progress of the call. For 
example, it shall indicate the reason for any delays in call set-up or the reason for a call failure. 

4.6.2 MS Receiving Calls 
4.6.2.0 MS Receiving Calls - Introduction 
An MS may receive calls from an MS or line connected terminal device (such a device may be a PABX extension or the PSTN). 
In addition, some PDUs may originate from the TS itself. 
An MS shall send an acknowledgement rejecting any individual call that request inappropriate or unsupported Services and Facilities. 
For a call from an MS, the calling address shall be supplied to the called unit. For a call from certain line connected gateways such as a PABX extension or from the PSTN, the protocol enables Source Address information to be carried to the MS. (An example is CLI information from a PABX extension or the PSTN.) 
Incoming calls may be addressed to the MS individually or to a talkgroup. 
A called MS may transmit different types of acknowledgements to a calling MS unit, depending on whether a user answers a call, whether a call enters a call stack or whether a voice message should be left. The acknowledgements can be used by a calling radio to provide call progress indications, such as informative text and/or alerts, to the user of the calling MS. 

4.6.2.1 MS Receiving Individual Calls 
4.6.2.1.0 MS Receiving Individual Calls - Introduction 
An MS may refuse to accept all incoming calls, for example by means of a "will call-back" control, or incoming calls could be refused selectively, depending on the source of the call. If an MS user does not wish to proceed with an incoming call immediately, the user can indicate that the call will be returned. If an MS user does not wish to receive any incoming calls, the calls may be rejected completely. 
For voice calls, a system may employ two strategies as illustrated in clauses 4.6.2.1.1 and 4.6.2.1.2. 

4.6.2.1.1 Off Air Call Set-Up (OACSU) 
The TS determines when the traffic channel is to be assigned. The assignment may be performed at any time after call establishment has been initiated in the TS. A traffic channel is allocated for the call whether or not the called party answers. 

4.6.2.1.2 Full Off Air Call Set-Up (FOACSU) 
The traffic channel is only assigned when the called party user has specifically answered the call. When the called party has answered, the network initiates the traffic channel assignment in order to allocate a traffic channel to the MS. 


4.6.2.2 MS Receiving Calls to Talkgroups 
An MS may be a member of an arbitrary number of talkgroups. 
An MS may be configured such that it may selectively accept or ignore a call to one if its talkgroup memberships An MS may also be configured to ignore a call to one of its talkgroup memberships if it is waiting for an individual call. 

4.6.2.3 MS Receiving Calls to All_MS 
A number of IDs are reserved for the purpose of addressing every MS on a radio site, radio sites or system. There are three identities defined, ALLMSID, ALLMSIDL, or ALLMSIDZ. Calls to these identities are treated by the present document as broadcast calls to a talkgroup. It is manufacturer specific that the TSCC sends and the MS accepts calls to these identities. 



4.7 Physical Link Organization 
4.7.0 Physical Link Organization -Introduction 
This protocol makes use of the physical layer 1 prescribed in ETSI TS 102 361-1 [5] DMR Air Interface protocol. 

4.7.1 Radio Frequency Allocation 
The Tier III protocol supports a number of different physical channel strategies to accommodate operation in radio channels that may be dedicated, in blocks or re-farmed. 
Physical radio channels may be specified by either: 
a) 
a logical channel plan whereby a transmitter and receiver frequency is mapped to a logical channel number. The Tier III protocol permits up to 4 094 such logical/physical relationships; and/or 

b) 
a mechanism whereby the absolute transmitter and receiver frequencies are specified in the PDUs that are passed between BS and MS at the air interface. 



4.7.2 Colour Code (CC) 
A Colour Code (CC) is present in the Embedded Signalling Field (EMB) and general data burst to provide a simple means of distinguishing overlapping radio sites in order to detect co-channel interference. In Tier III systems MS shall be polite to own Colour Code. 
Tier III systems assign the physical channels automatically therefore the MS and TS shall know and be in agreement which Colour Code is allocated for each physical channel. The strategies that may be employed in Tier III system are specified in clause 6.2.1.3. 
When active on a payload channel, the TSCC shall discard any PDUs inbound that have an incorrect Colour Code. 


4.8 DMR TDMA Burst and Channel Structure 
The described solution is based on the 2-slot TDMA structure described in ETSI TS 102 361-1 [5], clause 4.2. 
The logical channels are separated into two categories: 
 
a control channel carrying signalling; and 

 
payload channels carrying speech or data information. 


Generally MSs operate with the timing (see ETSI TS 102 361-1 [5], clause 5.1.1) announced by the TSCC via the C_ALOHA PDU. Full duplex is possible for calls to line connected terminals using Offset TDMA timing (see ETSI TS 102 361-1 [5], clause 5.1.1.2) by allowing an MS to transmit in one timeslot and receive the fixed end transmission on the alternate timeslot. MS that are directed to a physical channel using offset timing shall be notified by an identifier transmitted to the MS(s) during the call set-up. 
A generalized diagram of exchanges between the TSCC and MS is illustrated in figure 4.2 where the slots for the two TDMA physical channels are illustrated. 
aligned timing TSCC 


CACH AT bit=busy 
BC 
TSCC Outbound 
MS Inbound 
AD 

1 
2 

1212121 
2 

121 
2 
1 
2 1 21 212 
1 
21 2 




MS Inbound 
AD 
Figure 4.2: Key Points for a Tier III TSCC 
Key points particular to Tier III trunking illustrated by figure 4.2 include the following: 
 
While the TSCC is keyed up, the two outbound logical channels are continuously transmitted, even if there is no information to send. If either of the logical channels is configured as a control channel, and that control channel is idle, information is constantly transmitted to manage MS access and broadcast parameters to MSs. 

 
The channel 1 and 2 bursts in the inbound channel are offset 30 ms in time from the channel 1 and 2 bursts in the outbound channel. This number scheme allows a single channel identifier field in the outbound CACH to use the same channel number when referring to the inbound and outbound channels. 

 
Differing SYNC patterns are used in voice bursts and data bursts to allow the receiver to differentiate between them. Different SYNC patterns are used for inbound and outbound channels to help the receiver reject co-channel interference. 

 
The TSCC shall broadcast the used timing. Two independent control channels or one control channel + one payload channel may be configured. A TSCC may temporarily revert to a payload channel. Aligned timing operations allows for shorter call set up times. Offset timing operations allows for one MS to MS full duplex call on a single carrier or full duplex Line Connected calls in a single slot. 

 
Referring to figure 4.2, a random access burst on the inbound channel labelled "A" shall be acknowledged by a PDU on the outbound channel. This acknowledgement may be transmitted in slot "B", although the protocol is able to postpone the acknowledgement to allow for computational or network delays. 

 
For an MS response to a PDU received from the TSCC, the MS shall transmit its PDU in the timeslot but one following the end of the TSCC PDU. I.e. a PDU from the TSCC in slot "C" that requires a response from an MS shall be acknowledged on the TSCC in slot "D". 

 
The MS response at "D" cannot collide with another random access burst because the slot is protected by setting the AT bit is the CACH to busy. MS shall test this bit before making a random access attempt. Random access is not permitted if AT = 1. 

 
The outbound channel defines a CACH channel between TDMA bursts that manages the framing and channel access of the logical channels and provides a low speed channel for signalling. CACH framing bits are defined, allowing the low speed channel to support a range of PDU sizes. 



4.9 TS Structure 
4.9.0 Introduction to the TS Structure 
These clauses outline some key aspects of the Tier III protocol by reference to examples. The Tier III protocol manages MS access and Service provision by means of a TSCC (control channel). MSs request Service by means of random access. The Tier III protocol provides a wide variety of configurations to match the requirements of dedicated and shared radio spectrum. The TSCC outbound channel may be: 
a) 
continuously transmitting slots that invite MS access, broadcast of system parameters to, and managing the resources that are available to MS; 

b) 
transmitting information as a) but reverting to a payload channel when other payload channels are not available; 

c) 
de-keyed until activated by an MS burst when used in shared spectrum. 



4.9.1 An Individual Voice Call Example 
4.9.1.1 Individual Call using OACSU 
Two MS, MS(A) and MS(B) are active listening to the TSCC. MS(A) requests a voice service to MS(B). Before a payload channel is assigned on the TSCC, the system checks that the MS(B) is in radio contact and wishes to accept the call. If MS(B) sends a positive acknowledgement response (indicating that MS(B) will accept the call), the system allocates a payload channel for the call. 

-Idle Messages 

-TSCC Messages 

-Payload Channel 
TDMA Ch 1 
TDMA Ch 2 
TDMA Ch 1 

21 21 21 21 21 21 21 2 
1 
TSCC Outbound 


21 21 21 21 21 21 21 21 
TSCC Outbound 


Referring to figure 4.3, some key aspects are described: 
a) 
TDMA Channel 2 is assigned as a TSCC. TDMA Channel 1 is idle. 

b) 
When a TSCC has no calls in progress, it will transmit system management or system broadcast PDUs to all MSs listening to the TSCC. MSs may listen to TDMA Channel 1 for the purposes of error rate measurement but they shall not make use of any information from those PDUs. 

c) 
MS(A) makes a Service Request at point "A" using aligned timing (see ETSI TS 102 361-1 [5], clause 5.1.1.1). 

d) 
The TSCC sends an AHOY PDU (point "B") addressed to MS(B) that requires an acknowledgement response. 

e) 
MS(B) responds with an acknowledgement at point "C". 

f) 
At point "D", the TSCC sends a Channel Grant PDU addressed to MS(A) and MS(B). A logical channel information element in the Channel Grant PDU directs the MSs to a particular physical and logical channel. The Channel Grant PDU is not acknowledged so the PDU is repeated for reliability at "E". A TSCC may transmit the repeated Channel Grant PDUs consecutively, or wait for a few slots before repeating the Channel Grant. 

g) 
In this particular example the TSCC has chosen to allocate the logical Channel 1 of this physical channel for the call. Logical Channel 1 therefore changes from idle to payload immediately after the TSCC transmits the first Channel Grant PDU. 

h) 
Since each TDMA burst takes 30 ms, the best case performance for a Tier III individual call set-up is 210 ms. 



4.9.1.2 Individual Call using FOACSU 
Two MS, MS(A) and MS(B) are active listening to the TSCC. MS(A) requests a voice service to MS(B). The TSCC checks that the MS(B) is in radio contact and wishes to accept the call. If MS(B) sends a positive acknowledgement, MS(B) alerts the user. Only when MS(B) answers the call does the system allocate a payload channel for the call. 

Referring to figure 4.4, some key aspects are described: 
a) 
TDMA Channel 2 is assigned as a TSCC. TDMA Channel 1 is idle. 

b) 
MS(A) makes a Service Request at point "A" using the announced TSCC timing (see ETSI TS 102 361-1 [5], clause 5.1.1). 

c) 
The TSCC sends an AHOY PDU (point "B") addressed to MS(B) that requires an acknowledgement response. 

d) 
MS(B) responds with an acknowledgement at point "C". MS(B) alerts the user. 

e) 
The TSCC sends a mirrored acknowledgement PDU (point "D") back to MS(A) to indicate to MS(A) that MS(B) is alerting. 

f) 
The user actively answers the call at point "D" causing MS(B) to send a Answered Request to the TSCC, the TSCC sends a Channel Grant PDU addressed to MS(A) and MS(B). the alert generated at point "C" is cancelled. 

g) 
A logical channel information element in the Channel Grant PDU directs the MSs to a particular physical and logical channel. The Channel Grant PDU is not acknowledged so the PDU is repeated for reliability at "F". A TSCC may transmit the repeated Channel Grant PDUs consecutively, or wait for a few slots before repeating the Channel Grant. 


In this particular example the TSCC chooses a separate physical radio channel for the call. The particular physical and logical TDMA channel information elements are carried in the Channel Grant PDUs. The Channel Grant PDUs are repeated for reliability. 


4.9.2 A Talkgroup Call Example 
For a talkgroup call, the intermediate step of checking if MS(B) is in radio contact is not required so the best case performance for a Tier III talkgroup call is 90 ms. 

-Idle Messages 

-TSCC Messages 

-Payload Channel 
TDMA Ch 1 
TDMA Ch 2 
TDMA Ch 1 
aligned timing TSCC 

2 12121212121 


21 2 12 1 2 12 1 2 1 
Payload Channel 

offset timing TSCC 

2 12121212121 


21 2 12 1 2 12 1 2 1 
Payload Channel 

Figure 4.5: Talkgroup Call Set-up Example 
Figure 4.5 illustrates a call set-up for a talkgroup. MS(B) is a party to that talkgroup. For a talkgroup call, the intermediate step of checking if MS(B) is in radio contact is not required so the best case performance for a Tier III talkgroup call set-up is 90 ms on an aligned timing TSCC and 120 ms on an offset timing TSCC. 
In this particular example the TSCC chooses a separate physical radio channel for the call. The particular physical and logical TDMA channel information elements are carried in the Channel Grant PDUs. The Channel Grant PDUs are repeated for reliability. 
Key protocol aspects are: 
a) 
When both payload channels are idle, no radio transmission is necessary. 

b) 
When at least one payload channel is assigned the transmitter is activated and one logical channel carries the payload for the call. The other logical channel remains idle. 

c) 
Although in this example the clocks and bursts in the payload channel are time aligned with the TSCC, there is no requirement to do so. 




4.10 Network Architecture 
4.10.0 Network Architecture -Introduction 
The DMR trunked protocol is defined in terms of the Services and Facilities. It is defined to ensure interoperability with DMR MSs. The Tier III structure relies on the Air Interface ETSI TS 102 361-1 [5]. 
The gateways to Public Switched Telecommunication Network (PSTN), and other non Air-Interface gateways are not defined within the present document. They are illustrated only for informative purposes. 
A Trunked Station (TS) consists of one or more physical radio channels (BS), each physical channel supporting two TDMA logical channels. Either or both logical channels of a BS may carry a TSCC. All of the clocks of the BS making up a TS may be derived from a common reference standard so that the framing structure is synchronized across all BS within a TS. 

4.10.1 Network Functions 
4.10.1.0 Network Functions - Introduction 
In addition to the normal call handling functions required to provide the telecommunication services identified above, a number of standard network procedures are needed for the efficient operation of the system and to provide an acceptable grade of service to the users. 

4.10.1.1 Establishing Service 
A notable feature of a Tier III trunked system is that physical channel acquisition is performed automatically when an MS is powered up. The user does not need to manually select physical channels. The relevant physical channel is stored in the MS or a search is performed to find an applicable TSCC. If the MS is directed to a payload physical channel on the TSCC, the applicable payload channel is transmitted to the MS by a Channel Grant PDU that specifies the physical and logical channel. 

4.10.1.2 Network Identifier 
All TS carry a network and radio site identifier. This identifier, the System Identity Code (C_SYScode) is transmitted frequently by a TSCC. The C_SYScode is carried in CSBK signalling packets and also embedded in the CACH. The C_SYScode is composed of MODEL, NET, SITE and PAR information elements. Within a particular network, the MODEL and NET remains a constant. Each TS is designated a different SITE parameter. MSs use the MODEL and NET to determine if they are authorized to attempt to become active on that network. 


4.10.2 MS Location by Registration 
The coverage area of a Tier III trunked network is divided into a number of Location Areas (DMRLAs). A DMRLA corresponds to a single radio site or a small number of radio sites structured as a DMRLAs. 
Implicit registration is the network functionality that registers the location of the MS without need for an explicit registration PDU. Implicit registration can be attained by any system PDU that conveys the MS individual identity, 
e.g. call request, service answer response. 
It is possible that due to adverse conditions the registration information held by the network and that held by the MS may not be the same. To restore and maintain the registration records: 
a) 
The system shall update its registration records from MS random access call requests (the network may however deny the service requested by the MS for other reasons). 

b) 
Responses from MS (resulting from a radio check for example) implicitly update the system registration records. 




4.11 Trunking Methods 
4.11.0 Trunking Methods - Introduction 
DMR Tier III systems are able to implement the "message trunking", "transmission trunking" or "quasi-transmission" trunked methods. 

4.11.1 Message Trunking 
Message trunking is a payload channel allocation strategy in which the same payload channel is continuously allocated for the duration of a call, which may include several separate call items or transactions (i.e. PTT activation by separate terminals). The payload channel is only de-allocated when the call is explicitly cleared by the call owner in the case of a talkgroup call, either party hanging up during an individual call or if an activity timer expires. The BS may also clear the call at any time but the BS shall be confident that all parties in the call hear the PDU to clear down the call. 
Once a payload channel has been allocated the users will experience the minimum delay for each transmission item since there is no queuing for the allocation of channel resources. The absence of any perceptible delay when the PTT is activated ensures that a conversation can proceed without interruption. This strategy is likely to minimize the processing and signalling overheads in the network infrastructure. 
The disadvantage of this strategy is that the channel remains allocated even when there may be significant gaps in the PTT items and this may result in less efficient use of the available channel capacity. 

4.11.2 Transmission Trunking 
A payload channel is allocated for each PTT item. When the user releases the PTT, the payload channel is de-allocated down and the MS returns to the control channel. The following PTT is allocated a new payload channel. 
Users may experience a delay for each transmission item particularly when the system is busy because a payload channel may not be immediately available. In this case the system shall queue the MS until a payload resource becomes available. An indication may be provided to the user that the payload channel is allocated for the speech item. 

4.11.3 Quasi-Transmission Trunking 
A payload channel is allocated to the called and calling parties at the start of the call. When the user releases the PTT, a short hang-timer holds the payload channel to permit the other party to speak. If the hang-timer expires the payload channel is de-allocated and the next PTT item sets up a new call. This method overcomes the delay in transmission trunking but users experience different effects depending on the possible expiry of the hang-timer. 
5 Trunking Control Channel Formats 




5.0 Trunking Control Channel Formats - Introduction 
A TS shall employ a minimum of one physical channel partitioned in time into TDMA frames and timeslots as defined in ETSI TS 102 361-1 [5], clause 4.2. At least one of the TDMA channels shall carry control channel signalling. When idle, MSs shall monitor the Trunk Station Control Channel (TSCC) outbound channel. This protocol permits one additional TSCC to be employed in a TS to share the load. 
A physical channel may support both a Trunk Station Control Channel (TSCC) and a Trunk Station Control Channel Alternate Slot (TSCCAS). When idle, an MS supporting a TSCCAS shall monitor both the TSCC and the TSCCAS outbound logical channels. The following SYNC patterns shall be deployed (see ETSI TS 102 361-1 [5], clause 9.1.1 for details and bit patterns for the frame SYNC): 
 
For the TS outbound channel -BS sourced data. 

 
For the MS inbound channel -MS sourced data. 


Signalling on the TSCC outbound channel is nominally continuous, with each TDMA Frame comprising two independent logical channels. The channel consists of two TDMA traffic channels (channels 1 and 2) as well as a CACH for channel numbering, channel access, system identification and power save. 

30mS 
Figure 5.1: Slots and Frames 
Figure 5.1 illustrates slots, TDMA frames, random-access-frames and power-save-frames. A slot is the elementary DMR burst described in ETSI TS 102 361-1 [5]. A TDMA-frame encompasses two continuous timeslots 1 and 2 or 2 and 1. A power-save-frame is defined by transmission of four consecutive Short LC PDUs embedded in the CACH. A 
power-save-frame is transmitted by a TSCC every 480 ms. 

5.1 The Use of the CACH 
5.1.0 System Identity Code Structure 
The Short LC contains 3 octets of data (see ETSI TS 102 361-1 [5], clause 7.1.4). Tier III systems that have any one of the logical channels configured as a TSCC shall continuously or periodically transmit the C_SYS_Parms Short Link Control to broadcast a sub-set of the System Identity Code, the Reg information element and a Common_Slot_Counter. All information carried by the Short Link Control is common to both logical channels. 
Since the entire Short LC payload can be delivered in 4 CACH bursts, one SLCO can be sent by the CACH every 4 × 30 ms = 120 ms. 
NOTE: The Tier III protocol makes use of the AT bit transmitted in the CACH as key elements in the random access protocol described in clause 6.2. 

5.1.1 C_SYS_Parms and P_SYS Parms - System Identity Code Subset 
The full C_Syscode information element is length 16 bits and resides in both C_CYS_Parms and P_SYS_Parms PDUs. Only the most significant 14 bits of the C_SYScode are carried in the CACH because the CACH is common to the two logical channels. One physical channel may carry one or two TSCCs. Each TSCC is identified by the two bit PAR information element that is conveyed in the two Least Significant Bits (LSBs) of the C_SYScode. 
The CACH is common to both logical channels so the PAR field cannot be specified in the CACH. Not all CSBKs on the outbound channel contain the SYScode. If an MS is searching for a control channel and trying to determine if it is permitted access, it may disregard a sampled channel by decoding the CACH. If there is no match then the MS does not need to stay looking for a CSBK that contains the C_Syscode. 

5.1.2 C_SYS_Parms - Reg 
The Reg information element carries a flag that specifies if this particular system requires MS to register before becoming active. The Reg is also carried in the Aloha CSBK PDU. 

5.1.3 C_SYS_Parms - Common_Slot_Counter 
The Common_Slot_Counter is broadcast by the C_SYS_Parms and represents a positive integer in the range 0 to 511. The counter is incremented in each successive C_SYS_Parms Short Link Control PDU. When the counter is incremented from 511 it rolls over to 0. The Common_Slot_Counter therefore increments every 120 ms. 
120mS 
120mS 
120mS 
120mS 

2121212121212121 2 

Counter Counter+1 Counter+2 Counter+3 ... 
Figure 5.2: Common Slot Counter 
Figure 5.2 illustrates how the Common Slot Counter is broadcast in the CACH. The Common_Slot_Counter is read by MS wishing to synchronize power save periodic sleep cycles (see clause 6.4.7). 


5.2 Tier III Signalling 
The Tier III protocol makes use of the single block CSBK and Multiple Block Control signalling packet structure described in ETSI TS 102 361-1 [5], clause 7.2. PDUs addressed to an individual MS or a talkgroup shall contain the Source Address. The Tier III protocol also uses the Unconfirmed Data type for the Unified Data Transport mechanism. UDT blocks consist of a header and a number of intermediate blocks contiguously transmitted. The UDT transmits the UDT header followed by one to four appended data (UDT intermediate blocks) to transport variable length system, user data or extended_addresses between entities. 

5.3 Modes of Control Channel 
5.3.0 Control Channel Modes - Introduction 
TSCCs may be dedicated, composite or asynchronous. A dedicated TSCC never reverts to a payload channel whereas a composite TSCC may change its mode and carry payload if all other payload channels within a particular TS are busy. 

5.3.1 Dedicated TSCC 
A dedicated TSCC is generally employed in a TS where a large number of BS (hence payload channels) are employed. The advantages of a dedicated TSCC are: 
a) 
the TSCC is always available for MS who are hunting for an appropriate and valid service; 

b) 
the TSCC is always available to process secondary services such as MS location (registration), UDT Short Data calls, etc.; 

c) 
the TSCC is always available to accept random access requests and queue such requests if resource is not immediately available; 

d) 
the TSCC can broadcast information to MSs more frequently as the TSCC function is not interrupted. 



5.3.2 Non-Dedicated TSCC 
A composite TSCC may suspend its control channel function and revert to a payload mode. This is suitable for TSs that are equipped with a very small number of payload channels and the traffic expected exceeds the capacity of those channels. The control channel reversion provides one additional payload resource. When the control channel reverts to payload mode, it shall cease transmitting C_SYS_Parms SLC and transmit the P_SYS_Parms SLC to broadcast a sub-set of the System Identity Code and the Payload Channel Type information element. The Payload Channel Type information element informs MS units that the control channel function has reverted to payload mode. However, the shortcomings are: 
a) 
the TSCC is not available to process secondary services such as MS location (registration), UDT Short Data calls, etc.; 

b) 
the TSCC cannot accept random access requests. The control channel interruption may cause the MS not involved in the call to hunt. 



5.3.3 Operation in Shared Spectrum 
Clause 4.0 d) describes an asynchronous access. In this mode the TSCC remains inactive (in fact the physical channel remains de-keyed) until an MS activates the TSCC with a short burst. The MS then synchronizes to the forward control channel before making its random access service request. 


5.4 CSBK/MBC/UDT/USBD Block Structure 
5.4.0 CSBK/MBC/UDT/USBD Block Structure - Introduction 
CSBK/MBC/UDT/USBD PDUs may be sent by a TS on the outbound channel and MS on the inbound channel. In some instances it is necessary to send more information than can be accommodated in a single block CSBK PDU. In those cases multi-block PDUs of type MBC or UDT are transmitted. Multi-block PDUs shall use the following Data Type information elements (see ETSI TS 102 361-1 [5], clause 6.2): 
a) 
for PDUs except UDT, MBC Header and MBC Continuation are used; 

b) 
PDUs of type Data Header and Unconfirmed Data Continuation are used to transport information on the outbound channel and inbound channel for the Unified Data Transport (UDT) mechanism. 



5.4.1 CSBK/MBC/UDT/USBD Outbound Channel Structure 
The PDUs sent by a TSCC on the outbound channel are CSBK, MBC, UDT and USBD and the PDUs sent by a TSCCAS on the outbound channel are USBD and CSBK/MBC that support Broadcast Announcements. They are classified as illustrated in figure 5.3. 
SLOT 

Class  Mnemonic  PDU Descriptor  Description  
Broadcast  C_GRANT  Channel Grant  Transfer a call to the payload channel  
C_GRANT_DX  Duplex Channel Grant  Transfer a call to a duplex payload channel  
C_MOVE  Move to a new physical channel  MSs shall move to an alternative TSCC  
C_ALOHA  Aloha  To Manage Random Access  
C_BCAST  Announcements (see note 2)  PDUs intended for all MSs listening to this TSCC  
Ahoys  C_AHOY  Ahoy  Sent to MS and demand a response  
Acknowledgements  C_xACKD  Acknowledgements  A response to PDUs from the MS that demand a response: C_ACKD, C_NACKD, C_WACKD.C_QACKD  
Unified Data Transport Outbound  C_UDTHD  UDT Supplementary Data Outbound (see note 1)  System PDU addressed to an individually addressed MS or talkgroup and demands a response when addressed to MS  
UDT Short Data Outbound (see note 1)  UDT Short Data addressed to an individual MS or talkgroup  
Unified Single Block Data  C_USBDD  Unified Single Block Data: Control/Data (see note 2)  Poll inbound USBD data from an MS  
NOTE 1: C_UDTHD PDUs are made up of multiple blocks that consist of a UDT Header followed by 1 to 4 appended UDT data blocks - see Annex B. NOTE 2: Applies to both TSCC and TSCCAS.  


5.4.2 CSBK/MBC/UDT/USBD PDUs on the TSCC Inbound Channel 
The PDUs sent by a MS on the TSCC inbound channel are CSBK, MBC, UDT and USBD and the PDUs sent by an MS on the TSCCAS inbound channel are USBD and C_NACK. They are classified as illustrated in figure 5.4. 

Class  Mnemonic  PDU Descriptor  Description  
Random Access  C_RAND  Random Access  Random Access Requests  
Ackvitation  C_ACKVIT  Ackvitation  A response to PDUs that invite a further response  
Acknowledgements  C_xACKU  Acknowledgements  A response to PDUs from the TSCC that demand a response C_ACKU, C_NACKU (see note)  
Unified Data Transport Inbound  C_UDTHU  UDT Supplementary Data Inbound  Supplementary UDT Data addressed to an individually addressed MS or the TSCC as a response to an AHOY PDU from the TSCC  
UDT Short Data Inbound  UDT Short Data Message addressed to an individually addressed MS or the TSCC as a response to an AHOY PDU from the TSCC  
Unified Single Block Data  C_USBDU  Unified Single Block Data: Data (see note)  Inbound USBD data from an MS in response to USBD Poll Request  
NOTE: C_USBDU and C_NACKU applies to both TSCC and TSCCAS.  


5.4.3 CSBK/MBC PDUs on the Payload Channel Outbound Channel 
The PDUs sent by a TSCC on the outbound channel are classified as illustrated in figure 5.5. 

P_QACK 
Class  Mnemonic  PDU Descriptor  Description  
Broadcast  P_GRANT  Channel Grant (see note)  Swap a call to a new payload channel or announce the current call before call's first transmission, or announce a new call  
P_CLEAR  Payload Channel Clear  Clear the call from the payload channel  
P_PROTECT  Channel Protection  Access control   
Ahoys  P_AHOY  Ahoy  Sent to MS and demand a response  
Acknowledgements  P_xACKD  Acknowledgements  A response to PDUs from the MS that demand a response P_ACKD, P_NACKD, P_WACKD.P_QACKD  
NOTE: A Channel Grant PDU is transmitted by the TS on a payload channel to swap an ongoing call to a new payload channel, to announce the current call before the call's first transmission, or to announce a new call that MS may choose to join.  


5.4.4 CSBK PDUs on the Payload Channel Inbound Channel 
The PDUs sent by an MS on the Payload Channel inbound channel are classified as illustrated in figure 5.6. 


P_RAND 
Include 
Random Access 
P_ACK 
P_ACK 
P_NACK 
Acknowledgements 
Auth Response 
P_DISC 
Class  Mnemonic  PDU Descriptor  Description  
Random Access  P_RAND  Random Access  Random Access Requests  
Acknowledgements  P_xACKU  Acknowledgements  A response to PDUs from the TS that demand a response P_ACKU, P_NACKU  
Maintenance  P_MAINT  Call Maintenance PDUs  Disconnect  

6 Trunking Procedures 


6.1 Basic Structure 
6.1.1 Channel Structure 
6.1.1.1 Fully Regulated Structure 
MS require a TSCC to regulate channel access. Therefore a TS shall incorporate one channel that is configured as a TSCC. A TS may support one additional TSCC within this protocol. 
The TSCC shall provide the following facilities: 
a) 
management and control of channel access by MS using a random backoff mechanism; 

b) 
processing service requests to and from MS and optionally to and from line connected entities; 

c) 
allocating payload resources to calls; 

d) 
broadcast of system information to MS; 

e) 
MS location management by registration; 

f) 
provision of services such as UDT Short Data polling and transfer; 

g) 
USBD polling and data transfer. 



6.1.1.2 Shared Channel Unregulated Structure 
MS access the channel for services using the basic channel access rules prescribed in ETSI TS 102 361-1 [5], clause 5.2.1. MS shall be permitted to transmit asynchronous "BS activation" signalling to the TS in accordance with the "BS activation" feature (described in ETSI TS 102 361-2 [6]). On becoming activated, the TS shall commence transmitting TSCC activity on the outbound channel, and the MS shall derive slot timing from this activity. When activated, the TSCC shall transmit PDUs inviting random access. 
For Tier III, the outbound channel shall activate one TDMA channel as a TSCC and shall transmit Aloha and/or Broadcast PDUs in accordance with the random access procedures specified in the present document. 
The TS shall maintain the timer T_BS_Inactive for each active inbound channel. The T_BS_Inactive timer runs when there is no activity on the inbound channel. If the T_BS_Inactive timer expires the TS shall transition to the Hibernating state in accordance with in ETSI TS 102 361-1 [5], clause G.2.1. Here the TS shall cease transmitting, which deactivates the outbound channel. 
If a TSCC chooses to hibernate, before the transition to a Hibernating State, the TS may broadcast one or more BCAST General Site Parameters PDUs with the Hibernating_Flag = 12. 

6.1.1.3 TSCCAS Structure 
A physical channel may support both a Trunk Station Control Channel (TSCC) on one logical channel and a Trunk Station Control Channel Alternate Slot (TSCCAS) on the other logical channel. The TSCCAS provides a USBD polling and data transfer facility. 
When a physical channel supports both a TSCC and a TSCCAS, the TSCC broadcasts TSCCAS capability to MS units. When idle, MS units capable of supporting a TSCCAS monitor both the TSCC and the TSCCAS. 


6.1.2 Physical Channel Addressing 
The Tier III protocol supports a number of different physical channel strategies to accommodate operation in radio channels that may be dedicated, in blocks or allocated on an ad-hoc basis by an external agency. Physical radio channels may be specified by either: 
a) 
a logical channel plan whereby a transmitter and receiver frequency is mapped to a CHAN information elements. CHAN information elements permit up to 4 094 such logical/physical relationships; and/or 

b) 
a mechanism whereby the absolute transmitter and receiver frequencies are specified in the information elements of PDUs that are passed between DMR entities at the air interface. 


For b) there will be a degradation in performance over a) because the information that shall be passed between entities is greater. However new physical/logical relationships that adds to or modifies the existing channel plan stored in MS may be broadcast on the TSCC. 
Annex C provides an illustration how the logical channels may be mapped to physical frequencies. 

6.1.3 Sub-Division of the MS Population 
Certain PDUs transmitted on the TSCC may be directed to and applicable only to a sub-set of the MS population. Examples are Aloha (C_ALOHA) PDUs and Broadcast (C_BCAST) PDUs. Applicable PDUs contain a 24 bit address information elements and a 5 bit (Mask) number information element. The sub-set division is achieved by using the address qualifier (Mask) from the PDU. This parameter instructs an MS to compare the "Mask" least significant bits of its individual address with the "Mask" least significant bits of the address field from the PDU (containing the MASK) to determine if that PDU is applicable. 
An MS shall note the population subdivision contained in each applicable PDU that it receives. For Mask = 0 to 24, the PDU is applicable to the unit if the "Mask" least significant bits of the Aloha address match the "Mask" least significant bits of its individual address. 
In this way, the MS population is effectively divided into 2Masksubsets: 
 
If Mask = 0 then no address bits are compared, so there is no subdivision. 

 
If Mask = 1 then only MS whose least significant individual address bit matches the least significant individual address bit from the PDU received shall consider the PDU to be applicable to that particular MS. 


This process continues up to Mask = 24. In this case the PDU is only applicable to one MS. 
TSCC Outbound 

Figure 6.1: Example of PDU Containing the "Mask" Information Element 
Figure 6.1 illustrates an MS personalized with the address 0000 0000 0010 1010 0001 10012. 
A PDU is received that contains a Mask information element. The MS shall therefore determine if that PDU is applicable or the PDU shall be discarded. 
EXAMPLE 1: The Mask information element contains the value 0 01002. 
The value of the Mask is 4 therefore the MS compares the 4 least significant bits of the address information element in the PDU received with the 4 least significant bits of the MS individual address. 

0000000000 1010 10000 0000000000 1010 10000 

Figure 6.2: Applicable PDU Defined by Address and Mask 
The least significant 4 bits are compared as illustrated in figure 6.2. In this case the bits match so this is an applicable PDU for this particular MS. (If Mask were any value from 0 to 4 the PDU would still be applicable.) 
EXAMPLE 2: The Mask information element contains the value 0 01012. 
The value of the Mask is 5 therefore the MS compares the 5 least significant bits of the address information element in the PDU received with the 5 least significant bits of the MS individual address. 
The least significant 5 bits are compared as illustrated in figure 6.3. In this case the bits do NOT match so this PDU shall be discarded by this particular MS. (If Mask were any value from 5 to 24 the PDU would still be discarded.) 

Figure 6.3: Non-Applicable PDU defined by Address and Mask 


6.2 Random Access Procedures 
6.2.0 Random Access Procedures -Introduction 
These clauses define the random access protocol, which is based on slotted Aloha that is used to: 
 
control the collision of simultaneous random access attempts from different MSs; 

 
manage the TSCC to minimize access delays; 

 
ensure system stability; and 

 
maintain optimum throughput under heavy traffic loads. 


Random access is the only access method permitted for MS on a fully regulated TSCC. For a Tier III system employing asynchronous access, and when the TSCC is de-keyed, the first random access attempt shall activate the physical TSCC channel whereupon the outbound burst shall regulate further signalling. 

6.2.1 The Random Access Principle 
6.2.1.0 Random Access Principle - Introduction 
The figures in the random access procedure clauses adopt the conventions illustrated in figure 6.4. 
Slot available for random access 

PDU containing the back-off parameter 'N' 
Slot withdrawn, random access not permitted 
on the outbound channel 

PDU transmitted by a MS on the inbound 

PDU that requires a response. i.e withdraw channel next TDMS frame (next but one slot) 
Figure 6.4: Conventions used in the figures 
In addition, the TDMA-slot and TDMA-Frame is illustrated in figure 5.1. 
PDUs transmitted on the TSCC on the outbound channel are divided between those that invite random access (such as Alohas) and those that withdraw one or more slots for the purpose of soliciting responses from MSs on the inbound channel (see clause 6.2.1.1.3). 

6.2.1.1 Random Access Control 
6.2.1.1.0 Random Access Control -Introduction 
The TSCC outbound channel creates an environment where TSCC access may be managed and controlled. This protocol specifies a specific C_ALOHA PDU that contains the information elements Random-Backoff, Mask, and Service Function, to manage and control random access. Other PDUs transmitted on the TSCC also contain the random backoff information element. 
All MS initiated services are by random access. If an MS wishes to make a random access attempt, the MS may send the random access service request PDU so long as: 
 
access is not inhibited by Mask (see clause 6.2.1.1.1); or 

 
access is not inhibited by the Service Function (see clause 6.2.1.1.2); or 

 
the slot chosen is not withdrawn (see clause 6.2.1.1.3). 



6.2.1.1.1 Sub Dividing the MS Population 
C_ALOHA PDUs contain an address information element and a Mask information element. The procedure described in clause 6.1.3 is therefore applied. 
An MS shall note the population subdivision contained in each Aloha PDU that it receives. When attempting random access, the MS shall check if the population subdivision is applicable to it using the qualifier (Mask) and the address field from the Aloha PDU. For Mask = 0 to 24, the PDU is applicable to the MS if the "Mask" least significant bits of the Aloha address match the "Mask" least significant bits of its individual address. 
The subdivision is applied to subsequent TDMA frames marked PDUs that do not contain the Mask information element, until updated or changed by the next Aloha PDU. 
In this way, the MS population is effectively divided into 2Mask subsets: 
 
If Mask = 0 then no address bits are compared, so there is no subdivision (under normal traffic loading, this will usually be the case). 

 
If Mask = 1 then only units whose least significant individual address bit matches the Aloha address may send non-emergency random access PDUs. Thus the MS population has been divided into two subsets. 

 
This process continues up to Mask = 24. In this case only one MS shall be permitted to make a random access attempt (unless the MS requested an emergency service whereupon the MS may make a random access attempt for all values of Mask except Mask = 24). 


When an MS becomes active on a TSCC, including when returning from a payload channel, it shall either assume that the population is not subdivided (i.e. that the last C_ALOHA PDU was applicable to all MSs) or wait for a C_ALOHA PDU before attempting random access. 

6.2.1.1.2 Checking the Service-Function 
For service requests except emergency: 
 
An MS shall use the Service Function from the C_ALOHA PDU. An MS shall not choose a slot for random access unless the random access attempt is for a service type invited by the Service Function information element. 

 
The Service function shall apply until the Service-Function is updated by a subsequent C_ALOHA PDU. 


Table 6.1: Service-Function 

Value  Remark  
002  Random Access invited for all Services  
012  Random Access Invited for Services that require a physical payload channel Random Access Invited for registration requests  
102  Random Access Invited for Services that do not require a physical payload channel Random Access Invited for registration requests  
112  Random Access invited for random access registration requests only  

For emergency service requests the MS is not required to check the Service-Function. 

6.2.1.1.3 Withdrawing slots from Random-Access 
The TSCC may transmit a PDU (consisting of single block CSBK, multi block MBCs or multi-block UDTs or USBD) on the outbound channel that solicits a response from a specified MS. The MS response for all but the USBD shall be sent in the next TDMA-frame following the last block of the TSCC PDU. In order to prevent a collision occurring between this solicited response and a random access transmission, the TSCC withdraws this timeslot, thereby prohibiting any random access transmissions in the given timeslot. The protocol makes use of the AT bit transmitted in the CACH to indicate to all MS that the following slot is withdrawn (see ETSI TS 102 361-1 [5], clause 4.5). (This, therefore implies that an MS intending to transmit a PDU by random access in a given timeslot shall successfully decode the appropriate CACH and note the value of the AT bit to ensure that the chosen timeslot has not been withdrawn from random access.) 
In the following example in figure 6.5, when the TSCC transmits a PDU that requires a response, that PDU withdraws the following TDMA frame (slot but one). 

The TSCC transmits PDUs inviting random access: 
a) 
Aloha PDUs (see note) invite random access. Therefore an MS is permitted to transmit a random access PDU. 

The CACH following each of the Aloha PDUs sets the AT bit to 02. Aloha PDUs never withdraw slots but an Aloha PDU with Mask = 24, MS address = ADRNULL, shall specifically prohibit random access even though the slot is not withdrawn; 

b) 
TSCC transmits a PDU that demands a response followed by the CACH with the AT bit set. The result is that the following slot but one at "C" is withdrawn - i.e. not available for random access. The TSCC withdraws that slot because the PDU "B" requires response from a specific MS(B); 

c) 
MS(B) transmits its acknowledgment PDU; 

d) 
if the slot chosen for the random access attempt is not available because the slot is withdrawn, the MS shall choose another slot for a subsequent random access attempt using the random backoff procedures specified in clause 6.2.1.1.6. 


NOTE: Other PDUs also invite random access. 

6.2.1.1.4 TSCC Responses to Random Access Attempts 
After receiving a random access PDU, the TSCC shall send a response. Valid responses are specified in the clauses detailing the registration and call procedures. The response may be sent in the TDMA-frame following the random access PDU or it may be delayed. The TSCC shall use a NRand_Wait information element in the most recent C_ALOHA PDU to specify the delay (in TDMA-frames) an MS shall wait before choosing another slot using a random backoff timer for a repeat random access attempt. 

6.2.1.1.5 Noting the Response Delay 
An MS shall note the delay parameter NRand_Wait from each C_ALOHA PDU it receives and shall use table 6.2 to derive from it the number of TDMA-frames, NWait, by which the TSCCs response to a random access PDU may be delayed. (NWait = 0 means that the response is expected by the MS in the TDMA-frame following the random access PDU). At the start of a session, until it receives an Aloha PDU, the unit shall assume a default value of NWait = NDefault_. 
Table 6.2: System Response Delays Indicated by the Delay Parameter NRand_Wait 
NRand_Wait  Nwait(TDMA-frames)  
0  0  
1  1  
2  2  
3  3  
4  4  
5  5  
6  6  
7  7  

NRand_Wait  Nwait(TDMA-frames)  
8  8  
9  9  
10  10  
11  11  
12  12  
13  13  
14  15  
15  24  


6.2.1.1.6 Random Backoff 
This clause specifies the method to manage the TSCCs receipt of random access PDUs. A system periodically broadcasts a random back-off timer (specified in TDMA frames). 
When an MS initiates a call, the MS may send its first random access PDU in the next slot (subject to Mask, Service Function, Timing and withdrawn slot specified in clause 6.2.1.1.0 a), b) and c)). 
The MS shall invoke the random backoff procedures specified in this clause if: 
a) 
the MS could not make its random access attempt because access was inhibited by Mask; 

b) 
the MS could not make its random access attempt because access was inhibited by the Service Function; 

c) 
the MS could not make its random access attempt because the slot was withdrawn; 

d) 
the MS did make a random access attempt but that attempt was unsuccessful (the TSCC did not respond before the expiry of Nrand_Wait). 


If the MS makes a random access attempt and is unsuccessful, the MS shall choose a slot for its next random access attempt by choosing a random number between the limits of one and the backoff parameter using a statistically uniform distribution. 
Figure 6.6 illustrates a TSCC using parameters NRand_Wait = 0. The most recent value of back-off received = 4. 

A 

Expected TSCC response window for Nrand_Wait=0 
offset timing TSCC 
TSCC Outbound 
MS Inbound 

1 
2 
3 
4 
A 
Figure 6.6: Random Backoff Example #1 
a) 
at [A] the MS makes a random access attempt. NRand_Wait = 0 indicates that the TSCC will respond in the next TDMA frame at [B]; 

b) 
after TDMA frame [B] a response has not been received, therefore the MS chooses one of the slots 1, 2, 3, 4 randomly for its next access attempt. 




Expected TSCC response window for Nrand_Wait=1 
offset timing TSCC 

a) 
the MS makes a random access attempt. NRand_Wait = 1 indicates that the TSCC will respond in one of the next two TDMA frames at [B]; 

b) 
after TDMA frame [B] a response has not been received, therefore the MS chooses one of the slots 1, 2, 3, 4 randomly for its next access attempt. 


A number of outbound channel PDUs including an Aloha PDU contain the backoff information element. NOTE: Future releases of the standard may define CACH messages that contain this information element. 
The backoff may be altered by the TSCC and broadcast to MS to respond to varying load conditions presented to the system throughout the course of operation. If the system has a light traffic load, the backoff may be small, so decreasing random access latency. If the traffic load increases a longer backoff may be warranted to spread competing of random access attempts from different MSs by the TSCC transmitting a larger backoff number. This traffic load may be estimated from historical usage or may be calculated from the burst traffic being received at that time. 
The backoff parameter may change while the MS is already making random access attempts. When the MS has chosen a random slot, that slot shall be preserved for the duration of the current random access attempt. Any new value of backoff parameter from the TSCC shall be noted by the MS and shall be employed if the MS needs to choose a new random slot for its next random access attempt. 
For PDUs that contain the backoff information element, the number of backoff TDMA-frames is coded, so that more backoff TDMA-frames can be realized than a pure binary representation would permit. The explicit numbers of TDMA-frames resulting from the back-off number is indicated by table 6.3. 
Table 6.3: Number of Backoff TDMA Frames Indicated by the Backoff Number 
Backoff Number  Back-off TDMA Frames  
0  Reserved  
1  1  
2  2  
3  3  
4  4  
5  5  
6  8  
7  11  

Backoff Number  Back-off TDMA Frames  
8  15  
9  20  
10  26  
11  33  
12  41  
13  50  
14  70  
15  100  

Note that: 
a) 
a C_ALOHA PDU with M = 24 invites access only for one specific individual MS; 

b) 
in the example in figure 6.5, if an MS had chosen the slot "C" for a random access attempt, that MS would be able to determine that the slot was not available for random access because the slot was withdrawn by decoding the AT bit from the CACH and noting that the slot the MS had chosen was withdrawn. The MS would abandon that random access attempt, and choose another candidate slot using the random backoff parameter; 

c) 
the MS shall rely on the AT bit to determine if the following random-access slot is withdrawn. If the MS does not successfully receive the preceding AT bit, the MS shall assume the slot is withdrawn. 



6.2.1.1.7 Retry decision and Time-outs 
After sending a random access PDU, an MS shall wait to receive a response from the TSCC. Various PDUs shall be accepted as a valid response (as specified in the clauses detailing the registration and call procedures). 
The MS shall abandon its access attempt if it has sent the maximum permitted number of random access for the particular service requested and received no valid response. This number depends on the service and priority of service being requested: 
 
For non-emergency random access requests, it is NRand_NR. 

 
For emergency random access requests, it is NRand_NE. 


The MS shall also operate a time-out TRand_TC that defines the maximum time it waits trying to achieve random access, and abandon the attempt if this time-out expires. If the unit's access attempt fails as a result of TRand_TC timeout then: 
a) 
if the MS has not transmitted a PDU, it shall return to the idle state (and may indicate the failure to the user); 

b) 
otherwise, (the MS has made at least one random access attempt) if the TRand_TC timer expires while the MS is waiting Nwait+1 for the last random access attempt, the MS will complete the Nwait+1 TDMA-frames before abandoning its random access. 



6.2.1.1.8 Random Access (non-emergency) SDL for an MS as Defined in Clause 6.2 
Figures 6.8 to 6.10 illustrate the non-emergency random access procedures SDL. 
process RandomAccess 



Idle 


set (TRand_TC) 

NRetry := 0 




'no' 

'yes' 
'no' 

'yes' 
RandomBackoff WaitRaSlot 



1(3) 
MS has received matching C_ALOHA PDU with random backoff, mask, service function, NRand_Wait 
Intiate random access service request 
(RandomBackOff, WaitSlot)' 
Figure 6.8 (sheet 1 of 3): Random Access Procedure SDL 



Figure 6.10 (sheet 3 of 3): Random Access Procedure SDL 
process RandomAccess 



false 

true 
'no' 




NRand_Wait, and Backoff values' Idle 

3(3) 
In case of Emegency call limit NRand_NE is used. 
(RandomBackOff, WaitSlot)' 
* (WaitBackOffAloha) 



-
From all states except WaitBackOffAloha 
NRand_Wait, and Backoff values' 

6.2.1.1.9 Random Access (emergency) SDL for an MS as Defined in Clause 6.2 
Figures 6.11 to 6.13 illustrate the emergency random access procedures SDL. 





6.2.1.2 Action After Receiving an Acknowledgement 
The MS shall not re-transmit any further random access PDU when an appropriate acknowledgement has been received from the TSCC. Various PDUs that are acceptable in addition to specific acknowledgement PDUs are indicated in the procedures specified in the present document. An applicable TSCC response to a random access request shall start an MS timer. This timer may be restarted by the reception of a further applicable acknowledgement PDU from the TSCC. Two values are specified for this timer. One value TP_Timer shall be used if the random access service requires a payload channel (for example a speech or packet data service). The second value TNP_Timer shall be used for services that only use the TSCC (for example Registration, UDT Short Data service). 

6.2.1.3 MS Arriving on a Control Channel 
Channel access regulation for trunked systems is implemented by a TSCC transmitting signalling on the outbound channel with periodic PDUs that define regulated channel access. In addition, a Colour Code is used to detect co-channel interference in shared radio spectrum. 
When an MS tunes to a new channel where the recent history of channel activity is unknown, the MS shall establish that the TSCC is identified as one that the MS is permitted to access. 
Tier III systems assign the physical channels automatically therefore the MS and TS shall know and be in agreement which colour code is allocated for each physical channel. The following strategies may be employed in Tier III systems: 
a) 
the default colour code is 00002. If a colour code has not been specifically assigned, or transmitted on the TSCC in an extended Channel Grant or extended Move PDU, the colour code shall be set to the default; or 

b) 
MS may maintain a list of logical channel numbers and their corresponding colour code assignments (see Annex C); or 

c) 
the MS shall determine the outbound Colour Code being transmitted by the TSCC. This Colour Code shall be maintained in the payload channels allocated by the TSCC unless a different Colour Code is transmitted in an extended Channel Grant or extended Move PDU. 


When active on a payload channel, the TSCC shall discard any PDUs inbound that have an incorrect Colour Code. 
The MS shall first wait until it receives a colour code information element. If the colour code being transmitted by the TSCC is 00002 the MS shall skip the colour code check and check the C_SYScode as specified in clause 6.2.1.3 b). If 
the colour code being transmitted by the TSCC is a value other than 00002 the MS shall check that this particular channel is transmitting a colour code that is expected by the MS and that the Colour Code matches one of the strategies specified in this clause 6.2.1.3. 
The MS shall then wait until it explicitly receives the C_SYScode being transmitted on the TSCC. If the MS is authorized to access this TSCC, the MS shall wait for an applicable C_ALOHA PDU and update the active timing according to the information sent by the TSCC before it attempts access by random access procedures defined in clause 6.2 and subclauses. 



6.3 Control Channel Acquisition and Retention 
6.3.0 Control Channel Acquisition and Retention -Introduction 
Unless assigned to a payload channel (including immediately after switch-on), the MS shall attempt to find a TSCC appropriate to the MSs selected network. The search for a TSCC may be performed by a general hunt through all likely channels or by reference to parameters stored within the MS. A framework for MS hunting is described in Annex D. 
An MS shall not make any transmissions on a TSCC unless it is active on that channel. It shall not become active until it has received a C_SYScode that authorizes the MS to access that TSCC. 
If an MS is hunting over a number of candidate channels, it shall leave the selected channel as soon as it becomes evident that the MS shall not be permitted service. 
The discipline for MSs whilst active a TSCC and the circumstances which may result in a search for a new TSCC are the subjects of clause 6.3.2. 
In particular: 
 
the method by which the MS searches for an appropriate TSCC; 

 
the criteria to which a TSCC shall be considered appropriate by the MS - authorization; 

 
procedures for returning to the TSCC acquisition procedures. 


The methods specified in this clause recognize that designers of networks may choose from a variety of control channel strategies, including both Dedicated Control Channels and Non-dedicated Control Channels. 
These methods may result in the MS encountering a variety of control channel situations, including: 
a) 
receiving a TSCC which suffers short-term interruptions (radio fading and multi-path reception); 

b) 
suffering long-term interruptions to TSCC reception during which no appropriate TSCC can be received by the MS (Non-dedicated Control Channels, or moving out of range of the network); 

c) 
being in a location where it is possible for more than one TSCC to be received from the selected network, involving the unit in a choice; 

d) 
being instructed to leave a TSCC; 

e) 
being instructed to leave or being barred from access to, a TSCC as a result of a network load sharing arrangement; 

f) 
being instructed to sample an alternative TSCC on an adjacent radio site (Vote Now). 


NOTE: It should be noted that a Non-dedicated Control Channel strategy may only be suitable for small single site trunked networks using only a few physical channels. If a multi-site trunked network employed a site with a non-dedicated TSCC, the network may find it impossible to connect a wide area call or transport services that only used the TSCC for delivery. 
Procedures have been specified in the present document to indicate to MS when they may sample an adjacent site for a TSCC that may provide an improved grade of service for the MS user. This is achieved on the TSCC transmitting a PDU that invites all MS to leave the TSCC momentarily. During this sample time the TSCC can discontinue call transactions. Notwithstanding this, manufacturers may devise their own procedures that will allow an MS to leave the current TSCC to sample for an alternative TSCC. However it shall be noted that if the MS leaves the TSCC on its own volition the MS may miss a TSCC transaction. 

6.3.1 MS Parameter Volatility 
In order to satisfy the procedures specified in this clause, the MS shall retain certain parameters for each selected network when the MS is switched off. Other parameters shall be discarded when the MS is switched off. Table 6.4 lists the behaviour of each applicable parameter. MS parameters that are not listed in table 6.4 shall assume that it shall be discarded when the MS is switched off. 
Table 6.4: MS Parameter Volatility for Control Channel Acquisition and Retention 

Parameter  Clause  Fixed during MS Personalization. Retained when MS is switched off  Changes during operation and retained when MS is switched off  Changes during operation and discarded when MS is switched off  
MODEL  6.3.2.2.1.1  X  
NET  6.3.2.2.1.1  X  
DMRLA  6.3.2.2.1.1  X  
MS Category  6.3.2.2.1.3  X  
Acquisition Authorization Data  6.3.2.2.2  X See note  
Logical Channel Hunt List  Also see Annex C  X  
Additions to the hunt list from Announcements received  7.2.19.1  X  
Any parameter not listed  X  
NOTE: Length of authorization data is dependent on MODEL. Huge - 10 bits, Large - 8 bits, Small - 5 bits, Tiny - 3 bits.  


6.3.2 Control Channel Acquisition Procedures 
6.3.2.0 Control Channel Acquisition Procedures - Introduction 
Control Channel (TSCC) acquisition consists of the steps of checking the C_SYScode (verification) and, if successful measuring the signal quality (confirmation) as illustrated in figure 6.14. 


6.3.2.1 Entry into TSCC Acquisition Procedures 
The TSCC acquisition procedures enable an MS that is not assigned to a payload physical channel to attempt to select a TSCC. TSCC acquisition is a procedure that consists of hunting for candidate TSCCs and attempting to verify that the MS is authorized to become active on that selected TSCC. 
The MS shall enter into the TSCC acquisition procedures under the following circumstances: 
a)  immediately after switch-on;  
b)  a user-initiated change of selected network;  
c)  when it has relinquished the current TSCC under the procedures specified in clause 6.3.3;  
d)  when it has received an applicable P_CLEAR PDU on a payload channel;  
e)  when it has sent disconnect PDUs P_MAINT(Maint_Kind = DISCON) or timed-out on a payload physical  
channel;  
f)  when it has received a call P_AHOY(Service_Kind = 11112 Cancel Call Service) PDU on a payload physical  
channel which requires it to vacate that physical channel.  

At all times during the TSCC acquisition procedures the MS shall mute its received audio and transmission shall be inhibited. 
A framework for TSCC control channel hunting is provided in Annex D. 

6.3.2.2 Identifying a Candidate Control Channel 
6.3.2.2.0 Identifying a Candidate Control Channel -Introduction 
When an MS is searching for a suitable control channel, the MS shall examine any signal detected for conformity with TSCC structure. The MS shall accept as a candidate TSCC any channel on which a TSCC synchronization sequence is detected. 
The method by which the MS identifies candidate TSCCs during hunting is not detailed in the present document. In particular no maximum time allowance for this procedure is specified, although attention is drawn to the necessity of completing tests as quickly as possible, notably on channels which can be easily rejected as TSCC candidates 
(e.g. invalid parameters from the C_SYScode), since the overall speed of the hunt (and thus efficiency of service to the user) depends on the rapidity with which these tests can be carried out. 

6.3.2.2.1 Checking the System Identity Code 
6.3.2.2.1.0 Checking the System Identity Code - Introduction 
When the MS has identified a candidate TSCC, it shall examine the values of the C_SYScode fields from the TSCC PDUs that transmit the C_SYScode information element. 
The time which the MS may continue to search for a value of C_SYScode information element for verification is not specified since this depends on the regularity by which the TSCC transmits PDUs that contain the C_SYScode information element. However it should be noted that the essential C_SYScode parameters for TSCC searches are also transmitted in the CACH. 
When the MS has selected a C_SYScode information element for verification, it shall decide if it is authorized to acquire the TSCC (see clause 6.3.2.2.2). If acquisition is permitted then the MS shall become active on that TSCC and start the signal quality checking procedures specified in clause 6.3.2.3. 
Whilst active on a TSCC, after verification but prior to confirmation, the MS shall not transmit any random access PDUs, but it shall comply with any applicable PDUs received, as required, provided that to do so does not involve transmitting on the TSCC. 

6.3.2.2.1.1 Structure of the System Identity Code (C_SYScode) 
DMR trunked networks may range from tiny systems consisting of a very small number of sites to very large systems covering a wide geographic area. To accommodate this wide range of networks, DMR specifies four network models, each with characteristics appropriate to each model. 
Table 6.5: Network Model 

Network Model  Model Coding  Number of Networks  Number of Sites per Network  DMRLA  
Tiny  002  512  8  1 to 3  
Small  012  128  32  1 to 5  
Large  102  16  256  1 to 8  
Huge  112  4  1 024  1 to 10  

The minimum value of DMRLA is normally = 1, the value 0 is reserved for future use but is presently not supported. 
In order to identify the network and site to MSs, a TSCC frequently transmits a C_SYScode. MSs shall examine the C_SYScode to determine if they are permitted to become or remain active on the TSCC. The C_SYScode information elements are structured as follows. 
Table 6.6: Network Model Description 

Parameter  Descriptor and section  Description  
MODEL  Network Model  Tiny, Small, Large, Huge  
NET  Network Identity  Identifies a particular DMR trunked network  
SITE  The SITE parameter identifies a particular site within a network  
PAR  for multiple TSCCs within one TS (site)  

A bit specific representation of the Syscode information element is illustrated in figure 6.15. The MODEL defines the length of the NET and SITE information elements. Table 6.5 illustrates the effect of this partition. It is likely that in a particular geographical area a large number of small networks may be employed but only a small number of large networks. The MODEL parameter enables a number of differing archetypal networks to be defined. 
NOTE: The DMRLA parameter illustrated in figure 6.15 is used for registration. The registration protocol is specified in clause 6.4.4. 

MODEL NET SITE PAR TINY NETWORK DMRLA(n) n=1 to 3 


MODEL NET SITE PAR SMALL NETWORK DMRLA(n) n=1 to 5 


MODEL NET SITE PAR LARGE NETWORK DMRLA(n) n=1 to 8 



MODEL NET SITE PAR 
DMRLA(n) n=1 to 10 
Figure 6.15: Allocation of NET and SITE Information Elements in C_SYScode 

6.3.2.2.1.2 Multiple Control Channels 
DMR trunked networks may operate with one or two TSCCs at a single site. The site may sub-divide the MS population to allow load sharing between TSCCs. This facility is provided by the PAR sub-field in the C_SYScode and by control categorization of MSs. 

6.3.2.2.1.3 Control Categorization of Radio Units 
At the time of MS network personalization, the MS shall be allocated a control category (ContCAT) stored in the MSs fixed non-volatile storage. Two control categories are available, which are designated A and B. 
The control category governs acquisition and retention of a TSCC, since the PAR sub-field in the C_SYScode indicates which MS control categories are allowed to become active. 

6.3.2.2.1.4 The PAR Sub-field 
The PAR information element occupies two bits of the C_SYScode. The meanings assigned to the four possible values of PAR shall be: 
002 Reserved. 
012 Category A MSs only permitted. 
102 Category B MSs only permitted. 
112 Category A MSs and B MSs permitted. 

Figure 6.16: Multiple Control Channels by PAR  
EXAMPLE:  A wide area DMR trunked network has a number of radio sites that employ one TSCC and one site that is equipped with two TSCCs. Differing fleets of MS are personalized such that the total MS population is evenly distributed between Category A and Category B units. Referring to figure 6.16, Site '1' is configured with two TSCCs and radiates PAR = 012 on the first TSCC and PAR = 102 in the second TSCC. Any MS, whether Category A or B can become active on the TSCC from site 2 and site 3. When MS travel to site 1 however they will cluster on their appropriate TSCC.  
6.3.2.2.2  TSCC Authorization Procedure  

The MS shall read the C_SYScode being transmitted on the TSCC: 
a) 
Checking the MODEL: 

-The MS shall compare the MODEL transmitted in the C_SYScode on the TSCC with the MODEL stored in MS fixed non-volatile storage. If there is no match then the MS unit shall assume that it is not authorized to acquire the TSCC under test. 

b) 
Checking the NET: -If the MS has successfully verified a) above then: 


. 
The MS shall compare the NET transmitted in the SYS code on the TSCC with the NET stored in MS fixed non-volatile storage. If there is no match then the MS unit shall assume that it is not authorized to acquire the TSCC under test. 
c) Checking the SITE Acquisition Authorization Data: 
-If the MS has successfully verified a) and b) above then: 
. 
The MS shall first check if it has stored any SITE acquisition authorization parameters. If no SITE acquisition authorization parameters are stored then no checking of SITE acquisition authorization shall be performed. However if the MS holds at least one parameter, each value stored shall be compared with the SITE parameter transmitted in the C_SYScode on the TSCC. If there are no matches then the MS unit shall assume that it is not authorized to acquire the TSCC under test. 
d) Checking the PAR sub-field: 
-If the MS has successfully verified a), b) and c) above then it shall examine the PAR sub-field in the light of its control category held in fixed non-volatile storage. If the control category of the MS is not one of the categories permitted access by the PAR sub-field value, then the MS shall assume that it is not authorized to acquire the TSCC under test. 

CAT (A,B) 

Figure 6.17 illustrates the TSCC Authorization procedure specified in clause 6.3.2.2.2 a), b), c) and d). 


6.3.2.2.3 Checking the SYS_AREA Information Element 
6.3.2.2.3.0 Checking the SYS_AREA Information Element - Introduction 
If the MS has successfully verified the C_SYScode (according to clause 6.3.2.2.2), then it shall examine the SYS_AREA information element from the C_SYScode. The SYS_AREA is formed by applying a mask to the Site information element of width specified by DMRLA. 
The SYS_AREA information element is then compared with a list in the light of denied registrations applicable to the selected network held by the MS. (That list is discarded when the MS is switched off. See clauses 6.3.2.2.2 and 6.4.2). 
If the value of the SYS_AREA information element under examination matches with any of the records of denied registrations applicable to the selected network, then the MS unit shall not be authorized to acquire the TSCC under test. 

ecome test 
active on  TSCC  under  test  
Figure 6.18: SYS_AREA Information Element from the C_SYScode  
EXAMPLE:  A large network has MS personalized with DMRLA = 6. The MS retrieves the SYS_AREA information element from the C_SYScode and compares that result with each entry in the list of denied registrations. If there is a match in any one of the entries then the MS shall not be authorized to acquire the TSCC under test.  
6.3.2.2.3.1  Lifetime of SYS_AREA Entries in the Denied Registration List  

The entire denied registration list is discarded when the MS is switched off (see clause 6.4.2). 
If the timer T_DENREG is non-zero, individual entries in the denied registration list shall have a limited lifetime. In this case the MS maintains a timer for each of the entries. If the timer for a particular SYS_AREA expires, that SYS_AREA shall be removed from the list. 



6.3.2.3 Confirmation - Monitoring the TSCC Outbound Channel Signal Quality 
While idle on a control channel the MS shall determine the outbound channel signal quality. This may be 
e.g. examination of the error rate, from measurement of the RF signal strength. The MS shall hold two thresholds of signal quality: 
a) 
One threshold shall be used while the MS is hunting for a TSCC prior to confirmation (see clause 6.3.2). 

b) 
The second threshold shall be used after verification and confirmation and the MS is idle on the TSCC. NOTE: When an MS enters a call set-up phase, it suspends signal quality measurement of the TSCC. 



6.3.2.4 Reading the Colour Code 
When confirmed on a control channel, the MS shall determine the outbound Colour Code being transmitted. This Colour Code shall be utilized in the payload channels allocated by the TSCC. 
When active on a payload channel, the TSCC shall discard any PDUs inbound that have an incorrect Colour Code. 


6.3.3 MS Leaving a Control Channel 
6.3.3.1 Reasons for Leaving a Control Channel When Active But Idle 
When active, the MS shall monitor the TSCC and return to hunting procedures if any of these conditions are met: 
a) 
After confirmation, the bit error rate exceeds the minimum prescribed in clause 6.3.2.3. 

b) 
The value of C_ SYScode received differs from the value verified during acquisition authorization for a NSYSerr consecutive occurrences. If the only change in the C_SYScode is the PAR field then the MS is only required to leave if it is no longer permitted for this control category. 

c) 
No decodable TSCC PDUs are received by the MS for T_Nosig seconds. 

d) 
The user initiates a change of selected network. 

e) 
A C_MOVE PDU applicable to the MS is received. In this case the MS shall note the value of the CONT information element from the C_MOVE PDU. 

f) 
The MS receives C_NACKD(Reason = Reg_Denied) as a result of sending a random access registration PDU. In the case of a random access registration request, the MS shall assume the hunt stage that it was last engaged in prior to the registration attempt. 

g) 
After C_SYScode confirmation, the MS receives C_NACKD(Reason = Reg_Refused) as a result of random access registration procedures. In this case the MS shall assume the hunt stage that it was last engaged in prior to the registration attempt. 

h) 
After confirmation, the MS has timed out after a random access registration procedure due to NRand_NR being reached or Trand_TC being exceeded. In this case the MS shall assume the hunt stage that it was last engaged in prior to the registration attempt. 

i) 
After confirmation, the MS has timed-out after a random access attempt for a service request, except registration, due to NRand_NR or Nrand_NE being reached or TRand_TC being exceeded. 



6.3.3.2 Leaving a Control Channel Whilst Waiting for Signalling 
An MS waiting for signalling shall leave the TSCC on which it is currently active when any of the following events as listed in clause 6.3.3.1 occur - b), c) and e). In such circumstances the MS shall retain its state of waiting for signalling during any hunting procedures and subsequent TSCC confirmation tests. Any timers relevant to the waiting state shall be maintained. 



6.4 Registration, Power Save, and Authentication Procedures 
6.4.0 Registration, Power Save, and Auth Procedures -Introduction 
The procedures defined in this clause support the generic and supplementary services. PDUs exchanged between the TS and MS contain device addresses that either identify a specific device (such as an MS), or a gateway (see clause A.4) that indicates the service being supported. For clarity the service, the PDUs and addresses are illustrated in table 6.7. 
Table 6.7: Services - PDUs -Addresses Cross Reference 
Service  PDU  Source  Source Address  Destination Address (Target)  Notes  
Registration  Random Access Request  MS  MS ID  REG_ADDR  0000 00002 + C_SYScode  
Acknowledgment  TS  REGI  MS ID  To the Random Access Request or final acknowledgement if the registration was subject to authentication  
MS Authentication or part of registration  C_AHOY  TS  Authentication Challenge  MS ID  
Acknowledgment  MS  MS ID  Authentication Result  To the Authentication Challenge  
Stun/Revive  C_AHOY  TS  STUNI  MS ID  
Acknowledgment  MS  MS ID  STUNI  To the C_AHOY or final acknowledgement if the stun/revive was subject to authentication  
Stun/Revive (MS authenticates TS)  C_AHOY  TS  STUNI  MS ID  
C_ACVIT  MS  MD_ID  Authentication Challenge  
Acknowledgment  TS  Authentication Result  MD_ID   
Acknowledgment  MS  MS ID  STUNI  
MS Kill with authentication  C_AHOY  TS  KILLI  MS ID  Kill shall always be authenticated  
C_ACVIT  MS  MS_ID  Authentication Challenge  
Acknowledgment  TS  Authentication Result  MS_ID  
Acknowledgment  MS  MS ID  KILLI  
Registration with IP connection Advice  Random Access Request  MS  MS ID  REG_ADDR  0000 00002 + C_SYScode  
Acknowledgment  TS  REGI  MS ID  C_WACK or C_NACK only  
C_AHOY  TS  IPI  MS ID  
C_UDTHU+AD  MS  MS ID  IPI  
Acknowledgment  TS  IPI  MS ID  
Unsolicited MS Radio Check  C_AHOY P_AHOY  TS  TSI  MS ID or Talkgroup  G/I indicates individual or talkgroup  
Acknowledgment  MS  MS ID  TSI  
Supplementary_user data Services supporting primary service  C_AHOY  TS  SUPLI  Calling Party MS ID  Inbound phase  
C_UDTHU+AD  MS  MS ID  SUPLI  
C_UDTHD+AD  TS  SUPLI  Called Party MSID  Outbound Phase if applicable  
Acknowledgment  MS  MS ID  SUPLI  


6.4.1 Registration 
6.4.1.1 Introduction 
Registration is a method of recording the area or group of areas where an MS is likely to be located within a wide area network. This information avoids searching for MSs throughout the whole network, consequently reducing call set-up time and TSCC loading. 
A secondary feature is that it provides a means of restricting the service to individual MSs to specific TSs by allowing the network to deny other registration requests (see clause 6.4.4.1.4). 
The registration strategy describes two types of registration. The first of these is explicit registration, where registration is achieved by means of an MS random access procedure. The second is implicit registration, where registration is achieved as the result of any PDUs exchanged between a TSCC and an MS. 
Explicit registration also enables MS to request power save. Power save is prescribed in clause 6.4.7. 
An MS radio check procedure enables the TSCC to poll an individual MS for its presence at any time. This procedure is described in clause 6.4.12. 

6.4.1.2 The Principle 
The principle of registration requires that the MS shall only retain a valid registration record where it has received confirmation that it is the same record as that currently held within the network. If an MS fails to receive a response to a registration request, this could be due to: 
a) 
the registration request not being received by the network, in which case the network will regard the previous successful registration by the unit as the currently-valid registration record; 

b) 
the registration request being accepted by the network but the service answer response not being received by the MS, in which case the network will regard the unsuccessful registration by the unit as the currently-valid registration record. 


Accordingly, in such cases the MS is not able to confirm whether the network holds a valid record for the unit and if it does, whether it is the previous registration or the present registration. The MS shall therefore only replace its current registration record when a successful registration is confirmed by a suitable service answer response to the registration service random access request from the TSCC. 
The registration record shall be extracted from the C_SYScode using the following procedure: 
a) 
The MS extracts the SITE parameter from the C_SYScode. 

b) 
The MS then extracts the SYS_AREA information from the SITE parameter by masking the most significant bits (MSBs) with DMRLA. 


C_SYScode 

Registration Record 
EXAMPLE: Figure 6.19 illustrates a Large Network. The SITE parameter for a Large Network has a field length of 8 bits. DMRLA in this example = 6, therefore the most significant 6 bits become the registration record. 


6.4.2 MS Parameter Volatility 
In order to satisfy the procedures specified in this clause and Annex D, the MS shall retain certain parameters for each selected network when the MS is switched off. Other parameter shall be discarded when the MS is switched off. Table 6.8 lists the behaviour of each applicable parameter. 
Table 6.8: MS Parameter Volatility for Registration 

Parameter  Clause  Fixed during MS Personalization. Retained when MS is switched off  Changes during operation and retained when MS is switched off  Changes during operation and discarded when MS is switched off  
The Current Registration Record  6.4.4  X  
List of Denied Registrations  6.3.2.2.3 (see note 1)  X  
NOTE 1: At least 8 different values of SYS_AREA information element from the received C_SYScode verified when acquiring the TSCC on which a registration attempt by the MS has been denied. These shall be managed as a FIFO list: when the MS has a full list of entries, any further addition to the list shall displace the earliest entry. NOTE 2: Individual entries in the Denied Registrations list may be deleted by expiry of the denied registrations timer T_DENREG (see clauses 6.3.2.2.3.1 and 6.4.4.1.4).  


6.4.3 Action on Confirmation of a TSCC 
An MS shall not make any attempt at random access until TSCC confirmation has been achieved. When an MS confirms a TSCC it shall either: 
a) 
if the Reg information element (carried in C_ALOHA PDUs and in the CACH) is zero, the MS shall not seek to register by random access nor shall it create or alter any registration record. The MS shall note that registration is not required and that it is free to initiate calls; or 

b) 
if the verified SYS_AREA information element from the C_SYScode matches any entry in the list of denied registrations then the MS shall not be authorized to acquire the TSCC under test. The MS shall resume hunting; or 


c) if the MS does not hold a successful registration record for the verified SYS_AREA, the MS shall attempt to register by random access. The Reg information element carried in the C_ALOHA PDUs and in the CACH shall be the same value. NOTE: The Reg information element in the C_ALOHA PDU is always applicable and not affected by the 
Mask(C_ALOHA) parameter. Once confirmed on a TSCC, the MS shall not transmit any PDU other than: 
a) registration service random access request PDU; or 
b) an acknowledgement to an authentication challenge as specified in clause 6.4.8.3; until it holds a successful registration record relating to the verified SYS_AREA unless Reg = 0. If the MS holds a successful registration record relating to the verified SYS_AREA code, it is free to transmit any PDU 
conforming to the requirements of the present document. 

6.4.4 Registration Procedures 
6.4.4.0 Registration Procedures - Introduction 
The procedures for explicit MS registration are prescribed in clauses 6.4.4.1 to 6.4.4.9. Figures 6.21 to 6.23 illustrate the registration process MSCs including the optional authentication step. 

6.4.4.1 Registration by Random Access 
6.4.4.1.0 Registration by Random Access - Introduction 
When an MS determines that it is required to register, it shall attempt to do so by random access using the procedures defined in clause 6.2. If the random access timeout C_RandTC expires and the MS has not sent a random access registration request, the MS shall enter the TSCC acquisition procedures. 
The information elements in the random access request are passed to the CC layer -set appropriately as prescribed in table 6.9. 
Table 6.9: C_RAND information elements for the MS Registration Service 
Information Element (IE)  Length  length  Alias  Value  Remark  
Service_Options  7  1  02  Reserved   
1  02  Privacy (see note)  
1  IP_INFORM  02  MS is not advising IP connection  
12  MS is advising IP connection  
3  PS_RQ  02  Power Save not requested  
0012 to 1112  Power Save requested  
1  REG_DEREG  02  If IP_Inform = 02 the MS is attempting to de-register. If IP_Inform = 12 the MS is deleting an IP connection  
12  If IP_Inform = 02 the MS is attempting to register. If IP_Inform = 12 the MS is attempting to register and/or adding an IP connection  
Proxy Flag  1  PROXY  02  
Target Address Contents  2  TRGT_ADR_CNTS  002  000000002 + C_SYSCode  
012  Subscription/Attachment Talk Group ID  
102  TATTSI  
112  Reserved  
Appended UDT Short Data  2  If TRGT_ADR_CNTS<>102  002  Reserved  
If TRGT_ADR_CNTS = 102  002 to 102  Number of appended blocks required to transport the talkgroups minus one  
Service_Kind  4  REG_SRV  11102  Registration Service  
Target_address or Gateway  24  If TRGT_ADR_CNTS = 002  Value  000000002 + C_SYSCode  
If TRGT_ADR_CNTS = 012  Subscription/Attachment Talk Group ID  
If TRGT_ADR_CNTS = 102  TATTSI  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE: Privacy is not defined in the present document.  

Immediately upon sending the registration request by random access, the MS shall delete its current SYS_AREA code retained from its previous registration. 
Valid TSCC responses to the random access request are C_WACKD(Reason = Wait) more signalling to follow, C_ACKD(Reason = Reg_Accepted), C_NACKD(Reason = Reg_Refused), C_NACKD(Reason = Reg_Denied), or C_AHOY(Source Address = Authentication_Challenge) (see clause 6.4.8). ACK type PDUs shall set the target address to MS individual address and the Source Address to REGI. 
If TRGT_ADR_CNTS = 002, the TSCC shall only send a response to the random access request if the C_SYScode in the REG_ADDR information element of the C_RAND matches the C_SYScode being transmitted by the TSCC. If the REG_ADDR information element in the C_RAND received by the TSCC does not match the C_SYScode being transmitted by the TSCC, the TSCC shall discard the C_RAND registration message. 
Clauses 6.4.4.1.1 to 6.4.4.1.5 describe the possible responses to an MS registration request. The final acknowledgement PDU defines if the MS is permitted access to that TSCC. 
If the final acknowledgement to the MS from TSCC is Registration Refused, the MS shall resume hunting. If the MS does not locate an alternative TSCC that permits access, the MS returns to this TSCC and repeats the procedure. On a highly loaded system, this may result in high registration traffic. If however the TSCC sends a Registration Denied as the final acknowledgement, the MS adds the SYS_AREA to a list of denied registrations. The procedure defined in clause 6.4.3, b) then bars the MS from making any further random access registration requests to this TSCC. Registration denied is therefore the preferred TSCC final response to reject an MS from acquiring a particular TSCC. 
The denied registration list shall be cleared when the MS is switched off. 

6.4.4.1.1 Intermediate Acknowledgement 
If the TSCC cannot respond immediately to the random access request, it can send a C_WACKD(Reason = Wait) to the MS. This acknowledgement shall start timer TNP_Timer in accordance with clause 6.2.1.2. If further signalling is not received after the expiry of the timer, the MS shall comply with the procedures in clause 6.4.4.1.6. 

6.4.4.1.2 Registration Accepted 
The registration attempt shall be considered successful on receipt of ACK(Reason = Reg_Accepted). The MS shall record the SYS_AREA information from the TSCC C_SYScode. The MS shall replace any old registration record with the new record extracted from the C_SYScode. 

6.4.4.1.3 Registration Refused 
The registration attempt shall be considered to have been unsuccessful if the MS receives C_NACKD(Reason = Reg_Refused). 
The MS shall resume hunting, and after confirming a TSCC and receiving a suitable C_ALOHA PDU, shall re-commence a random access registration attempt. 
Until a successful registration is achieved, the MS shall not attempt to transmit other than random access registration service requests. 

6.4.4.1.4 Registration Denied 
The registration attempt shall be considered denied if the MS receives C_NACKD(Reason = Reg_Denied). The MS shall add the SYS_AREA code to the list of denied registration records and enter the TSCC acquisition procedures. 
If T_DENREG is non-zero the MS shall start a timer equal to the value of T_DENREG for that entry in the denied registration list. 

6.4.4.1.5 Challenge and Response Authentication 
The TSCC may apply an intermediate step of authenticating the MS during the registration procedure. 

Figure 6.20 illustrates an MS registration procedure with the optional steps "B" and "C": 
a)  At "A" the MS makes a random access registration attempt.  
b)  The AHOY PDU at "B" is the acknowledgement to the random access and challenges the MS to respond with  
its authentication response. The timer TNP_Timer timer is started.  
c)  "C" is the MS response to the TSCC containing the authentication response.  
d)  The final C_ACKD or C_NACKD is sent by the TSCC to the MS.  

The specific authentication procedures are prescribed in clause 6.4.8. 

6.4.4.1.6 Registration Attempt Times Out 
If the MS times out from waiting for further signalling for the registration (expiry of timer TNP_Timer), it shall enter the TSCC acquisition procedures. 

6.4.4.1.7 Registration Demand Received During Random Access Registration 
The TS shall avoid conflict in the protocol. If, while waiting for a response to a random access registration request PDU, the MS receives a C_BCAST(Announcement_type = MassReg) PDU applicable to the MS, the MS shall note the information elements from the C_BCAST and initiate the procedure specified in clause 6.4.5.1 then continue with its registration request in accordance with the random access procedures. 
6.4.4.1.8 No answer response Received after the Maximum Number of Random Access Attempts 
If no response is received within WAIT+1 slots after the MS has transmitted NRand_NR random access attempts, the MS shall make no consequential changes to its registration record. 

6.4.4.1.9 Registration Action on Switch-on or Equivalent 
If an MS determines that the TSCC requires MS to register, the MS shall register by random access on switch on or change of selected network. 

6.4.4.1.10 Registration Scenario MSC 
Illustration of the explicit registration procedure as defined in clauses 6.4.4.1.0 to 6.4.4.1.9. 
MSC MS_Registration 

CCL_MS 
DLL PL 





6.4.4.1.11 Registration with MS Authentication 
process RegistrationWithAuthentication 


WaitRaSlot 




'MaskCheck' 




WaitTsRsp 
1(2) 
Registration required has been identified and the random access slot selected. 
Assumed to occur before TRand_TC timeout 
Assumed to result in selected slot available 
Set a timer/counter for the NWait time 
Figure 6.22 (sheet 1 of 2): Registration with Authentication SDL 


6.4.4.1.12 Acceptance of User Initiated Service Requests 
For voice and data services, users request a particular service by transmitting a random access service request. The TSCC may require MS to be registered with that TSCC before accepting such a service request. If the TSCC is configured such that service requests are only accepted to registered MS and an MS that is not registered makes a service request then the TSCC shall respond with a C_NACKD(Reason = MS_Not_Registered). 

6.4.4.1.13 Talkgroup Subscription and Talkgroup Attachment 
6.4.4.1.13.0 Talkgroup Subscription and Talkgroup Attachment - Introduction 
A TierIII MS may be a member of one or more talkgroups. Talkgroups may be permanently embedded into MS during personalization or dynamically assigned using the DGNA procedures defined in clause 6.6.8. In addition, the present document defines three permanent talkgroups ALLMSIDL ID, ALLMSIDZ ID and ALLMSID, (see clause A.4). A MS does not perform Talkgroup Subscription or Talkgroup Attachment to these three permanent talkgroups. The procedures in this clause describe Talkgroup Subscription and Talkgroup Attachment. An MS shall not perform DMR Talkgroup Attachment for the talkgroups that have been permanently assigned to an MS or dynamically assigned using DGNA. 
Talkgroup Subscription and Talkgroup Attachment allow an MS to inform the TSCC of a particular talkgroup of interest. The TSCC may make use of this information, when setting up a talkgroup call, to: 
a) 
Talkgroup Subscription - The TSCC only includes radio sites that contain subscribed MS units. This results in optimized system frequency usage, as the call is not set-up on radio sites that do not contain subscribed MS units. Therefore an MS who has acquired a TSCC but not successfully subscribed to a talkgroup is only able to receive and take part in a call to that talkgroup if another MS is currently subscribed to that talkgroup at that site; or 

b) 
Talkgroup Attachment - Talkgroup Attachment is a process to ensure that when an MS selects a talkgroup to use, the MS is authorized to use it and the network knows the MS individual address that is affiliated to that group. When the MS user selects a talkgroup to use, the talkgroup ID Attachment procedure enables MS and the TSCC to exchange information about the currently attached talkgroup identities in the MS i.e. the addresses that the MS will regard as the valid talkgroup addresses when it is checking if outbound Channel Grant PDUs are addressed to a particular talkgroup. As a result of the talkgroup Attachment the radio network also knows to which subscribers the talkgroup call shall be set-up and hence which radio sites need to be included when creating the call. Until a talkgroup attach procedure has completed successfully that talkgroup group is not available to the MS. An MS may attach to one or more talkgroups. The MS may attach talkgroup identities when it initially registers with a TSCC. The MS may also later initiate the Attachment procedure by another registration procedure (perhaps to add another talkgroup). (Except for the permanently held talkgroups) an MS shall only be included in a talkgroup call if the MS has previously successfully attached using the procedures in this clause. 



6.4.4.1.13.1 Registration with Single Talkgroup Subscription/Attachment 
The MS may include a Subscription/Attachment request for one talkgroup along with its registration request. 
A registration with a talkgroup Subscription/Attachment transaction may not be combined with powersave or IP_INFORM. The value of PS_RQ shall therefore be set to 0002. and IP_INFORM set to 02. 
If requesting registration along with talk group Subscription/Attachment, the MS shall transmit a C_RAND with 
Trgt_Adr_Cnts = 012 and the Target address or Gateway value equal to the Subscription/Attachment talkgroup ID. On receipt of the C_RAND, the TSCC shall send an acknowledgement, Source Address = REGI, Target Address = address of the MS making the C_RAND. If the TSCC accepts both the registration request and the talk group Subscription/Attachment request, it shall transmit a C_ACK(Reason = Reg_Accepted) to the MS. Upon reception the MS shall behave as defined in clause 6.4.4.1.2. 


Random 

Ack 

Aloha 
Access RQ 
Response 
Figure 6.24: Registration with Single Talkgroup Subscription/Attachment 
Figure 6.24 illustrates the exchange of PDUs for a single talkgroup Subscription/Attachment. In this illustration, the registration is successful: 
a) 
The MS sends a C_RAND at "A" PS_RQ = 0002, IP_INFORM =02, Trgt_Adr_Cnts = 012. Target Address = subscription/attachment talkgroup address; 

b) 
At "B" the TSCC sends a C_ACK (Reason = Reg_Accepted), Source Address = REGI, Target Address = MS individual address making the request. 


If the TSCC does not accept the registration request, it shall transmit either a C_NACK(Reason = Reg_Refused) or C_NACK(Reason = Reg_Denied) to the MS. Upon reception the MS behaves as defined in clauses 6.4.4.1.3 and 


6.4.4.1.4 respectively. 
It is possible that the TSCC accepts the registration request to a site but does not accept the TG Subscription/Attachment request. In this case the TSCC shall transmit a C_ACK(Reason Code = Subscription/Attachment (0110 01012 and Response_Info = 000 00002). Upon reception of this, the MS may enter the 
TSCC acquisition procedures for a radio site that does allow the TG Subscription/Attachment or become confirmed on this TSCC. 
To delete a previously accepted talkgroup Subscription/Attachment the MS shall use the single talkgroup Subscription/Attachment procedure with the target address set to ADRNULL. 
6.4.4.1.13.2 Registration with Talkgroup Subscription/Attachment List 
In its registration request the MS may inform the TSCC that it also requests to subscribe/attach to a list of talkgroups. 
A registration with a talkgroup Subscription/Attachment transaction may not be combined with powersave or IP_INFORM. The value of PS_RQ shall therefore be set to 0002. and IP_INFORM set to 02. 
The Subscription/Attachment list permits up to seven talkgroup addresses to be requested to the TSCC. The addresses in the list (ADDRESS1 to ADDRESS7) shall be individually validated by the TSCC.as illustrated in the acknowledgement PDU. Table 6.10 illustrates the validation bit allocation where 'x' is the validation bit for that talkgroup address. 
Table 6.10: Index Pattern 

List  Response_Info bits  
ADDRESS1  x-----­ 
ADDRESS2  -x----­ 
ADDRESS3  --x---­ 
ADDRESS4  ---x--­ 
ADDRESS5  ----x-­ 
ADDRESS6  -----x­ 
ADDRESS7  ------x  

If the Talkgroup Subscription/Attachment transaction is completed without errors and registration is accepted, the calling TSCC shall send a final C_ACK acknowledgement to the calling MS. The Response_Info bits in the C_ACK((Reason = Reg_Accepted (0110 00102)) or C_ACK (Reason Code = Reg_Subscription/Attachment service 
(0110 0101) shall contain one bit for each of the seven talkgroup addresses sent to the TSCC. If the corresponding 
Response_Info bit is a 12 then the TSCC has accepted that talkgroup address. If the TSCC Response_Info bit is a 02 then the TSCC has rejected that talkgroup address. The TSCC may accept the registration but send Response_Info = 000 00002. In that case the TSCC has rejected all of the talkgroup Subscription/Attachment addresses in the list. 
To remove previously accepted talkgroup Subscriptions/Attachments, the talkgroup Attachment transaction shall be repeated with the appropriate talkgroups replaced by ADRNULL. 
To modify the talkgroup Subscriptions/Attachments, a new talkgroup transaction shall be performed and the existing list shall be replaced in the TSCC with the list from the new transaction. The different scenarios for talkgroup Subscription/Attachment modification (additions or deletions) or channel changes include: 
 Trgt_Adr_Cnts = 002: 
-New Subscription List size = 0. 
-Send Registration without TG Subscription. 
 Trgt_Adr_Cnts = 012: 
-New Subscription List size = 1. 
-Send Registration with single TG Subscription. 
 Trgt_Adr_Cnts = 102: 
-New Subscription List size > 1. 
-Send Registration with new TG Subscription List. 
 If Trgt_Adr_Cnts = 1 and ADRNULL is sent all TG Subscription (one or more) are deleted. 
If requesting registration along with a talkgroup Subscription/Attachment list, the MS shall transmit a C_RAND with Trgt_Adr_Cnts = 102, the Target address = the Gateway addresses TATTSI and Appended_UDT_Short_Data = the number of appended UDT blocks to transport the Subscription/Attachment list. 
On reception of the C_RAND, the TSCC may immediately respond with a C_AHOY to the requesting MS for it to upload the talkgroup Subscription/Attachment list. The TSCC will then check both the registration request and the talkgroup Subscription/Attachment list at the same time. Alternatively, the TSCC may validate registration before requesting the talkgroup Subscription/Attachment list. 
If the TSCC does not accept the registration request, it shall transmit either a C_NACK(Reason = Reg_Refused) or C_NACK(Reason = Reg_Denied) to the MS, Source Address = TATTSI, Target Address = address of the MS making the C_RAND. Upon reception the MS shall behave as defined in clauses 6.4.4.1.3 and 6.4.4.1.4 respectively. 
TSCC Outbound 



UDT Head for 
Aloha 
Ahoy 

Appended Data 
Random 

Ack 

Appended Data -
Recipient of 
Access RQ 
Response 
Subscr/Attach Data 
message 
Figure 6.25: Registration with Talkgroup list Subscription/Attachment 
Figure 6.25 illustrates a Registration with Talkgroup/Subscription Attachment list. To request the Subscription/Attachment list, the TSCC transmits a C_AHOY as illustrated in table 6.11. 
Table 6.11: C_AHOY Information Elements for Talkgroup Subscription/Attachment List 
Service_Options_Mirror  7  
Service_Kind_Flag  1  12 - Talkgroup Subscription/Attachment Data  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02 - Target address is an individual MS address  
Appended_Blocks  2  As necessary  
Service_Kind  4  11102 - Registration Service  
Target address  24  Address of Requesting MS  
Source Address or Gateway  24  TATTSI  

The Service_Kind flag value of 12 indicates the TSCC is requesting the talkgroup Subscription/Attachment list and not performing an authentication challenge. Upon reception of the C_AHOY the MS shall immediately respond by 
transmitting the Subscription/Attachment talkgroup list via UDT. The Subscription/Attachment talkgroup IDs shall be transported with UDT Header information elements of UDT Format (Address Format: 00012) as defined in clause B.3.2 of the present document and TATTSI as the Target Address. A (Response Required) = 0 and Supplementary Flag = 1 as 
it is supporting the registration service. Note that A = 0 because an ACK is not required for the upload process. Rather because the upload is for a supplementary service an ACK from the primary service (registration) will occur.  
Upon reception of the talkgroup Subscription/Attachment list, the TSCC checks each TG in the list. If registration and the talkgroup Subscription/Attachment list is accepted by the TSCC it transmits a C_ACK(Reason = Reg_Accepted) or a C_ACK (Reason Code = Subscription/Attachment (0110 01012) Response_Info = 11111112 that indicates all 
talkgroups have been accepted (see table 6.10) to the MS. This is true regardless of the number of Subscription/Attachment TGs the MS has sent. Upon reception the MS behaves as defined in clause 6.4.4.1.2. This entire process is illustrated in figure 6.26. 
aligned timing TSCC 
TSCC Outbound 
MS(A) Inbound 
UDT  
AL  
AL  AH  AL  AK  AL  
M=24  
A R  B  H  C AD  
 D  


TSCC Outbound 
Recipient of message 
Figure 6.26 illustrates the exchange of PDUs for a Subscription/Attachment list: 
a) 
At "A", the MS sends a C_RAND, Trgt_Adr_Cnts = 102, PS_RQ = 0002, IP_INFORM = 02. target address = 

TATTSI, appended_UDT_Short_Data = the number of appended UDT blocks to transport the Subscription/Attachment list. 

b) 
"B" - The TSCC sends a C_AHOY to the requesting MS. 

c) 
At "C", the MS sends a HEAD + Appended data that contains the list. 

d) 
At "D" the TSCC sends a C_ACK(Reason = Reg_Accepted) or a C_ACK (Reason Code = 


Subscription/Attachment (0110 01012) Response_Info = 11111112 to the MS that indicates all talkgroups have been accepted. 
It is possible that the TSCC accepts the registration request to a radio site but does not accept all of the Subscription/Attachment talkgroups requested. In this case the TSCC shall transmit a C_ACK(Reason Code = Subscription/Attachment (0110 01012) Response_Info = a pattern that indicates which talkgroups have been accepted or 
rejected) see table 6.10. For an address where MS sent an ADRNULL the response shall be 0. Upon reception of the acknowledgement, the MS may either remain on the TSCC or enter the TSCC acquisition procedures for a radio site that does allow the requested talkgroup Subscriptions/Attachments. 
The registration procedure may combine Subscription/Attachment with Authentication. The registration with talkgroup Subscription/Attachment along with authentication is illustrated in figure 6.27. In this example Subscription/Attachment follows authentication. 



UDT Head for 
Aloha 
Ahoy 

Appended Data 

Random 

Ack 

Appended Data ­
Recipient of 
Access RQ 
Response 
Subscr/Attach Data 
message 
Figure 6.27: Authentication and Talkgroup List Subscription/Attachment 
With the addition of authentication into the registration and talkgroup Subscription/Attachment process, the MS responds to the C_AHOY (challenge) with the C_ACK challenge response. The C_ACK is immediately followed by a C_AHOY for the requesting MS to upload via UDT with talkgroup Subscription/Attachment list. The TSCC shall send out one C_AHOY followed by one C_ALOHA (Mask = 24, Address = requesting MS) to properly reserve the inbound channel.  
Alternatively, the Authentication may follow the talkgroup Subscriber/Attachment list step. In this case, upon reception of the C_RAND, the TSCC may immediately respond with a C_AHOY to the requesting MS for it to upload the talkgroup Subscription/Attachment list followed by Authentication. Figure 6.28 illustrates the process. 




UDT Head for 
Aloha 
Ahoy 

Appended Data 

Random 

Ack 

Appended Data ­
Recipient of 
Access RQ 
Response 
Subscr/Attach Data 
message 
Figure 6.28: Talkgroup list Subscription/Attachment and Authentication 




6.4.5 Mass Re-registration 
6.4.5.0 Mass Re-registration -Introduction 
A wide area network relies on the integrity of the registration records for MS location management. It is possible that the records may be suspect for many reasons including loss of connections between the various TS. This clause describes a mechanism whereby a TSCC may re-establish those registration records from the MS that are currently confirmed on that TSCC. A broadcast PDU is transmitted on the TSCC that causes all applicable MS that are confirmed to re-register by random access. If this re-registration procedure is activated it is essential to avoid congestion from the increased random access activity that would result. To manage this process therefore, a Reg_Window information element is transmitted in the broadcast PDU that permits MS to make their random access registration attempt over an extended period of time. 
An MS shall note the delay parameter Reg_Window from the C_BCAST(Announcement_type = MassReg) PDU it receives and shall use table 6.12 to derive from it a time window to make a random access registration attempt. 
The Mass registration may be used to demand a registration from a specific MS by setting the MS address in the Mass Registration Broadcast PDU to the individual address of an MS and setting the Mask = 24. 

6.4.5.1 Procedure for MS on Receipt of Mass Re-registration Broadcast 
When confirmed on a TSCC an MS shall make use of information C_BCAST(Announcement_type = MassReg). This PDU may be transmitted on the TSCC to cause all MS or a subset of the MS population to re-register by random access. 
An MS shall note the population subdivision contained in each C_BCAST(Announcement_type = MassReg) PDU that it receives (as prescribed in clause 6.1.3) using the qualifier (Mask) and the address field from the C_BCAST PDU. For Mask = 0 to 24, the PDU is applicable to the MS if the "Mask" least significant bits of the C_BCAST address information element match the "Mask" least significant bits of its individual address. 
Table 6.12: Reg_Window Lookup for Mass-Registration 

Reg_Window  Treg_Window  
0  Cancel Mass Reg  
1  0,5  
2  1  
3  2  
4  5  
5  10  
6  20  
7  30  

Reg_Window  Treg_Window  
8  100  
9  300  
10  1 000  
11  3 000  
12  10 000  
13  30 000  
14  100 000  
15  200 000  

If the MS determines that the C_BCAST(Announcement_type = MassReg) PDU is applicable, the MS shall: 
a) 
examine the Reg_Window information element from the C_BCAST(Announcement_type = MassReg). If the Reg_Window information element is non-zero, the MS shall derive the window size TReg_Window (in seconds) for a Random Access Registration attempt using table 6.12; 

b) 
choose a random number (using a statistically uniform distribution) from zero to TReg_Window; 

c) 
count real time seconds until the random value is reached; 

d) 
make a random access registration attempt using the procedures prescribed in clause 6.4. If the MS is in power save mode, the PowerSave_RQ information element in the Service_Options of the registration service request shall be set to maintain the power save mode currently in operation; 

e) 
also count real time seconds until the TReg_Window slot is reached. If the MS receives other applicable C_BCAST(Announcement_type = MassReg) containing a non zero Reg_Window information element before Reg_Window is reached the MS shall ignore that C_BCAST PDU; 

f) 
if Power Save is in operation, the TSCC shall ensure that the Mass-Registration is transmitted in the wake period. 


If the MS is confirmed on a TSCC and the MS receives other applicable C_BCAST(Announcement_type = MassReg) containing a zero Reg_Window information element the mass re-registration procedure and any pending random access attempt shall be cancelled. If such a broadcast is received when the random access procedure is in progress that random access procedure shall be completed before the mass re-registration procedure is cancelled. 
If the MS leaves the currently confirmed TSCC, and successfully confirms a different TSCC, any Mass-registration procedure shall be cancelled. 


6.4.6 De-registration 
When an MS is switched off, or a user initiated change of system is invoked, the MS may first attempt to de-register from the current system. It shall attempt to do so by random access using the procedures defined in clause 6.2. In the Service_Options of the registration service request the information elements shall be set to IP_Inform = 02, 
Reg_Dereg = 02 and PowerSave_RQ = 0002. 
When an MS switch-off or change of network is performed, the MS shall start a timer T_Dereg. 
Immediately upon sending the de-registration request by random access, the MS shall discard its current SYS_AREA code retained from its previous registration. 
The only valid TSCC response to the de-register random access request shall be C_ACKD(Reason = Reg_Accepted). If the acknowledgement is received, the MS shall complete the switch off or change of network. 
If timer T_Dereg expires, the MS shall abandon the de-registration procedure and complete the action of switch-off or change of network. 

6.4.7 Power Save 
6.4.7.1 Overview 
Tier III systems may support a synchronized power saving feature. 
An MS can synchronize to the timing parameters that have been exchanged with the TSCC and adopt a periodic sleep cycle. Calls to that MS shall be synchronized to the wake-up periods (power save frames) that are agreed between MS and the TSCC. 

2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 12 1 

2 
l 
e 
n 
n 
a 
h 
c A M D 
T 
PS_Counter=n [002] 
The power save frames are defined by the PS_Counter information element, a sub-set of the Common_Slot _Counter broadcast in the CACH. A sleeping MS shall wake for a designated power save frame. If the TSCC has a PDU or transaction for the sleeping MS, that PDU shall be queued until a designated power save frame is transmitted on the TSCC. MS or other entity that initiates a transaction to a sleeping MS (or group of MSs) shall be queued on the TSCC until the designated power save frame has been reached. Figure 6.29 illustrates a power save frame. For each logical channel there are eight slots available to signal MS during a designated power save frame: 
a) 
The MS and TSCC shall have previously synchronized a particular wake frame. 

b) 
The TSCC shall know when a particular MS has woken and is able to receive signalling addressed to that MS. If several MSs are in a fleet and are party to a talkgroup call, all MSs in that particular talkgroup may share the same wakeup frame. The way in which the TSCC manages the power save and allocates particular wakeup frames is not prescribed in the present document. 

c) 
Different MSs sharing a common TSCC may have differing power save and the TSCC/MSs shall be able to deal with this. 

d) 
The Short LC that carries the Power Save Counter does not have to be continuously transmitted. When MS have received a Power Save Short LC they are able to calculate power save frames from that point. MS may then refresh by occasional appropriate short LC PDUs. 



6.4.7.2 Power Save Procedures 
6.4.7.2.1 Basic Power Save Procedures 
For an MS to activate power save, it registers with the TSCC. In the registration service request the MS may ask for power save it wishes to employ, by sending a non-zero three bit PowerSave_RQ information element with a number between 1 and 7. A registration service request with a zero PowerSave_RQ indicates that no power save is required or a previous power save is cancelled. The TSCC responds positively if it supports power save for that request, with a PowerSave_Offset information element (length 7) in the range 1, 1 to 3, 1 to 7, 1 to 15, 1 to 31, 1 to 63 or 1 to 127. 
Table 6.13: Power Save Information Elements During MS Registration 
Power Save  PowerSave_RQ  PowerSave_Offset  
OFF  0  0  
1:2  1  1  
1:4  2  1 to 3  
1:8  3  1 to 7  
1:16  4  1 to 15  
1:32  5  1 to 31  
1:64  6  1 to 63  
1:128  7  1 to 127  

If the MS has requested Power Save and the TSCC does not wish to permit that MS access, the TSCC shall respond C_NACKD(Reason = Reg_Denied). 
If the MS has requested Power Save and the TSCC responds with PowerSave_Offset = 0, the MS shall interpret this as meaning registration accepted but Power Save either not supported or not available.  
A PowerSave_RQ = 1 indicates the MS shall sleep for one Power Save Frame and awake for the second. A "2" indicate 1 awake and 3 sleeping. A "3" indicates 1 in 8 awake and so on. In this example the greatest power save would be "7" indicating 1 in 128 awake as illustrated in table 6.13. 
The TSCC responds with an acknowledgement containing a PowerSave_Offset information element (the Response_Info information element in the acknowledgement PDU) that indicates the power save frame number that the TSCC will send signalling to that particular MS. The TSCC may therefore average out signalling across all power save frames for differing fleets (or differing talkgroups). The frame number is read by the MS and a mask applied according to the power save request. The answer gives the power save frame number for that power save value asked for in the registration request. The MS can then calculate when to wake for incoming traffic. 
EXAMPLE: An MS requests a power save of 4 by setting the value of PowerSave_RQ = 2 in the registration service request. The TSCC responds with Powersave_Offset = 2. 
The PS_Counter is counting up continuously. Suppose the PS_Counter at this moment = 65decimal. 
Table 6.14: Power Save Example - MS State 

PS_Counter  Count  Mask Counter with PowerSave RQ  
    ..  
65  010 00012  0  1  0  0  0  0  1  
66  010 00102  0  1  0  0  0  1  0  
67  010 00112  0  1  0  0  0  1  1  
68  010 01002  0  1  0  0  1  0  0  
69  010 01012  0  1  0  0  1  0  1  
70  010 01102  0  1  0  0  1  1  0  
    ..  ..  ..  ..  ..  ..  ..  

.. 
-
-
-
-
-
-
MS state  
..  
Sleep  
Wake  
Sleep  
Sleep  
Sleep  
Wake  
..  

Table 6.14 illustrates how a TSCC determines when an MS is awake. The TSCC applies a mask of length PowerSave_RQ. In this example the mask leaves two bits. When the masked PS_Counter equals the PowerSave_Offset the TSCC may signal the MS. 
MS can sample the CACH at any time, read the Common_Slot Counter and determine when the wake frame will be transmitted. The MS may then sleep until a point at which its wake frame is scheduled. A PDU addressed to the MS by its individual address shall cause the MS to awaken for T_Awake seconds. Each MS individually addressed or applicable talkgroup address PDU transmitted on the TSCC or MS shall refresh T_Awake. If no PDUs have been transmitted or received by the MS when T_Awake expires the MS shall return to its sleeping state retaining its previous power save settings. 
If an MS awakes and receives an applicable C_AHOY PDU for a OACSU call that will result in a payload channel being assigned, the MS shall stay awake for a time T_Pending for the Channel Grant PDUs to be transmitted. When that call is completed and the MS returns to the TSCC, the MS shall wait for T_Awake seconds and then return to the sleeping state. 
If an MS awakes and receives an applicable C_AHOY PDU for a FOACSU call that will result in a payload channel being assigned, the MS shall stay awake for a time T_AnswerCall for the Channel Grant PDUs to be transmitted. When that call is completed and the MS returns to the TSCC, the MS shall wait for T_Awake seconds and then return to the sleeping state. 
If while awake, the MS receives a C_MOVE PDU, the MS shall retain its T_Awake timer and return to its sleeping state after T_Awake expires, unless the move to the replacement TSCC causes the MS to re-register when new power save information elements shall be exchanged. 



6.4.8 Authentication Procedures 
6.4.8.0 Authentication Procedures - Introduction 
The procedures rely on a key that is shared between an individual MS and the TS. When authenticating an MS, a convenient point for applying the authentication procedure is during MS registration. When an MS attempts to register by random access, the TSCC sends a random number in a C_AHOY PDU (the challenge). The MS calculates the response to the challenge using the RC4 keystream generator, keyed with the concatenation of the random number followed by the key, to generate 259 bytes of pseudo-random keystream. The first 256 bytes are discarded, with the last 3 bytes being used. 
The authentication procedure may include an optional step using an additional 3-byte key which is factory coded into the MS, referred to as PSN (Physical Serial Number) (as in Figure 6.30). Where PSN is being used by an MS, the PSN shall be applied as an exclusive-or operation on the challenge response before being transmitted. The TS shall know the PSN of an MS and shall apply the same exclusive operation when generating the corresponding X response for comparison. In order to provide for backward compatibility for MS that do not support a PSN, a TS may apply a PSN of zero. Refer to clause 6.4.8.1.2 for further details on the definition of PSN. 

NOTE: The final XOR using PSN applies only if PSN is being used for the Authentication procedure. 
Figure 6.30 illustrates the mechanism. The MS calculates the response to the challenge. The TSCC uses the same algorithm and the same K and RAND values as the MS. The TSCC then compares the expected response with the actual response. If the responses match then the authentication is considered successful. 
Tables 6.15 and 6.16 illustrate test vectors results when applying the algorithm, with and without PSN respectively. 
Table 6.15: Test Vectors without PSN 
Random Challenge  Key  Response  
7A16 1716 C016  0116 0216 0316 0416 0516 0616 0716 0816 0916 0A16 0B16 0C16 0D16 0E16 0F16 1016  E816 CA16 1D16  

Table 6.16: Test Vectors with PSN 
Random Challenge  "K" Key  PSN  Response  
7A16 1716 C016  0116 0216 0316 0416 0516 0616 0716 0816 0916 0A16 0B16 0C16 0D16 0E16 0F16 1016  0116 0216 0316  E916 C816 1E16  


6.4.8.1 Key Management 
6.4.8.1.1 Authentication Key (K) 
A 128 bit authentication key (K) is programmed into each MS. Key generation is specific to each manufacturer and not specified in the present document. The (K) of each MS is also programmed into the TS. (K) is intended to be valid for the lifetime of the MS, but if (K) is compromised for a particular MS, a manufacturer may choose to re-program the key 
(K)both in the MS and in the network management. 
NOTE: A compromised key only affects one MS and not the entire system. 

6.4.8.1.2 PSN (Physical Serial Number) 
PSN is a 3-byte number that is factory coded into a MS. Manufactures may use their own implementation to provide PSN as long as they adhere to the following rules: 
 
It shall be non-modifiable ID associated with every device. 

 
It shall be a unique number, for every device they produce. 

 
It shall be at least 3 bytes long. 

 
It shall be read using their provision tools to be later entered in the infrastructure configuration. 

 
It shall not be possible to be changed by any software or programming changes. 




6.4.8.2 Authentication Procedures 
The TSCC challenges an MS by transmitting a C_AHOY PDU to an individual MS address and information elements as illustrated in table 6.17. 
If the C_AHOY is transmitted as part of the registration procedure, the Service_Options_Mirror is set to the Service_Options from the C_Rand PDU. 
If the C_AHOY is transmitted in response to call set-up request, the Service_Options_Mirror is set to the Service_Options from the C_Rand PDU. 
If the C_AHOY is transmitted as an authentication poll from the TSCC (and unconnected with a registration procedure) the Service_options_Mirror shall be set to 000 00002. 
Table 6.17: C_AHOY Information Elements for Authentication Challenge 

Service_Options_Mirror  7  
Service_Kind_Flag  1  02  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02 - Target address is an individual MS address  
Appended_Blocks  2  002  
Service_Kind  4  11102 - Authentication Service  
Target address  24  Address of Challenged MS  
Source Address or Gateway  24  Authentication challenge value. The challenge value shall be in the range 00000016 to FFFCDF16  


6.4.8.3 Authentication Procedures for the MS 
If an MS receives an applicable C_AHOY PDU it shall pass the authentication challenge value to the authentication algorithm. The result from this algorithm is a 24 bit authentication result. That is transmitted to the TSCC by a C_ACKU PDU. The relevant information elements are illustrated in table 6.18. 
Table 6.18: Authentication Response Elements 

Response_Info  7  value  
Reason Code  7  0100 10002 - Authentication Response  
Reserved  1  02  
Target address  24  authentication challenge response  
Additional Information (Source Address)  24  MS individual address that is transmitting the acknowledgement  



6.4.9 MS Stun/Revive 
6.4.9.0 MS Stun/Revive - Introduction 
MS may be denied access to certain Tier III services using the stun mechanism. If an MS has been disabled by a stun procedure, the MS may not request nor receive any user initiated services on the network that performed the procedure. However hunting and registration, authentication, stun/revive and registration services shall remain active. 
While an MS is stunned, it shall retain and provide access to MS location services. 
In the present document, MS shall only be stunned/revived from a TSCC gateway STUNI as described in clause 6.4.9.1.1. 

6.4.9.1 MS Stun/Revive without Authentication 
6.4.9.1.0 MS Stun/Revive without Authentication - Introduction 

Figure 6.31 illustrates the mechanism where the MS does not demand authentication prior to the stun: 
a) 
The TSCC sends a C_AHOY from STUNI at "A". 

b) 
MS makes an appropriate acknowledgement at "B". 


6.4.9.1.1 Stun/Revive procedures for the TSCC 
The TSCC transmits a C_AHOY with the information elements as illustrated in table 6.19. 
Table 6.19: C_AHOY Information Elements for Stun/Revive 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02 to stun, 12 to revive  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02 - PDU addressed to an individual MS address  
Appended_Blocks  2  002  
Service_Kind  4  Supplementary Service - 11012  
Target address  24  Individual Address of the MS to stun  
Source Address or Gateway  24  STUNI (see clause A.4)  

a) If the response is C_ACKU (Reason = Message_Accepted) the TSCC shall interpret the acknowledgement that the stun/revive procedure was successful. 
TSCC Outbound 
MS(A) Inbound 
b) If the response is C_NACKU (Reason = MSNot_Supported) the TSCC shall interpret the acknowledgement that stun/revive is not supported by the MS. 

6.4.9.1.2 Stun/Revive Procedures for the MS 
If the MS receives an applicable stun/revive C_AHOY but the MS does not support stun/revive it shall respond with C_NACKU (Reason = MSNot_Supported). 
If the MS receives an applicable stun/revive C_AHOY and the MS supports stun/revive it shall examine the Service_Kind_Flag, call the appropriate stun or revive procedure and respond with C_ACKU (Reason = Message_Accepted). 


6.4.9.2 MS Stun/Revive with Authentication 
6.4.9.2.0 MS Stun/Revive with Authentication -Introduction 


Figure 6.32 illustrates the mechanism where the MS demands authenticates the TSCC prior to the stun: 
a) 
The TSCC sends a C_AHOY from STUNI at "A" to stun the MS. 

b) 
The MS makes its authentication challenge at "B" by transmitting a C_ACVIT PDU. This Ackvitation sent by the MS is the acknowledgement to the initial C_AHOY from the TSCC. 

c) 
At "C" the TSCC sends the challenge response to the MS. The MS authenticates the challenge response. If the challenge response is ratified by the MS, the MS stuns/revives and sends C_ACKU(Reason = Authentication_Response). If the challenge response fails authentication, the MS shall send C_NACKU(Reason = Recipient_Refused) ("D"), and the MS shall not stun. The TSCC may repeat step "C" if a response is not successfully received at "D". 

d) 
At "D" the final acknowledgement is sent to the TSCC. If the challenge response is ratified by the MS, the MS stuns/revives and shall send C_ACKU(Reason = Message_Accepted. If the challenge response fails authentication, the MS shall send C_NACKU(Reason = Recipient_Refused), and the MS shall not stun. The TSCC may repeat step "C" if a response is not successfully received at "D". 


6.4.9.2.1 Stun/Revive procedures with Authentication for the TSCC 
The TSCC transmits a C_AHOY with the information elements as illustrated in table 6.19. 
If the MS response is a C_Ackvitation (Target Address = challenge value, Source Address = MS_ID the TSCC shall interpret that PDU as an acknowledgement and that the TSCC is being challenged that the TSCC is authentic. 
The TSCC shall send the response C_ACKD(Reason = Authentication_Response) with the information elements as illustrated in table 6.20. 
Table 6.20: Authentication Response Elements 

Response_Info  7  Value  
Reason Code  8  0110 01002 Authentication Response  
Reserved  1  02  
Target address  24  The address of the stunned MS  
Additional Information (Source Address)  24  Authentication Challenge Response  

When the TSCC response to the challenged has been transmitted to the MS, the MS shall send a final acknowledgement: 
a) 
If the final acknowledgement transmitted by the MS is C_ACKU(Message_Accepted) the TSCC shall identify that the stun/revive procedure was successful. 

b) 
If the final acknowledgement transmitted by the MS is C_NACKU(Recipient_Refused) the TSCC shall identify that the authentication was unsuccessful. 



6.4.9.2.2 Stun/Revive procedures with Authentication for the MS 
If the MS receives an applicable stun/revive C_AHOY but the MS does not support stun/revive it shall respond with C_NACKU (Reason = MSNot_Supported). 
If the MS receives an applicable stun/revive C_AHOY the MS shall authenticate the TSCC by transmitting a C_Ackvitation with information elements as illustrated in table 6.21. 
Table 6.21: C_Ackvitation -MS Challenges the TSCC 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02 to stun, 12 to revive  
Reserved  2  02  
Appended_Blocks  2  002  
Service_Kind  4  Supplementary Service - 11012  
Target address  24  Authentication Challenge Value. The challenge value shall be in the range 00 000016 to FF FCDF16  
Source Address or Gateway  24  MS Individual Address  

The MS shall examine the response to the authentication challenge and validate the authentication. The MS shall then send a final acknowledgement C_ACKU(Reason = MS_Accepted) if the authentication was successful or C_NACKU(Reason = Recipient_Refused) if the authentication was unsuccessful. 
If the MS supports stun/revive it shall then examine the Service_Kind_Flag, and call the appropriate stun or revive procedure. 
Table 6.22: Final Acknowledgement 

Response_Info  7  Value  
Reason Code  8  MS_Accepted - 0100 01002  
Recipient_Refused - 0001 01002  
Reserved  1  02  
Target address  24  STUNI (see clause A.4)  
Additional Information (Source Address)  24  MS Individual Address  

6.4.10 MS Kill 
TSCC Outbound 
MS(A) Inbound 


6.4.10.0 MS Kill - Introduction 
MS may be completely and permanently disabled using the kill mechanism. If an MS has been killed by a kill procedure, the MS shall lose all DMR functionality. An MS may not be revived from the kill state by any AI generated message. 
In the present document, MS shall only be killed from a TSCC gateway KILLI. 


Figure 6.33 illustrates the mechanism for MS kill: 
a) 
The TSCC sends a C_AHOY from KILLI at "A" to kill the MS. 

b) 
The MS acknowledges the C_AHOY in the next slot and makes its authentication challenge at "B" by transmitting a C_ACVIT PDU. This Ackvitation sent by the MS is the acknowledgement to the initial C_AHOY from the TSCC. 

c) 
At "C" the TSCC sends the challenge response to the MS. The MS authenticates the challenge response. This response may be delayed in accordance with the random access timing defined in clause 6.2.1.1.4. The MS authenticates the challenge response.  

d) 
At "D", if the challenge response is ratified by the MS, the MS sends C_ACKU(Reason = Message_Accepted). Following the acknowledgement the MS disables all DMR functionality. If the challenge response fails authentication, the MS shall send C_NACKU(Reason = Recipient_Refused) ("D"), and the MS shall not kill.  


The MS may repeat step "B" if the challenge response is not successfully received by the TSCC at "C". 
NOTE: A situation may exist where the final acknowledgement C_ACKU was sent by the MS (and the MS disabled all functionality) but the acknowledgement was not received by the TSCC. In this case, repeating the kill procedure from step "A" would not result in any response from the MS. The TSCC should be able to deal with this situation. 

6.4.10.1 Kill Procedures with Authentication for the TSCC 
The TSCC transmits a C_AHOY with the information elements as illustrated in table 6.23. 
Table 6.23: C_AHOY Information Elements for Kill 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02 - PDU addressed to an individual MS address  
Appended_Blocks  2  002  
Service_Kind  4  Supplementary Service - 11012  
Target address  24  Individual Address of Called MS  
Source Address or Gateway  24  KILLI (see clause A.4)  

If the MS response is a C_Ackvitation (Target Address = challenge value, Source Address = MS_ID) the TSCC shall interpret that PDU as an acknowledgement and that the TSCC is being challenged that the TSCC is authentic. 
The TSCC shall send the response C_ACKD(Reason = Authentication_Response) with the information elements as illustrated in table 6.24. 
Table 6.24: Authentication Response Elements 

Response_Info  7  Value  
Reason Code  8  0110 01002 - Authentication Response  
Reserved  1  02  
Target address  24  Individual Address of the killed MS  
Additional Information (Source Address)  24  Authentication challenge response  

When the TSCC response to the challenge has been transmitted to the MS, the MS shall send a final acknowledgement: 
a) 
if the final acknowledgement transmitted by the MS is C_ACKU(Message_Accepted) the TSCC shall identify that the kill procedure was successful; 

b) 
if the final acknowledgement transmitted by the MS is C_NACKU(Recipient_Refused) the TSCC shall identify that the kill was unsuccessful. 



6.4.10.2 Kill Procedures with Authentication for the MS 
If the MS receives an applicable kill C_AHOY but the MS does not support kill it shall respond with C_NACKU (Reason = MSNot_Supported). 
If the MS receives an applicable kill C_AHOY the MS shall authenticate the TSCC by transmitting a C_Ackvitation with information elements as illustrated in table 6.25. 
Table 6.25: C_Ackvitation -MS Challenges the TSCC 

Service_Options_Mirror  7  0000 0002  
Service_Kind_Flag  1  02  
Reserved  2  02  
Appended_Blocks  2  002  
Service_Kind  4  Supplementary Service - 11012  
Target address  24  Authentication Challenge Value. The challenge value shall be in the range 00 000016 to FF FCDF16  
Source Address or Gateway  24  MS Individual Address  

The MS shall examine the response to the authentication challenge and validate the authentication. The MS shall then send a final acknowledgement C_ACKU(Reason = MS_Accepted) if the authentication was successful or C_NACKU(Reason = Recipient_Refused) if the authentication was unsuccessful (illustrated in table 6.26). 
Table 6.26: Final Acknowledgement 

Response_Info  7  Value  
Reason Code  8  MS_Accepted - 0100 01002  
Recipient_Refused - 0001 01002  
Reserved  1  02  
Target address  24  KILLI (see clause A.4)  
Additional Information (Source Address)  24  MS Individual Address  



6.4.11 IP Connection Advice 
6.4.11.0 IP Connection Advice - Introduction 
For an MS to forward an IP connection address to the Tier III network, the MS makes use of the registration procedures specified in clause 6.4.4 to register (or repeat the registration) with the TSCC (see note). In the registration service request the Service Options contain the IP_Inform information element. If the MS registers with the IP_Inform = 12, the 
TSCC invokes the UDT procedures and sends a AHOY to ask the MS for an IP connection address: 
a) 
the MS may repeat this procedure if it has additional IP addresses to send to the system; 

b) 
the MS may delete an IP connection by sending a registration service deregister with Reg_Dereg = 02 and IP_Inform = 12 (This combination of information elements does not deregister the MS). 


If the TSCC has the IP addresses for MS registered, the TSCC is able to cross reference the IP address with the MS individual address if the MS has activated power save. 
The PDU exchange to add or subtract an IP connection and request power save is illustrated in figure 6.34. 
NOTE: The MS may already be registered with the system. Repeating the registration procedure is however a convenient mechanism to convey IP connection addresses. 
TSCC 
aligned timing 
UDT Upload  
AL  
AL  AH  AL  AK  AL  
M=24  
A R  B  C H AD  
 D  

TSCC Outbound 
MS(A) Inbound TSCC 
Figure 6.34 illustrates an MS registration procedure with the optional steps "B" and "C": 
a) 
at "A" the MS makes a C_RAND random access registration attempt Source = MS(A), Target = REG_ADDR, and to indicate I.P Connection Advice IP_Inform = 12; 

b) 
at "B" the C_AHOY Source = IPI, Target = MS(A) PDU is the acknowledgement to the random access prompting the MS to respond with the IP connection advice. The timer TNP_Timer timer is started; 


offset timing 
UDT Upload  
AL  
AL  AL  AH  AL  A L  AK  AL  
M=2 4  
A R  B  C H AD  
 D  
Figure 6.34: MS IP Connection Advice 


TSCC Outbound 
MS(A) Inbound 
c) 
"C" is the MS response C_UDTHU + AD, Source = MS(A), Target = IPI + supplementary Data using the UDT IP format; 

d) 
"D" is the final C_ACKD or C_NACKD Source = IPI, Target = MS(A) sent on the TSCC to the MS. 



6.4.11.1 IP Connection Advice Procedures for the MS 
6.4.11.1.0 IP Connection Advice Procedures for the MS -Introduction 
When an MS determines that it wished to advise a change of IP connection (i.e. add or delete an IP address), it shall attempt to do so by the registration procedures specified in clause 6.4.4. The indication that a registration request is for the purpose of IP connection advice is the information element IP_Inform = 12 in the Service Options (see table 6.9). 
Valid TSCC responses to the random access request are: 
a) 
C_WACKD(Reason = Wait) more signalling to follow; 

b) 
C_NACKD(Reason = Reg_Refused) or C_NACKD(Reason = Reg_Denied) with Source = REGI, target = MS ID; 

c) 
C_NACKD(Reason = IP_Connection_failed), with Source = IPI, target = MS ID; 

d) 
C_AHOY(Source Address = IPI, Target = MS ID). 


If following the C_RAND, the MS receives any of the following responses, then the MS shall assume that the DMR registration has been successful: 
e) 
C_AHOY from IPI inviting the MS to send the IP Connection address; 

f) 
C_NACKD(Reason = IP_Connection_failed), for example, indicating IP services are unavailable at this site. 


In the event the MS receives a C_NACKD(Reason = IP_Connection_failed), it is vendor specific as to whether the MS will remain at this site without IP Bearer Services, or should hunt for a new site. 

6.4.11.1.1 Registration Attempt Times Out 
If the MS times out from waiting for further signalling for IP connection request and the MS was not previously registered, (expiry of timer TNP_Timer), it shall enter the TSCC acquisition procedures. If the MS was previously registered, the MS shall return to the TSCC idle state. 
6.4.11.1.2 No Answer Response Received after the Maximum Number of Random Access Attempts 
If no response is received within WAIT+1 slots after the MS has transmitted NRand_NR random access attempts, the MS shall make no consequential changes to its IP connection record. 

6.4.11.1.3 MS Response to C_AHOY Inviting the MS to Send an IP address 
The MS shall send the IP address using the UDT mechanism. The response shall be a C_UDTHU + supplementary data. The HEAD information elements shall be UDT_Format = 01102, UAB = 002 for IPV4 or UAB = 012 for IPV6, SF = 12, Target_address = MS ID, Source_address = IPI. 

6.4.11.1.4 Final Acknowledgment to IP Connection Advice Received by the Calling MS 
The MS may receive C_ACKD = Reg_Accepted with Target_address = MS ID, Source_address = IPI.. In that case the MS shall assume that the IP connection advice was accepted by the TSCC. 
If the TSCC refuses the IP connection advice the MS may receive C_NACKD(Reason = IP_Connection_failed) Target_address = MS ID, Source_address = IPI). In that case the MS shall assume that the IP connection advice has not been accepted by the TSCC, but registration has been successful. A possible cause may be that the IP address is already in use by another MS. No change in the IP connection record shall be made. 


6.4.11.2 IP Connection Advice Procedures for the TSCC 
6.4.11.2.0 IP Connection Advice Procedures for the TSCC -Introduction 
If the TSCC receives a random access registration request attempt with IP_Inform = 12, the TSCC may or may not support the IP Bearer Service. Additionally, even if IP Bearer Service is supported, the IP address from the MS may or may not be accepted by the TSCC. 

6.4.11.2.1 IP Bearer Service Available at Site 
If the site supports IP Bearer Service, valid TSCC responses to a C_RAND with IP_ Inform = 12, are: 
a) 
C_WACKD(Reason = Wait) more signalling to follow with Source = REGI, target = MS ID; 

b) 
C_NACKD(Reason = Reg_Refused) or C_NACKD(Reason = Reg_Denied) with Source = REGI, target = MS ID; 

c) 
C_AHOY(Source Address = IPI, Target = MS ID), whereupon the registration shall be assumed to be successful, and the TSCC shall invite the MS to upload the IP address using the UDT mechanism. 



6.4.11.2.2 IP Bearer Service not Available at Site 
If the site does not support IP Bearer Service, valid TSCC responses to a C_RAND with IP_ Inform = 12, are: 
a) 
C_WACKD(Reason = Wait) more signalling to follow with Source = REGI, target = MS ID; 

b) 
C_NACKD(Reason = Reg_Refused), C_NACKD(Reason = Reg_Denied) with Source = REGI, target = MS ID; 

c) 
C_NACKD(Reason = IP_Connection_failed) with Target_address = MS ID, Source_address = IPI, in which case the MS registration is deemed successful, but IP Bearer Service is not available. 



6.4.11.2.3 Final acknowledgement to IP Connection Advice 
The TSCC shall conclude the IP Connection advice procedure by sending a final acknowledgement which shall be one of: 
a) 
C_ACKD = Reg_Accepted with Target_address = MS ID, Source_address = IPI, whereupon the MS shall assume that the IP connection advice and registration were both accepted by the TSCC; 

b) 
C_NACKD(Reason = IP_Connection_failed) with Target_address = MS ID, Source_address = IPI, whereupon the MS shall assume that the IP connection advice was not successful, but the registration was accepted by the TSCC. 





6.4.12 Unsolicited MS Radio Check 
When an MS is not involved in a call set up, if a TS wishes to check if an MS is listening, a simple unsolicited MS radio check may be conducted at any time. 
TSCC Outbound 
MS(A) Inbound 


TSCC Outbound 
MS(A) Inbound 
Figure 6.35 illustrates the message exchange for an unsolicited radio check on the control channel. An unsolicited MS Radio Check may also be conducted on the payload channel. The TSCC transmits a C_AHOY with the information elements as illustrated in table 6.27. The TS may: 
a) 
poll an individual MS for its presence; 

b) 
poll a talkgroup to indicate if at least one member of that talkgroup is listening (it is accepted that multiple MS may respond to this poll). 


Table 6.27: C_AHOY / P_AHOY Information Elements for an Unsolicited MS Radio Check 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02 - Not Applicable  
Ambient Listening Service (ALS_SERV)  1  02 - Not Applicable  
G/I  1  02 - Target address is an MS individual ID  
12 - Target address is a talkgroup  
Appended_Blocks  2  002  
Service_Kind  4  Registration/Authentication/MS Radio Check - 11102  
Target address  24  Polled MS  
Source Address or Gateway  24  TSI (see clause A.4)  

For an unsolicited Rado Check, the MS shall send the response C_ACKU(Reason = Message_Accepted) with the information elements as illustrated in table 6.28. 
Table 6.28: MS Radio Check Response Elements 

Response_Info  7  Value  
Reason Code  8  0100 01002  
Reserved  1  02  
Target address  24  TSI  
Additional Information (Source Address)  24  MS individual address  

Whether the MS was polled by its individual address or a talkgroup, the C_ACKU Source Address shall always be the MS individual address. 

6.4.13 Supplementary_User Data Service 
6.4.13.0 Supplementary_User Data Service - Introduction 
The supplementary_user data service may be invoked as part of another service. It enables supplementary_user data to be transferred between entities as part of a voice or data call setup. 
The MS requests supplementary data by setting the C_RAND Service_Options SUPED_SV = 12 in the call setup. If the TSCC either does not support supplementary data or does not wish to accept supplementary data at this time, then the TSCC shall either: 
a) 
continue to process the call setup and abandon the request for supplementary user data; or 

b) 
transmit a C_NACKD to indicate failure of the call. 



6.4.13.1 Supplementary User Data Inbound Phase 
The inbound phase illustrated in figure 6.36 is invoked by a C_AHOY (Source address = SUPLI) addressed to the MS, Service_Kind = Service_Kind from the C_RAND that initiated the call. The MS response is a UDTHU(Source address = MS ID, Target_address = SUPLI) + one to four appended data blocks. 
aligned timing TSCC 
TSCC Outbound 
MS(A) Inbound 
UDT Upload  
AL  
AH  AL  
M=24  

 H AD  

offset timing TSCC 
TSCC Outbound 
MS(A) Inbound 
UDT Upload  
AL  
AH  AL  A L  
M=24  

 H AD  
Figure 6.36: Supplementary_User Data Service Inbound 


For the inbound supplementary service, the supplementary data exchange shall follow any AHOY/Acknowledgement PDUs that are part of the call set-up. 
The C_AHOY Information elements are illustrated in table 6.29. 
Table 6.29: C_AHOY for the Supplementary User Data Inbound Phase 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02 - Not Applicable  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02  
Appended_Blocks  2  The number of appended data blocks  
Service_Kind  4  Service_Kind from the C_RAND that invoked the call  
Target address  24  Address of the MS that invoked the call  
Source Address or Gateway  24  SUPLI  

The inbound UDT PDU Information Elements are illustrated in table 6.30. 
Table 6.30: Inbound UDT PDU for the Supplementary User Data Inbound 

Information element  Length  Remark  
Feature elements  
Elements defined in ETSI TS 102 361-1 [5]  
G/I  1  02 = Destination is an individual MS address  
12 = Destination is a talkgroup  
A  1  02  
Reserved  1  02  
UDT_DIV  1  02  
Data Packet Format  4  00002  
SAP Identifier  4  Service Access Point - 00002 for UDT  
UDT_Format  4  Format of the data following the UDT Header  
Target_address or Gateway  24  SUPLI  
Source_address or Gateway  24  MSID initiating the call  
Pad Nibble  5  
Reserved  1  02  
Appended_Blocks(UAB)  2  Number of Blocks appended to this UDT Header 002 = 1 Appended Data UDT block 012 = 2 Appended Data UDT blocks 102 = 3 Appended Data UDT blocks 112 = 4 Appended Data UDT blocks  
Supplementary_Flag(SF)  1  12 = This UDT Header is carrying supplementary data, supporting another Tier III service  
Protect Flag (PF)  1  Reserved for Future Use  
Opcode (UDTHU)  6  Shall be set to 01 10112  
NOTE: Shaded rows are information elements that are defined in ETSI TS 102 361-1 [5].  

The format of the supplementary data and the number of appended blocks shall be prearranged between the system and the configuration if the MS making the call. 

6.4.13.2 Supplementary User Data Outbound Phase 
The outbound phase illustrated in figure 6.37 is composed of a UDTHD(Source address = SUPLI, Target_address = MS ID) + one to four appended data blocks. If the MS accepts the supplementary_user data the acknowledgement shall be a C_ACKU(message_accepted) (Source_address = MS ID, Target_address = SUPLI). 

The outbound supplementary data UDT Header PDU Information Elements are illustrated in table 6.31. 
Table 6.31: Supplementary User Data UDT Header PDU Content 

Information element  Length  Remark  
Feature elements  
Elements defined in ETSI TS 102 361-1 [5]  
G/I  1  02 = Destination is an individual MS address  
12 = Destination is a Talkgroup address. Response not expected  
A  1  12 = Response demanded if Destination is an individual MS address   
Emergency  1  02 = This PDU is not supporting an emergency priority call  
12 = This PDU is supporting an emergency priority call  
UDT_Option_Flag  1  See table 7.51  
Data Packet Format  4  00002  
SAP Identifier  4  Service Access Point - 00002 for UDT  
UDT_Format  4  Format of the data following the UDT Header  
Target_address or Gateway  24  Called party  
Source_address or Gateway  24  SUPLI  
Pad Nibble  5  
Reserved  1  02  
Appended_Blocks(UAB)  2  Number of Blocks appended to this UDT Header 002 = 1 Appended Data UDT block 012 = 2 Appended Data UDT blocks 102 = 3 Appended Data UDT blocks 112 = 4 Appended Data UDT blocks  
Supplementary_Flag (SF)  1  12 = This UDT Header is carrying supplementary data, supporting another Tier III service  
Protect Flag (PF)  1  Reserved for Future Use  
Opcode (UDTHD)  6  Shall be set to 01 10102  
NOTE: Shaded rows are information elements that are defined in ETSI TS 102 361-1 [5].  

For the outbound supplementary service, and calls that do not allocate a traffic channel (e.g. UDT Short Data) the UDT carrying the payload shall be the last UDT outbound. (that is the supplementary outbound phase shall precede the UDT carrying the payload data. 
A complete example of a voice call invoking supplementary_user data is illustrated in figure 6.38. In this example the TSCC has chosen to accept the supplementary data. 



UDT Head for 
Aloha 
Ahoy 

Channel Grant 
Appended Data 


Random 

Ack 

Appended Data ­
Recipient of 
Access RQ 
Response 
GPS Data 
message 
Figure 6.38: UDT Mechanism Carrying Supplementary Data for a Voice Call 
a) 
"A", When MS(A) invokes the call request, MS(A) sets the SUPED_SV indicating that supplementary data is requested. Source = MS(A) Target = MS(B). 

b) 
"B", The TSCC sends AHOY Target = MS(A), Source = SUPLI. 

c) 
"C", MS(A) sends HEAD Target = SUPLI, Source = MS(A), + AD [supplementary data]. 

d) 
"D", TSCC sends HEAD Source - SUPLI, Target = MS(B) + AD [supplementary data]. 

e) 
"E", MS(B) sends ACK Source = MS(B), Target = SUPLI. 

f) 
"F", TSCC sends CG Source = MS(A), Target = MS(B). 


In this example the AHOY called party radio check has not been sent by the TSCC. The fact that on the downlink phase MS(B) has responded to the supplementary data HEAD+AD informs the TSCC that MS(B) has accepted the supplementary data but MS(B) does not know the address of the sender because the calling party address is not included in the HEAD PDU. (The called party will only know the address of the calling party when the CG PDUs are sent.) The called party has therefore indicated that it is listening to the TSCC but has no opportunity of rejecting the call (perhaps because MS(B) does not wish to accept calls from MS(A). The TSCC may send an AHOY radio check before sending the supplementary data to MS(B). 
An example of a UDT Short Data call invoking supplementary user data is illustrated in figure 6.39. 
TSCC Outbound 
MS(A) Inbound 
MS(B) Inbound 

a) 
"A", when MS(A) invokes the UDT Short Data random access call request, MS(A) sets the SUPED_SV indicating that supplementary data is requested. Source = MS(A) target = MS(B). 

b) 
At "B", the TSCC sends AHOY Target = MS(A), Source = SUPLI. 

c) 
"C", MS(A) sends HEAD Target = Source = MS(A), + AD [supplementary data]. 

d) 
"D", the TSCC sends AHOY Target = MS(A), Source = SDMI. 

e) 
"E", MS(A) sends HEAD Target = SDMI, Source = MS(A), + AD [user data]. 

f) 
"F", the TSCC sends HEAD Source = SUPLI, Target = MS(B), + AD [supplementary data]. 

g) 
"G", MS(B) sends ACK. 

h) 
"H", the TSCC sends HEAD Source = MS(A), Target = MS(B), + AD [user data]. 

i) 
"I", MS(B) sends ACK. 

j) 
"J", the TSCC sends final ACKs to MS(A). 


At the point where the supplementary data has been downloaded to MS(B), MS(B) does not know who sent it. The source is revealed in the download phase for the user data. MS(B) therefore holds the supplementary data temporarily until the download user data phase is complete. 


6.4.14 MS Power Control and MS De-key 
6.4.14.0 MS Power Control and MS De-key - Introduction 
The Reverse Channel is defined in ETSI TS 102 361-1 [5] and can be utilized in a Tier III system for closed loop power control of a transmitting MS and to de-key an MS transmitting voice. 
A trunked network may employ a combination of MS that do and do not support this feature. The Tier III system shall be able to deal with this. 
Closed loop power control is a method by which a TS is able to dynamically control the transmitter output power of an MS. If a Tier III TS or MS supports this feature, the feature shall be implemented as described in this clause. 
The principle of power control is: 
 The TS measures the received signal strength of a transmitting MS and compares the received value with two programmable thresholds. The thresholds are the upper limit for the received signal strength (L_Power_Hi) and the lower limit (L_Power_Low). If the received signal strength exceeds the threshold L_Power_Hi, the TS will send a decrease power PDU to the MS. If the signal strength is below the lower limit L_Power_Low, the TS will send an increase power control PDU to the MS. 
MS De-key utilizes Transmit Interrupt to end an MS unit's voice transmission. If a Tier III TS or MS supports this feature, the feature shall be implemented as described in this clause and in clause 6.4.15 (Transmit Interrupt for MS De-key) of the present document. Various use cases covering both TSCC and MS initiated scenarios are supported.  
The principles of MS De-key are: 
 TS Initiated: 
-Emergency Pre-emption MS De-key: Utilized so that a new call of higher priority (i.e. emergency) may use the payload channel. 
-Call Timer Expiration MS De-key: Utilized to end a call when the maximum call timer duration has been reached. 
 MS or Gateway Initiated: -Payload Interrupt MS De-key: Utilized to switch the transmitting MS unit during a call. -Ambient Listening Service (ALS) Termination MS De-key: Utilized to terminate an ALS voice call. 

6.4.14.1 Reverse Channel (RC) Command 
Both MS power control and MS PTT De-key use the Reverse Channel. The 4 bits of the Reverse Channel Command are illustrated in table 6.32. 
Table 6.32: MS Reverse Channel (RC) Command Information Elements 
RC Command  
Length  Value  Description  
4  00002  Increase power by one step  
00012  Decrease power by one step  
00102  Set power to highest  
00112  Set power to lowest  
01002  Cease transmission command  
01012  Cease transmission request  
01102 to 11112  Reserved for future use  
NOTE: The power step size is manufacturer dependent.  


6.4.14.2 Procedures for Power Control 
If MS receive a RC PDU with the RC Command set to 00002, 00012, 00102, or 00112 the MS shall adjust the transmit power setting. If the MS is transmitting at maximum power and receives an "increase power" RC Command, the MS shall retain its maximum power setting. Similarly, if the MS is transmitting at minimum power and receives a "decrease power" RC Command, the MS shall retain its minimum power setting. 

6.4.14.3 Procedures for MS De-key 
6.4.14.3.1 Emergency Pre-emption MS De-key (TS Initiated) 
The procedures in the present document supports calls with emergency pre-emptive priority. If a payload channel is not available at the time the emergency pre-emptive call is initiated, the system may force an existing non-emergency priority call to be prematurely cleared down by sending one or more P_Clear PDUs to the parties involved in the call. 
If one of the parties in the call is transmitting, the TS shall use the Reverse Channel (RC Command = 01002) to cause the MS to cease transmission. 
While transmitting on a payload channel, the MS shall monitor the outbound reverse channel for an RC Command = 01002 (Cease Transmission Command) using the rules defined in clause 6.4.15.2. 
Following the cessation of inbound PDUs, the payload channel may then send additional P_Clear PDUs to clear the existing call and enable the emergency call to use that payload channel. The TS is then able to connect the emergency call on that payload channel. 

6.4.14.3.2 Call Timer Expiration MS De-key (TS Initiated) 
The present document also supports a maximum call duration for various call types. When the system determines the maximum call duration was reached the system may clear down that call by sending one or more P_Clear PDUs to the parties involved in the call. 
If one of the parties in the call is transmitting the TS shall use the Reverse Channel (RC Command = 01002) to cause the MS to cease transmission. 
While transmitting on a payload channel, the MS shall monitor the outbound reverse channel for an RC Command = 01002 (Cease Transmission Command) using the rules defined in clause 6.4.15.2. 
Following the cessation of inbound PDUs, the payload channel may then send additional P_Clear PDUs to clear the existing call. 

6.4.14.3.3 Payload Interrupt MS De-key 
6.4.14.3.3.0 Payload Interrupt MS De-key - Introduction 
If an MS or gateway involved in a call wishes to interrupt the talker and the TS decides the MS shall cease transmission, then the procedure specified in this clause shall be used. 
If an MS wishes to interrupt the talker, the interrupting MS cannot use a payload inbound PDU to cause the interrupt because both inbound paths may be occupied by transmitting MS. 
To cause the interrupt, the interrupting MS momentarily leaves the payload channel and when it has acquired the TSCC, initiates a Status Call (Status = 125) addressed to: 
a) 
for an individual call, the MSID to be interrupted; 

b) 
for a talkgroup call, the address of the talkgroup. 


The TSCC shall respond with an acknowledgement (Source = TSI, Target = Interrupting MS). If the response is C_NACKD, then the interrupt request is refused. If the response is C_ACKD, then the interrupting request is successful. The interrupting MS shall then return to the payload channel in either case. 
If the interrupt is refused the call shall continue without interruption. 
If the interrupt is successful then the interrupting MS shall wait for an outbound PDU that indicates the interrupting MS may transmit. 

Figure 6.40 illustrates an example of a payload interrupt initiated by an MS: 
a) 
"A" is a voice call in progress. MS(A) and MS(B) are engaged in a voice call on a payload channel. The call may be either an individual call or a talkgroup call. The system uses aligned timing. MS(A) is transmitting voice frames to MS(B). MS(B) needs to interrupt MS(A)s transmission; 

b) 
"B", MS(B) leaves the payload channel and as soon the random access protocol permits makes a status call. The called party is MS(A), the calling party is MS(B) and Service_Kind set to 'Status' The status value is 125 (11 11012). The TSCC recognizes this as the Transmit Interrupt request; 

c) 
"C", if the TSCC accepts the request to interrupt the MS transmitting on the payload channel, the acknowledgement shall be C_ACKD(Reason = Message_Accepted). If the TSCC does not accept the request for the interrupt the acknowledgement shall be C_NACKD(Reason = Not_Supported or Reason = Perm_User_Refused). If the TSCC does not accept the request then MS(A) shall not be interrupted and the call shall continue without interruption. If the TSCC accepts the request then steps e) to g) shall apply; 

d) 
"D", the MS returns to the Payload Channel; 

e) 
"E" is the Reverse Channel. RC Command = 01002 (Cease transmission Command); 

f) 
"F" is the step where MS(A) ceases transmission where the cease transmission has been accepted by the MS; 

g) 
"G" is MS(B)s voice transmission having seized the payload channel. 


In order to prevent other parties in the call from transmitting after the interrupt has been accepted, the payload channel may send P_PROTECT (Protect_Kind = EN_PTT_ONE_MS) PDUs with MS(B) as the Target Address, to prevent any MS from transmitting other than the interrupting MS. 
If a Gateway involved in a call wishes to interrupt the talker and the TS decides the MS shall cease transmission, then only the procedures in step e) to g) shall apply, where step g) shall be the voice transmission from the gateway. 

6.4.14.3.3.1 TS and TSCC Procedures for Payload Interrupt MS De-key 
For the case where an MS wishes to interrupt the currently talking MS party, if the TSCC receives a Status Call random access attempt with the status value = 125, then the called party address shall be matched with the MS IDs engaged in voice calls on the payload channels. If there is a match, then the TSCC shall interpret that status as a Transmit Interrupt request. 
If Transmit Interrupt is not available the TSCC shall respond C_NACKD (Source = TSI, Target = Interrupting MS). 
If the Transmit Interrupt has been accepted then the TSCC shall respond C_ACKD (Message_Accepted) (Source = TSI, Target = Interrupting MS). 
For the case where a gateway wishes to interrupt the currently talking party, the gateway may request the Payload Interrupt service. If supported, the TS shall interpret this as a Transmit Interrupt request. 
If either the MS or gateway initiated Transmit Interrupt request has been accepted, then the TSCC shall send a Reverse Channel RC Command using the rules defined in clause 6.4.15.2. 

6.4.14.3.3.2 Interrupting MS Procedures for Payload Interrupt MS De-Key 
An MS is involved in a voice call on a payload channel. If this MS wishes to interrupt another MS that is presently transmitting, the interrupting MS shall follow this procedure. 
The interrupting MS shall return to the TSCC. When the TSCC has been acquired the MS shall make a status call request, status = 125 addressed to the MS to be interrupted. The MS shall note the response from the TSCC. If the response is C_NACKD(Reason = Not_Supported or Reason = Perm_User_Refused) then the MS shall interpret the interrupt request as unsuccessful. If the response is C_ACKD(Reason = Message_Accepted) the interrupt request shall be interpreted as successful. 
Following the TSCC response, the interrupting MS shall return to the payload channel: 
 
If the interrupt request is unsuccessful the MS shall continue with the call. 

 
If the interrupt request is successful, the MS shall utilize outbound signalling to determine if the transmitting MS transmission has ceased. If the transmitting MS transmission has ceased, the interrupting MS may then may PTT. 


The MS may also provide a visual and/or audible indication to the interrupting user that the MS may PTT. 
If the transmitting MS does not cease transmitting then the interrupting MS should continue with the call. 


6.4.14.3.4 Ambient Listening Service (ALS) Termination MS De-key 
6.4.14.3.4.1 Ambient Listening Service Termination MS De-key - Introduction 
If the MS or gateway that initiated the ALS service wishes to interrupt the transmitting MS and terminate the ALS call, and the TSCC decides the MS shall terminate the call, then the procedure specified in this clause shall be used. 
If the ALS call was initiated by an MS, the interrupting MS cannot use a payload inbound PDU to cause the interrupt because both inbound paths may be occupied by transmitting MS. 
To cause the interrupt, the interrupting MS momentarily leaves the payload channel and when it has acquired the TSCC, initiates a Status Call (Status = 123) addressed to the MSID to be interrupted. 
The TSCC shall respond with an acknowledgement (Source = TSI, Target = Interrupting MS). If the response is C_NACKD, then the interrupt request is refused. If the response is C_ACKD, then the interrupting request is successful. The interrupting MS shall then return to the payload channel in either case. 
If the interrupt is refused the call shall continue without interruption. 

NOTE: Figure 6.41 illustrates the case where the call is terminated after the MS De-key. 
Figure 6.41 illustrates an example of a payload interrupt for ALS: 
a) 
"A" is a voice call in progress. MS(A) and MS(B) are engaged in an ALS voice call on a payload channel. The system uses aligned timing. MS(A) is transmitting voice frames to MS(B) for ALS. MS(B) needs to end MS(A)s transmission; 

b) 
"B", MS(B) leaves the payload channel and as soon the random access protocol permits makes a status call. The called party is MS(A), the calling party is MS(B) and Service_Kind set to 'Status'. The status value is 123 (11 10112). The TSCC recognizes this as the Transmit Interrupt request; 

c) 
"C", if the TSCC accepts the request to interrupt the MS transmitting on the payload channel, the acknowledgement shall be C_ACKD(Reason = Message_Accepted). If the TSCC does not accept the request for the interrupt the acknowledgement shall be C_NACKD(Reason = Not_Supported or Reason = Perm_User_Refused). If the TSCC does not accept the request then MS(A) shall not be interrupted and the call shall continue without interruption. If the TSCC accepts the request then steps e) to g) shall apply; 

d) 
"D" is the Reverse Channel. RC Command = 01002 (Cease transmission Command); 

e) 
"E" is the step where MS(A) ceases transmission; 


If the interrupt is successful, then: 
f) "F" is where the TS shall transmit P_CLEAR(s) to clear down the payload channel. 
If a Gateway that initiated the ALS call wishes to terminate the call, and the TS decides the MS shall cease transmission, then only the procedures in step d) to f) shall apply. 

6.4.14.3.4.2 TS and TSCC Procedures for ALS Termination MS De-key 
For the case where an ALS call has been initiated by an MS, if the TSCC receives a Status Call random access attempt with the status value = 123 then the called party address shall be matched with the MS IDs engaged in an ALS call on the payload channels. If there is a match, then the TSCC shall interpret that status as a Transmit Interrupt request for the purpose of terminating the ALS call. 
If Transmit Interrupt is not available the TSCC shall respond C_NACKD (Source = TSI, Target = Interrupting MS) to the requesting MS. 
If the Transmit Interrupt has been accepted then the TSCC shall respond C_ACKD (Message_Accepted) (Source = TSI, Target = Interrupting MS). 
For the case where an ALS call has been initiated by a gateway, the gateway may request the termination of the ALS call. If supported, the TS shall interpret this as a Transmit Interrupt request. 
If either the MS or gateway initiated Transmit Interrupt request has been accepted, then the TS shall send a Reverse Channel. RC Command = 01002 (Cease transmission command) on the applicable payload channel and wait for the transmitting MS to cease transmitting. 
Following the cessation of inbound PDUs, the payload channel shall send additional P_Clear PDUs to clear the existing call. 

6.4.14.3.4.3 Interrupting MS Procedures for ALS Termination MS De-key 
An MS that has initiated the ALS service and is receiving audio that wishes to interrupt the transmitting MS and terminate the ALS call shall follow this procedure. 
The interrupting MS shall return to the TSCC. When the TSCC has been acquired the MS shall make a status call request, status = 123 addressed to the MS to be interrupted. The MS shall note the response from the TSCC. If the response is C_NACKD(Reason = Not_Supported or Reason = Perm_User_Refused) then the MS shall interpret the interrupt request as unsuccessful. If the response is C_ACKD(Reason = Message_Accepted) the interrupt request shall be interpreted as successful. 
Following the TSCC response, the terminating MS shall remain on the TSCC. 




6.4.15 Transmit Interrupt for MS De-key 
6.4.15.1 TSCC Procedures for Transmit Interrupt 
If the TS has determined that a transmitting MS shall be interrupted, the TSCC shall send a Reverse Channel RC Command = 01002 (Cease Transmission Command) on the applicable payload channel and wait for the transmitting MS to cease transmitting. 
If the TS has determined that a transmitting MS should decide if it should allow its transmission to be interrupted, the TSCC shall send a Reverse Channel. RC Command = 01012 (Cease transmission request) on the applicable payload channel and wait for the transmitting MS to either cease transmitting or to continue transmitting. 
If the MS ceases transmitting, the TS may send P_Protect(Protect_Kind = EN_PTT_ONE_MS) PDUs outbound on the payload channel to prevent all MS except the interrupting MS from transmitting. The TS shall limit the number of P_Protect PDUs so that MS occupying the payload channel may continue if the Transmit Interrupt fails for any reason. 
If the MS continues to transmit the TS shall continue to service the ongoing voice call. 

6.4.15.2 Interrupted MS Procedures for Transmit Interrupt 
While actively transmitting on a payload channel, the MS shall monitor the outbound reverse channel. 
If an RC Command = 01002 (Cease Transmission Command) is received, the MS shall complete its voice superframe through voice burst "F", send a Terminator_with_LC PDU, then cease transmission. Following this step the MS shall monitor the outbound channel and observe the procedures defined in clause 6.6.2.3. 
If an RC Command = 01012 (Cease Transmission Request) is received and the transmitting MS accepts the payload interrupt request, the MS shall complete its voice superframe through voice burst "F", send a Terminator_with_LC PDU, then cease transmission. Following this step, the MS shall monitor the outbound channel and observe the procedures defined in clause 6.6.2.3. 
The MS may indicate to the user that the MS transmission has been interrupted. 
If an RC Command = 01012 (Cease transmission request) is received and the transmitting MS does not accept the payload interrupt, the MS shall continue with its transmission. 



6.5 Unified Data Transport Mechanism 
6.5.0 Unified Data Transport Mechanism -Introduction 
A Tier III network supports a wide range of services. To support these services, the transporting of data is a very common necessity. Although UDT Short Data is a primary data service, there are many instances where data needs to be transported to support other services. (For example when an MS dials a PABX or PSTN destination, the dialled digits are uploaded to the TSCC). Whether the data remains within the network or is used to support other services, the Supplementary Data Transfer Service may be invoked. To reduce the Tier III complexity, all data transport using the TSCC share a common method - the Unified Data Transport Mechanism: 
a) 
Supplementary Data Transfer Service: 

1) inbound transport of destination addresses that are connected through system gateways; 
2) inbound transport of PSTN and PABX dialling digits from MS; 
3) inbound transport of IPV4/IPV6 addresses; 
4) inbound transport of MS NMEA (IEC 61162-1 [8]) location information; 
5) outbound channel transport of remote addresses that are connected through system gateways; 
6) outbound channel transport of CLI information from PABX/PSTN networks; 
7) outbound channel transport of IPV4/IPV6 address information from IP networks; 
8) outbound channel transport of NMEA (IEC 61162-1 [8]) MS location; 
9) transport of supplementary_user data as part of another service; 
10) transport of addresses/digits for the Call Diversion service; 
11) inbound transport of talkgroup addresses for the Talkgroup Subscription/Attachment service. 

b) 
UDT Short Data Transfer Delivery Service: 

1) transport of MS NMEA (IEC 61162-1 [8]) location information; 
2) transport of LIP [14] MS location; 
3) transport of UDT messaging; 
4) transport of talkgroup addresses for the DGNA service; 

c) 
UDT Short Data Polling Service. 


NOTE: For item a) the SF bit in the UDT Head PDU is set to 12. For items b) and c) the SF bit in the UDT Head PDU is set to 02. 
The format for the data transfer is the same for transfers using the outbound channel and transfers using the inbound channel. The UDT employs the UDT type (UDT) PDU. The first block is the header as illustrated in figure 6.42. This block carries source and destination addresses, the format of the data being carried, and UDT Format that denotes the service being supported. Up to four Appended data blocks may follow the header to carry the data. All blocks of the UDT shall be transmitted consecutively. 
UDT HEADER  

 7  6  5  4  3  2  1  0  
Octet 0  IG  A  RSVD  FORMAT  
Octet 1  SAP  UDT FORMAT  
Octet 2  TARGET ADDRESS OR GATEWAY(24)  
Octet 3  
Octet 4  
Octet 5  SOURCE ADDRESS OR GATEWAY(24)  
Octet 6  
Octet 7  
Octet 8  PAD NIBBLE  0  UAB  
Octet 9  SF  PF  OPCODE  

Figure 6.42: UDT Header 
The UAB information element indicates the number of UDT blocks that are appended to this header. For a UDT addressed to an individual MS, the A information element denotes if a response to this multi-block UDT is expected. 

Inbound 
540mS 


Figure 6.43 is just one example illustrating how the UDT Short Data service makes use of the UDT mechanism. The UDT Short Data employs a store and forward technique and the procedures are fully described in clause 6.6.4. 
However the UDT segments are highlighted to illustrate the upload and download phases that are described in these clauses. In this example the UDT blocks consist of a Header + one appended block. 


390mS 


UDT Head for 
Aloha 

Ahoy 

Channel Grant 
Appended Data 


Random 

Ack 

Appended Data ­
Recipient of Access RQ 
Response 
Dialling Digits 
message 
Figure 6.44: MS to PABX/PSTN Call using the UDT Mechanism 
Figure 6.44 illustrates a call set-up for a call from an MS to the PABX/PSTN. Calls to these destinations are characterized by the necessity of passing the dialled destination to the system. The UDT mechanism provides an unambiguous transfer. In this example the UDT consists of a Header + one appended block for up to 20 dialled digits. 

270mS 


330mS 




UDT Head for 
Aloha 

Channel Grant 
Appended Data 
Ack 

Appended Data ­
Recipient of 
Response 
CLI Digits 
message 
Figure 6.45: Call from the PSTN/PABX using the UDT Mechanism 
Figure 6.45 illustrates a further example of a call from the PSTN. The TSCC has elected to download the CLI information to the recipient as part of this call set-up. The Service_Kind information element is passed in the header therefore the recipient MS knows the call is inbound and the call is from the PSTN. Since the Service_Kind is known to the recipient, a secondary feature of the UDT mechanism is that it may serve as a radio check. Only if the MS responds with a positive (C_ACKU) acknowledgement does the call mature. 

TSCC Outbound 
MS(A) Inbound 
MS(B) Inbound 
450 mS 


TSCC Outbound 
MS(A) Inbound 
MS(B) Inbound 
660 mS 



UDT Head for 
Aloha 
Ahoy 

Channel Grant 
Appended Data 

Random 
Ack 
Appended Data -GPS 
Recipient of 
Access RQ 
Response 
Data 
message 
Figure 6.46: UDT Mechanism carrying Supplementary Data 
Figure 6.46 illustrates how supplementary_user data may be carried as part of a call. MS(A) wishes to send its GPS position as part of a voice call set-up. MS therefore elects to indicate that supplementary_user data is available in the Service_Options information element by setting Supplementary_Data = 12. The TSCC uploads the supplementary_user 
data and passes the data to the recipient. The UDT download/acknowledgement also serves as the radio check. 

6.5.1 Format of the Appended Data 
6.5.1.0 Format of the appended data -Introduction 
The format of the appended data is specified in Annex B. The standard formats are: 
a) 
Binary Format - the appended block(s) contain binary data. 

b) 
Address format - the appended block(s) contain DMR addresses. 

c) 
BCD format - the appended blocks contain BCD coded data. 

d) 
7 bit text coded - the appended data is text coded using ISO 7 bit character set (ISO/IEC 646 [11]). 

e) 
8 bit character coded - the appended data is character coded using ISO 8 bit character set (ISO/IEC 8859 [12]). 

f) 
NMEA (IEC 61162-1 [8]) location format - the appended data is coded specifically for NMEA (IEC 61162-1 [8]) position data. 

g) 
IP Format - appended blocks carry IP Address. 

h) 
16 bit UTF-16BE Unicode format [9] - appended block(s) carry 16 bit encoded characters. 

i) 
Mixed Format - the appended block(s) carry a DMR Address and 16 bit encoded characters. 

j) 
LIP Format. The appended blocks is defined in ETSI TS 100 392-18-1 [14]. 



6.5.1.1 UDT Block Structure 
The UDT block structure is described in ETSI TS 102 361-1 [5] in the following clauses: 
 
header: clause 8.2.1.8; 

 
non-last block: clause 8.2.2.1; 

 
last data block: clause 8.2.2.5. 



6.5.1.2 UDT Content for Services Carried on the Outbound Channel 
The UDT outbound channel mechanism may be invoked as part of a DMR service. The UDT head PDU contains all parameters for an MS or talkgroup UDT. The data to be downloaded is held in the TSCC and the information elements formed as table 6.33. 
Table 6.33: UDT Outbound Channel Information Elements 
UDT Outbound channel Mechanism  
UDT Outbound channel PDUs  
Service  UDT Operation  Service _ Kind  Supplementary_Dat a Flag  UDT-Format  Respons e Expected (A)  Target address or gateway  Source or gateway Addres s  MS Respons e to UDT Header Data  
Voice Call from PSTN to Individual MS  Send CLI information from PSTN  Individual Voice Call Service (00002)  12  BCD (00102)  02 option  Destinatio n MS Address  PSTNI/ PSTNDI  No  
12 option  ACK, NACK  
Voice Call from PABX to Individual MS  Send CLI information from PABX  Individual Voice Call Service (00002)  12  BCD (00102)  02 option  Destinatio n MS Address  PABXI/ PABXDI  No  
12 option  ACK, NACK  
Voice Call from PSTN to Talkgroup  Send CLI information from PSTN  Talkgroup Voice Call Service (00012)  12  BCD (00102)  02  Destinatio n Talkgroup  PSTNI  No  
Voice Call from PABX to Talkgroup  Send CLI information from PABX  Talkgroup Voice Call Service (00012)  12  BCD (00102)  02  Destinatio n Talkgroup  PABXI  No  
Voice Call from MS to Individual MS  Send NMEA information from Source MS  Individual Voice Call Service (00002)  12  NMEA formatted (01012)  02 option  Destinatio n MS Address  Source MS  No  
12 option  ACK, NACK  
Voice Call from MS to Individual MS  Send LIP information from Source MS  Individual Voice Call Service (00002)  12  LIP formatted (10112)  02 option  Destinatio n MS Address  Source MS  No  
12 option  ACK, NACK  
Voice Call from MS to Individual MS  Send supplementar y text PDU as part of call setup  Individual Voice Call Service (00002)  12  7 bit txt (00112) 8 bit txt (01002) UTF16 txt (01112)  02 option  Destinatio n MS Address  Source MS  No  
12 option  ACK, NACK  

UDT Outbound channel Mechanism  
UDT Outbound channel PDUs  
Service  UDT  Service  Supplementary_Dat  UDT- Respons  Target  Source  MS  
Operation  _ Kind  a Flag  Format  e Expected (A)  address or gateway  or gateway Addres s  Respons e to UDT Header Data  
UDT Short Data call from MS to MS  UDT Short Data Outbound Phase  Individual UDT Short Data (01002)  02  UDT_Forma t  12  Destinatio n MS Address  Source MS  ACK, NACK  
UDT Short Data call from Dispatche r to MS  UDT Short Data Outbound Phase  Individual UDT Short Data (01002)  02  UDT_Forma t  12  Destinatio n MS Address  DISPATI  ACK, NACK  
Send  
Diverted address to  See clause 6.6.7  
caller  
DGNA Service  See clause 6.6.8  
Table 6.34: UDT Header Information 


The information elements of the PDUs in the UDT Header information elements are summarized in table 6.34. 
UDT_Format  Specifies the format of the data transported in the appended data blocks of the multi-block UDT  
If the UDT outbound is the second phase preceded by a UDT Inbound, the UDT_Format shall be copied from the UDT_Inbound Header  
Appended_Blocks  Specifies the number of appended data blocks concatenated to the header  
Supplementary_Flag  Specifies if:  0: this UDT Header is carrying the data for the primary service; or  1: this UDT Header is carrying supplementary_user data, supporting another service  
Response Expected (A) See ETSI TS 102 361-1 [5]  Specifies if the TSCC is expecting a response from this UDT download:  if the UDT download is addressing an individual MS then: - if the UDT download is supporting an Supplementary Data transfer then this information element may be set or clear - for the UDT Short Data Service then this information element shall be set to 12 - response expected  if the UDT download is addressing a talkgroup then: - the UDT information element shall be set to 02 - response not expected  
Pad Nibble See ETSI TS 102 361-1 [5]  Appended to the data to form an integer number of blocks. The number of pad nibbles for each of the UDT data formats is specified in Annex B  
Target _address or Gateway  Individual MS address or Talkgroup or All_Unit  
Source_address or gateway  Source MS address for a service originating from an MS PABXI for a service originating from a PABX extension PSTNI for a service originating from the PSTN IPI for a service originating from an IP network SUPLI for supplementary user data  


6.5.1.3 UDT Mechanism for the Inbound Channel 
The UDT inbound channel mechanism is invoked as part of a DMR service. The UDT head PDU contains all parameters for the UDT. The data to be uploaded is set as table 6.35. This table is not exhaustive and many other arrangements are possible to support Tier III services. 
Table 6.35: UDT Inbound Channel Information Elements 

UDT Inbound channel Mechanism  
UDT Inbound channel information elements  
Service  UDT Operation  Service_Kind  Supplementary_Flag  Format  Response Expected (A)  Target address or gateway  Source Address or gateway  
Registration Service with Subscription/ Attachment  MS Registering with the TSCC  Registration Service (11102)  N/A See Note  See clause 6.4.4.1.13.1  MS Address  
Voice Call from Individual MS to PSTN  Send PSTN dialling information from MS  Individual Voice Call Service (00002)  12  BCD) (00102)  N/A See note  PSTNI/ PSTNDI  MS Address  
Voice Call from Individual MS to PABX  Send PABX dialling information from MS  Individual Voice Call Service (00002)  12  BCD (00102)  N/A See note  PABXI/ PABXDI  MS Address  
Voice Call from MS to Individual MS  Inbound NMEA information from Source MS  Individual Voice Call Service (00002)  12  NMEA (01012)  N/A See note  Destination MS  MS Address  
UDT Short Data call from MS to MS  UDT Short Data Inbound Phase  Individual UDT Short Data (01002)  02  UDT_Format  N/A See note  Destination MS  Source MS  
NMEA polling from a gateway  UDT Short Data Inbound Phase  UDT Short Data polling Service (01102)  02  NMEA (01012)  N/A See note  Destination MS  A TSCC Gateway  
Call Diversion Service  Diversion Inbound phase  Call Diversion Service (01102)  02  value  N/A See note  DIVERTI  MS  
IP Address registration  Inbound IP address  Registration Service (11102)  12  IP (01102)  N/A See note  IPI/ IPDI  MS  
DGNA Service  See clause 6.6.8  
Talkgroup Attachment  See clause 6.4.4.1.13  
NOTE: N/A indicates Not Applicable. Value may be 02 or 12.  

The Key protocol aspects of the information element settings in the UDT Header feature elements are illustrated in table 6.36. 
Table 6.36: UDT Header Information 

UDT_Format  Specifies the format of the data transported in the appended data blocks of the multi-block UDT  
Appended_Blocks  Specifies the number of appended data blocks concatenated to the header  
Supplementary_Flag  Specifies if:  this UDT Header is carrying the data for the primary service (UDT Short Data, Data Polling); or  this UDT Header is carrying supplementary data, supporting another service  
(A) See ETSI TS 102 361-1 [5]  Specifies if:the MS is expecting a response:  if the UDT upload is addressing an invididual MS then: - if the UDT upload is supporting a Supplementary Data transfer then this Information Element shall be set to 02 - for the UDT Short Data Service then this Information Element is Not Applicable. Value may be 02 or 12  if the UDT download is addressing a talkgroup then: - the UDT Information Element shall be set to 02 - response not expected   
Pad Nibble See ETSI TS 102 361-1 [5]  Appended to the data to form an integer number of blocks. The number of pad nibbles for each of the UDT data formats is specified in Annex B  
Target _address or Gateway  Target MS address PABXI for a service to a PABX extension PSTNI for a service to the PSTN IPI for a service to an IP network DIVERTI for the call diversion service SUPLI for supplementary user data TATTSI for the talkgroup subscription/attachment service  
Source_address or gateway  Source MS address or gateway  




6.6 Call Procedures 
6.6.0 Call Procedures -Introduction 
Access to Tier III Services from MS shall be by random access using the random access protocol described in clause 6.2. The C_RAND CSBK random access PDUs contain all parameters necessary to signify the particular Tier III service requested: 
a)  Individual Voice Call Service.  
b)  Talkgroup Voice Call Service.  
c)  Individual Single Item Packet Data Call Service.  
d)  Single Item Packet Data Call Service for a talkgroup.  
e)  Individual UDT Short Data Delivery Service.  
f)  Talkgroup UDT Short Data Delivery Service.  
g)  Call Diversion Service.  
h)  UDT Short Data Polling (from an MS) Service.  
i)  Include Individual Call Service (Payload Channel only).  
j)  Include Talkgroup Call Service (Payload Channel only).  
k)  Registration Service (see clause 6.4).  
l)  Answer Call Service.  
m)  Cancel Call Service.  

n) 
Full-Duplex MS to MS Individual Voice Call Service. 

o) 
Full-Duplex MS to MS Individual Packet Data Call Service. 

p) 
Full-Duplex MS to Fixed End Individual Voice Call Service. 

q) 
Full-Duplex MS to Fixed End Individual Packet Data Call Service. 

r) 
Individual Multi-Item Packet Data Call Service. 

s) 
Multi-Item Packet Data Call Service for a talkgroup. 

t) 
ALS Service addressed to an Individual MS. 


To support these services the Tier III protocol implements a supplementary data transport mechanism whereby data may be carried between entities to support or enhance other services. 
For MS call to an MS, talkgroup or All-MS, the full source and destination address is provided in the C_RAND PDU so a single-part call set-up procedure shall be invoked. 
For MS calls to destinations connected through a gateway (such as PSTN), a multi-part call procedure sets an appropriate gateway address as the destination in the C_RAND PDU. The TSCC then demands the extended_addressing information from the calling MS using the Unified Data Transport Service (see clause 6.5): 
 
calls where the TS uses only the Control Channel to signal Local Ringing to the initiating MS (no in-band ringing). 

 
calls where the TS provisions a payload channel to signal In-Band Ringing to the initiating MS. 


Figures 6.47, 6.48, 6.49, and 6.50 illustrate examples of a call to a line connected destination such as a PABX extension. Other line connected destinations may be specified by substituting the appropriate Gateway Identifier PSTNI, LINEI. 
NOTE 1: The examples below assume that the call is connected without delay. Following the initial C_RAND PDU the TSC may also send C_WACKD (more signalling to follow), or C_QACK (the TSCC has queued the call). 
aligned timing TSCC 
UDT Upload  
AL  
AL  AH  AL  AK  CG  CG  
M=24  
A R  B  C H AD  
 D  
 E  

TSCC Outbound 
MS(A) Inbound 
offset timing TSCC 
UDT Upload  
A L  
AL  AL  AH  AL  A L  AK  CG  CG  
M= 24  
A R  B  C H AD  
 D  
 E  
Figure 6.47: Example of Multi-part Call Procedure In Band Ringing (Call Accepted) 


TSCC Outbound 
MS(A) Inbound 
Figure 6.47 illustrates an example of a call to a PABX extension: 

a)  "A" is the random access C_RAND PDU. The destination address is set to PABXI indicating a multi-part call setup for a call service to the PABX.  
b)  "B" is a C_AHOY PDU from PABXI to ask the calling MS for the PABX extension digits.  
c)  The UDT inbound channel "C" contains a multi-block UDT consisting of a header and an appended data block containing the PABX extension digits.  
d)  At "D", the TSCC sends a C_ACKD (Message Accepted) to the calling MS (this step is optional).  

e) The TSCC sends the Channel Grant PDUs to the MS at "E". 
NOTE 2: A C_ACKD illustrated at 'D' may be sent by the TSCC immediately before the first Channel Grant. It is possible that the remote connection is refused. Figure 6.48 illustrates the process. 
aligned timing TSCC 
TSCC Outbound 
UDT  
AL  
AL  AH  AL  AK  AK  
M=24  
A R  B  H  C  AD  D  
 

MS(A) Inbound 
offset timing TSCC 
TSCC Outbound 
UDT  
A L  
AL  AL  AH  AL  A L  AK  AK  
M= 24  
A R  B  H  C  AD  D  
 
Figure 6.48: Example of Multi-part call procedure (In Band Ringing Call Refused) 


MS(A) Inbound 
a) 
"A" is the random access C_RAND PDU. The destination address is set to PABXI indicating a multi-part call setup for a call service to the PABX. 

b) 
"B" is a C_AHOY (OACSU -Service_Kind_Flag = 02) PDU from PABXI to ask the calling MS for the PABX extension digits. 

c) 
The UDT inbound channel "C" contains a multi-block UDT consisting of a header and an appended data block containing the PABX extension digits. 

d) 
The call is refused at point "D" by sending a C_NACK to the calling MS. 

a) 
"A" is the random access C_RAND PDU. The destination address is set to PABXI indicating a multi-part call setup for a call service to the PABX. 

b) 
"B" is a C_AHOY PDU (FOACSU - Service_Kind_Flag = 12) from PABXI to ask the calling MS for the PABX extension digits. 

c) 
The UDT inbound channel "C" contains a multi-block UDT consisting of a header and an appended data block containing the PABX extension digits. 

d) 
At "D", the TSCC sends a C_ACKD (MS Alerting) to the calling MS. 



Figure 6.49: Example of Multi-part call procedure (Local Ringing Call Accepted]) 
e) When the call is connected, the TSCC sends Channel Grants to the calling MS "E". Figure 6.50 illustrates an example where the call to the line connected extension is refused. 

a) 
"A" is the random access C_RAND PDU. The destination address is set to PABXI indicating a multi-part call setup for a call service to the PABX. 

b) 
"B" is a C_AHOY (Service_Kind_Flag = 12) PDU from PABXI to ask the calling MS for the PABX extension digits. 

c) 
The UDT inbound channel "C" contains a multi-block UDT consisting of a header and an appended data block containing the PABX extension digits. 

d) 
At "D", the TSCC sends a C_ACK (MS Alerting) to the calling MS. 

e) 
The TSCC sends a C_NACKD to the MS at "E" indicating the call has been refused. 


The procedures for Voice and packet data are specified in clauses 6.6.2 and 6.6.2.6.1 respectively. The procedures include: 
a) 
Call Setup: 

1) random Access Call Request; 
2) possible AHOY/UDT procedure to provide extended addressing for calls through gateways; 
3) availability check to called party; 
4) channel grant. 

b) 
Call Management on the payload channel: 


1) call maintenance; 
2) call clear-down. 
6.6.1  Procedures Common to Voice calls and Packet Data Calls  
6.6.1.1  MS Availability Checks  
6.6.1.1.1  Availability of calling MS  

An MS requests a call service by transmitting a random access service request. While the call set-up is in progress, the TSCC may check that the requesting MS is still in radio contact at any time by sending a C_AHOY PDU addressed to it. The C_AHOY PDU demands a response from the calling MS. 
6.6.1.1.2 Availability of Called Party as part of a Call 
The TS may check that the called party is in radio contact either during a call set-up, or during the call, by sending an AHOY PDU. If the message is sent by the TSCC the PDU is a C_AHOY. If the message is sent by a TS on a payload channel the PDU is a P_AHOY. A called party check may be addressed to an individual MS or a talkgroup. If the called party check is addressed to an individual MS, that MS shall respond with an appropriate acknowledgement. If the called party check is addressed to a talkgroup, all members of the talkgroup shall send an appropriate acknowledgement. In this case, one or a multiplicity of MSs may acknowledge this message. It is unlikely that the TS could recover any particular message but this is a useful feature because it identifies to the TS that at least one talkgroup is listening on that channel. 

6.6.1.1.3 General MS Radio Check 
In addition to the Calling MS and called party radio checks sent as part of a call set-up, the AHOY message may be sent by the TS at any time to check if an MS address or talkgroup is listening. The simple radio check AHOY is described in clause 6.4.12. 

6.6.1.2 Call Cancellation 
6.6.1.2.0 Call Cancellation - Introduction 
Either the calling party or called party may cancel a voice call. The procedures to cancel an OACSU and a FOACSU differ if the call is cancelled by the called party MS. 

6.6.1.2.1 Call Cancellation  Procedures for the Calling MS 
The statements in this clause apply to voice calls to MS and voice calls to line connected destinations, as well as to both OACSU and FOACSU calls. 
If the call is cancelled before the Random Access PDU has been transmitted by the Calling Party MS to the TSCC, the MS shall cancel its pending transmission and return to the idle state. 
If an MS has initiated a voice call service and the call has not matured (by the transmission of Channel Grant PDUs) the call may be cancelled by the calling party by initiating a Call Cancel Service request. This is a random access service request (Service_Kind = 11112 Cancel Call Request). 
The TSCC response to a call cancel request shall be C_ACKD (Reason = 0110 00002 Message Accepted]. 
If the called MS has already been sent a C_AHOY availability check, the called party is notified of the call cancellation. If the called party is an MS, the procedure is described in clause 6.6.1.2.2. For a line connected device, the cancellation procedure is protocol specific. 

6.6.1.2.2 Call Cancellation  Procedures for the Called MS 
The statements in this clause apply to voice calls to MS and voice calls to line connected destinations, as well as to both OACSU and FOACSU calls. 
If a call is initiated to an MS, and the call has not matured (by the transmission of Channel Grant PDUs), the call shall be cancelled if the TSCC detects that the calling party has ended the call (e.g PSTN goes on hook, or a calling MS has performed a random access request as described in clause 6.6.1.2.1). 
If the call is cancelled before the TSCC has transmitted any MS availability checks, the call is abandoned. 
NOTE 1: If the call is cancelled after an MS availability check has been transmitted, but before a response from the MS has been received, the TSCC may transmit an individually addressed C_AHOY(Service_Kind = 11112) call cancellation to the MS. The call should be abandoned without further retries. 
NOTE 2: The TSCC may collect a possible C_ACKU. 
If the call is cancelled after an MS availability check response has been received, the TSCC shall cancel the call by transmitting a C_AHOY(Service_Kind = 11112) to the called MS. 
On receipt of the C_AHOY(Service_Kind = 11112) the called MS shall respond with C_ACKU(MS_Accepted) and assume the TSCC has abandoned the call. 
In any case, the calling party is notified of the call cancel completion. If the call was originated from an MS, the TSCC shall then send an acknowledgement C_ACKD(Message Accepted) to the calling MS that the call is cancelled. For a line connected device, the notification is protocol specific. 
Table 6.37 illustrates the C_AHOY Information Elements to cancel a call. 
Table 6.37: C_AHOY information elements to cancel a call 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02 - Not Applicable  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02 - The Target address is an MS individual ID  
Appended_Blocks  2  002  
Service_Kind  4  Cancel Call Service - 11112 Service_Kind_Flag - 02  
Target address  24  Individual Address of Called MS  
Source Address or Gateway  24  Individual Address of Calling MS or Gateway  



6.6.1.3 Acknowledgements Sent to Calling MS 
From the point at which an MS has requested a particular service, the TSCC may send acknowledgement PDUs to indicate to the calling MS the progress of the service request: 
a) 
The TSCC may send PDUs that complete or terminate the call service request as follows: 

1) The TSCC may send C_NACKD to indicate to the calling MS that the call has failed. The C_NACKD PDU contains a Reason code to indicate to the caller why the service request failed. 
2) The TSCC may send a UDT header + appended UDT block to indicate that the call is diverted. From the TSCC perspective the service transaction is completed. The MS may choose to indicate the diverted address to the caller and return to the idle state, or automatically make a new service request with the diverted address as the destination. 
3) The TSCC may send C_ACKD(Mirrored_Reason = Callback) to inform the calling MS that the caller has indicated they will call back. 

b) 
The TSCC may send progress PDUs to the calling MS as a valid response to the random access request as follows: 


1) C_WACKD -An intermediate acknowledgement, more signalling to follow. 
2) C_QACKD - The TSCC has queued the call because the resource requested or called party is busy, more signalling to follow. 
3) C_AHOY - The TSCC has sent a C_AHOY PDU with the calling MS address in either the Source or Target address information element. 
6.6.1.4  Called Party (MS) Answering Mechanism  
6.6.1.4.0  Called Party (MS) Answering Mechanism - Introduction  
6.6.1.4.0.0  Procedures for OACSU and FOACSU calls  

The TSCC may process individual voice and packet data calls using either OACSU or FOACSU. The statements in this clause apply to calls directed to an MS. 
6.6.1.4.0.1 OACSU Call 
For a call using OACSU, the TS allocates a payload channel as soon as the resource is available to connect that call. Channel Grant PDUs are sent to the calling and called party. When the called party has successfully received the Channel Grant the user may be alerted to the incoming call. 

6.6.1.4.0.2 FOACSU Call 
For a call using FOACSU, the TS checks that the called party is available but the Channel Grant PDUs are not sent by the TSCC until the called party chooses to accept the call by RFC (perhaps by an off hook mechanism). In this case the called party sends a C_RAND - Call Answer Service request with ACCEPT = 02 to accept the call, or a C_RAND ­
Answer Call Service request with ACCEPT = 12 to reject the call. 
The C_RAND Information Elements for the Answer Call Service are illustrated in table 6.38. 
Table 6.38: C_RAND information elements for the Answer Call Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  02  
1  02  Privacy (see note 1)  
1  SUPED_SV  02  Not Applicable  
1  BCAST_SV  02  
1  Reserved  02  
2  PRIORTY_SV  002  
Proxy Flag  1  PROXY  02  
Reserved  2  002  
Accept/Reject  1  ACCEPT  02  The user has accepted this FOACSU call  
12  The user does not wish to accept this call  
Reserved  1  02  
Service_Kind  4  CALL_ANS  10012  Call Answer Service  
Target_address or Gateway  24  Value  Target Address (see note 2)  
Source_address  24  Value  Individual Address of the requesting MS (see note 3)  
NOTE 1: Privacy is not defined in the present document. NOTE 2: Target_Address represents an Individual address and is the MS or Gateway that initiated the call. NOTE 3: This is the MS that is targeted by the call initiating MS.  

The process for the called party MS accepting the call is described in clause 6.6.1.4.1. In the case where the called party MS rejects the call, the process is described in clause 6.6.1.4.2. 

6.6.1.4.1 FOACSU - Called Party Accepts the Call 
6.6.1.4.1.1 FOACSU  Called Party Accepts the Call. Calling Party is an MS 
Figure 6.51 illustrates the process. In this example an MS is the calling party. 

The steps involved in the call setup are: 
a) 
At "A" MS(A) makes a C_RAND Voice Call Service Request Source = MS(A), Target = MS(B). 

b) 
At "B" the TSCC sends a C_AHOY PDU addressed to MS(B) that requires an acknowledgement response. The C_AHOY sets the Service_Kind_Flag = 12 to indicate that the call set up is by FOACSU. 

c) 
"C" is the MS(B) response C_ACKU (Reason = 0100 01102) [MS Alerting]. At this point MS(B) alerts the user of the incoming call. 

d) 
"D" is the C_ACKD (Reason = 0100 01102) [Mirrored MS Alerting] to MS(A). The receipt of the mirrored acknowledgement by MS(A) indicates that MS(B) is alerting. 


When the called party is RFC (call accepted) then: 
e) 
At "E" the called party user actively answers the call, initiating a C_RAND Answer Call Service (ACCEPT = 

02) request. The Alert state is cancelled. 

f) 
At "F", if a traffic channel resource is available, the TSCC sends Channel Grant PDUs addressed to MS(A) and MS(B), (the TSCC may also queue the call until a traffic channel becomes available). 



6.6.1.4.1.2 FOACSU  Called Party Accepts the Call. Calling Party is a Line Connected Device 
The steps involved in a call to an MS from a line connected device are: 
a) 
A Line Connected Device initiates a FOACSU call to an MS; 

b) 
The TSCC sends a C_AHOY PDU addressed to the MS that requires an acknowledgement response. The C_AHOY sets the Service_Kind_Flag = 12 to indicate that the call set up is by FOACSU; 

c) 
the called MS responds with C_ACKU (Reason = 0100 01102) [MS Alerting]; 

d) 
the calling device is notified of the call's alerting state. At this point the called MS alerts the user of the incoming call. 


When the called party is RFC (call accepted) then: 
e) 
the called party user actively answers the call, initiating a C_RAND Answer Call Service (ACCEPT = 02) request. The Alert state is cancelled; 

f) 
if a traffic channel resource is available, the TSCC sends Channel Grant PDUs addressed to the called MS, (the TSCC may also queue the call until a traffic channel becomes available); 

g) 
the calling line device is notified of the call's connected state, when a traffic channel has been allocated. 




6.6.1.4.2 FOACSU - Called Party Rejects the Call 
6.6.1.4.2.1 FOACSU -MS originated call. Called Party Rejects the Call 

Figure 6.52: FOACSU Called Party Reject 
The steps involved in the call setup are: 
a) 
At "A" MS(A) makes a C_RAND Service Request Source = MS(A), Target = MS(B). 

b) 
At "B" the TSCC sends a C_AHOY PDU addressed to MS(B) that requires an acknowledgement response. The C_AHOY sets the Service_Kind_Flag = 12 to indicate that the call set up is by FOACSU. 

c) 
"C" is the MS(B) response C_ACKU (Reason = 0100 01102) [MS Alerting]. At this point MS(B) alerts the user of the incoming call. 

d) 
"D" is the C_ACKD to MS(A) (Reason = 0100 01102) [MS Alerting]. The receipt of the mirrored acknowledgement by MS(A) indicates that MS(B) is alerting.  


When the called party chooses to reject the call then: 
e) 
At "E" the called party user actively responds to the call, initiating a C_RAND Answer Call Service (ACCEPT = 12) to reject the call request. The Alert state is cancelled. 

f) 
At "F", the TSCC sends a C_ACK (Reason = 0110 00002) [Message Accepted] to MS(A) to acknowledge the C_RAND in step "E". 

g) 
At "G" the TSCC sends a C_NACKD (Reason Code = 0001 01002) [Recipient Refused] to the calling party MS(A). 


NOTE: Steps "F" and "G" may be sent by the TSCC in reverse order. 
6.6.1.4.2.2 FOACSU  Called Party Rejects the Call from a Line Connected Device 
The steps involved in the call setup are: 
a) 
A Line Connected Device initiates a FOACSU call to an MS. 

b) 
The TSCC sends a C_AHOY PDU addressed to the MS that requires an acknowledgement response. The C_AHOY sets the Service_Kind_Flag = 12 to indicate that the call set up is by FOACSU. 

c) 
the called MS responds with C_ACKU (Reason = 0100 01102) [MS Alerting]. 

d) 
the calling device is notified of the call's alerting state. At this point the called MS alerts the user of the incoming call. 


When the called party chooses to reject the call then: 
e) 
The called party user actively responds to the call, initiating a C_RAND Answer Call Service (ACCEPT = 12) to reject the call request. The Alert state is cancelled. 

f) 
The TSCC sends a C_ACK (Reason = 0110 00002) [Message Accepted] to MS(A) to acknowledge the C_RAND. 

g) 
The calling device is notified of the call's rejection. 




6.6.1.4.3 TSCC response to the Call Answer Random Access 
When a Call Answer random access service PDU is received on the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the voice call single-part service random access request are: 
a) 
If the MS indicates that the call is accepted (ACCEPT = 02): 

1) an acknowledgement C_WACKD, call is queued, more signalling to follow; 
2) an acknowledgement C_QACKD (Reason = 1010 00002), call is queued, waiting for resource; 
3) an acknowledgement C_NACKD, system failure, message rejected; 
4) Channel Grant PDU(s) for this call. 

b) 
If the MS indicates that the call is rejected (ACCEPT = 12): 


5) an acknowledgement C_WACKD (Reason = 1110 00002), call is queued, more signalling to follow; 
6) an acknowledgement C_NACKD, system failure, message rejected; 
7) an acknowledgment C_ACKD, (Reason = 0110 00002) Message Accepted. 


6.6.1.5 Maintenance of Call Progress Waiting Timers 
6.6.1.5.1 Call Waiting Timer for the Calling MS 
From the point at which an MS has requested a particular service, the TSCC may send acknowledgement PDUs to indicate to the calling MS the progress of the service request. If the calling MS receives an acknowledgement to its random access request, it shall start one of two timers. The timer TP_Timer shall be started for a voice or packet data random access service request that requires the allocation of a payload channel. The timer TNP_Timer shall be started for a call that only uses the TSCC for the call. If, while the timer is running the MS receives repeat acknowledgement PDU or a C_AHOY PDU applicable to that call, the timer shall be refreshed. If the timer expires, the MS may assume that the TSCC has abandoned the call and the MS shall return to the idle state. 
The TSCC shall maintain an identical timer. If the TSCC receives a random access request for a call that requires the allocation of a payload channel, it will start timer TP_Timer. A call that only requires the TSCC shall start timer TNP_Timer. The TSCC may send a further acknowledgement to the calling MS and refresh its timer. If the timer expires, the TSCC shall abandon that call service. 

6.6.1.5.2 Call Waiting Timer for the Called MS 
If an MS receives an individually addressed: 
 
C_AHOY PDU (Service_Kind = 00002, Service_kind_Flag = 02); 

 
C_AHOY PDU (Service_Kind = 00102, Service_Kind_Flag = 02); 

 
C_AHOY PDU (Service_Kind = 10102, Service_Kind_Flag = 02); or 

 
C_AHOY PDU (Service_Kind = 10112, Service_Kind_Flag = 02); 


indicating an OACSU availability check for a payload channel, the MS shall start timer T_Pending. If an MS receives an individually addressed: 
 
C_AHOY PDU (Service_Kind = 00002, Service_Kind_Flag = 12); 

 
C_AHOY PDU (Service_Kind = 10102, Service_Kind_Flag = 12); 

 
C_AHOY PDU (Service_Kind = 00102, Service_Kind_Flag = 12); or 

 
C_AHOY PDU (Service_Kind = 10112, Service_Kind_Flag = 12); 


indicating a FOACSU availability check for a payload channel, the MS shall start timer T_AnswerCall. 
If while the timer T_Pending or T_AnswerCall is running, the TSCC transmits a Channel Grant with Emergency bit=12 addressed to the MS individual address or one of its talkgroups, the MS may abandon the current call and immediately retune to the payload channel specified in the Emergency Channel Grant. 
While the applicable T_Pending or T_AnswerCall timer is running, if the MS receives a Talkgroup voice channel grant or Packet Data Talkgroup Channel Grant PDUwith Emergency bit = 02, the PDU shall be discarded. 
If the applicable T_Pending or T_AnswerCall timer expires and the MS has not been directed to a payload channel, the MS may assume that the TSCC has abandoned the call that was indicated in the C_AHOY PDU. If the call set up is FOACSU, the MS shall be alerting and expiry of T_AnswerCall shall cancel the MS alerting state. 
If while the applicable T_Pending or T_AnswerCall timer is running, the TSCC repeats the: 
 
C_AHOY PDU (Service_Kind = 00002); 

 
C_AHOY PDU (Service_Kind = 10102); 

 
C_AHOY PDU (Service_Kind = 00102); or 

 
C_AHOY PDU (Service_Kind = 10112). 


The MS shall refresh the appropriate timer. 
If while the applicable T_Pending or T_AnswerCall timer is running, the TSCC transmits an individually addressed C_AHOY call cancellation PDU C_AHOY (Service_Kind = 11112), the timer shall be suspended. The MS shall assume that the TSCC has abandoned the call. 
If an applicable Channel Grant is sent/received, the applicable T_Pending or T_AnswerCall timers in the TSCC and MS shall be cancelled. 


6.6.1.6 Payload Channel Assignment to a Payload Channel 
6.6.1.6.1 Payload Channel Assignment 
The TSCC shall assign a payload channel for the call by transmitting applicable Channel Grant PDUs for the service supported (individual MS or talkgroup). 
The Channel Grant PDUs may be single block CSBK format if the logical channel to absolute Tx/Rx frequency relationship is known, or the MBC Channel Grant PDUs may have an appended MBC block that contains the absolute Tx /Rx frequencies. 
For individual voice and packet data services to and from certain gateways, the payload channel may select offset timing to provide a full duplex service to MS. The TSCC provides a differing gateway identifier to distinguish between the aligned and offset mode of payload assignment: 
a) 
for aligned timing PSTNI, PABXI, LINEI, IPI, DISPATI (see clause A.4); 

b) 
for offset timing PSTNDI, PABXDI, LINEDI, IPDI, DISPATDI (see clause A.4). 


Channel Grant PDUs may be transmitted by the TS on a payload channel to announce the current allocated call before the call's first transmission or swap the call to a replacement channel. 
If a particular talkgroup call is active on a payload channel, the TSCC may continue to transmit appropriately addressed Channel Grant PDUs at regular intervals to permit late joining MSs (MSs who may have just arrived on the control channel) to join that talkgroup call. 
6.6.1.6.2 Timing requirements for the allocation of a Payload Channel and PDUs that may be sent 
6.6.1.6.2.0 Payload PDUs and Timing - Introduction 
MSs are directed to a payload physical/logical channel for voice and certain data services. Where a payload channel is 
allocated MS shall comply with the timing requirement defined in this clause. If neither slot of a payload channel is active, there is no requirement that the payload channel is keyed. If at least one of the payload channel slots becomes active then the payload channel keys up. 
A payload channel that is not active in a call shall send IDLE PDUs. A payload channel that is active in a call may send: 
 
Payload Channel Grant. 

 
P_PROTECT PDUs to remove MSs that are not legitimate users of the traffic channel. 

 
P_CLEAR PDUs to indicate the end of the call and clear down the MSs. 

 
P_AHOY and P_xACK PDU's. 

 
Speech (or data) items received inbound. 

 
Terminator PDUs between inbound speech (data) items. 


A payload channel active in a call may also send manufacturer specific messaging as defined in ETSI TS 102 361-1 [5] either via embedded signalling, data or control PDUs. Upon reception of manufacturer specific signalling an MS that does not recognize the manufacturer specific signalling shall ignore the manufacturer specific signalling and continue to stay on the payload channel. Upon reception of manufacturer specific signalling an MS that does recognize the manufacturer specific signalling may behave according to the manufacturer specific signalling. 
Upon reception of manufacturer specific signalling as defined in ETSI TS 102 361-1 [5] on the payload channel a BS that does not recognize the manufacturer specific signalling may ignore the manufacturer specific signalling. Upon reception of manufacturer specific signalling on the payload channel a BS that does recognize the manufacturer specific signalling may behave accordingly to the manufacturer specific signalling. 

6.6.1.6.2.1 TSCC and Payload Channels are Site Timeslot Synchronized 
If slot 1 on the payload channel is selected by the TS, then the MS shall be capable of receiving or transmitting information in the second occurrence of slot 1 on the payload channel after having decoded the Channel grant on the TSCC successfully. 
If slot 2 on the payload channel is selected by the TS, then the MS shall be capable of receiving or transmitting information in the third occurrence of slot 2 on the payload channel after having successfully decoded the Channel Grant on the TSCC. 
Independent of the payload assignment to slot 1 or 2 on the payload channel, the payload channel shall start to transmit PDUs from the list specified in clause 6.6.1.6.2 outbound, following the transmission of the first channel grant on the TSCC until payload for transmission is available. 

6.6.1.6.2.2 TSCC and Payload Channels are not Timeslot Synchronized 
The MS shall be capable of receiving or transmitting on the next upcoming assigned payload slot after it successfully synchronized to the outbound payload channel. 
The Synchronization period shall include the occurrence of 4 CACH on the traffic channel after the first sync opportunity for the MS. This is to allow for robust TC bit decoding in fringe situations. 
Independent of the payload assignment to slot 1 or 2 on the payload channel, the payload channel shall start to transmit IDLE or PDUs from the list specified in clause 6.6.1.6.2 outbound following the transmission of the first channel grant on the TSCC. These PDUs shall be transmitted until a minimum of 4 CACH, after the first MS Sync pattern receive opportunity, have been transmitted. 
NOTE: Depending on the actual RF coverage for the intended area to be served by the system a number of 4 CACH might be regarded as not necessary. 
It is recommended to have a programmable parameter in the infrastructure and MS with a value of 2 or 4. 



6.6.1.7 Calls to ALLMSID, ALLMSIDL and ALLMSIDZ 
The present document prescribes calls to All MS. 
An MS may request a call to ALLMSID, ALLMSDL or ALLMSIDZ (see clause A.4). 
A call to ALLMSID shall be treated as a broadcast call to a talkgroup and is directed to all MS on all radio sites in a particular system. 
A call to ALLMSIDZ shall be treated as a broadcast call to a talkgroup and is directed to specific radio sites in a particular system. The choice of radio sites included in this call is manufacturer specific. 
A call to ALLMSIDL shall treated as a broadcast call to a talkgroup and is directed to all MS restricted to the radio site of which the call was initiated. 
It is expected that an MS initiating a All MS call set the information elements in the C_RAND PDU correctly to identify the call as a broadcast to a talkgroup. 


6.6.2 Voice Call Procedures 
6.6.2.0 Voice Call Procedures - Introduction 
Voice calls require a payload channel over which the call is conducted. Calls may be transacted between the entities in table 6.39. 
Table 6.39: Voice Call Services 

Originator  Recipient  
MS  MS or Talkgroup  
MS  All MS (Broadcast)  
MS  Line Connected destination through a Gateway: PABX Extension PSTN destination Other gateway equipped for voice  
Line Connected source via a Gateway: PABX Extension PSTN destination Other gateways equipped for voice  MS or Talkgroup or All MS  

The Individual/Talkgroup PDU in the Random Access Service Request shall determine if the caller has selected a Tier III service to an individual MS or a talkgroup. 
The Service_Options PDU in the Random Access Service Request shall activate options for the Voice Call Service Request: 
 
Emergency service: 

-Emergency calls shall take precedence over all other calls. Emergency call may be pre-emptive causing another call to be cleared down if the resource requested for the emergency call is not available. 

 
Supplementary_user data Transfer Service requested for this call: 

-Information may be sent to the called party as part of and to support another call service. For instance the PSTN Call Line Identity may be passed to the called party as part of a voice call setup. 

 
Broadcast service: 

-The Broadcast Call Voice service provides a one-way voice call from any user to a predetermined talkgroup. 

 
Priority: 

-The priority option permits the originator to select one of four levels of priority. The TSCC may manage and manipulate a call queue to cause calls with a higher priority to mature faster. The procedures the TSCC may employ are not prescribed in the present document. 

 
Call to All MS: 


-A voice call may be made to all MS. In this case, the calling MS or Gateway selects the Identifier ALLMSID, ALLMSIDL, or ALLMSIDZ (see clause A.4) as the destination address. The call shall use the Broadcast Service. 

6.6.2.1 Voice Call Procedures for the TSCC 
6.6.2.1.0 Voice Call Procedures for the TSCC - Introduction 
An MS requests a Tier III voice service by generating a random access request PDU with the Target Address set to one of the following: 
a) 
an individual MS address (single-part call set-up); 

b) 
a talkgroup MS address (single-part call set-up); 

c) 
a gateway address that indicates a multi-part call set-up. The gateway address indicates the destination 


e.g. PABXI for a call to a PABX, PSTNI for a call to the PSTN, LINEI for a call to a line connected destination, DISPATI for a call to the system dispatcher. For flexibility calls to line connected destinations and the system dispatcher, such calls are treated in the same way as PABX/PSTN calls. To indicate full duplex fixed end calls the corresponding full duplex gateways shall be used. 
When the TSCC responds to the random access request, it shall start a timer (TP_Timer). This timer shall be refreshed if the TSCC sends further call related PDUs C_WACKD, C_QACKD or C_AHOY, to the calling party. 

6.6.2.1.1 TSCC Response to Single-part Voice Call Set-up 
When a random access voice service PDU is received on the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the voice call single-part service random access request are: 
a) 
An acknowledgement PDU C_NACKD, C_QACKD, C_WACKD, C_ACKD(mirrored_reason = callback). 

b) 
A UDT Head + appended block(s) (voice call is diverted) UDT Header PDUs Source_Address = DIVERTI (conveying a diverted address) Supplementary_Flag = 12 and (A) = 02. 

c) 
A C_AHOY PDU to the called party MSID (called party radio check) if the call is to an individual MS 

address. (C_AHOY Service_Kind = 00002, Source address = calling party MS ID, Target address = called party MS ID) (see clause 6.6.2.1.4). 

d) 
A C_AHOY PDU, Source Address = Authentication Challenge Value (MS authentication check) (see clause 6.4.8.2). 

e) 
A C_AHOY PDU to the calling party (C_AHOY Service_Kind = 00002, Source address = SUPLI, Target address = calling party MSID) for the calling MS to send supplementary_user data (see clause 6.4.13). 

f) 
A Channel Grant PDU(s) for this call. 


For e) the TSCC shall then invoke the UDT procedure by sending the C_AHOY to the calling MS to send the supplementary_user data. The format of the supplementary_user data is specified in the UDT. If the TSCC does not successfully receive the UDT from the MS, the TSCC may repeat the C_AHOY, or transmit a C_NACKD to indicate failure of the call, or continue with the call setup and abandon the supplementary_user data. 
The order in which c) and e) shall be sent is prescribed in clause 6.4.13. 
NOTE: A TSCC may send a C_AHOY addressed to a talkgroup (C_AHOY Service_Kind = 00012, Source address = calling party MS ID, Target address = talkgroup) to check that at least one member of the talkgroup is listening to the TSCC. 
The purpose of the C_AHOY PDU in c), d) and e) is identified by the source address information element in the C_AHOY PDU. For a called party check it is the calling party MS ID. For an authentication check it is the gateway address AUTHI. For e) it is SUPLI. 

6.6.2.1.2 TSCC Response to Multi-part Voice Call Set-up 
For calls to extended_addresses, the MS requests multi-part addressing by generating a voice call random access request with the Destination Address information element set to a gateway address (PABXI, PSTNI, etc.) and the Proxy Flag information element to indicate if one or two appended UDT blocks are required to transport the extended_address from the MS. For calls to the PABX/PSTN/LINE/dispatcher one appended UDT can carry up to 20 dialled digits, and in that case the Proxy Flag information element shall be set to 02, and for the number of dialled digits = 21 to 44 the Proxy 
Flag information element shall be set to 12. 
The PDUs that shall represent a valid response to the voice call multi-part part voice service random access request are: 
a) 
An acknowledgement PDU C_NACKD, C_WACKD, C_QACKD. 

b) 
A C_AHOY PDU from Source Address PABXI, PSTNI, LINEI, DISPATI or the corresponding duplex gateways for the calling MS to send the extended_address information. 

c) 
A C_AHOY PDU from Source Address SUPLI for the calling MS to send supplementary_user data (see clause 6.4.13). 


The order in which b) and c) shall be sent is prescribed in clause 6.4.13. 
For b) the TSCC shall then invoke the UDT procedure by sending a C_AHOY to the calling MS to send the extended_address information. For a call to the PABX, PSTN, LINEI, DISPATI or the corresponding duplex gateways the extended_address information shall be BCD digits. If the Proxy_Flag in the MS C_RAND = 02 then 
Appended_Blocks(UAB) in the C_AHOY shall be set to 002, else if the Proxy_Flag in the C_RAND = 12 then Appended_Blocks (UAB) in the C_AHOY shall be set to 012. If the TSCC does not successfully receive the UDT from the MS, the TSCC may repeat the C_AHOY, or transmit a C_NACKD to indicate failure of the call. 
For c) the TSCC shall then invoke the UDT procedure by sending the C_AHOY to the calling MS to send the supplementary_user data. The format of the supplementary_user data is specified in the UDT. If the TSCC does not successfully receive the UDT from the MS, the TSCC may repeat the C_AHOY, or transmit a C_NACKD to indicate failure of the call, or continue with the call setup and abandon the supplementary_user data. 

6.6.2.1.3 Acknowledgements Sent by the TSCC to the Calling MS (voice) 
The TSCC may send acknowledgement PDUs following the random access voice service request to indicate the progress of the call, to terminate the call or indicate call-back. If the TSCC sends a PDU to indicate the progress of a call it shall start a waiting timer TP_Timer. (The calling party MS maintains a similar timer): 
a) Progress PDUs are: 
1) C_WACKD: Intermediate acknowledgement. More PDUs to follow. 
2) C_QACKD: Called MS engaged in another call. 
3) C_QACKD: Call is queued because the resource is in use at the moment. 
4) If the call is FOACSU, C_ACKD(Mirrored_Reason = MS_ALERTING) to indicate to the calling party 
that the called party is alerting (sent an acknowledgement to the C_AHOY Service_Kind = 00002 Service_Kind_Flag = 12). 
b) 
Termination PDUs are selected from an appropriate Reason information element in a C_NACKD PDU (see clause 7.2.8): 

1) C_NACKD. 

c) 
Call-Back PDUs indicate to the calling MS that the voice call service has been accepted by the called party for call back: 

1) C_ACKD(mirrored_reason = CallBack). 

d) 
If the TS has previously accepted a call diversion indicating that this type of service request should be directed to another called party, the TSCC shall invoke the UDT and send a UDT Head + Appended data to the calling party. UDT Header PDUs Source Address = DIVERTI (conveying a diverted address) Supplementary_Flag = 12 and (A) = 02. 



6.6.2.1.4 Voice Radio Check 
For calls to individual MS, the TSCC shall check that the called party is in radio contact and will accept the call before a payload channel is allocated. 
The TSCC may check availability of the called party by: 
a) 
Sending a C_AHOY PDU to that called party. If the message C_AHOY Service_Kind = 00002 Service_Kind_Flag = 02 then the TSCC is checking that the MS is in radio contact and can accept this call immediately. If the message C_AHOY Service_Kind = 00002 Service_Kind_Flag = 12 then the TSCC is checking that MS is RFC. 

b) 
Sending a Multi-block UDT with supplementary_user data (if the supplementary_user data service is active for this call). 


If b) is sent, b) shall follow a). (See clause 6.4.13.) 
If a response is not received from the called party the TSCC may repeat the C_AHOY. 
The availability check demands a response from the called party: 
 
If the response is C_NACKU, the TSCC shall send an appropriate call failed response to the calling MS and echo the Reason in the C_NACKU PDU (mirrored_reason). 

 
If the response is C_ACKU(Reason = CallBack), the TSCC shall send an appropriate CallBack response to the calling MS, C_ACKD (mirrored_reason = 0100 01012). 

 
If the response is C_ACKU(Reason = Message_Accepted), the TSCC shall progress the service request and allocate a payload channel by transmitting appropriate Channel Grant PDUs. 

 
If the called MS is FOACSU enabled, a valid response to C_AHOY Service_Kind = 00002 Service_Kind_Flag = 12 is C_ACKU(Reason = MS_ALERTING), i.e. MS alerting but not yet RFC. 


NOTE: A multi-block UDT cannot transfer all Service Options to the called party. If the Service Options are essential to the operation of the system, a C_AHOY/response and a Multi_block UDT/response may be sent to the MS. 

6.6.2.1.5 Availability Check for Voice Calls connected through Gateways 
For calls connected through gateways the TS equipment may wait until the destination is RFC before allocating the payload channel. For example a TS may wait until the PSTN handset has been answered before sending Channel Grant PDUs. 


6.6.2.2 Voice Call Procedures for MS 
6.6.2.2.0 Voice Call Procedures for MS -Introduction 
An MS is able to request a voice call service to another individual MS or a talkgroup using a single-part service request. For a voice service requested to extended_addresses through a gateway the MS requests a multi-part service request. For multi-part service requests the MS sets the gateway address as the called party. The full destination address is then uploaded from the MS to the TSCC by the UDT procedure. 
An MS requests a voice service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer -set appropriately as prescribed in table 6.40. 
Table 6.40: C_RAND Information Elements for a Voice Call Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  02  Non-emergency service  
12  Emergency service  
1  02  Privacy (see note 1)  
1  SUPED_SV  02  No Supplementary_user data Transfer Service required for this call (see note 5)  
12  Supplementary_user data Transfer Service requested for this call (see notes 5 and 6)  
1  BCAST_SV  02  Non-broadcast service  
12  Broadcast service (see note 2)  
1  Reserved  02  Reserved  
2  PRIORTY_SV (see note 3)  002  Normal (low) priority  
012  Medium Priority  
102  High Priority  
112  Highest Priority  
Proxy Flag  1  PROXY  02  Number of Extended BCD digits for addressing through a gateway = 1 to 20  
12  Number of Extended BCD digits for addressing through a gateway = 21 to 44  
Appended_ Supplementary_Data  2  SUPED_VAL  Value  Number of appended UDTs required to transport supplementary_user data (see note 7)  
Ambient Listening Service  1  ALS_SERV  02  Ambient Listening Service not requested  
12  Ambient Listening Service requested (see note 8)  
Reserved  1  02  
Service_Kind  4  IND_V_SRV  00002  Individual Voice Call Service  
GRP_V_SRV  00012  Talkgroup Voice Call Service  
Target_address or Gateway  24  Value  Target Address (see note 4)  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE 1: Privacy is not defined in the present document. NOTE 2: The broadcast option is only applicable to the talkgoup call service. NOTE 3: If EMERG = 12 then PRIORTY_SV is set to 002. NOTE 4: If Service_Kind = IND_V_SRV then Target_Address represents an Individual address. If Service_Kind = GRP_V_SRV then Target_Address represents a Talkgroup. NOTE 5: If SUPED_SV = 02 then SUPED_VAL = 002. NOTE 6: Extended addressing through a gateway does not utilize this information element, rather a Target Address of PSTNI, PABXI, LINEI or DISPATI indicates data transfer service required for extended addressing. NOTE 7: This is not used to indicate the appended UDTs required to transport extended addressing through a gateway.  NOTE 8: If ALS_SERV = 12 then Service Kind = IND_V_SRV.  


6.6.2.2.1 Initiating a Single-part Voice Call Service 
For a voice service request to an individual MS or talkgroup, the destination address is completely expressed by the Target Address information element in the random access PDU. The Service_Kind specifies if the voice call service is addressed to an individual address or a talkgroup. 

6.6.2.2.2 Response to the Single-part Voice Service Request 
MS shall accept the following PDUs as valid response to the single-part voice service request: 
a) 
an acknowledgement C_WACKD, C_QACKD, C_NACKD, C_NACKD(mirrored_reason), C_ACKD(mirrored_reason = callback); 

b) 
a C_AHOY called party radio check; 

c) 
a UDT header + appended UDT block. UDT Header Source_Address = DIVERTI (conveying a diverted address) Supplementary_Flag = 12 and (A) = 02; 

d) 
a Channel Grant PDU; 

e) 
if the C_RAND Service_Options SUPED_SV = 12 a C_AHOY from SUPLI to upload the supplementary_user data from the calling MS. 


The order in which b) and e) shall be sent is prescribed in clause 6.4.13. 
If the MS has requested supplementary data by setting the C_RAND Service_Options SUPED_SV = 12 in the call request, and the TSCC either does not support supplementary data or does not wish to accept supplementary data at this time, then the TSCC shall either: 
a) 
continue to process the call setup and abandon the request for supplementary user data; or 

b) 
transmit a C_NACKD to indicate failure of the call. 



6.6.2.2.3 Initiating a Multi-part Voice Call Service 
For a voice service request utilizing a gateway (PSTNI, PABXI, LINEI or DISPATI), the destination address is not contained in the random access PDU, rather it is sent with a separate UDT Data transfer. When one of these target IDs is used the PROXY information element in the C_RAND indicates the number of appended UDTs required to upload the extended addressing. The Service_Kind specifies if the voice call service is addressed to an individual address or a talkgroup. 
If the initiating MS also wants to send supplementary data (i.e. GPS data) when requesting a multi-part voice service, this is accomplished by setting the Supplementary Data Service Options information element to 1. In this case the Appended Supplementary Data information element indicates the number of appended UDTs required to upload the supplementary data. 

6.6.2.2.4 Response to the Multi-part Voice Service Request 
MS shall accept the following PDUs as valid response to the multi-part voice service request: 
a) 
an acknowledgement C_WACKD, C_QACKD, C_NACKD; 

b) 
a C_AHOY PDU from PABXI,PSTNI,LINEI, DISPATI to upload the extended_address: 


1) for a call to the PABX/PSTN/LINEI/DISPATI or the corresponding duplex gateways, a C_AHOY to upload the dialled digits; 
2) if the Service_Options SUPED_SV = 12 a C_AHOY from SUPLI may be sent to upload the supplementary data from the calling MS. 
For b), if the Voice Call Service Request requires extended_address information and the calling MS has selected the Supplementary Data in the Service_Options, the TSCC uploads the information in two steps. The order in which the information is uploaded is not prescribed because the C_AHOY specifically indicates which UDT inbound procedure has been invoked by setting appropriate unambiguous Gateway information elements in the C_AHOY PDU. The gateway information elements for C_AHOY PDUs to support voice services are prescribed in table 6.41. 
Table 6.41: C_AHOY Information Elements for Multi-part Voice Call Setup 

Action  Service Kind  Gateway address  Remark  
MS send PSTN digits  00002 - Individual Call Service  PSTNI  The calling party shall send BCD dialled digits  
MS sends PABX digits  00002 - Individual Call Service  PABXI  The calling party shall send BCD dialled digits  
MS sends digits to the line  00002 - Individual Call Service  LINEI  The calling party shall send BCD dialled digits  
MS sends digits to dial the dispatcher  00002 - Individual Call Service  DISPATI  The calling party shall send BCD dialled digits  
MS sends supplementary_user data  00002 - Individual Call Service  SUPLI  The format of the data shall be determined by the calling party  


6.6.2.2.5 Acknowledgements Received by the Calling MS (voice) 
At some time after sending the voice service request random access PDU the calling MS may receive an acknowledgement. On receiving the acknowledgement, the MS shall start or restart a waiting timer, TP_Timer (the TSCC maintains a similar timer)The MS shall take the actions prescribed: 
a) Progress PDUs for a single-part voice call Service Request are: 
1) C_WACKD: Intermediate acknowledgement. More PDUs to follow. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the calling MS; 
2) C_QACKD: Called MS engaged in another call. The MS shall wait TP_Timer for further signalling; 
3) C_QACKD: Call is queued because the resource is in use at the moment. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the calling MS. 
(The MS may choose to differentiate between 1), 2) and 3) by providing the calling MS with a visual or audible indication for each of the conditions.) 
b) 
Termination PDUs are selected from an appropriate Reason information element in a C_NACKD PDU (see clause 7.2.8). If the call was rejected by the calling party, the termination PDU sent by the TS shall be a C_NACKD(mirrored_reason): 

1) C_NACKD: Call refused and terminated. The C_NACKD PDU provides a versatile range of Reason codes and mirrored reason codes to indicate to the calling party why the Service request was terminated. The calling party shall return to the idle state. 

c) 
Call-Back PDU to indicate to the calling MS that the voice call service has been accepted by the called party for call back. Service concluded. The calling party shall return to the idle state: 

1) C_ACKD(mirrored_reason = CallBack). 

d) 
If the TS has previously accepted a call diversion indicating that this type of service request be directed to another called party, a UDT Head + Appended data indicating the diverted address. 



6.6.2.2.6 Availability Check to the Called Party (voice) 
For an individual MS address call set-up, the called MS shall receive a radio check to which it shall respond with an appropriate acknowledgement: 
 
The called party shall respond C_NACKU, if it cannot accept the call (the TSCC shall send an appropriate call failed response to the calling MS). 

 
The called party shall respond C_ACKU(Reason = CallBack), if the called MS wishes to return the call at some future time (the TSCC shall send an appropriate CallBack response (mirrored reason) to the calling MS). 

 
The called party shall respond C_ACKU(Reason = MS_Accepted), if the call is accepted and the MS can accept the call immediately (the TSCC shall progress the service request and allocate a payload channel by transmitting appropriate Channel Grant PDUs). If the MS is not FOACSU enabled and the message to which the MS is sending the acknowledgment is C_AHOY Service_Kind = 00002 Service_Kind_Flag = 12 then a 

valid response is C_ACKU(Reason = MS_Accepted). 

 
If the MS is FOACSU enabled and the message to which the MS is sending the acknowledgment is C_AHOY 


Service_Kind = 00002 Service_Kind_Flag = 12 then a valid response is C_ACKU(Reason = MS_ALERTING), i.e. MS alerting but not yet RFC. After sending the acknowledgment the MS may indicate RFC by sending a C_RAND (Answer Call Service, ACCEPT = 02). If the called MS is alerting but the user 
does not wish to accept the call the MS shall send a C_RAND(Answer Call Service, ACCEPT = 12) to reject the call. 
 If the MS is FOACSU enabled, the call includes supplementary data, and the message to which the MS is sending the acknowledgment is HEAD Source - SUPLI, Target = MS(B) + AD [supplementary data] UDT_Option_Flag = 12 then a valid response is C_ACKU(Reason = MS_ALERTING), i.e. MS alerting but 
not yet RFC. After sending the acknowledgment the MS may indicate RFC by sending a C_RAND (Answer Call Service, ACCEPT = 02). If the called MS is alerting but the user does not wish to accept the call the MS shall send a C_RAND(Answer Call Service, ACCEPT = 12) to reject the call. 

6.6.2.2.7 Payload Channel Allocation 
MS shall check the address information elements received in Voice Channel Grant PDUs. If it is determined that the Channel Grant PDU is applicable then it shall retune to the indicated physical/logical payload channel to commence the Voice Service. 
If the call is directed to a talkgroup and the Tier III system employs Late Entry (see clause 6.6.2.4), then the TSCC may continue to send Channel Grant PDUs(Late_Entry = 12) at timed intervals while the call is active. MS who have just switched on or just become active on a TSCC may then be drawn into the talkgroup: 
For Private Voice Channel Grant CSBK PDU: 
1) If an MS receives a Private Channel Grant PDU where either the Source Address or the Target Address information element matches its individual address then that PDU is applicable. 
Talkgroup Voice Channel Grant CSBK PDU: 
1) If an MS receives a Talkgroup Channel Grant PDU with the Target Address information element matching one of its talkgroup addresses then that PDU is applicable. 
2) If an MS receives a Talkgroup Channel Grant PDU with the Source Address matching its individual address then that PDU is applicable. 
3) If an MS receives a Broadcast Talkgroup Channel Grant PDU with the Target Address matching one of its talkgroup addresses then that PDU is applicable. 
4) If an MS receives a Broadcast Talkgroup Channel Grant PDU with the Source Address matching its individual address then that PDU is applicable. 

6.6.2.2.8 Calling MS in Single Part Voice Call Setup SDL 
In figures 6.53 and 6.54, SDL is defined from the behaviour description in clause 6.6.2.2. NOTE: The state names are not related to state names in ETSI TS 102 361-1 [5] and ETSI TS 102 361-2 [6]. 
process VoiceCallSetup 1(2) 


idle 







6.6.2.2.9 Call Set-up MSC that also Transfers Supplementary_user Data 
Figure 6.55 illustrates a call set-up from an MSC where supplementary_user data is transferred as part of the call set-up. 
MSC TS_CallSetupWithSupplementaryData 


1 
1 1 1 
1 
1 1 1 


6.6.2.3 Procedures for the Voice Payload Channel 
6.6.2.3.0 Procedures for the Voice Payload Channel - Introduction 
MSs are directed to a voice payload physical/logical channel on the TSCC. When the voice call is terminated, MS returns to the TSCC and the payload channel is reassigned to another call. 
A voice call may extend over several MS PTT items for the duration of the call (unless the call is terminated prematurely by the expiry of the voice payload timer) if the system has assigned the call as "message trunking". If the system has assigned the call as pure "transmission trunking" the call shall be terminated after the end of each PTT item. A third possibility is that the call has been assigned as "quasi-transmission trunking". In this case a short interval timer (TV_Hangtime) between PTT items holds the payload channel. If this short interval timer expires, the call is terminated and the next PTT item sets up a new call. 
The voice payload channel may be assigned to one of two basic timing models. The particular timing model is specified on the TSCC and signalled to MS by the Channel Grant PDUs (see ETSI TS 102 361-1 [5]): 
a) 
Aligned timing supports Reverse Channel (RC) signalling by providing the receiving MS with a Reverse Channel transmit opportunity on the inbound channel without missing any of its outbound traffic. Aligned timing does not support full duplex calls. 

b) 
Offset timing support MS to fixed end, and MS to MS duplex traffic by allowing an MS to transmit in one timeslot and receive the outbound transmission on the alternate timeslot. 


The procedures for TS/MS behaviour on the voice payload channel are described in ETSI TS 102 361-2 [6]. In the trunked environment however, call maintenance PDUs are exchanged between MS and TS in addition to the PDUs described in ETSI TS 102 361-2 [6]. 
When active, a payload channel shall transmit the CACH with any SLC (including manufacturer selectable) except the C_SYS_Parms SLC. 
The beginning of a call shall use PATCS method (see ETSI TS 102 361-2 [6], clause 5.2.2.1). For an individual MS call service, the called party will already have had a radio check as part of the call set-up procedure. 

6.6.2.3.1 TS Procedures for the Voice Payload Channel 
6.6.2.3.1.0 TS Procedures for the Voice Payload Channel - Introduction 
A physical payload channel may carry one or two independent voice calls. If a new physical channel is allocated on the TSCC, the CCL_BS shall start both the CCL_1 and CCL_2 processes as described in ETSI TS 102 361-2 [6], clause 5.1.1.1.3 and start the voice channel payload timer as follows: 
a) 
For an individual MS/MS or MS/Talkgroup normal or high priority call T_MS-MS_TIMER. 

b) 
For a gateway individual MS or Talkgroup normal or high priority call T_MS-Line_TIMER. 

c) 
For an emergency call T_EMERG_TIMER. 



6.6.2.3.1.1 MS Radio Check 
The TS may poll an individual MS to check if the MS is active on the payload channel by transmitting a P_AHOY PDU with the information elements set as follows. 
The TSCC transmits a P_AHOY with the information elements as illustrated in table 6.42. 
Table 6.42: P_AHOY Information Elements for Voice Service Individual Radio Check 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02  
Ambient Listening Service (ALS_SERV)  1  02 - Not Applicable  
G/I  1  02 - The Target address is an MS individual ID  
Appended_Blocks  2  002  
Service_Kind  4  Individual Call Service - 00002  
Target address  24  Individual Address of Called MS  
Source Address or Gateway  24  TSI  

The response is P_ACKU(Reason = Message_Accepted). 
ETSI 
The TS may also poll a talkgroup to check if at least one member of the talkgroup is active on the payload channel by transmitting a P_AHOY PDU with the information elements as illustrated in table 6.43. 
Table 6.43: P_AHOY Information Elements for Voice Service Talkgroup Radio Check 
Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  12 - The Target address is a talkgroup  
Appended_Blocks  2  002  
Service_Kind  4  Talkgroup Call Service - 00012  
Target address  24  Address of the talkgroup  
Source Address or Gateway  24  TSI  

The response is P_ACKU (Reason = Message_Accepted). If more than one MS makes a response to this PDU, it is likely that the TS will be unable to decode it because of collisions. The purpose of this procedure is to determine if any talkgroups are active, therefore the TS may use the presence of the burst for the result of the talkgroup radio check. 
NOTE: The TS may poll an individual MS or a talkgroup to check if the MS is active on the payload channel irrespective of the Call Service. This procedure is described in clause 6.4.12. 

6.6.2.3.1.2 Authentication Check 
The authentication procedures are identical to the authentication procedures described in clause 6.4.8.2 but with the C_AHOY PDU replaced by a P_AHOY PDU. 

6.6.2.3.1.3 Disabling/enabling a User's PTT 
The TS may at any time send a P_PROTECT (Protect_Kind = DIS_PTT) addressed to an individual MS, talkgroup, or ALLMSID to disable the PTT. Since the P_PROTECT PDU is unacknowledged the PDU may be repeated at layer 2. 
The TS may also at any time send a P_PROTECT (Protect_Kind = EN_PTT) addressed to an individual MS, talkgroup, or ALLMSID to enable the PTT. Since the P_PROTECT PDU is unacknowledged the PDU may be repeated at layer 2. 
While the TS is transmitting P_PROTECT (Protect_Kind = EN_PTT_ONE_MS) PDUs addressed to an individual MSID, the MS addressed by this PDU shall enable the PTT and is allowed to transmit as soon as the payload channel is free. However, while the PDUs are being transmitted, all other MS shall disable the PTT. 

6.6.2.3.1.4 Swapping the Call to a Replacement Voice Payload Channel 
The TS may send Channel Grant PDUs on the payload channel to move MS already active to an alternative voice payload channel. If MS had previously received a P_PROTECT to disable their PTT, the PTT shall be re-enabled on the replacement voice payload channel unless the call service was a broadcast when called party(s) shall retain their PTT status (enable/disable) from the original call. 

6.6.2.3.1.5 Removing MS from the Payload Channel that are not Legitimate Parties 
The TS may transmit P_PROTECT(ILLEGALLY_PARKED) PDUs at any time. 
The addresses specified in the P_PROTECT PDU shall be either an MS address, Talkgroup, or an appropriate Gateway/Identifier: 
a) 
For an individual call, if the target address transmitted by the P_PROTECT(ILLEGALLY_PARKED) PDUs matches the target address transmitted by the Channel Grant AND the source address transmitted by the P_PROTECT(ILLEGALLY_PARKED) PDUs matches the source address transmitted by the Channel Grant, then the MS shall do nothing, otherwise the MS shall leave the payload channel without making any further transmissions. 

b) 
For a call to a talkgroup, if the target address transmitted by the P_PROTECT(ILLEGALLY_PARKED) PDUs matches the target address transmitted by the Channel Grant, then the MS shall do nothing, otherwise the MS shall leave the payload channel without making any further transmissions. 

c) 
If an individual call has been set up and the two parties are active on the traffic channel, the P_PROTECT(ILLEGALLY_PARKED) is an appropriate PDU for the TS to send in the gaps between items. However if an include call is initiated by one of the MSs addressed to a third party, there will be three parties engaged in the call. From this point, between items, and until the call is cleared down: 


-the P_PROTECT(ILLEGALLY_PARKED) shall not be sent by the TS; 
-the TS may send LC Terminator PDUs. 

6.6.2.3.1.6 Clearing Down the Voice Call 
The TS shall clear the parties involved in the payload voice call if: 
a) 
The relevant overall payload call timer T_MS-MS_TIMER, T_MS-Line_TIMER or T_EMERG_TIMER expires. 

b) 
The TS receives a P_MAINT (Maint_Kind = DISCON) PDU. 

c) 
The TS detects by any other means that the call has ended (e.g. PSTN destination on hook). 

d) 
The TV_Hangtime interval timer expires. 


The TS shall clear down the call by transmitting P_CLEAR PDU(s). Since this PDU is not acknowledged it may be repeated at layer 2. Additionally for scenario a) the TS may send the Reverse Channel Cease Transmission Command to remove a transmitting radio. 

6.6.2.3.1.7 TS Single Part Voice Call Termination MSC 
Figure 6.56 illustrates the MSC illustrating the TS voice call termination procedure for MS to MS or MS-Talkgroup call on payload channel as described in clause 6.6.2.3.1.6. 
NOTE: The option 'TS detects by other means that the call has ended' is not illustrated in this MSC. 
MSC TS_MsMsVoiceCallClearDown 

/* TS voice call clear down of a MS to MS or MS to Talkgroup call on payload channel. */ 
TS_CCL 



6.6.2.3.1.8 Clearing down a Particular MS or Talkgroup 
The TS may selectively clear an individual MS by transmitting a P_AHOY with information elements set as table 6.44. 
Table 6.44: P_AHOY Information Elements to Clear an Individual MS from a Voice Payload Channel 
Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02 Indicates that the target is an Individual Address  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02 - The Target address is an MS individual ID  
Appended_Blocks  2  002  
Service_Kind  4  Cancel Call Service - 11112 Service_Kind_Flag - 02  
Target address  24  Individual Address of MS  
Source Address or Gateway  24  TSI (see clause A.4)  

The permitted response is P_ACKU(Message_Accepted). The TS may clear a talkgroup by transmitting a P_AHOY with information elements set as table 6.45. 
Table 6.45: P_AHOY information elements to clear a talkgroup from a voice payload channel 
Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  12 Indicates that the target is a talkgroup  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  12 - The Target address is a talkgroup  
Appended_Blocks  2  002  
Service_Kind  4  Cancel Call Service - 11112  
Target address  24  Talkgroup  
Source Address or Gateway  24  TSI  

The permitted response is P_ACKU(Message_Accepted). 


6.6.2.3.2 MS Procedures for the Voice Payload Channel 
6.6.2.3.2.1 MS Receives an MS Radio Check 
If an MS receives a P_AHOY to its individual address with information elements set as table 6.42, then it shall respond with a P_ACKU (Reason = MS_Accepted). 
If an MS receives a P_AHOY to the talkgroup address previously transmitted in the Channel Grant PDU that directed this MS to the payload channel (PDUs set as table 6.43), then it shall respond with a P_ACKU (Reason = MS_Accepted). 

6.6.2.3.2.2 MS Receives an Authentication Check Challenge 
The authentication procedures are identical to the authentication procedures described in clause 6.4.8.2 but with the authentication response C_ACKU PDU replaced by a P_ACKU PDU. 

6.6.2.3.2.3 Disabling/enabling a User's PTT 
If the MS receives a P_PROTECT (Protect_Kind = DIS_PTT) addressed to its individual address, to it is talkgroup address previously transmitted in the Channel Grant PDU directed it to the payload channel, or ALLMSID, the MS shall disable it is PTT. 
If the MS receives a P_PROTECT (Protect_Kind = EN_PTT) addressed to its individual address, to it is talkgroup address previously transmitted in the Channel Grant PDU, or ALLMSID, the MS shall re-enable it is PTT unless this MS was the recipient of a broadcast call. 
While an MS is receiving P_PROTECT (Protect_Kind = EN_PTT_ONE_MS) PDUs addressed to its individual address, the MS addressed by this PDU shall enable the PTT. All other MS shall disable the PTT. 

6.6.2.3.2.4 MS Receives a Channel Grant PDU(s) 
If an MS receives an applicable Channel Grant addressed to its individual address or to it is talkgroup address previously transmitted in the Channel Grant PDU that directed it to the payload channel, then it shall retune to the designated physical/logical channel. If the PTT was disabled prior to receiving the Channel Grant, the PTT shall be re-enabled unless this MS was the recipient of a broadcast call set-up or a call to ALLMSIDL, ALLMSIDZ or ALLMSID (see clause A.4). 
If an MS receives a Channel Grant addressed to its individual address or to its talkgroup address that contains a destination address that is different to that contained in the Channel Grant PDU that directed it to the payload channel, then it is manufacturer specific as to whether this Channel Grant is applicable. If applicable, the MS may retune to the designated physical/logical channel, thereby leaving the current call and becoming party to a new call. If the PTT was disabled prior to receiving the Channel Grant, the PTT shall be re-enabled unless the destination address of the Channel Grant is a call to ALLMSIDL, ALLMSIDZ or ALLMSID (see clause A.4). 

6.6.2.3.2.5 End of Call 
If the call is an individual call or the MS is the initiator of a talkgroup, the MS shall signify the end of the call by transmitting a number of P_MAINT (Maint_Kind = DISCON). The MS shall send the P_MAINT PDUs consecutively then return to the control channel acquisition procedures (it is suggested that the TSCC sampled is the TSCC that transferred the call to the payload channel). 
If the MS is the recipient of a talkgroup, the MS shall end its call without sending any PDUs and return to the control channel acquisition procedures (it is suggested that the TSCC sampled is the TSCC that transferred the call to the payload channel). 

6.6.2.3.2.6 MS Receives P_CLEAR 
If an MS receives an applicable P_CLEAR PDU then it shall move to the TSCC indicated by the Logical Physical Channel Number and Slot Number as specified in clause 7.1.1.3.2. 

6.6.2.3.2.7 MS Receives a Selective Clear P_AHOY 
If an MS receives an individually addressed P_AHOY, Service_Kind = 11112, Service_Kind_Flag = 02 information element then it shall send a P_ACKU (Reason = MS_Accepted), abandon the payload channel and return to the control channel acquisition procedures (it is suggested that the TSCC initially sampled is the TSCC that transferred the call to the payload channel). 
If an MS receives a P_AHOY, Service_Kind = 11112, Service_Kind_Flag = 12 information element addressed to it is talkgroup address previously transmitted in the Channel Grant PDU the talkgroup then it shall send a PACKU (Reason = MS_Accepted) abandon the payload channel and return to the control channel acquisition procedures (it is suggested that the TSCC initially sampled is the TSCC that transferred the call to the payload channel). 

6.6.2.3.2.8 MS Receives a P_PROTECT PDU(s) 
If an MS receives a P_PROTECT(ILLEGALLY_PARKED) PDU, then: 
a) 
For an individual call, if the target address received from P_PROTECT(ILLEGALLY_PARKED) PDU matches the target address from the Channel Grant AND the source address transmitted by the P_PROTECT(ILLEGALLY_PARKED) PDU matches the source address transmitted by the Channel Grant, then the MS shall do nothing, otherwise the MS shall leave the payload channel without making any further transmissions. 

b) 
For a call to a talkgroup, if the target address received from P_PROTECT(ILLEGALLY_PARKED) PDU matches the target address transmitted from the Channel Grant, then the MS shall do nothing, otherwise the MS shall leave the payload channel without making any further transmissions. 



6.6.2.3.2.9 Time out on the Payload Channel 
An MS shall maintain a number of timers while active on a voice payload channel: 
a) 
Inactivity timer: 

-An MS shall measure the length of time the MS is unable to detect adequate signal quality. If the MS fails to detect adequate signal quality for a continuous time TV_Inactive, the MS shall assume that the call has ended and return to the control channel acquisition procedures without sending any call termination signalling (it is suggested that the TSCC sampled is the TSCC that transferred the call to the payload channel). 

b) 
Item Duration timer: 

-An MS shall maintain a maximum item duration timer. If the MS reaches the maximum item duration TV_Item, the MS shall transmit a Terminator with LC, disable the PTT and wait until the user releases the PTT before re-enabling the PTT. 

c) 
An overall payload call timer: 


-If the overall voice payload call timer T_MS-MS_TIMER, T_MS-Line_TIMER or T_EMERG_TIMER expires, the MS shall transmit a number (N_Maint) of P_MAINT PDUs consecutively then return to the control channel acquisition procedures (it is suggested that the TSCC sampled is the TSCC that transferred the call to the payload channel) If the MS was sending speech frames when the overall voice payload call timer expires, the MS shall transmit a Terminator with LC prior to transmitting the P_MAINT PDUs. 



6.6.2.4 Late Entry 
6.6.2.4.1 The Principle 
For a call set-up addressed to a talkgroup, the talkgroup is assigned to a payload channel by the TSCC transmitting one or more Channel Grant PDUs. These PDUs contain an Information Element, Late_Entry, that is set to 02 for the initial Channel Grant PDUs. 
For voice calls to talkgroups, an MS may have switched on or just come into range of a TSCC at some time after the call was set-up. If the network employs Late Entry, while a call is active on the payload channel, the TSCC shall send a Channel grant PDU (Late_Entry = 12) at intervals addressed the same talkgroup. This PDU is known as a Late_Entry 
Channel Grant. MS becoming active on the TSCC while such a call exists will be drawn into the talkgroup call by the Late Entry Channel Grant PDUs. 
During a talkgroup call, a recipient may clear from the talkgroup payload channel leaving the remaining participants in the call. This MS returns to the TSCC. The call is still active therefore the TSCC is sending Late_Entry Channel Grant PDUs. The MS is able to distinguish the Late_Entry Channel grant PDUs from the Channel Grant send during the call set-up and avoid being swept back into the talkgroup call. 

6.6.2.4.2 The Call Timer 
A C_BCAST (Announcement_type = 0 00012) may be transmitted by the TSCC to inform MS of the maximum call time for a payload channel. If it is important that any Late_Entry MS call timers are synchronized with the MS already 
occupying the payload channel, the TSCC may precede the Late_Entry Channel Grant with a C_BCAST (Announcement_type = 0 00012) indicating the time remaining for the call already established. The TSCC may also need to send a C_BCAST (Announcement_type = 0 00012 C_BCAST (Announcement_type = 0 00012) immediately following the Late_Entry Channel Grant to return the call timer broadcast for new call set-ups. 


6.6.2.5 Preferential Call Notification 
6.6.2.5.1 The Principle 
When MS have joined a talkgroup call, they are unavailable to join other talkgroup calls that are subsequently initiated. In some circumstances, an MS may regard other calls as preferential to the current call. 
Preferential call notification provides a mechanism by which a TSCC may inform MS that are participating in an ongoing talkgroup call, of a new call that may be preferential to some MS in that call. On receiving a preferential call notification, MS may either leave the current talkgroup call and move to the new talkgroup call, or ignore the announcement for the new call and remain in the current talkgroup call. 

6.6.2.5.2 Announcing a New Call on the Payload Channel 
The TS may announce a new call on a payload channel using a P_GRANT with Information Elements appropriately set for the new call. MS may follow this P_GRANT, thereby leaving the current call and moving to a different call on a different payload channel or may choose to ignore the P_GRANT and remain on the current payload channel and call. 
It is manufacturer specific that the TS sends, and MS accept and action, P_GRANTS for different calls on a payload channel. 


6.6.2.6 Ambient Listening Service (ALS) 
6.6.2.6.1 Ambient Listening Service (ALS) - Introduction 
The Ambience Listening Service (ALS) enables a calling party (MS or Gateway) to cause the called MS to transmit without any action from that user.  

6.6.2.6.2 Ambient Listening Service Procedures for the Call Setup 
An MS or Gateway is able to request a voice call service to another individual MS invoking the Ambient Listening Service using a single-part voice service request. 
An MS requests an ALS voice service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer -set appropriately as prescribed in table 6.40. In this case the ALS_SERV bit = 12, Service_Kind = 00002, indicating to the 
TSCC that the MS has requested the ALS Service. The calling MS may choose to raise the urgency level by setting EMERG = 12 thereby invoking an emergency ALS request. The TSCC shall respond in accordance with clauses 6.6.1 and 6.6.2. 
If a Gateway requests an ALS voice service, the AI call setup process starts by the TSCC transmitting a C_AHOY (ALS_SERV bit = 12,) to the called MS. 
NOTE: The Channel Grant PDU does not contain information indicating the ALS service has been invoked. This information is contained in the C_AHOY that preceded the Channel Grant. 
The TSCC procedures are identical to a normal voice call except that for the C_RAND PDU and C_AHOY PDU, the ALS_SERV bit = 12. 
The TSCC shall send a C_AHOY as defined in Table 6.46 to check that the destination MS will accept the ALS call. 
Table 6.46: C_AHOY Information Elements for an ALS MS Radio Check 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02 Not Applicable  
Ambient Listening Service (ALS_SERV)  1  12 - Radio Check to determine if the MS is listening, & notify a pending ALS call (see note)  
G/I  1  02 Target address is an MS individual ID  
Appended_Blocks  2  002  
Service_Kind  4  Individual Voice Call Service - 00002  
Target address  24  Address of individual MS  
Source Address or Gateway  24  Address of calling party MS or gateway  
NOTE: ALS is only applicable for an individual MS voice call.  

If the called MS supports ALS, the response shall be C_ACKU(Reason = Message_Accepted). The called MS shall then shall start a timer, T_ALS_REQUEST_LIFE_SPAN and if while this timer is running, the MS receives a Private Channel Grant PDU with the Source Address and Target Address matching those of the preceding C_AHOY, then the MS shall initiate the call as an ALS call. 
For a call invoking ALS the called party shall accept ALS calls as OACSU. From the point that an MS has accepted an invitation to participate in an ALS call, call progress rules defined in clause 6.6.1.5 shall apply. 
If the timer T_ALS_REQUEST_LIFE_SPAN expires before an applicable Private Channel Grant PDU is received, the MS shall from that point onwards regard all applicable Private Channel Grant PDUs as a non-ALS call type. 
If the MS does not support ALS, the response shall be C_NACKU(Reason=MSNot_Supported) with the information elements as illustrated in table 6.47. 
Table 6.47: MS ALS Radio Check Response Elements 

Response_Info  7  Value  
Reason Code = MSNot_Supported  8  0000 00002  
Reserved  1  02  
Target address  24  Address of Calling Party  
Additional Information (Source Address)  24  MS individual address  


6.6.2.6.3 Ambient Listening Service Procedures for the Payload Channel  
The present document does not: 
a) 
prescribe if the called party MS provides an indication (or does not provide an indication) to the user that ALS has been invoked; 

b) 
preclude that during ambience listening the called party MS may or may not cancel the ALS call and make and receive calls as normal. 


The ALS procedures support calls with emergency and emergency pre-emptive priority. 
While the ALS payload channel is active, the called party MS shall transmit continuously for the duration defined by the appropriate T_ALS or T_ALS_E timer.  
When active on the Payload Channel, the calling party is primarily listening on the channel but the Payload Interrupt feature, as defined in clause 6.6.2.6.6 may be used to interrupt the ALS transmitting MS in order to communicate back. When the interrupting MS has finished its transmission, the interrupted ALS MS shall resume its transmission for the remainder of the ALS timer. 

6.6.2.6.4 Timeout on the ALS Payload Channel 
An ALS invoked MS shall maintain a number of timers while active on an ALS voice payload channel (clause A.1 table A.1): 
a) 
T_ALS defines the overall timer for non-emergency priority calls; 

b) 
T_ALS_E defines the overall timer for emergency calls; 



6.6.2.6.5 Call Termination for the ALS service 
If while active on the Payload Channel, the called party MS ceases its transmission, the TSCC may end the call by any of the procedures prescribed in clauses 6.6.2.3.2.5, 6.6.2.3.2.6 and 6.6.2.3.2.7. 
If the overall voice payload call timer T_ALS or T_ALS_E expires, the MS shall transmit a number (N_Maint) of P_MAINT (Maint_Kind = DISCON) PDUs consecutively to indicate the end of the call, then return to the control channel acquisition procedures (it is suggested that the TSCC sampled is the TSCC that transferred the call to the payload channel) If the MS was sending speech frames when the overall voice payload call timer expires, the MS shall transmit a Terminator with LC prior to transmitting the P_MAINT PDUs. 
In addition to the mechanisms defined above, and where the ALS service has been initiated by an MS, the initiating MS may request the TS terminate the ALS call. The procedures for this are defined in clause 6.4.14.3.4. 

6.6.2.6.6 Payload Interrupt for the ALS service 
A trunked network may employ a combination of MS that do and do not support the Payload Interrupt service. If the trunked network does support these services, then they shall be implemented for the ALS service in accordance with the present document (see clauses 6.4.14 and 6.4.15). 
If the MS supports the Payload Interrupt service during an ALS call, then the MS shall automatically resume its transmission on observing that the interrupting party has ceased talking, as indicated by the absence of outbound voice PDUs. 
A TSCC may utilize P_PROTECT (Protect_Kind = EN_PTT_ONE_MS) PDUs addressed to the interrupting party to prevent the interrupted ALS MS from automatically retransmitting subsequent to a transmit interrupt request on the outbound channel. 
An ALS MS may also utilize the timer T_ALS_RETRANSMIT_DELAY to delay automatic re-keying of its transmission to accommodate delays in the TS presenting valid outbound DMR activity from the interrupting MS, where the TS does not support the use of P_PROTECTS. The timer T_ALS_RETRANSMIT_DELAY shall be started by the MS on ceasing its transmission, subsequent to accepting a transmit interrupt request. 



6.6.3 Packet Data Call Procedures 
6.6.3.0 Packet Data Call Procedures -Introduction 
Packet data calls require a payload channel over which the call is conducted. Packet Data may be IP Data or UDT Short Data utilizing either Unconfirmed or Confirmed data DLL bearer services as defined in ETSI TS 102 361-1 [5] or ETSI TS 102 361-3 [7]. Calls may be transacted between the entities in table 6.48. 
Table 6.48: Packet Data Call Services 

Mode  Originator  Recipient  
MS  MS or Talkgroup  
MS  All MS (Broadcast)  
Packet Data  MS  Line Connected destination through a Gateway: IP Gateway  Data Gateway Other gateway equipped for data  
Line Connected source via a Gateway: IP Gateway  Data Gateway Other gateway equipped for data  MS or Talkgroup or All MS  

A packet data payload channel may support multiple simultaneous calls. 

6.6.3.1 Packet Data Call Procedures for the TSCC 
6.6.3.1.0 Packet Data Call Procedures for the TSCC - Introduction 
An MS requests a Tier III service by generating a random access request PDU with the Target Address set to: 
a)  An individual MS address (single-part call setup).  
b)  A talkgroup MS address (single-part call setup).  
c)  A gateway address that indicates a multi-part call setup.  

When the TSCC responds to the random access request, it shall start a timer (TP_Timer). This timer shall be refreshed if the TSCC sends further call progress PDUs to the calling party. 

6.6.3.1.1 TSCC Response to Single-part Packet Data Call Set-up 
When a random access packet data PDU is received on the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the packet call single-part service random access request are: 
a) 
An acknowledgement PDU C_NACKD, C_QACKD, C_WACKD. 

b) 
A UDT Head + appended block(s) (packet data call is diverted) UDT Header PDUs Source_Address = DIVERTI (conveying a diverted address) Supplementary_Flag = 12 and (A) = 02. 

c) 
A C_AHOY PDU to the called party MSID, if the call is to an individual MS. C_AHOY Service_Kind = 00102, Source address = calling party MSID, Target address = called party MSID. (see Table 6.49) 

d) 
A C_AHOY PDU, Source Address = Authentication Challenge Value (MS authentication check). 

e) 
A C_AHOY PDU to the calling party C_AHOY Service_Kind = 00102 Source address = SUPLI, Target address = calling party MSID for the calling MS to send supplementary_user data. 

f) 
A Channel Grant PDU(s) for this call. 


The order in which c) and e) shall be sent is prescribed in clause 6.4.13. 
NOTE: A multi-block UDT cannot transfer all Service Options to the called party. If the Service Options are essential to the operation of the system, a C_AHOY/response and a Multi_block UDT/response may be sent to the MS. 
Table 6.49: C_AHOY Information Elements for a Packet Data Call Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
CSBK Opcode  6  CSBKO  0111002  C-AHOY  
Feature Set ID  8  SFID  0x00  Standard Feature Set ID  
Service_Options_Mir ror  7  1  EMERG  02  Non-emergency service  
12  Emergency service  
1  02  Privacy (see note)  
1  SUPED_SV  02  No Supplementary Data Transfer Service required for this call  
12  Supplementary Data Transfer Service requested for this call  
1  HI_RATE  02  MS requests single slot payload channel data  
12  MS requests dual slot payload channel data  
1  SIMI  02  Single Item Data  
12  Multi-Item Data  
2  PRIORTY_SV  002  Normal (low) priority  
012  Medium Priority  
102  High Priority  
112  Highest Priority  
Service_Kind Flag  1  02  Not Applicable  
Appended Blocks  2  002  Not Applicable  
Ambient Listening Service  1  02  Not Applicable  
IG  02  Target Address is an individual (MS) ID  
12  Target Address is a Talkgroup ID  
Service_Kind  4  IND_D_SRV  00102  Individual packet data Call Service  
GRP_D_SRV  00112  Talkgroup packet data Call Service  
Target_address or Gateway  24  Value  Target Address of called MS  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE: Privacy is not defined in the present document.  


6.6.3.1.2 TSCC Response to Multi-part Packet Data Call Setup 
For calls to extended_addresses, the MS requests multi-part addressing by generating a packet data call random access request with the Destination Address information element set to a gateway address (PABXI, PSTNI, IPI, etc.) and the Proxy Flag information element to indicate the number of digits for the extended_address. For the number of dialled digits = 1 to 20 the Proxy Flag information element shall be set to 02. For the number of dialled digits = 21 to 44 the 
Proxy Flag information element shall be set to 12. The PDUs that shall represent a valid response to the multi-part packet data service random access request are: 
a) 
An acknowledgement PDU C_NACKD, C_WACKD(reason = Wait). 

b) 
A C_AHOY PDU from PABXI, PSTNI, LINEI, DISPATI or the corresponding duplex gateways for the calling MS to send the extended_address information (C_AHOY Service_Kind = 00102 Source address = PABXI, PSTNI, LINEI, DISPATI, Target address = calling party MSID). 

c) 
A C_AHOY PDU from SUPLI for the calling MS to send supplementary data (C_AHOY Service_Kind = 00102 Source address = SUPLI, Target address = calling party MSID (see clause 6.5)). 


For b) the TSCC shall then invoke the UDT procedure by sending a C_AHOY to the calling MS to send the extended_address information. For a call to the PABX or PSTN the extended_address information shall be BCD digits. If the Proxy_Flag in the MS C_RAND = 02 then Appended_Blocks(UAB) in the C_AHOY shall be set to 002, else if 
the Proxy_Flag in the C_RAND = 12 then Appended_Blocks (UAB) in the C_AHOY shall be set to 012. 
For c) the TSCC shall then invoke the UDT procedure by sending a C_AHOY to the calling MS to send the supplementary data. The format of the supplementary data is specified in the UDT. 
If the TSCC does not successfully receive the UDT from the MS, the TSCC may repeat the C_AHOY or transmit a C_NACKD to indicate failure of the call. 

6.6.3.1.3 Acknowledgements Sent on the TSCC to the Calling MS (packet) 
The TSCC may send acknowledgement PDUs following the random access data packet service request to indicate the progress of the call, to terminate the call. If the TSCC sends a PDU to indicate the progress of a call it shall start a waiting timer TP_Timer. (The calling party MS maintains a similar timer): 
a) 
Progress PDUs are: 

1) C_WACKD: Intermediate acknowledgement. More PDUs to follow. 
2) C_QACKD: Called MS engaged in another call. 
3) C_QACKD: Call is queued because the resource is in use at the moment. 

b) 
Termination PDUs are selected from an appropriate Reason information element in a C_NACKD PDU (see clause 7.2.8): 

1) C_NACKD. 

c) 
If the TS has previously accepted a call diversion indicating that this type of service request be directed to another called party, the TSCC shall invoke the UDT and send a UDT Head + Appended data to the calling party. 



6.6.3.1.4 Radio Check for Packet Data 
For calls to individual MS, the TSCC shall check that the called party is in radio contact and shall accept the call before a payload channel is allocated. The radio check may also indicate that the called party data terminal equipment is ready. 
The TSCC may check availability of the called party by: 
a) Sending a C_AHOY PDU to that called party. 
b) Sending a Multi-block UDT with supplementary data (if the supplementary data service is active for this call). If a response is not received from the calling party the TSCC may repeat the C_AHOY. The availability check demands a response from the called party: 
 
If the response is C_NACKU, the TSCC shall send an appropriate call failed response to the calling MS and echo the Reason in the C_NACKD PDU. 

 
If the response is C_ACKU(Reason = Message_Accepted), the TSCC shall progress the service request and allocate a payload channel by transmitting appropriate Channel Grant PDUs. 


For calls to packet talkgroups the TSCC may check that at least one member of the talkgroup is listening to the TSCC by sending a C_AHOY addressed to the talkgroup. 

6.6.3.1.5 Availability Check for Packet Calls Connected Through Gateways 
For calls connected through gateways the TS equipment may wait until the destination is ready before allocating the payload channel. For example a TS waits until PSTN equipment has linked the data terminal before sending Channel Grant PDUs. 


6.6.3.2 Packet Data Call Procedures for MS 
6.6.3.2.0 Packet Data Call Procedures for MS - Introduction 
An MS is able to request a packet data call service to another individual MS or a talkgroup using a single-part service request. For a packet data service requested to extended_addresses through a gateway the MS requests a multi-part service request. For multi-part service requests the MS sets the gateway address as the called party. The full destination address is then provided by the MS to the TSCC by the UDT procedure. 
An MS requests a packet data service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer -set appropriately as prescribed in table 6.50. 

6.6.3.2.1 Initiating a Single-part Packet Data Call Service 
An MS requests a packet data service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer -set appropriately as prescribed in table 6.50. 
Table 6.50: C_RAND Information Elements for a Packet Data Call Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  02  Non-emergency service  
12  Emergency service  
1  02  Privacy (see note 1)  
1  SUPED_SV  02  No Supplementary Data Transfer Service required for this call  
12  Supplementary Data Transfer Service requested for this call (see notes 4 and 5)  
1  HI_RATE  02  MS requests single slot payload channel data  
12  MS requests dual slot payload channel data  
1  SIMI  02  Single Item Data  
12  Multi-Item Data  
2  PRIORTY_SV (see note 2)  002  Normal (low) priority  
012  Medium Priority  
102  High Priority  
112  Highest Priority  
Proxy Flag  1  PROXY  02  Number of Extended BCD digits for addressing through a PSTN/PABX gateway = 1 to 20. For IP gateway extended_address is IPV4  
12  Number of Extended BCD digits for addressing through a PSTN/PABX gateway = 21 to 44. For IP gateway extended_address is IPV6  

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Appended_ Supplementary_Data  2  SUPED_VAL  Value  Number of appended UDTs required to transport supplementary data (see note 6)  
Appended_UDT Short Data  2  SDATA_VAL  002  Not Applicable for Packet Data  
Service_Kind  4  IND_D_SRV  00102  Individual packet data Call Service  
GRP_D_SRV  00112  Talkgroup packet data Call Service  
Target_address or Gateway  24  Value  Target Address (see note 3)  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE 1: Privacy is not defined in the present document. NOTE 2: If EMERG = 12 then PRIORTY_SV is set to 002. NOTE 3: If Service_Kind = IND_D_SRV then Target_Address represents an Individual address. If Service_Kind = GRP_D_SRV then Target_Address represents a Talkgroup. NOTE 4: If SUPED_SV = 02 then SUPED_VAL = 002. NOTE 5: Extended addressing through a gateway does not utilize this information element, rather a Target Address of PSTNI, PABXI, LINEI or DISPATI indicates data transfer service required for extended addressing. NOTE 6: This is not used to indicate the appended UDTs required to transport extended addressing through a gateway.  

For a packet data service request to an individual MS or talkgroup, the destination address is completely expressed by the Target Address information element in the random access PDU. The Service_Kind specifies if the data packet call service is addressed to an individual address or a talkgroup. 

6.6.3.2.2 Response to the Single-part Packet Data Service Request 
MS shall accept the following PDUs as valid response to the single-part data packet service request: 
a) 
an acknowledgement C_WACKD, C_QACKD, C_NACKD; 

b) 
a C_AHOY from the calling party MS ID - called party radio check; 

c) 
a Channel Grant PDU; 

d) 
if the Service_Options SUPED_SV = 12 a C_AHOY from SUPLI to upload the supplementary data from the calling MS; 

e) 
a UDT Head + appended blocks UDT Header PDUs Source_Address = DIVERTI, Supplementary_Flag = 1. 


The order in which b) and d) shall be sent is prescribed in clause 6.4.13. 
If the MS has requested supplementary data by setting the C_RAND Service_Options SUPED_SV = 12 in the call request, and the TSCC either does not support supplementary data or does not wish to accept supplementary data at this time, then the TSCC shall either: 
a) 
continue to process the call setup and abandon the request for supplementary user data; or 

b) 
transmit a C_NACKD to indicate failure of the call. 



6.6.3.2.3 Initiating a Multi-part Packet Data Service 
For a packet data request utilizing a gateway (PSTNI, PABXI, LINEI or DISPATI), the destination address is not contained in the random access PDU, rather it is sent with a separate UDT Data transfer. When one of these target IDs is used the PROXY information element in the C_RAND indicates the number of appended UDTs required to upload the extended addressing. The Service_Kind specifies if the packet data call service is addressed to an individual address or a talkgroup. 
If the initiating MS also wants to send supplementary data (i.e. GPS data) when requesting a multi-part packet data service, this is accomplished by setting the Supplementary Data Service Options information element to 1. In this case the Appended Supplementary Data information element indicates the number of appended UDTs required to upload the supplementary data. 

6.6.3.2.4 Response to the Multi-part Packet Data Service Request 
MS shall accept the following PDUs as valid response to the multi-part data packet service request: 
a) 
an acknowledgement C_WACKD, C_QACKD, C_NACKD; 

b) 
a C_AHOY PDU from PABXI, PSTNI, LINEI, DISPATI to upload the extended_address: 


1) for a call to the PABX/PSTN/LINEI, DISPATI or the corresponding duplex gateways, a C_AHOY to upload the dialled digits; 
2) for a call to an IP destination, a C_AHOY to upload the IP address; 
3) if the Service_Options SUPED_SV = 12 a C_AHOY from SUPLI may be sent to upload the supplementary data from the calling MS. 
NOTE: For b), if the Data packet Call Service Request requires extended_address information and the calling MS has selected the Supplementary Data in the Service option, the TSCC uploads the information in two steps. The order in which the information is uploaded is prescribed in clause 6.4.13. 

6.6.3.2.5 Acknowledgements Received by the Calling MS (packet data) 
At some time after sending the packet data service request random access PDU the calling MS may receive an acknowledgement. On receiving the acknowledgement, the MS shall start or restart a waiting timer, TP_Timer. (The TSCC maintains a similar timer). 
The MS shall take the actions prescribed: 
a) 
Progress PDUs for a single-part data packet call Service Request are: 

1) C_WACKD: Intermediate acknowledgement. More PDUs to follow. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the calling MS; 
2) C_QACKD (Reason = Queued_for_Busy): Called MS engaged in another call. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the calling MS; 
3) C_QACKD (Reason = Queued_for_Resource): Call is queued because the resource is in use at the moment. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the calling MS. The MS may choose to differentiate between 1), 2) and 3) by providing the calling MS with a particular indication for each of the conditions. 

b) 
Termination PDUs are selected from an appropriate Reason information element in a C_NACKD PDU (see clause 7.2.8): 


1) C_NACKD: Call refused and terminated. The C_NACKD PDU provides a versatile range of Reason codes to indicate to the calling party why the Service request was terminated. The calling party shall return to the idle state. If the call was rejected by the calling party, the termination PDU sent by the TS shall be a C_NACKD(mirrored_reason). 

6.6.3.2.6 Availability Check to the Called MS (packet data) 
For an individual MS address call set-up, the called MS shall receive a radio check to which it shall respond with an appropriate acknowledgement: 
 
The called party shall respond C_NACKU, if it cannot accept the call or its data terminal equipment is not ready (the TSCC shall send an appropriate call failed response to the calling MS (mirrored_reason)). 

 
The calling party shall respond C_ACKU (Reason = Message_Accepted), if the call is accepted (the TSCC shall progress the service request and allocate a payload channel by transmitting appropriate Channel Grant PDUs). 



6.6.3.2.7 Payload Channel Allocation 
MS shall check the address information elements received in Packet Data Channel Grant PDUs. If it is determined that the Channel Grant PDU is applicable then it shall retune to the indicated physical/logical payload channel to commence the Packet Data Service. 
If the call is directed to a talkgroup and the Tier III system employs Late Entry (see clause 6.6.2.4), then the TSCC may continue to send Channel Grant PDUs at intervals while the call is active. MS who have just switched on may then be drawn into the talkgroup. In circumstances detailed in clause 6.6.2.4.1, the MS may discard the Late Entry Channel Grant PDUs: 
a) 
For Private Packet Data Channel Grant CSBK PDU: 

1) If an MS receives a Private Channel Grant PDU where either the Source Address or the Target Address information element matches its individual address then that PDU is applicable. 

b) 
Talkgroup Packet Data Channel Grant CSBK PDU: 


1) If an MS receives a Talkgroup Channel Grant PDU with the Target Address information element matching one of its talkgroup addresses then that PDU is applicable. 
2) If an MS receives a Talkgroup Channel Grant PDU with the Source Address matching its individual address then that PDU is applicable. 


6.6.3.3 Procedures for the Packet Data Payload Channel 
6.6.3.3.0 Procedures for the Packet Data Payload Channel - Introduction 
MSs are directed to a Packet Data payload physical/logical channel on the TSCC. When the Packet Data call is terminated by either the TS or MS, the MS shall return to the TSCC. When a physical channel has been assigned, data PDUs of arbitrary length are transferred over the DMR Air Interface using the packet technique described in ETSI TS 102 361-1 [5] and ETSI TS 102 361-3 [7]. 
A Packet Data call may continue unless the call is terminated by a) the MS or b) the TS or c) terminated prematurely as a result of the expiry of an overall payload call payload timer. 
A physical channel may be configured such that two independent payload channels are available to the system (single slot transmission mode) or a high-speed data mode (dual slot transmission mode) where both logical channels are combined to provide a high-speed Packet Data service. The particular data speed configuration is requested by the calling MS and signalled to the parties by the Channel Grant PDUs. 
The procedures for TS/MS behaviour on the Packet Data payload channel are described in ETSI TS 102 361-3 [7]. In the trunked environment however, additional call maintenance PDUs may be exchanged between MS and TS in addition to the PDUs described in ETSI TS 102 361-3 [7]. 
The packet data channel supports both single item and multi-item data sessions. Multi-item data sessions consist of two or more single item data sessions back and forth between entities. 
When active on a payload channel, the TS shall transmit the CACH with any SLC (including manufacturer selectable) except the C_SYS_Parms SLC. 
The system may direct a number of independent Packet Data calls to the same Packet Data channel. MSs may then share that channel, but it shall be noted that while MS are away from the TSCC, they are unable to receive new calls. New Packet Data calls directed to an MS that is active on a Packet Data channel may either be queued by the system or such a call may be directed to the Packet Data channel and share the channel with other ongoing calls. 
If the destination is an ipv4 or ipv6 address, the destination address may be derived from the DLL address or may be specified by the calling party as a function of a multi-part call set-up. For a multi-part call setup, when the MS is directed to the packet data payload channel the system will have the full IP destination address. In this case the MS sets the destination address to IPI for all packet data items. 
If an MS receives a packet data call set-up from an ipv4 or ipv6 address, the UDT protocol may send the full source IP address as part of the call set-up using the supplementary data transfer service. In this case the system then uses IPI as the source address for the packet data call. 

6.6.3.3.1 TS Procedures for the Packet Data Payload Channel 
6.6.3.3.1.0 TS Procedures for the Packet Data Payload Channel - Introduction 
If a new physical channel is allocated on the TSCC, the CCL_BS shall start both the CCL_1 and CCL_2 processes as described in ETSI TS 102 361-2 [6], clause 5.1.1.1.3 and start the Packet Data payload timer T_PACKET_TIMER. 

6.6.3.3.1.1 MS Radio Check 
The TS may poll an individual MS to check if the MS is active on the payload channel by transmitting a P_AHOY PDU with the information elements set as follows. 
The TSCC transmits a P_AHOY with the information elements as illustrated in table 6.51. 
Table 6.51: P_AHOY Information Elements for Packet Data Service Individual Radio Check 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02 - The Target address is an MS individual ID  
Appended_Blocks  2  002  
Service_Kind  4  Individual Packet Call Service - 00102  
Target address  24  Individual Address of Called MS  
Source Address or Gateway  24  TSI  

The response is C_ACKU (Reason = Message_Accepted). 
The TS may also poll a talkgroup to check if at least one member of the talkgroup is active on the payload channel by transmitting a P_AHOY PDU with the information elements set as follows. The TSCC transmits a P_AHOY with the information elements as illustrated in table 6.52. 
Table 6.52: P_AHOY Information Elements for Packet Service Talkgroup Radio Check 

Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  12 - The Target address is a talkgroup  
Appended_Blocks  2  002  
Service_Kind  4  Talkgroup Packet Call Service - 00112  
Target address  24  Address of the talkgroup  
Source Address or Gateway  24  TSI  

The response is P_ACKU (Reason = Message_Accepted). If more than one MS makes a response to this PDU, it is likely that the TS will be unable to decode it because of collisions. The purpose of this procedure is to determine if any talkgroups are active therefore the TS may use the presence of the burst for the result of the talkgroup radio check. 

6.6.3.3.1.2 Authentication Check 
The authentication procedures are identical to the authentication procedures described in clause 6.4.8.2 but with the C_AHOY PDU replaced by a P_AHOY PDU. 

6.6.3.3.1.3 Disabling/enabling a User's Transmission 
The TS may at any time send a P_PROTECT (Protect_Kind = DIS_PTT) addressed to an individual MS, talkgroup, or ALLMSID (see clause A.4) to disable all MS transmissions for the remainder of the call. Since the P_PROTECT PDU is unacknowledged the PDU may be repeated. 
The TS may also at any time send a P_PROTECT (Protect_Kind = EN_PTT) addressed to an individual MS, talkgroup, or ALLMSID (see clause A.4) to enable the users transmission. Since the P_PROTECT PDU is unacknowledged the PDU may be repeated at layer 2. 
While the TS is transmitting P_PROTECT (Protect_Kind = EN_PTT_ONE_MS) PDUs addressed to an individual MSID, the MS addressed by this PDU shall enable the PTT and is allowed to transmit as soon as the payload channel is free. However, while the PDUs are being transmitted, all other MS shall disable the PTT. 

6.6.3.3.1.4 Swapping the Call to a Replacement Packet Data Payload Channel 
The TS may send Channel Grant PDUs to move MS already active to an alternative packet data payload channel. If MS had previously received a P_PROTECT to disable its transmissions, the transmissions shall be re-enabled on the replacement packet data payload channel. The replacement packet data channel shall be with the same slot configuration (single or dual slot). If the packet data payload channel supports multiple simultaneous calls then channel grant PDUs shall be transmitted for each of the MS or talkgroups currently active on the payload channel. 

6.6.3.3.1.5 Clearing Down the Packet Data Channel 
The TS shall clear down the data call by transmitting P_CLEAR PDU(s) with a Target Address = ALLMSI. Since this PDU is not acknowledged it may be repeated at layer 2. 

6.6.3.3.1.6 Clearing Down a Particular MS or Talkgroup 
The TS is able to clear down the parties involved in a payload call if: 
a) 
the TS receives a P_MAINT (Maint_Kind = DISCON) PDU; 

b) 
the TS detects by any other means that the packet call has ended: 


1) for single item data sessions upon expiration of data hangtime for the received data message (from gateway or MS) utilizing Confirmed data DLL bearer service; 
2) for single item data sessions upon the transmission of a received data message (from gateway or MS) utilizing Unconfirmed data DLL bearer service. 
The TS response to an applicable P_MAINT(Maint_Kind-DISCON) is P_CLEAR. The TS may selectively clear an MS by transmitting a P_AHOY with information elements set as table 6.53. 
Table 6.53: P_AHOY Information Elements to Clear an Individual MS from a Packet Payload Channel 
Service_Options_Mirror  7  000 00002  
Service_Kind_Flag  1  02 Indicates that the target is an Individual Address  
Ambient Listening Service  1  02 - Not Applicable  
G/I  1  02 - The Target address is an MS individual ID  
Appended_Blocks  2  002  
Service_Kind  4  Cancel Call Service - 11112 Service_Kind_Flag - 02  
Target address  24  Individual Address of MS  
Source Address or Gateway  24  TSI  

The permitted response is P_ACKU (Message_Accepted). 
For any means other than the reception of a P_MAINT PDU, the TS shall transmit P_CLEAR PDU(s). Since this PDU is not acknowledged it may be repeated at layer 2. 


6.6.3.3.2 MS Procedures for the Packet Data Payload Channel 
6.6.3.3.2.1 MS Receives an MS Radio Check 
If an MS receives a P_AHOY to its individual address with information elements set as table 6.53, then it shall respond with a P_ACKU (Reason = message_accepted). 
If an MS receives a P_AHOY to it is the talkgroup address previously transmitted in the Channel Grant PDU that directed this MS to the payload channel then it shall respond with a P_ACKU (Reason = message_accepted). 

6.6.3.3.2.2 MS receives a Authentication Check Challenge 
The authentication procedures are identical to the authentication procedures described in clause 6.4.8.2 but with the authentication response C_ACKU PDU replaced by a P_ACKU PDU. 

6.6.3.3.2.3 Disabling/enabling a User Transmission 
If the MS receives a P_PROTECT (Protect_Kind = DIS_PTT) addressed to its individual address, or to its talkgroup address previously transmitted in the Channel Grant PDU, or ALLMSID (see clause A.4), the MS shall disable its transmissions. 
If the MS receives a P_PROTECT (Protect_Kind = EN_PTT) addressed to its individual address, to its talkgroup address previously transmitted in the Channel Grant PDU, or ALLMSID (see clause A.4), the MS shall re-enable its transmissions. 

6.6.3.3.2.4 MS Receives a Channel Grant PDU(s) 
If an MS receives an applicable Channel Grant addressed to its individual address or to its talkgroup address previously transmitted in the Channel Grant PDU, then it shall retune to the designated physical/logical channel. If the PTT was disabled prior to receiving the Channel Grant, the PTT shall be re-enabled unless this MS was the recipient of a broadcast call set-up or a call to ALLMSIDL, ALLMSIDZ or ALLMSID (see clause A.4). 

6.6.3.3.2.5 End of Call 
The MS may signify the end of the call by transmitting a number of P_MAINT (Maint_Kind = DISCON). When specifically instructing the TSCC to end the call, the MS shall send the P_MAINT PDUs consecutively and then return to the control channel acquisition procedures (it is suggested that the TSCC initially sampled is the TSCC that transferred the call to the payload channel). 
Alternatively for single item data sessions the MS may simply leave the payload channel and return to the control channel acquisition procedures. Example scenarios include: 
a) 
after MS transmits unconfirmed data; 

b) 
after MS receives unconfirmed data; 

c) 
after MS transmits confirmed data and receives L2 ACK; 

d) 
after MS receives confirmed data and transmits L2 ACK; 

e) 
after MS transmits confirmed data and exhausts all retries (full and/or SARQ) without receiving an ACK. 



6.6.3.3.2.6 MS Receives P_CLEAR 
If an MS receives an applicable P_CLEAR PDU then it shall abandon the payload channel and move to the TSCC indicated by the Logical Physical Channel Number PDU. 

6.6.3.3.2.7 MS Receives a Selective Clear P_AHOY 
If an MS receives an individually addressed P_AHOY, Service_Kind = 11112, Service_Kind_Flag = 02 information element then it shall send a P_ACKU (Reason = Message_Accepted), abandon the payload channel and return to the control channel acquisition procedures (it is suggested that the TSCC initially sampled is the TSCC that transferred the call to the payload channel). 
If an MS receives a P_AHOY, Service_Kind = 11112, Service_Kind_Flag = 12 information element addressed to it is talkgroup address previously transmitted in the Channel Grant PDU the talkgroup then it shall send a P_ACKU (Reason = Message_Accepted) abandon the payload channel and return to the control channel acquisition procedures (it is suggested that the TSCC initially sampled is the TSCC that transferred the call to the payload channel). 

6.6.3.3.2.8 Time out on the Payload Channel 
An MS shall maintain a number of timers while active on a packet data payload channel: 
a) 
Inactivity timer: 

-An MS shall measure the length of time the MS is unable to detect adequate signal quality. If the MS fails to detect adequate signal quality for a continuous time TD_Inactive, the MS shall assume that the call has ended and return to the control channel acquisition procedures without sending any call termination signalling (it is suggested that the TSCC sampled is the TSCC that transferred the call to the payload channel). 

b) 
An overall payload call timer: 


-If the overall packet data payload call timer T_PACKET_TIMER expires, the MS shall transmit a number(N_Maint) of P_MAINT PDUs consecutively then return to the control channel acquisition procedures (it is suggested that the TSCC sampled is the TSCC that transferred the call to the payload channel) If the MS was sending data frames when the overall data packet payload call timer expires, the MS shall transmit a Data Terminator with LC prior to transmitting the P_MAINT PDUs. 



6.6.3.4 Application Data Over IP Bearer Service 
6.6.3.4.0 Application Data Over IP Bearer Service - Introduction 
UDP/IPv4 can transport all types of application data. Fundamental applications that support text messaging and location are further defined in the following clauses. 

6.6.3.4.1 Text Messaging 
Text messaging shall utilize UTF-16BE (IETF RFC 2781 [13]) character encoding in plane 0, the Basic Multilingual Plane or BMP. It uses a default radio network UDP Port of 5016. It is recommended that the UDP Port be configurable to address conflicts when connecting into an already established network. 

6.6.3.4.2 Location 
Location shall utilize the Location Information Protocol (ETSI TS 100 392-18-1 [14]). It should use a default radio network UDP Port of 5017. It is recommended that the UDP Port be configurable to address conflicts when connecting into an already established network. 



6.6.4 UDT Short Data Message Procedure 
6.6.4.0 UDT Short Data Message Procedure - Introduction 
The UDT Short Data Message service enables data to be transmitted between DMR entities using the control channel. Up to 368 bits of data may be transported using this service formatted in a number of formats including binary, BCD, 7 bit text, 8 bit characters, NMEA (IEC 61162-1 [8]), 16 bit UTF-16BE Unicode, IP, authentication and manufacturer specific proprietary formats. If variable length binary formatted data is being transported, the maximum number of bits is 367 because one bit is used to indicate the end of the applicable data (see clause B.3.1). 
The UDT Short Data Message procedure uses the multi-part call set-up. An MS may send a UDT Short Data Message to an MS, a talkgroup, the PSTN or PABX, a line connected gateway, a dispatcher gateway, or one of the All MS identities ALLMSID, ALLMSIDL or ALLMSIDZ (if the TSCC permits it). The TSCC may also transmit a UDT Short Data message from a gateway addressed to an individual MS or talkgroup. 




Head for Appended 
Aloha 
Ahoy 

Data 
Random 
Ack 
Appended Data 
Recipient of message 
Access RQ 
Response 

Aloha M=24 Address=NULL 
Figure 6.57: Example of a UDT Short Data Message Transfer 
Figure 6.57 illustrates an example of a UDT Short Data message transfer from MS to MS: 

a)  MS(A) calculates the number of appended UDTs needed to transmit the UDT Short Data. In this example, two appended UDTs are required;  
b)  "A" is the random access C_RAND PDU. The called party is MS(B) and Service_Kind set to 'UDT Short Data' and the Appended_Short_Data PDU to the number of data blocks needed to transport the UDT Short Data;  
c)  "B" is a C_AHOY PDU from SDMI that request MS(A) to transport the UDT Short Data using the UDT mechanism;  
d)  "C" is the inbound phase consisting of a Multi-block UDT header + appended data;  
e)  "D" is the outbound phase consisting of a Multi-block UDT header + appended data;  
f)  "E" is the acknowledgement from MS(B);  
g)  "F" is the final acknowledgement to the calling party MS(A). Note that the acknowledgement is repeated for reliability.  

For a call to an extended_address destination the TSCC uses the UDT mechanism to transport the extended_address information. In this case the inbound phase shall use two UDT procedures. The PDUs in the C_AHOY PDU indicate which UDT inbound transport is requested by unambiguous PDUs in the C_AHOY PDU. 
The maximum number of bits that may be transported by the UDT Short Data message service is limited by the maximum number of appended data UDTs. The Tier III protocol permits up to four appended UDTs. 
For a UDT Short Data message service to a talkgroup, the called party shall not send a response. The TSCC may repeat the outbound phase to improve the probability of a successful message transfer. The TSCC shall send a final acknowledgement to the calling unit even though the receipt of the UDT Short Data message is not certain. The final acknowledgement shall not be sent to the calling party until the last outbound phase is complete. 
The timing for the inbound and outbound phases is not prescribed in the present document. Figure 6.58 illustrates examples of other applicable UDT Short Data message delivery. 
In the first example, the UDT Header and appended UDTs are re-transmitted by the TSCC as soon as they have been received. This timing has the advantage of minimizing end-to-end latency (between two subscriber units); however, messages received with detectable but uncorrectable errors on the inbound phase result in messages containing uncorrectable errors on the outbound path which is essentially wasted bandwidth. The whole inbound and outbound phase would have to be repeated. 
If the inbound phase is completed in its entirety as illustrated in the second example (and in figure 6.57), if uncorrectable errors are detected, that phase may be repeated before moving to the outbound phase. However, end-to-end latency (between the two MS) is sacrificed. 







Head for Appended 
Aloha 
Ahoy 

Data 
Random 

Ack 

Appended Data 
Recipient of message 
Access RQ 
Response 

Aloha M=24 Address=NULL 
Figure 6.58: More Examples of a UDT Short Data Message Transfer 

6.6.4.1 UDT Short Data Procedures for the TSCC 
6.6.4.1.0 UDT Short Data Procedures for the TSCC - Introduction 
An MS requests a Tier III UDT Short Data message service by generating a random access request PDU with the Target Address set to: 
a) 
an individual MS address; 

b) 
a talkgroup MS address; 

c) 
a gateway address (a UDT to transport the extended destination address from the MS). 


When the TSCC responds to the random access request, it shall start a timer (TNP_Timer). This timer shall be refreshed if the TSCC sends further call progress messages to the calling party. 

6.6.4.1.1 TSCC Response to a Call to an Individual MS or Talkgroup (upload phase) 
When a random access short message service PDU is received on the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the UDT Short Data message service random access request to an MS or talkgroup are: 
a) 
an acknowledgement PDU C_NACKD, C_QACKD, C_WACKD; 

b) 
a UDT Head + appended block(s) (UDT Short Data call is diverted); 

c) 
a C_AHOY PDU, Source Address = Authentication Challenge Value (MS authentication check); 

d) 
a C_AHOY PDU from SDMI instructing the calling MS to transport its UDT Short Data message using the 

UDT mechanism (C_AHOY, Service_Kind = 01002, Source address = SDMI, Target address = calling party MSID); 

e) 
a C_AHOY PDU from SUPLI instructing the calling MS to transport supplementary data using the UDT 


mechanism (C_AHOY, Service_Kind = 01002, Source address = SUPLI, Target address = calling party MSID). 
The order in which d) and e) shall be sent is prescribed in clause 6.4.13. 

6.6.4.1.2 TSCC Response to a Call to an Extended_address Destination (upload phase) 
When a random access short message service PDU is received on the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the UDT Short Data message service random access request to an extended_address are: 
a) 
an acknowledgement PDU C_QACKD, C_WACKD; 

b) 
a C_AHOY PDU from SDMI instructing the calling MS to transport its UDT Short Data message using the 

UDT mechanism (C_AHOY, Service_Kind = 01002, Source address = SDMI, Target address = calling party MSID); 

c) 
a C_AHOY PDU from SUPLI instructing the calling MS to transport supplementary data using the UDT 

mechanism (C_AHOY, Service_Kind = 01002, Source address = SUPLI, Target address = calling party MSID); 

d) 
for a call to an extended_address, A C_AHOY PDU from PABXI,PSTNI,LINEI,DISPATI,IPI instructing the calling party to send its extended_address (such as PSTN, PABX etc.) using the UDT mechanism (C_AHOY Service_Kind = 01002, Source address = PABXI,PSTNI,LINEI,DISPATI,IPI, Target address = calling party 


MSID). 
If c) is sent, b) shall follow c). (See clause 6.4.13). 
The gateway PDUs for C_AHOY PDUso support UDT Short Data message services are prescribed in table 6.54. 
Table 6.54: C_AHOY Information Elements for UDT Short Data Message Service to a Gateway 

Action  Gateway Address  Remark  
Send PSTN digits for the UDT Short Data destination  PSTNI  The calling party shall uplink BCD dialled digits  
Send PABX digits for the UDT Short Data destination  PABXI  The calling party shall uplink BCD dialled digits  
Send LINE digits for the UDT Short Data destination  LINEI  The calling party shall uplink BCD dialled digits  
Send dispatcher digits for the UDT Short Data destination  DISPATI  The calling party shall uplink BCD dialled digits  
Uplink IP address for the UDT Short Data destination  IPI  The calling party shall uplink the IPV4 or IPV6 address  

a) 
C_NACKD: Call refused and terminated. The calling party shall return to the idle state. If the call termination was the result of the called party refusing the call, the C_NACKD shall use a mirrored_reason; 

b) 
if the TS has previously accepted a call diversion indicating that this type of service request be directed to another called party, a UDT Head + Appended data indicating the diverted address. 


The Upload Phase is complete when the calling MS has responded with the Head + Appended Data. 

6.6.4.1.3 Availability Check to the Called MS (UDT Short Data) 
For calls to individual MS, the TSCC may check that the called party is in radio contact before downloading the UDT Short Data. 
The TSCC may check availability of the called party by: 
a) Sending a C_AHOY PDU to that called party (C_AHOY, Service_Kind = 01002, Source address = calling party MSID, Target address = called party MSID). 
b) Sending a Multi-block UDT with supplementary data (if the supplementary data service is active for this call). If a response is not received from the calling party the TSCC may repeat the C_AHOY. The availability check demands a response from the called party: 
 
If the response is C_NACKU, the TSCC shall abandon the short message call send an appropriate call failed response to the calling MS and echo the mirrored_reason in the C_NACKD PDU. 

 
If the response is C_ACKU (Reason = Message_Accepted), the TSCC shall progress the service request and download the UDT Short Data message using the UDT mechanism. 



6.6.4.1.4 Sending the UDT Short Data to the Called Party (download phase) 
In the download phase, the TSCC downloads the UDT Short Data message Head + appended data to the called party. For an individual UDT Short Data transaction if an acknowledgement from the called party is not received the Head + appended data may be repeated. For UDT Short Data to a talkgroup, a response is not expected but the TSCC may repeat the download phase for reliability. 

6.6.4.1.5 Final Acknowledgement to the Calling Party 
In the outbound phase, the TSCC downloads the UDT Short Data message to the called party. If the recipient is an individual MS an acknowledgement shall be received on the TSCC. For a UDT Short Data message service to a talkgroup the downlink phase may be repeated but no acknowledgement shall be expected. 
The TSCC shall send an appropriate acknowledgement to the calling party to indicate the outcome of the UDT Short Data transfer request. For an individual UDT Short Data transfer, if the UDT download was received without errors the acknowledgement shall be C_ACKU(Reason = MS_Accepted [Reason code 0100 01002]). The mirrored 
C_ACKD(Mirrored_Reason = MS_Accepted [Reason code 0100 01002]) shall then be sent to the calling MS. For a UDT Short Data transfer to a talkgroup, the acknowledgement shall be C_ACKU(Reason = Message_Accepted [Reason code 0110 00002]). 


6.6.4.2 UDT Short Data Message Procedures for MS 
An MS requests a UDT Short Data message call service to another individual MS or a talkgroup or gateway using a multi-part service request. For calls to an extended_address, the transport of the extended_address and the UDT Short Data message is uploaded by two separate UDT transfers. 
An MS requests a UDT Short Data service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The PDUs in the random access request are passed to the CC layer - set appropriately as prescribed in table 6.55. 
Table 6.55: C_RAND Information Elements for a UDT Short Data Message Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  Not applicable - 02  
1  02  Privacy (see note 1)  
1  SUPED_SV  02  No Supplementary Data Transfer Service required for this call  
12  Supplementary Data Transfer Service requested for this call  
1  BCAST_SV  02  Not applicable - 02  
1  Reserved  02  Not applicable - 02  
2  PRIORTY_SV  002  Not applicable - 002  
Proxy Flag  1  PROXY  02  Number of Extended BCD digits for addressing through a gateway = 1 to 20  
12  Number of Extended BCD digits for addressing through a gateway = 21 to 44  
Appended_Supplem entary_Data  2  SUPED_VAL  Value  Number of appended UDTs required to transport supplementary data. See note 3  
Appended_UDT Short Data  2  SDATA_VAL  Value  Number of appended UDTs required transport UDT Short Data  
Service_Kind  4  IND_SD_SRV  01002  Individual UDT Short Data Call Service  
GRP_SD_SRV  01012  Talkgroup UDT Short Data Call Service  
Target_address or Gateway  24  Value  Target Address (see note 2)  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE 1: Privacy is not defined in the present document. NOTE 2: If Service_Kind = IND_SD_SRV then Target_Address represents an Individual address. If Service_Kind = GRP_SD_SRV then Target_Address represents a Talkgroup. NOTE 3: If SUPED_SV = 02 then SUPED_VAL = 002.  


6.6.4.3 Initiating a UDT Short Data Message Service 
For a UDT Short Data message service request to an individual MS or talkgroup, the destination address is completely expressed by the Target Address information element in the C_RAND random access PDU. The Service_Kind specifies if the UDT Short Data Message call service is addressed to an individual address or a talkgroup. For calls to a gateway addresses the Target_address or Gateway information element in the C_RAND is set to the gateway address. 
The MS shall attempt access until it receives a valid response, or the service is cancelled by the user, or the attempt fails by sending the maximum number of random access PDUs or the random access timer expires. 

6.6.4.4 Response to a Random Access UDT Short Data Message Call Service 
The calling MS shall accept the following PDUs a valid response to the SDM random access request: 
a) 
an acknowledgement PDU C_NACKD, C_QACKD, C_WACKD; 

b) 
a UDT Head + appended block(s) (UDT Short Data call is diverted); 

c) 
a C_AHOY PDU from SDMI instructing the calling MS to transport its UDT Short Data message using the 

UDT mechanism (C_AHOY, Service_Kind = 01002, Source address = SDMI, Target address = calling party MSID); 

d) 
a C_AHOY PDU from SUPLI instructing the calling MS to transport supplementary data using the UDT 

mechanism (C_AHOY, Service_Kind = 01002, Source address = SUPLI, Target address = calling party MSID); 

e) 
for a call to an extended_address, A C_AHOY PDU from PABXI,PSTNI,LINEI,DISPATI,IPI instructing the 


calling party to send its extended_address using the UDT mechanism (C_AHOY Service_Kind = 01002, Source address = PABXI,PSTNI,LINEI,DISPATI,IPI, Target address = calling party MSID). 
If the particular PDU is sent, the order shall be a), d), e), c). 

6.6.4.5 Acknowledgements Received by the Calling MS 
When the C_RAND PDU has been transmitted by the calling party, an initial response may be received by the calling party as specified in clause 6.6.4.4. 
At any time further PDUs may be sent to the calling party as follows: 
a) 
a C_NACKD at any time to indicate the call has failed. The Reason information element shall be set to indicate the reason for the call failure; 

b) 
a C_WACKD if more signalling will follow; 


c) after the UDT Short Data message has been successfully transported, C_ACKD PDU(Mirrored_Reason = MS_Accepted). If a C_NACKD is received, the calling MS shall abandon the UDT Short Data message call and return to the idle state. 
Any applicable call progress acknowledgement received shall restart the TNP_timer. For c): 
1) if the UDT Short Data is addressed to an individual MS then the acknowledgment reason shall be C_ACKD(Mirroered_Reason = MS_Accepted); 
2) if the UDT Short Data is addressed to a talkgroup the acknowledgement shall be ACK(Message_Accepted). In this case it would not be known if any or all of the talkgroups received the UDT Short Data, only that the network sent the data to the talkgroup; 
3) if the UDT Short Data is addressed to a gateway (for instance a line dispatcher) the acknowledgement shall be C_ACKD(Mirrored_Reason = Message_Accepted). 

6.6.4.6 Timeout Waiting for Further Signalling 
An MS waiting for further signalling shall abandon the UDT Short Data message service and return to the idle state if the TNP_Timer expires. 

6.6.4.7 MS Receiving a UDT Short Data Message 
If an MS receives a multi block UDT Head PDU with the Target Address matching its individual address, it shall respond with an appropriate acknowledgement. The Appended_Blocks information element in the UDT header indicates the number of appended UDT blocks. 
If an MS receives a multi block UDT Head PDU with the Target Address matching a talkgroup, it shall accept the information contained in the appended blocks, but shall transmit no response. 

6.6.4.8 Short Data Message Procedure MSC 
Figure 6.59 illustrates the UDT Short Data Message procedure to an individual MS or Talkgroup as defined in clause 6.6.4. 



6.6.5 UDT Short Data Polling Service 
6.6.5.0 UDT Short Data Polling Service - Introduction 
The UDT Short Data Polling Message service enables data to be polled from MS using the control channel. Up to 368 bits of data may be transported using this service formatted in a number of formats including binary, BCD, ISO 7 bit text (ISO/IEC 646 [11]), ISO 8 bit characters (ISO/IEC 8859 [12]), NMEA (IEC 61162-1 [8]) formatted location data, and manufacturer specific proprietary formats. If variable length binary formatted data is being polled, the maximum number of bits is 367 because one bit is used to indicate the end of the applicable data (see clause B.3.1). 
NOTE: Calling and polled MSs will pre-arrange the number of appended UDTs required to transport the polled data. 
The UDT Short Data Message polling procedure uses the single-part call set-up. 
TSCCaligned timing 
UDT Upload Phase  UDT Download Phase  
AL  
 AH  AL M=24  
 AL  H  
 AD  AL  
 AL  
 
A R  B  C H AD  D  E AK  

TSCC Outbound 
MS(A) Inbound 
MS(B) Inbound 
offset timing 
TSCC Outbound 
MS(A) Inbound 
MS(B) Inbound 

TSCC 

Head for Appended 
Aloha 
Ahoy 

Data 
UDT Upload Phase  UDT Download Phase  
AL  
 AL  
 AH  AL M=24  
 AL  
 A L  H  
 AD  AL  
 AL  
 
A R  B  C H AD  D  E AK  

Random 

Ack 

Aloha M=24 
Appended Data 
Recipient of message 
Access RQ 
Response 

Address=NULL 
Figure 6.60: Example of a UDT Short Data Polling Transfer 
Figure 6.60 illustrates an example of a UDT Short Data polling service from an MS: 

a)  MS(A) specifies the number of appended UDTs for the polled UDT Short Data. In this example, one appended UDT is required;  
b)  "A" is the random access C_RAND PDU. The target address is set to the polled party, Service_Kind set to 'UDT Short Data Polling' and the Appended_Short_Data information element to the number of data blocks to transport the polled UDT Short Data;  
c)  "B" is a C_AHOY PDU from the calling party that requests MS(B) to transport the UDT Short Data using the UDT mechanism;  
d)  "C" is the inbound phase consisting of a Multi-block UDT header + appended data;  
e)  "D" is the outbound phase consisting of a Multi-block UDT header + appended data;  
f)  "E" is the final acknowledgement from MS(A).  

The maximum number of bits that may be transported by the UDT Short Data message polling service is limited by the maximum number of appended data UDTs. The Tier III protocol permits up to four appended UDTs. 
aligned timing 
TSCC Outbound 

UDT Upload Phase  
AL  
AL  AH  AL  AL  
M=24  

 A  B H AD 

MS(A) Inbound 
offset timing 
TSCC Outbound 
Aloha M=24 Address=NULL 
Figure 6.61 illustrates a UDT Short Data polling transfer from a gateway to an MS. The TSCC requests the UDT Short Data by transmitting a C_AHOY PDU from SDMI addressed to MS(A). MS(A) responds with the UDT head + UDT Short Data. 

6.6.5.1 UDT Short Data Polling Procedures for the TSCC 
6.6.5.1.0 UDT Short Data Polling Procedures for the TSCC - Introduction 
An MS requests a Tier III UDT Short Data polling message service by generating a random access request PDU with the Target Address set to an individual address. 
When the TSCC responds to the random access request, it shall start a timer (TNP_Timer). This timer shall be refreshed if the TSCC sends further call progress PDUs to the calling party. 

6.6.5.1.1 TSCC Response to a Poll Request from an MS 
When a random access UDT Short Data poll service PDU is received on the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the UDT Short Data polling service random access request to an MS are: 
a)  an acknowledgement PDU C_NACKD, C_QACKD, C_WACKD;  
b)  a C_AHOY PDU from the calling party instructing the polled MS to transport the polled UDT Short Data using the UDT mechanism (C_AHOY Service_Kind = 01102, Source address = calling party MSID, Target address = polled party MSID);  
c)  a C_AHOY PDU from AUTHI (MS authentication check).  

When the TSCC sends C_AHOY from b) above, the polled MS knows the address of the calling party and may send polled data that is specific to a particular MS or reject the polling request unless it was from a particular MS. 
If the polled MS has diverted its calls the response shall be C_NACKD (Reason = Div_Cause_Fail). 

6.6.5.1.2 Availability Check to the Called MS (UDT Short Data poll) 
The TSCC may check that the called party is in radio contact before polling the MS for the UDT Short Data. 
The TSCC may check availability of the polled party by sending a C_AHOY PDU addressed to the polled MS individual address. If a response is not received from the calling party the TSCC may repeat the C_AHOY at layer 2. The availability check PDU Information Elements shall be as specified in clause 6.4.12, table 6.27. 
The availability check demands a response from the called party: 
a) 
If the response is C_NACKU, the TSCC shall abandon the short message polling transaction, send an appropriate call failed response to the calling MS and echo the Reason in the C_NACKD PDU (mirrored_reason). 

b) 
If the response is C_ACKU (Reason = MS_Accepted), the TSCC shall progress the service request and poll the MS for the UDT Short Data using the UDT mechanism. 



6.6.5.1.3 Delivery of the Polled Data to the Calling Party 
In the outbound phase, the TSCC downloads the UDT Short Data polled message to the calling party using the UDT mechanism. 
The calling MS shall send an appropriate acknowledgement to the TSCC to indicate the outcome of the UDT Short Data polling request. 

6.6.5.1.4 Final Acknowledgement by the Calling Party to the TSCC 
The final phase of the polling transaction is the acknowledgement from the calling MS that the polled data was successfully received. If the TSCC does not receive a response, it may repeat the outbound phase described in clause 6.6.5.1.3. 

6.6.5.1.5 UDT Short Data Polling Procedures from a TSCC Gateway 
The short polling service initiated through a gateway is illustrated in figure 6.61. The TSCC transmits a C_AHOY PDU from SDMI addressed to an individual MS (C_AHOY Service_Kind = 01102, Source address = SDMI, Target address = polled party MSID). The C_AHOY PDU demands a response: 
a) 
If the response is C_NACKU, the TSCC shall abandon the short message polling transaction. 

b) 
If the response is a multi-block UDT containing the polled data, the transaction is complete. 




6.6.5.2 UDT Short Data Polling Message Procedures for MS 
An MS requests a UDT Short Data polling call service to another individual MS, using a single-part service request. 
An MS requests a UDT Short Data polling service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer - set appropriately as prescribed in table 6.56. 
Table 6.56: C_RAND Information Elements for a UDT Short Data Polling Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  Not applicable - 02  
1  02  Privacy (see note)  
1  SUPED_SV  02  Not applicable - 02  
4  POL_FMT  Value  Format of the polled data  
Proxy Flag  1  PROXY  02  Not Defined for the polling service  
Reserved  2  002  
Appended_Short_ Data  2  SDATA_VAL  002  Number of UDTs required to transport the polled UDT Short Data  
Service_Kind  4  SD_P_SRV  01102  UDT Short Data Polling Service  
Target_address  24  Value  Polled individual MS address  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE: Privacy is not defined in the present document.  


6.6.5.3 Initiating a UDT Short Data Polling Service 
For a UDT Short Data polling service request to an individual MS, the polling MS address is completely expressed by the Target Address information element in the C_RAND random access PDU. The Service_Kind specifies the UDT Short Data Message call service. 
The MS shall attempt access until it receives a valid response, or the service is cancelled by the user, or the attempt fails by sending the maximum number of random access PDUs or the random access timer expires. 

6.6.5.4 Response to a Random Access UDT Short Data Polling Message 
The calling MS shall accept the following PDUs a valid response to the UDT Short Data polling random access request: 
a)  An acknowledgement PDU C_NACKD, C_QACKD, C_WACKD.  
b)  A C_AHOY PDU instructing the polled MS to transport its UDT Short Data message using the UDT  
mechanism see clause 6.6.5.1.1.  
For b):  
1)  For a poll from a gateway, the calling party address is SDMI.  
2)  For a poll originated from an MS, the calling party address is the MS individual address.  


6.6.5.5 Final Acknowledgement Transmitted by the Calling MS 
In the outbound phase, the TSCC downloads the UDT Short Data polled message to the calling party. Valid responses to the TSCC are: 
a) 
An acknowledgement PDU C_NACKU indicating the transaction has failed. 

b) 
An acknowledgement PDU C_ACKU(Reason = MS_Accepted) indicating the transaction was successful. 



6.6.5.6 Timeout Waiting for Further Signalling 
An MS waiting for further signalling shall abandon the UDT Short Data polling service and return to the idle state if the TNP_Timer expires. 

6.6.5.7 MS Receiving a C_AHOY Poll for a Short Polling Message 
If an MS receives a C_AHOY PDU with the Target Address matching its individual address and the Service_Kind = UDT Short Data Polling Service it shall respond with: 
a) 
A multi block UDT Head PDU with the Target Address matching its calling party (source) address from the C_AHOY PDU. The Appended_Blocks information element in the UDT header indicates the number of appended UDT blocks. 

b) 
A C_NACKU PDU if the polled MS does not wish to accept the polling request. 




6.6.6 Status Call Service 
6.6.6.0 Status Call Service - Introduction 
The Status Message service enables data to be transmitted between DMR entities on the control channel. Seven bits of data may be transported using this service. The status delivery service transports a status message from the initiator to a single recipient or a talkgroup. The status polling service enables an initiator to request a status message from an addressed entity. Seven bits are transported representing 128 status messages. 100 status values 0 to 99 (000 00002 to 
110 00112) are used for the Status Delivery Service and have a user-defined meaning that is not described in the present document, while others have a meaning defined in the present document: 
 
Status values in the range 100 to 122 (110 01002 to 111 10102) are reserved. 

 
Status value 123 (111 10112) is a system status defined for the Transmit Interrupt service to request the 

termination of a call: this includes the termination of an ALS call by the MS that initiated the ALS service (see clause 6.4.14.3.4). 

 
Status value 124 (111 11002) is a system status used to cancel an emergency alarm (see clause 6.6.6.3.2). The procedures for transporting this status are identical to those specified in clause 6.6.6.1. 

 
Status value 125 (111 11012) is a system status defined for the Transmit Interrupt procedure (see clause 6.4.15). 

 
Status value 126 (111 11102) is a system status used for an emergency alarm (see clause 6.6.6.3.1). The procedures for transporting this status are identical to those specified in clause 6.6.6.1. 

 
Status value 127 (111 11112) defines the Status Polling Service (see clause 6.6.6.2). 


Status messages addressed from MS to the TSCC are system messages. 

6.6.6.1 Status Service Delivery Procedure 
6.6.6.1.0 Status Service Delivery Procedure - Introduction 
The Status Message Delivery procedure employs a store and forward mechanism. An MS may send a Status Message to an individual MS, talkgroup, the PSTN or PABX, a line connected gateway, a dispatcher gateway or the TSCC. The TSCC may also transmit a UDT Short Data message from a gateway or special identifier addressed to an individual MS or talkgroup. 
aligned timing TSCC 


A 

B 


D 

MS(A) Inbound 
C 
MS(B) Inbound 
offset timing TSCC 


A 

B 


D 

MS(A) Inbound 
C 

MS(B) Inbound 
Figure 6.62: Example of the Status Delivery Service to an Individual MS 
Figure 6.62 illustrates an example of Status Message Delivery transfer from MS to an individual MS: 

a)  "A" is the random access C_RAND PDU. The called party is MS(B) and Service_Kind set to 'Status'. The  
status value is in the range 000 00002 to 111 11102;  
b)  "B" is a C_AHOY PDU from MS(A) that contains the Status value;  
c)  "C" is the acknowledgement from MS(B);  
d)  "D" is the final acknowledgement to the calling party MS(A). Note that the acknowledgement is repeated for  

reliability. 

6.6.6.1.1 Status Service Delivery Procedures for the TSCC 
6.6.6.1.1.0 Status Service Delivery Procedures for the TSCC - Introduction 
An MS initiates a Status Service Delivery by random access addressed to: 
a) 
An individual MS address (single-part call set-up). 

b) 
A gateway address that indicates a multi-part call set-up. 

c) 
The TSCC. 


When the TSCC responds to the random access request it shall start timer (TNP_Timer). This timer shall be refreshed if the TSCC sends further call progress messages to the calling party. 

6.6.6.1.1.1 TSCC Response to a Single Part Status Service Delivery Call Setup 
On receipt of the random access service request the TSCC shall transmit either: 
a) 
An acknowledgement PDU C_NACKD, C_WACKD (Reason = Wait), C_QACKD addressed to the calling MS. 

b) 
A C_AHOY PDU addressed to the called party for this call to pass the status to the called MS. 

c) 
A C_AHOY PDU from AUTHI (MS authentication check). 

d) 
A UDT Head _ appended block(s) (status message service is diverted. If the TS has previously accepted a call diversion indicating that this type of service request be directed to another called party, the TSCC shall invoke the UDT and send a UDT Head + Appended data to the calling party. 



6.6.6.1.1.2 TSCC Response to a Multi Part Status Service Delivery Call Setup 
For calls to extended_addresses, the MS requests multi-part addressing by generating a status call random access request with the Destination Address information element set to a gateway address (PABXI, PSTNI, etc.) and the Proxy Flag information element to indicate the number of digits for the extended_address. For the number of dialled digits = 1 to 20 the Proxy Flag information element shall be set to 02. For the number of dialled digits = 21 to 44 the Proxy Flag 
information element shall be set to 12. The PDUs that shall represent a valid response to the multi-part part Status service random access request are: 
a) 
An acknowledgement PDU C_NACKD, C_WACKD(reason = Wait). 

b) 
A C_AHOY PDU from PABXI,PSTNI,LINEI,DISPATI,IPI for the calling MS to send the extended_address information. 

c) 
A C_AHOY PDU from SUPLI for the calling MS to send supplementary_user data (see clause 6.4.13). 


For b) The TSCC shall then invoke the UDT procedure by sending a C_AHOY to the calling MS to send the extended_address information. For a status call to the PABX or PSTN the extended_address information shall be BCD digits. If the Proxy_Flag in the MS C_RAND = 02 then Appended_Blocks(UAB) in the C_AHOY shall be set to 002, 
else if the Proxy_Flag in the C_RAND = 12 then Appended_Blocks (UAB) in the C_AHOY shall be set to 012. If the TSCC does not successfully receive the UDT from the MS, the TSCC may repeat the C_AHOY, or transmit a C_NACKD to indicate failure of the call. 
For c) The TSCC shall then invoke the UDT procedure by sending a C_AHOY to the calling MS to send the supplementary data. The format of the supplementary data is specified in the UDT. If the TSCC does not successfully receive the UDT from the MS, the TSCC may repeat the C_AHOY, transmit a C_NACKD to indicate failure of the call or continue with the call setup and abandon the supplementary data. 

6.6.6.1.1.3 Acknowledgements Sent by the TSCC to the Calling MS (status) 
The TSCC may send acknowledgement PDUs following the random access Status Delivery Service request to indicate the progress of the call, or terminate the call. If the TSCC sends a PDU to indicate the progress of a call it shall start a waiting timer TNP_Timer. (The calling party MS maintains a similar timer): 
a) 
Progress PDUs may be: 

1) C_WACKD: Intermediate acknowledgement. More PDUs to follow; 
2) C_QACKD: Called MS engaged in another call; 
3) C_QACKD: Call is queued because the resource is in use at the moment. 

b) 
Termination PDUs are selected from an appropriate Reason information element in a C_NACKD PDU (see clause 7.2.8): 

1) C_NACKD. 

c) 
An acknowledgement PDU C_ACKD indicating that the transaction was successful. 



6.6.6.1.1.4 Delivery of the Status to the Called Party 
The TSCC delivers the status to the called MS by transmitting a C_AHOY PDU containing the Status information element. The status message may have originated from another MS, a gateway or the TSCC. For a status delivery service to an individual MS ID, the C_AHOY PDU demands a response from the called MS. If the response is C_ACKU(Reason = MS_Accepted), the TSCC shall send an equivalent acknowledgement C_ACKD(Mirrored_Reason = MS_Accepted) to the calling party. If the response is C_NACKU, the mirrored C_NACKD shall be sent to the calling party. If no response is received the TSCC may repeat the C_AHOY or abandon the service and indicate the failure to the called party by transmitting a C_NACKD. If the status delivery service is directed to a talkgroup, no acknowledgement shall be transmitted by the called talkgroup, nor is an acknowledgement expected by the TSCC. For reliability the C_AHOY may be repeated. 
For a status delivery to a talkgroup no response from the called party is expected but the TSCC shall send at least one C_ACKD(Reason = Message_Accepted) to the calling party to indicate that the transaction is completed. (See figure 6.63.) 



A 

B 

D 


MS(A) Inbound 
MS(B) Inbound 

Figure 6.63: Example of the Status Delivery Service to a Talkgroup 

6.6.6.1.1.5 Call Time Out 
The TSCC shall maintain a timeout defining the maximum time it shall store a status message request waiting for the called MS or TSCC resource to become free. 


6.6.6.1.2 Status Service Delivery Procedures for MS 
6.6.6.1.2.0 Status Service Delivery Procedures for MS - Introduction 
An MS requests a Status Message Delivery call service to another individual MS or a talkgroup using a single part service request or gateway using a multi-part service request. For calls to an extended_address the sending of the extended_address is by a UDT transfer. 
An MS requests a Status Delivery Service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer -set appropriately as prescribed in table 6.57. 
Table 6.57: C_RAND Information Elements for a Status Message Delivery Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service Options  1  G/I  02  The target address is an MS individual ID  
12  The target address is a talkgroup  
1  SUPED_SV  02  No supplementary_user data transfer requested  
12  Supplementary_user data is requested for this call  
5  STATUS(5)  value  Most significant 5 bits of the STATUS (see note 4)  
Proxy Flag  1  PROXY  02  Number of Extended BCD digits for addressing through a gateway = 1 to 20  
12  Number of Extended BCD digits for addressing through a gateway = 21 to 44  
Appended_ Supplementary_Data  2  SUPED_VAL  Value  Number of appended UDTs required to transport supplementary data 
 2  STATUS(2)  value  Least significant 2 bits of the STATUS (see note 4)  
Service_Kind  4  IND_ST_SRV  01112  Status Transport Service  
Target_address or Gateway  24  Value  Target Address (see note 2)  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE 1: Privacy is not defined in the present document. NOTE 2: Target_Address represents an Individual address or gateway, or a talkgroup if G/I = 12. NOTE 3: If SUPED_SV = 02 then SUPED_VAL = 002. NOTE 4: STATUS is in the range 000 00002 to 111 11102.  


6.6.6.1.2.1 Status Message Delivery Service to an Individual MS or Gateway 
6.6.6.1.2.1.1 Initiating the Status Message Delivery Service to the MS or Gateway 
For a Status Message Delivery service request to an individual MS, the destination address is completely expressed by 
the Target Address information element in the C_RAND random access PDU. G/I = 02. The Service_Kind specifies the Status Message call service. For calls to a gateway addresses the Target_address or Gateway information element in the C_RAND is set to the gateway address. 
The MS shall attempt access until it receives a valid response, or the service is cancelled by the user, or the attempt fails by sending the maximum number of random access PDUs or the random access timer expires. 

6.6.6.1.2.1.2 Response to a Random Access Status Message Delivery Service Request 
The calling MS shall accept the following PDUs a valid response to the status service random access request: 
a) 
An acknowledgement PDU C_NACKD, C_QACKD, C_WACKD. 

b) 
A UDT Head + appended block(s) (status call is diverted). 

c) 
A C_AHOY PDU to the called MS containing the status. 

d) 
A C_AHOY PDU from AUTHI (MS authentication check). 

e) 
A C_AHOY PDU instructing the calling MS to transport supplementary data using the UDT mechanism. 

f) 
For a call to an extended_address, A C_AHOY PDU from PABXI, PSTNI, LINEI, DISPATI, IPI instructing the calling party to send its extended_address using the UDT mechanism. 


The order in which c) and e) shall be sent is prescribed in clause 6.4.13. 
If the MS has requested supplementary data by setting the C_RAND Service_Options SUPED_SV = 12 in the call request, and the TSCC either does not support supplementary data or does not wish to accept supplementary data at this time, then the TSCC shall either: 
a) 
continue to process the call setup and abandon the request for supplementary user data; or 

b) 
transmit a C_NACKD to indicate failure of the call. 



6.6.6.1.2.1.3 Acknowledgements Received by the Calling MS 
When the C_RAND PDU has been transmitted by the calling party, an initial response may be received by the calling party as specified in clause 6.6.6.1.1.3. 
At any time further PDUs may be sent to the calling party as follows: 
a) 
A C_NACKD at any time to indicate the call has failed. The Reason information element shall be set to indicate the reason for the call failure. If the C_NACKD sent to the calling MS is the result of a C_NACK from the called MS, a mirrored_reason code shall be sent to the calling MS. 

b) 
A C_WACKD if more signalling will follow. 


c) After the status message has been successfully transported, a C_ACKD(Mirrored_Reason = MS_accepted) PDU. If a C_NACKD is received, the calling MS shall abandon the status message call and return to the idle state. 
If a C_WACKD is received the MS shall start/restart the TNP_Timer and wait for further signalling. Any acknowledgement or valid C_AHOY PDU received shall restart the TNP_timer. 

6.6.6.1.2.1.4 Timeout Waiting for Further Signalling 
An MS waiting for further signalling shall abandon the status message service and return to the idle state if the TNP_Timer expires. 

6.6.6.1.2.1.5 Called Party MS Receiving a Status Message 
If an MS receives a C_AHOY message with the Target Address matching its individual address, it shall respond with an appropriate acknowledgement. The Service_Options information element contains the most significant five bits of the status message. The Appended_Blocks contains the two least significant bits of the status message. 


6.6.6.1.2.2 Status Message Delivery Service to a Talkgroup 
6.6.6.1.2.2.1 Initiating the Status Message Delivery Service to the Talkgroup 
For a status message service request to a talkgroup, the destination address is completely expressed by the Target Address information element in the C_RAND random access PDU. G/I = 12. The Service_Kind specifies the Status Message call service. 
The calling MS shall attempt access until it receives a valid response, or the service is cancelled by the user, or the attempt fails by sending the maximum number of random access PDUs or the random access timer expires. 

6.6.6.1.2.2.2 Response to a Random Access Talkgroup Status Message Delivery Service Request 
The calling MS shall accept the following PDUs a valid response to the status service random access request: 
a) 
An acknowledgement PDU C_NACKD, C_QACKD, C_WACKD. 

b) 
A UDT Head + appended block(s) (status polling call is diverted). 

c) 
A C_AHOY PDU to the called talkgroup containing the status. 

d) 
A C_AHOY PDU from AUTHI (MS authentication check). 

e) 
A C_AHOY PDU from SUPPLI instructing the calling MS to transport supplementary data using the UDT mechanism. 


The order in which c), d), and e) shall be sent is prescribed in clause 6.4.13. 

6.6.6.1.2.2.3 Acknowledgements Received by the Calling MS 
When the C_RAND PDU has been transmitted by the calling party, an initial response may be received by the calling party as specified in clause 6.6.6.1.1.3. 
At any time further PDUs may be sent to the calling party as follows: 
a) A C_WACKD if more signalling will follow. If a C_WACKD is received the MS shall start/restart the TNP_Timer and wait for further signalling. Any acknowledgement or valid C_AHOY PDU received shall restart the TNP_timer. 

6.6.6.1.2.2.4 Timeout Waiting for Further Signalling 
An MS waiting for further signalling shall abandon the status message service and return to the idle state if the TNP_Timer expires. 

6.6.6.1.2.2.5 Talkgroup Receiving a Status Delivery Message 
If a talkgroup receives a C_AHOY message with the Target Address matching its talkgroup address, it shall store the status value but shall not send any acknowledgement. 




6.6.6.2 Status Polling Service Procedure 
6.6.6.2.0 Status Polling Service Procedure -Introduction 
The Status Message Polling procedure employs a store and forward mechanism. An MS or Gateway may request a Status Message from an individual MS. 
The status polling service is differentiated from the status delivery by the calling party initiating the status service with Status = 111 11112, (see clause 7.2.31). 


A 

B 


D 

MS(A) Inbound 
C 
MS(B) Inbound 


A 

B 


D 

MS(A) Inbound 
C 

MS(B) Inbound 
Figure 6.64: Example of the Status Polling Service 
Figure 6.64 illustrates an example of a Status Polling transfer from MS to MS: 

a)  "A" is the random access C_RAND PDU. The polled party is MS(B), Service_Kind set to 'Status' and STATUS set to 111 11112;  
b)  "B" is a C_AHOY PDU from MS(A) that requests the polled status value from MS(B). STATUS = 111 11112 is mirrored;  
c)  "C" is the acknowledgement from MS(B). The acknowledgment contains the polled status value in the Information Element -Response_Info;  
d)  "D" is the final acknowledgement to the calling party MS(A). The acknowledgment contains the polled status  

value in Response_Info. Note that the acknowledgement is repeated for reliability. 

6.6.6.2.1 Status Service Polling Procedures for the TSCC 
6.6.6.2.1.0 Status Service Polling Procedures for the TSCC - Introduction 
An MS initiates a Status Polling Service by random access addressed to an individual MS address. A gateway initiated poll initiates the poll with an AHOY addressed to the polled MS. 

6.6.6.2.1.1 TSCC Response to a Status Polling Service from an MS 
When the TSCC responds to the random access request it shall start timer (TNP_Timer). This timer shall be refreshed if the TSCC sends further call progress messages to the calling party. 
On receipt of the random access service request the TSCC shall transmit either: 
a) 
An acknowledgement PDU C_NACKD, C_WACKD (Reason = Wait), C_QACKD addressed to the calling MS. 

b) 
A C_AHOY PDU addressed to the polled MS for this call to pass the status to the calling MS. 

c) 
A C_AHOY PDU from AUTHI (MS authentication check). 

d) 
A UDT Head _ appended block(s) (status message service is diverted). If the TS has previously accepted a call diversion indicating that this type of service request be directed to another called party, the TSCC shall invoke the UDT and send a UDT Head + Appended data to the calling party. 



6.6.6.2.1.2 Acknowledgements Sent by the TSCC to the Calling MS 
The TSCC may send acknowledgement PDUs following the random access Status service request to indicate the progress of the call, or terminate the call. If the TSCC sends a PDU to indicate the progress of a call it shall start a waiting timer TNP_Timer. (The calling party MS maintains a similar timer): 
a) 
Progress PDUs may be: 

1) C_WACKD: Intermediate acknowledgement. More PDUs to follow. 
2) C_QACKD: Called MS engaged in another call. 
3) C_QACKD: Call is queued because the resource is in use at the moment. 

b) 
Termination PDUs are selected from an appropriate Reason information element in a C_NACKD PDU (see clause 7.2.8): 


1) C_NACKD. 

6.6.6.2.1.3 Delivery of the Polled Status to the Calling Party 
The TSCC polls the status from the polled MS by transmitting a C_AHOY PDU containing the Status value 111 11112 information element. The C_AHOY may have originated as a result of a random access request for a status polling service from the calling MS, a gateway or the TSCC. For a status polling service to an individual MS ID, the C_AHOY PDU demands a response from the polled MS. 
If the status poll originated from an MS then: 
a) 
If the response from the polled MS is C_ACKU or C_NACKU, the TSCC shall send an equivalent acknowledgement to the calling MS (Mirrored_Reason). If a response is not received, the TSCC may repeat the C_AHOY or abandon the service and indicate the failure to the calling MS by transmitting a C_NACKD. 

b) 
If the response from the polled MS is C_ACKU(Reason = Accepted for the Status Polling Service), the Information Element Response_Info contains the polled status. The TSCC shall mirror the Response_Info in a C_ACKD(Mirrored_Reason = Accepted for the Status Polling Service). This mirrored response from the TSCC may be repeated for reliability. 



6.6.6.2.1.4 Call Time Out 
The TSCC shall maintain a timeout defining the maximum time it shall store a status message request waiting for the called MS or TSCC resource to become free. 


6.6.6.2.2 Status Polling Service Procedures for MS 
6.6.6.2.2.0 Status Polling Service Procedures for MS - Introduction 
An MS requests a status polling message call service to an individual MS using a single part service request. 
An MS requests a Status Polling Service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer -set appropriately as prescribed in table 6.58. 
Table 6.58: C_RAND Information Elements for a Status Polling Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service Options  1  G/I  02  The target address is an MS individual ID  
1  Supplementary _user Data  02  No supplementary_user data transfer requested  
12  Supplementary_user data is requested for this call  
5  STATUS(5)  1 11112  Most significant 5 bits of the STATUS (see note 4)  
Proxy Flag  1  PROXY  02  Number of Extended BCD digits for addressing through a gateway = 1 to 20  
12  Number of Extended BCD digits for addressing through a gateway = 21 to 44  
Appended_ Supplementary_Data  2  SUPED_VAL  Value  Number of appended UDTs required to transport supplementary data 
 2  STATUS(2)  112  Least significant 2 bits of the STATUS (see note 4)  
Service_Kind  4  IND_ST_SRV  01112  Status Transport Service  
Target_address or Gateway  24  Value  Target Address (see note 2)  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE 1: Privacy is not defined in the present document. NOTE 2: Target_Address represents an Individual address. NOTE 3: If SUPED_SV = 02 then SUPED_VAL = 002. NOTE 4: The STATUS = 111 11112 indicates the Status Polling Service.  


6.6.6.2.2.1 Status Polling Service Addressed to an Individual MS 
6.6.6.2.2.1.1 Initiating the Status Message Polling Service to the MS or gateway 
For a status message polling service request from an individual MS, the destination address is completely expressed by the Target Address information element in the C_RAND random access PDU. G/I = 02. The Service_Kind specifies the Status Message call service. 
The MS shall attempt access until it receives a valid response, or the service is cancelled by the user, or the attempt fails by sending the maximum number of random access PDUs or the random access timer expires. 

6.6.6.2.2.1.2 Response to a Random Access Status Polling Message Service Request 
The calling MS shall accept the following PDUs a valid response to the status service random access request: 
a) 
An acknowledgement PDU C_NACKD, C_QACKD, C_WACKD. 

b) 
A UDT Head + appended block(s) (UDT Short Data call is diverted). 

c) 
A C_AHOY PDU to the polled MS containing the status value = 111 11112. 

d) 
A C_AHOY PDU from AUTHI (MS authentication check). 

e) 
A C_AHOY PDU instructing the calling MS to transport supplementary data using the UDT mechanism. NOTE: d) and e) may be performed in any order. 



6.6.6.2.2.1.3 Acknowledgements Received by the Calling MS 
When the C_RAND PDU has been transmitted by the calling party, an initial response may be received by the calling party as specified in clause 6.6.6.2.1.2. 
At any time further PDUs may be sent to the calling party as follows: 
a) 
A C_NACKD at any time to indicate the call has failed. The Reason information element shall be set to indicate the reason for the call failure. If the C_NACKD sent to the calling MS is the result of a C_NACK from the called MS, a mirrored_reason code shall be sent to the calling MS. 

b) 
A C_WACKD if more signalling will follow. 


c) After the status message has been successfully transported, a C_ACKD PDU (mirrored_reason). If a C_NACKD is received, the calling MS shall abandon the status message call and return to the idle state. If a C_WACKD is received the MS shall start/restart the TNP_Timer and wait for further signalling. Any acknowledgement or valid C_AHOY PDU received shall restart the TNP_timer. 

6.6.6.2.2.1.4 Timeout Waiting for Further Signalling 
An MS waiting for further signalling shall abandon the status message service and return to the idle state if the TNP_Timer expires. 

6.6.6.2.2.1.5 MS Receiving a Status Message 
If an MS receives a C_AHOY message with the Target Address matching its individual address, it shall respond with an appropriate acknowledgement. The Response_Info Information Element contains the polled status. 




6.6.6.3 Defined Status Values for Status Call Service  
6.6.6.3.1 Emergency Alarm 
The Status Call Service is used to indicate an emergency alarm condition, Status value = 126 (111 11102) from an MS to another MS, a Talkgroup, or a dispatcher without initiating an emergency voice call. 

6.6.6.3.2 Cancel Emergency Alarm 
The Status Call Service is used to cancel an emergency alarm condition. Status value = 124 (111 11002) from an MS to another MS, a Talkgroup, or a dispatcher. 



6.6.7 Call Diversion 
6.6.7.1 Call Diversion Service 
6.6.7.1.0 Call Diversion Service - Introduction 
The call diversion service supports a self-initiated diversion - that is an MS may request that all future services be redirected to an alternative destination. Requests are applicable to: 
a) 
Voice call service 

b) 
Packet Data service 

c) 
UDT Short Data message delivery service 


d) Status message service Applicable Services may be redirected to another MS, a talkgroup, or an extended_address through a gateway. 
The "Set Diversion" call diversion service uses a multi-part call set-up and the diversion address is sent by the caller using the UDT mechanism. This is recognized by the DIVONOFF information element in the diversion service request set to "Set Call Diversion" ( = 12). 
TSCC 
aligned timing 
TSCC Outbound 
MS(A) Inbound TSCC 
UDT Upload  
AL  
AL  AH  AL  AK  AK  
M=24  
A R  B  C H AD  
 D  
 

a) 
MS(A) defines the number of appended UDTs needed to transport the diverted address to the TSCC. In this example, one appended UDT is required. 

b) 
"A" is the random access C_RAND PDU. The Service_Kind set to 'Call Diversion Service' and the Appended_Short_Data PDU to the number of UDT appended blocks to transport the diverted address. 

c) 
"B" is a C_AHOY PDU from DIVERTI that requests MS(A) to transport the diversion address using the UDT mechanism. 

d) 
"C" is the inbound phase consisting of a Multi-block UDT header + appended data transporting the diverted address to the TSCC. 

e) 
"D" is the acknowledgement from the TSCC. 


For calls diverted to an MS, a call diversion may be cancelled by either the MS that initiated the call diversion or the MS that is the recipient of the diverted calls. In this case a single part call set-up request is made with the Service_Options information element DIVONOFF in the call diversion Service request is set to "Clear Diversion": 
a) 
If the MS that initiated the call diversion wishes to cancel the diversion, the call Service request shall set the Target Address set to TSI. 

b) 
If the recipient of the call diversion wishes to cancel all call diversions for which the MS is the recipient, the diversion, the call Service request shall set the Target Address set to DIVERTI. 


For calls diverted to a talkgroup, only the MS that initiated the call diversion shall be permitted to cancel the call diversion. 

6.6.7.1.1 TSCC Procedures for the Call Diversion Service 
6.6.7.1.1.0 TSCC Procedures for the Call Diversion Service - Introduction 
An MS initiates a Set Call Diversion Service by random access addressed to the gateway identifier appropriate to the diverted destination - individual MS address, talkgroup, PSTN, PABX or IP. The set call diversion service uses the multi-part call set-up. When the TSCC responds to the random access request it shall start timer (TNP_Timer). This timer shall be refreshed if the TSCC sends further call progress PDUs to the calling party. 
An MS initiates a Clear Call Diversion Service by random access addressed to the gateway identifier TSI or DIVERTI. (see clause 6.6.7.1.2). The clear call diversion service uses the single-part call set-up. When the TSCC responds to the random access request it shall start timer (TNP_Timer). This timer shall be refreshed if the TSCC sends further call progress PDUs to the calling party. 
offset timing 
UDT Upload  
A L  
AL  AL  AH  AL  A L  AK  AK  
M= 24  
A R  B  C H AD  
 D  
 
Figure 6.65: Example of a Call Diversion Call 


TSCC Outbound 
MS(A) Inbound 
An MS initiates a Clear Incoming Call Diversion Service by random access addressed to the gateway identifier DIVERTI. The clear incoming call diversion service also uses the single-part call set-up. 

6.6.7.1.1.1 TSCC Response to a Multi-part Set Call Diversion Service Call Setup 
To set call diversion service, the MS generates a random access diversion service request with the C_RAND information elements set as table 6.61 and the DIVONOFF information element set to Set Call Diversion ( = 12). 
The PDUs that shall represent a valid response to the set call diversion service multi-part random access request are: 
a) 
An acknowledgement PDU C_NACKD, C_WACKD(reason = Wait). The source Address = the target address from the C_RAND, the target address = source address from the C_RAND. 

b) 
A C_AHOY PDU from DIVERTI for the calling MS to send the diverted address using the UDT mechanism. 

c) 
A C_AHOY PDU, Source Address = Authentication Challenge Value (MS authentication check). 


For b) the TSCC shall invoke the UDT procedure by sending a C_AHOY to the calling MS to send the diverted address information. For a call diversion to the PABX or PSTN the diverted address information shall be BCD digits. If the Proxy_Flag in the MS C_RAND = 02 then Appended_Blocks(UAB) in the C_AHOY shall be set to 002, else if the 
Proxy_Flag in the C_RAND = 12 then Appended_Blocks (UAB) in the C_AHOY shall be set to 012. If the TSCC does not successfully receive the UDT from the MS, the TSCC may repeat the C_AHOY, or transmit a C_NACKD to indicate failure of the call. 
The gateway target information elements for C_UDTHU PDU is prescribed in table 6.59. The appended blocks contain the diverted address. 
Table 6.59: UDT Header Target Information Elements for the Set Call Diversion Service 

Action  Gateway Address  Remark  
Send the individual MS Address  MSI  The calling party shall send the MS Individual diversion address  
Send the Talkgroup Address  GPI  The calling party shall send the MS talkgroup diversion address  
Send PSTN digits  PSTNI  The calling party shall send BCD dialled digits  
Send PABX digits  PABXI  The calling party shall send BCD dialled digits  
Send LINE digits  LINEI  The calling party shall send BCD dialled digits  
Send Dispatcher digits  DISPATI  The calling party shall send BCD dialled digits  
Send IP address  IPI  The calling party shall send the IPV4 or IPV6 address  


6.6.7.1.1.2 Final Acknowledgement to the MS 
In the inbound phase, the MS sends the diverted address to the TSCC. 
The TSCC shall send an appropriate final acknowledgement. (The source Address = the target address from the C_RAND that initiated the call diversion, the target address = source address from the C_RAND that initiated the call diversion) to the calling party to indicate the outcome of the call diversion. 
The acknowledgements that represent a valid response to the inbound diverted address are prescribed in table 6.60. 
Table 6.60: Acknowledgements to a Set Call Diversion Service 

Acknowledgement  Reason Code  Remark  
C_ACK  0110 00002  Call Diversion accepted by the TS  
C_NACK  0010 00002  Acknowledgement to the initial request for call diversion if the system does not support call diversion (see note)  
C_NACK  0010 00112  The call may not be diverted to this destination (see note)  
NOTE: If call diversion is not supported by this system, the TSCC sends a C_NACK Reason Code = 0010 00002 to the initial random access. If the system cannot set the diversion to the destination indicated by the MS in the upload diversion address phase, the TSCC sends the C_NACK Reason Code = 0010 00112 as the final acknowledgement.  


6.6.7.1.1.3 TSCC Response to a Single-part Clear Call Diversion Service Set-up 
For the clear call diversion service, the MS generates a random access diversion service request with the C_RAND information elements set as table 6.61 and the DIVONOFF information element set to Clear Call Diversion ( = 02). 
The PDUs that shall represent a valid response to the clear call diversion service multi-part random access request are: 
a) 
An acknowledgement PDU C_NACKD indicating that the service request has not succeeded. 

b) 
C_WACKD(reason = Wait) further signalling to follow. 

c) 
An acknowledgement C_ACKD indicating that the service request has succeeded. 

d) 
A C_AHOY PDU from AUTHI (MS authentication check). NOTE: The C_WACKD response permits the call diversion service to proceed after the call has been queued. 




6.6.7.1.2 MS Procedures for the Call Diversion Service 
6.6.7.1.2.0 MS Procedures for the Call Diversion Service - Introduction 
An MS requests the call diversion service using a random access service request. 
If the MS wishes to divert its calls the DIVONOFF information element in the Service_Options is set to "Set Diversion (= 12)". A multi-part service request is invoked. The information elements in the random access request are passed to the CC layer - set appropriately as prescribed in table 6.61. 
If the MS wishes to cancel a previously set diversion, the same random access request is sent as was used to set up the call diversion, but with target address = TSI and DIVONOFF = 0. If the MS wishes to cancel an incoming diversion, the random access request is sent with target address = DIVERTI and DIVONOFF = 0. 
Table 6.61: C_RAND Information Elements for a Call Diversion Service 
Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  Not applicable - 02  
1  02  Privacy (see note 1)  
1  DIVONOFF  02  Clear Call Diversion  
12  Set Call Diversion  
1  DIV_VD  Active 12 Inactive 02  Divert Voice Calls  
1  DIV_PD  Divert Packet Data Calls  
1  DIV_SD  Divert UDT Short Data Calls  
1  DIV_S  Divert Status Calls  
Proxy Flag  1  PROXY  02  Number of Extended BCD digits for addressing through a gateway = 1 to 20 or IPV4  
12  Number of Extended BCD digits for addressing through a gateway = 21 to 44 or IPV6  
Reserved  2  002  
Appended_Short_ Data  2  SDATA_VAL  002  Number of UDT appended blocks to transport the diverted address  
Service_Kind  4  DIV_SRV  10002  Call Diversion Service  
Target_address or Gateway  24  Value  Gateway Identifier. For call diversion -MSI, GPI, PSTNI, PABXI or IPI. For clear call diversion - TSI. For clear incoming call diversion - DIVERTI (see note 2)  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE 1: Privacy is not defined in the present document. NOTE 2: MSI and GPI only apply to Call Diversion.  

If DIVONOFF = 12, the alias DIV_VD, DIV_PD, DIV_SD and DIV_S that are set to Active (12): define which services shall be diverted for this call diversion service request. 
If DIVONOFF = 02, the alias DIV_VD, DIV_PD, DIV_SD and DIV_S that are set to Active (12): define which services shall have the call diversion cancelled. 
Table 6.62: Information Element Definitions for the Call Diversion Service 

Diversion Address  Target Address or Gateway  Proxy Flag  
Individual MS Address  MSI  02  
Talkgroup Address  GPI  02  
PSTN Address (1 to 20 dialled digits)  PSTNI  02  
PSTN Address (21 to 44 dialled digits)  PSTNI  12  
PABX Address(1 to 20 dialled digits)  PABXI  02  
PABX Address (21 to 44 dialled digits)  PABXI  12  
Ipv4 Address  IPI  02  
Ipv6 Address  IPI  12  


6.6.7.1.2.1 MS Sends the Diversion Address 
After the MS has made a call diversion service request, the TSCC sends a C_AHOY PDU to which the MS shall respond with a UDT Header + Appended block(s) using the UDT mechanism. The UDT header shall contain the destination address type (MS, PSTN, etc.) and the appended block(s) shall contain the diversion address. 
The information elements for the UDT inbound Header are specified in table 6.63. 
Table 6.63: Information element Definitions for the Call Diversion UDT Header 

Diversion Address  UDT Inbound Channel Header Information Element  
UDT Format  Appended Blocks  Target Address or Gateway  Source Address or Gateway  
Individual MS  Address - 00012  002  MSI  MS Address  
Talkgroup  Address - 00012  002  GPI  MS Address  
PSTN destination  BCD - 00102  1 to 20 digits - 002 21 to 44 digits -012  PSTNI  MS Address  
PABX destination  BCD - 00102  1 to 20 digits - 002 21 to 44 digits -012  PABXI  MS Address  
LINE Destination  BCD - 00102  1 to 20 digits - 002 21 to 44 digits -012  LINEI  MS Address  
Dispatcher Destination  BCD - 00102  1 to 20 digits - 002 21 to 44 digits -012  DISPATI  MS Address  
IP destination  IP - 01102  IPV4 - 002 IPV6 - 012  IPI  MS Address  
NOTE: Supplementary_Flag = 02, (A) = 02, Service_Kind = 10002, UDT_DIV = 12.  


6.6.7.1.2.2 Recipient of Diverted Calls Cancels All Incoming Diversions 
If the recipient of call diversions (MS) wishes to cancel all incoming diversions, the MS generates a random access service request with the C_RAND information elements set as table 6.64. 
Table 6.64: C_RAND Information Elements for a Cancel Incoming Diversions 
Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  Not applicable - 02  
1  02  Privacy (see note)  
1  DIVONOFF  02  Clear Call Diversion  
1  DIV_VD  Active 12 Inactive 02  Clear Divert Voice Calls  
1  DIV_PD  Clear Divert Packet Data Calls  
1  DIV_SD  Clear Divert UDT Short Data Calls  
1  DIV_S  Clear Divert Status Calls  
Proxy Flag  1  PROXY  02  Not defined for Cancel Incoming Diversions  
Appended_ Supplementary_Data  2  SUPED_VAL  002  Not Defined for the call diversion Service  
Appended_Short_ Data  2  SDATA_VAL  002  Not Defined for the call diversion Service  
Service_Kind  4  DIV_SRV  10002  Call Diversion Service  
Target_address or Gateway  24  Value  DIVERTI  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE: Privacy is not defined in the present document.  


6.6.7.1.2.3 TSCC Response to the Cancel Incoming Diversions Request 
For the cancel incoming call diversions, the PDUs that shall represent a valid response are: 
a) 
An acknowledgement PDU C_NACKD indicating that the service request has not succeeded. 

b) 
C_WACKD(reason = Wait) further signalling to follow. 

c) 
An acknowledgement C_ACKD (Source = DIVERTI, Destination = MS Individual Ident) indicating that the request has succeeded. 

d) 
A C_AHOY PDU from AUTHI (MS authentication check). 





6.6.7.2 Diverting Calls 
An MS makes a service access request by random access. If the destination address selected is an individual MS address and the system determines that calls to this address are diverted, the TSCC shall acknowledge the random access request with a UDT header + appended with the diverted address. 
aligned timing 
TSCC Outbound TSCC 
TSCC 
The UDT Header sets the following information elements:  Supplementary_Flag -12. 
 
UDT Response -02. 

 
Target_address or Gateway -Address of the calling MS. 


Where the appended UDT block conveys an address the ADDRESS1 information element shall convey the diverted address. Table 6.65 indicates the UDT Header information elements for the services and diversion addresses. 
Table 6.65: Information Elements for UDT Header to Convey Diverted Address 
UDT Download  
AL  H  
 AD  AL  
 
R 
 

MS(A) Inbound 
offset timing 
UDT Download  
AL  
 AL  H  
 AD  AL  
 
R  
 
 
Figure 6.66: TSCC Provides Diverted Address to MS 


TSCC Outbound 
MS(A) Inbound 
Service Request  Divert to  UDT Header information elements  
UDT Format  Appended Blocks  Service_Kind  Source Address  
Private Voice  MS address  Address 00012  002  00002  MSI  
Talkgroup  Address 00012  002  GPI  
PSTN  BCD 00102  1 to 20 digits - 002 21 to 44 digits -012  PSTNI  
PABX  BCD 00102  1 to 20 digits - 002 21 to 44 digits -012  PABXI  
Private Packet Data  MS address  Address 00012  002  00102  MSI  
Talkgroup  Address 00012  002  GPI  
PSTN  BCD 00102  1 to 20 digits - 002 21 to 44 digits -012  PSTNI  
PABX  BCD 00102  1 to 20 digits - 002 21 to 44 digits -012  PABXI  
IP  IP 01102  IPV4 - 002 IPV6 - 012  IPI  
Service Request  Divert to  UDT Header information elements  
UDT Format  Appended Blocks  Service_Kind  Source Address  
UDT Short Data  MS address  Address 00012  002  01002  MSI  
Talkgroup  Address 00012  002  GPI  
PSTN  BCD 00102  1 to 20 digits - 002 21 to 44 digits -012  PSTNI  
PABX  BCD 00102  1 to 20 digits - 002 21 to 44 digits -012  PABXI  
IP  IP 01102  IPV4 - 002 IPV6 - 012  IPI  
Status  MS address  Address 00012  002  01112  MSI  
PSTN  BCD 00102  1 to 20 digits - 002 21 to 44 digits -012  PSTNI  
PABX  BCD 00102  1 to 20 digits - 002 21 to 44 digits -012  PABXI  
IP  IP 01102  IPV4 - 002 IPV6 - 012  IPI  



6.6.8 Dynamic Group Numbering Assignment Service 
6.6.8.0 Dynamic Group Numbering Assignment Service - Introduction 
A TierIII system may offer the Dynamic Group Numbering Assignment (DGNA) Service. 
An MS is permitted to hold one or more talkgroup identities which may be pre-programmed, or dynamically added/subtracted using the DMR UDT. This clause describes the procedures to add (or remove a previously added talkgroup address(s)) to an MS. Up to sixteen DGNA addresses may be assigned to an MS: 
a) 
the DGNA_Address mode enables up to fifteen talkgroup addresses to be dynamically assigned to an MS; and 

b) 
the DGNA_Alias mode enables one talkgroup address and a text formatted associated alias of up to twenty one characters to be dynamically assigned to an MS. The DGNA _Alias mode also enables a text string to be transferred and associated with one of the fifteen talkgroup addresses assigned using DGNA _address mode. 


The Dynamic Group Numbering Service shall only be directed to an individual MS. 
The procedure may be initiated from an MS or Gateway. Figure 6.67 illustrates an example for a Dynamic Group Assignment procedure initiated from an MS to an MS using the UDT mechanism. 
To transfer talkgroups by the DGNA_Address mode, clause B.3.2 describes the format of the appended blocks to transport 24 bit addresses. For the DGNA service, in the UDT inbound phase. ADDRESS1 to ADDRESSx shall contain a list of dynamically assigned talkgroup addresses (or ADRNULL). In the UDT outbound phase ADDRESS1 to ADDRESSx shall be copied from the inbound phase. The recipient of the DGNA_Address mode transfer shall delete all fifteen previous DGNA addresses and replace them with the addresses conveyed in the new DGNA transfer. 
To transfer a talkgroup and text alias using the DGNA_Alias mode, clause B.3.9 describes the format of the appended blocks using the UDT Appended data Mixed Format. 
An MS may hold one One-key_talkgroup. A One-key_talkgroup is differentiated from other talkgroups in that a call may be made to a One-key_talkgroup by for example a shortcut key or merely pressing the PTT. 
The Dynamic Group Numbering Assignment uses the multi-part call set-up. If a Dynamic Group Numbering Assignment service is initiated from a TSCC Gateway, only the UDT outbound phase is applicable. 
TSCC Outbound 

MS(A) Inbound 
MS(B) Inbound 


Head for Appended 
Aloha 
Ahoy 

Data 
Random Ack 

Aloha M=24 
Appended Data 
Recipient of message 
Access RQ 
Response 
Address=NULL 
Figure 6.67: Example of a Dynamic Group Numbering Assignment Transfer 
Figure 6.67 illustrates an example of a UDT Dynamic Group Numbering Assignment transfer from MS to MS. In this example two UDT appended blocks have been selected by the calling MS, therefore up to seven talkgroups are dynamically assigned: 
a) 
MS(A) calculates the number of appended UDTs needed to transmit the Dynamic Group Numbering Assignment addresses. In this example, two appended UDTs have been selected; 

b) 
"A" is the random access C_RAND PDU. The called party is DGNAI and Service_Kind set to 'Supplementary Data' and SUPED_VAL set to the number of data blocks needed to transport the Dynamic Group Numbering Assignment data. In this example SUPED_VAL = 012; 

c) 
"B" is a C_AHOY PDU from DGNAI that requests MS(A) to transport the talkgroup address(s) using the UDT mechanism; 

d) 
"C" is the inbound phase consisting of a Multi-block UDT header + appended data. Target Address of this UDT data packet is MS(B); 

e) 
"D" is the outbound phase consisting of a Multi-block UDT header + appended talkgroup address(s). Source Address of this UDT data packet is MS(A). Target Address of this UDT data packet is MS(B); 

f) 
"E" is the acknowledgement from MS(B); 

g) 
"F" is the final acknowledgement to the calling party MS(A). Note that the acknowledgement may be repeated for reliability. 


The timing for the inbound and outbound phases is not prescribed in the present document. 

6.6.8.1 Rules for the allocation of Dynamic Group Addresses 
6.6.8.1.0 Allocation Rules -Introduction 
The calling party selects the particular DGNA mode (DGNA_Address or DGNA_Alias) by setting the Information Elements appropriately in the HEAD PDU in the inbound phase of the call as illustrated in table 6.66. 
Table 6.66: Information Elements for the HEAD inbound UDT phase 

UDT Head Information Element  DGNA_Address Mode  DGNA_Alias Mode  
UDT_Format  00012  10102  
Target Address  MS ID - the recipient of the Dynamic talkgroup(s)  
Source Address  Calling Party  
Pad Nibble  0 00002  See table B.9  
Reserved  02  
Appended_Blocks (UAB)  See table 6.67  See table 6.68  
Supplementary Flag(SF  02  
Protect_Flag(PF)  02  
Opcode  10 01012  


6.6.8.1.1 DGNA_Address Mode 
The UDT mechanism permits up to fifteen 24 bit Dynamic Talkgroup addresses transferred in four UDT blocks. If less than four UDT blocks are defined by the sending MS, then not all entries in the dynamic talkgroup list are accessible. Table 6.67 illustrates the relationship between the number of appended blocks and the list of talkgroup addresses. If there are insufficient talkgroup addresses to completely fill an appended block then unused addresses shall contain ADRNULL. ADDRESS1 may be assigned as the One-key_talkgroup by setting the OK flag in the first appended block to 12. If an MS successfully receives a DGNA transfer, the existing list of talkgroups ADDRESS1 to ADDRESS15 held 
by the MS shall be deleted and replaced by the new talkgroups from the DGNA transfer. 
Table 6.67: MS Storage of Talkgroup Assignment Addresses. DGNA_Address Mode 
Four appended data blocks  Three appended data blocks  Two appended data blocks  One appended data blocks  Appended data  
UAD1 = 112  UAD1 = 102  UAD1 = 012  UAD1 = 002  ADDRESS1 (note)  
ADDRESS2  
ADDRESS3  
ADDRESS4  
ADDRESS5  
ADDRESS6  
ADDRESS7  
ADDRESS8  
ADDRESS9  
ADDRESS10  
ADDRESS11  
ADDRESS12  
ADDRESS13  
ADDRESS14  
ADDRESS15  
NOTE: If OK = 12 then ADDRESS1 represents a One-key_talkgroup.  

All dynamic talkgroups may be deleted by a UDT transfer setting UAD1 = 002, OK = 02, ADDRESS1 = ADRNULL, ADDRESS2 = ADRNULL, ADDRESS3 = ADRNULL. 

6.6.8.1.2 DGNA_Alias Mode 
The UDT mechanism permits one 24 bit Dynamic Talkgroup address and an associated alias text string of up to 21 Unicode characters to be transferred in up to four UDT blocks. If less than 21 alias characters are transferred then fewer UDT blocks are required. Table 6.68 illustrates the relationship between the appended blocks, the talkgroup address and the alias string. 
The DGNA_Alias mode also enables a text string to be transferred and associated with one of the up to fifteen addresses previously transferred by the DGNA_Address mode. In this case ADDRESS = an address previously transferred, the text string is positioned in ALIASx. If this address is the One-key_talkgroup, then the One Key format flag (OK) in the first appended UDT = 12. 
This mechanism permits an MS be assigned to up to 16 DGNA Talkgroups (15 via the DGNA_Address mode plus 1 via the DGNA_Alias mode), each of these 16 DGNA Talkgroups being associable to an alias text string of up to 21 Unicode characters, via DGNA_Alias mode command. 
If the ADDRESS represents the One-key_talkgroup for the target MS, the One Key format flag (OK) in the first appended UDT = 12. If the MS previously held the One-key_talkgroup, the new One-key_talkgroup will become ADDRESS. 
If the One Key format flag (OK) = 02, the ADDRESS does not become the new One-key_talkgroup. In this case, if the MS previously held the One-key_Talkgroup, that One-key_talkgroup shall remain unchanged. 
To delete the 16th DGNA Talkgroup (the one assignable only via a DGNA_Alias mode command, a DGNA_Alias is transferred with ADDRESS set to ADRNULL, OK = 02, Pad Nibble = 0, UAB = 02, ALIASx = 00016. 
Table 6.68: MS Storage of the Talkgroup Assignment Address and the Alias. DGNA_Alias Mode 
Four appended data blocks  Three appended data blocks  Two appended data blocks  One appended data blocks  Appended data  
OK = 02 if the ADDRESS is not the One-key_talkgroup. OK = 12 if the ADDRESS is the One-key_talkgroup  OK  
UAD1 = 112  UAD1 = 102  UAD1 = 012  UAD1 = 002  ADDRESS  
ALIAS1  
ALIAS2  
ALIAS3 
 ALIAS4  
ALIAS5  
ALIAS6  
ALIAS7  
ALIAS8  
ALIAS9 
 ALIAS10  
ALIAS11  
ALIAS12  
ALIAS13  
ALIAS14  
ALIAS15 
 ALIAS16  
ALIAS17  
ALIAS18  
ALIAS19  
ALIAS20  
ALIAS21  



6.6.8.2 Dynamic Group Numbering Assignment Procedures for the TSCC 
6.6.8.2.0 Dynamic Group Numbering Assignment Procedures for the TSCC - Introduction 
An MS requests a Tier III UDT Dynamic Group Numbering Assignment service by generating a random access request PDU with the Target Address set to the Gateway address DGNAI. 
When the TSCC responds to the random access request, it shall start a timer (TNP_Timer). This timer shall be refreshed if the TSCC sends further call progress messages to the calling party. 

6.6.8.2.1 TSCC Response to a Call to an Individual MS or Talkgroup 
When a random access Dynamic Group Numbering service PDU is received by the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the UDT Dynamic Group Numbering random access request to an MS are: 
a)  an acknowledgement PDU C_NACKD, C_QACKD, C_WACKD;  
b)  a C_AHOY PDU, Source Address = Authentication Challenge Value (MS authentication check);  
c)  a C_AHOY PDU from DGNAI instructing the calling MS to transport its UDT Dynamic Assignment  
Talkgroup Addresses using the UDT mechanism (C_AHOY, Service_Kind = 11012, Source address =  

DGNAI, Target address = calling party MS ID, and Appended Blocks from the MS random access request). 

6.6.8.2.2 UDT Outbound Phase 
Following a successful inbound phase, the TSCC shall transfer the dynamic talkgroups to the called party. The outbound HEAD PDU is illustrated in table 6.69. 
Table 6.69: UDT Outbound Header DGNA Assignment 

Information element  Length  Remark  
Feature elements  
Elements defined in ETSI TS 102 361-1 [5]  
G/I  1  02 = Destination is an individual MS address  
A  1  12 = Response demanded if Destination is an individual MS address  
Emergency  1  02 = This PDU is not supporting an emergency priority call  
UDT_Option_Flag  1  See table 7.51  
Data Packet Format  4  00002  
SAP Identifier  4  Service Access Point - 00002 for UDT  
UDT_Format  4  DGNA_Address mode = 00012  
DGNA_Alias mode = 10102  
Target_address or Gateway  24  Called Party MS ID  
Source_address or Gateway  24  Calling Party MS ID (or Gateway)  
Pad Nibble  5  DGNA_Address mode = 0 00002  
DGNA_Alias mode = Pad Nibble (table B.9)  
Reserved  1  02  
Appended_Blocks(UAB)  2  Number of Blocks appended to this UDT Header (see table 6.67) 002 = 1 Appended Data UDT block 012 = 2 Appended Data UDT blocks 102 = 3 Appended Data UDT blocks 112 = 4 Appended Data UDT blocks  
Supplementary_Flag(SF)  1  02 = This UDT Header is carrying the data for a user initiated service  
Protect Flag (PF)  1  Reserved for Future Use  
Opcode (C_DGNAHD)  6  Shall be set to 10 01002  
NOTE: Shaded rows are information elements that are defined in ETSI TS 102 361-1 [5].  


6.6.8.2.3 Final Acknowledgement to the Calling Party 
In the outbound phase, the TSCC downloads the Dynamic Talkgroups to the called party. The recipient is an individual MS therefore an acknowledgement shall be sent to the TSCC by the MS. 
The TSCC shall send an appropriate acknowledgement to the calling party to indicate the outcome of the UDT Dynamic Group Numbering transfer. If the UDT download was received without errors the acknowledgement shall be C_ACKU(Reason = MS_Accepted). The mirrored C_ACKD(Mirrored_Reason = MS_Accepted) shall then be sent to the calling MS. 


6.6.8.3 Dynamic Group Numbering Assignment Procedures for MS 
6.6.8.3.0 DGNA Procedures for MS -Introduction 
An MS requests a UDT Dynamic Group Numbering call service to another individual MS using a multi-part service request. An MS requests the service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The PDUs in the random access request are passed to the CC layer - set appropriately as prescribed in table 6.70. 
Table 6.70: C_RAND Information Elements for a Dynamic Group Numbering Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  Not applicable - 02  
1  02  Privacy (see note)  
1  SUPED_SV  02  Not applicable - 02  
1  BCAST_SV  02  Not applicable - 02  
1  Reserved  02  Not applicable - 02  
2  PRIORTY_SV  002  Not applicable - 002  
Proxy Flag  1  PROXY  02  
Appended_Supple mentary_Data  2  SUPED_VAL  Value  Number of appended UDTs required to transport supplementary data  
Appended_UDT Short Data  2  SDATA_VAL  002  
Service_Kind  4  IND_DG_SR V  11012  Supplementary Data Call Service  
Target_address or Gateway  24  Value  DGNAI  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE: Privacy is not defined in the present document.  


6.6.8.3.1 Initiating a Dynamic Group Numbering Service 
For a UDT Dynamic Group Numbering service request from an MS to an individual MS, the destination address is not provided to the TSCC until the UDT Inbound phase is complete. 
The MS shall attempt access until it receives a valid response, or the service is cancelled by the user, or the attempt fails by sending the maximum number of random access PDUs or the random access timer expires. 
For a UDT Dynamic Group Numbering service request from a Gateway, only the UDT outbound phase is applicable. 

6.6.8.3.2 Response to a Random Access UDT Dynamic Group Numbering Service 
The calling MS shall accept the following PDUs as a valid response to the Dynamic Group Numbering random access request: 
a) 
an acknowledgement PDU C_NACKD, C_QACKD, C_WACKD; 

b) 
a UDT Head + appended block(s) (the MS has diverted its calls); 

c) 
a C_AHOY PDU, Source Address = Authentication Challenge Value (MS authentication check); 

d) 
a C_AHOY PDU from DGNAI instructing the calling MS to transport its UDT Dynamic Group Numbering 


addresses using the UDT mechanism (C_AHOY, Service_Kind = 11012, Source address = DGNAI, Target address = calling party MS ID), and Appended Blocks from the MS random access request. 

6.6.8.3.3 MS Response to the TSCC AHOY for the UDT Inbound 
The MS shall inbound the dynamic talkgroups to the TSCC. The inbound HEAD PDU is illustrated in table 6.71. 
Table 6.71: UDT Inbound Header DGNA Assignment 

Information element  Length  Remark  
Feature elements  
Elements defined in ETSI TS 102 361-1 [5]  
G/I  1  02 = Destination is an individual MS address  
A  1  12 = Response demanded if Destination is an individual MS address  
Reserved  1  02  
UDT_DIV  1  02 = This UDT is not carrying Call Diversion destination information  
Data packet Format  4  00002  
SAP Identifier  4  Service Access Point - 00002 for UDT  
UDT_Format  4  DGNA_Address mode = 00012  
DGNA_Alias mode = 10102  
Target_address  24  Called Party MS ID  
Source_address  24  MS Calling Party ID  
Pad Nibble  5  DGNA_Address mode = 0 00002  
DGNA_Alias mode = Pad Nibble (table B.9)  
Reserved  1  02  
Appended_Blocks(UAB)  2  Number of Blocks appended to this UDT Header 002 = 1 Appended Data UDT block 012 = 2 Appended Data UDT blocks 102 = 3 Appended Data UDT blocks 112 = 4 Appended Data UDT blocks  
Supplementary_Flag(SF)  1  02 = This UDT Header is carrying the data for a user initiated service  
Protect Flag (PF)  1  Reserved for Future Use  
Opcode (C_DGNAHU)  6  Shall be set to 10 01012  
NOTE: Shaded rows are information elements that are defined in ETSI TS 102 361-1 [5].  


6.6.8.3.4 Acknowledgements Received by the Calling MS 
When the C_RAND PDU has been transmitted by the calling party, an initial response may be received by the calling party as specified in clause 6.6.8.3.3. 
At any time further PDUs may be sent to the calling party as follows: 
a) 
a C_NACKD at any time to indicate the call has failed. The Reason information element shall be set to indicate the reason for the call failure; 

b) 
a C_WACKD if more signalling will follow; 

c) 
after the UDT inbound phase and the UDT message has been successfully transported, C_ACKD PDU(Mirrored_Reason = MS_Accepted). 


If a C_NACKD is received, the calling MS shall abandon the UDT Dynamic Group Numbering call and return to the idle state. 
Any applicable call progress acknowledgement received shall restart the TNP_timer. 

6.6.8.3.5 Timeout Waiting for Further Signalling 
An MS waiting for further signalling shall abandon the UDT Short Data message service and return to the idle state if the TNP_Timer expires. 

6.6.8.3.6 MS Receiving a UDT Dynamic Group Numbering PDU 
If an MS receives a multi block UDT Head PDU with the Target Address matching its individual address, it shall respond with an appropriate acknowledgement. The Appended_Blocks information element in the UDT header indicates the number of appended UDT blocks. 



6.6.9 Full-Duplex MS to MS Voice Call Procedures 
6.6.9.0 Full-Duplex MS to MS Voice Call Procedures - Introduction 
Voice calls require a payload channel over which the call is conducted for each participant. Calls may be transacted between the entities in table 6.72. 
Table 6.72: Full-Duplex Voice Call Services 
Mode  Originator  Recipient  
MS  MS  

Only MSs are allowed as recipients for full-duplex MS to MS voice calls. 
The Service_Options PDU in the Random Access Service Request shall activate options for the Full-Duplex MS to MS Voice Call Service Request. The Service_Options shall be the same as for standard voice call procedures (see clause 6.6.2), with the exception of Broadcast service and Call to All MS, which are talkgroup calls. 

6.6.9.1 Full-Duplex MS to MS Voice Call Procedures for the TSCC 
6.6.9.1.0 Full-Duplex MS to MS Voice Call Procedures for the TSCC -Introduction 
An MS requests a Tier III full-duplex MS to MS voice service by generating a C_RAND random access request PDU with the Target Address set to an individual MS address. 
When the TSCC responds to the random access request, it shall start a timer (TP_Timer). This timer shall be refreshed if the TSCC sends further call related PDUs C_WACKD, C_QACKD or C_AHOY to the calling party. 

6.6.9.1.1 TSCC Response to Single-part Voice Call Set-up 
When a random access voice service PDU is received on the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the voice call single-part service random access request are: 
a) 
An acknowledgement PDU C_NACKD, C_QACKD, C_WACKD, C_ACKD(mirrored_reason = callback). 

b) 
A UDT Head + appended block(s) (voice call is diverted) UDT Header PDUs Source_Address = DIVERTI (conveying a diverted address) Supplementary Flag = 12 and (A) = 02. 

c) 
A C_AHOY PDU from the calling party MS ID (called party radio check) (C_AHOY Source address = calling party MS ID, Destination address = called party MS ID) (see clause 6.6.9.1.4). 

d) 
A C_AHOY PDU, Source Address = Authentication Challenge Value (MS authentication check) (see clause 6.4.8.2). 

e) 
A C_AHOY PDU from SUPLI for the calling MS to send supplementary_user data (see clause 6.4.13). 

f) 
A Channel Grant PDU(s) for this call (PV_GRANT_DX). 


For e) the TSCC shall then invoke the UDT procedure by sending the C_AHOY to the calling MS to send the supplementary_user data. The format of the supplementary_user data is specified in the UDT. If the TSCC does not successfully receive the UDT from the MS, the TSCC may repeat the C_AHOY, or transmit a C_NACKD to indicate failure of the call, or continue with the call setup and abandon the supplementary_user data. 
The order in which c) d) and e) shall be sent is prescribed in clause 6.4.13. 

6.6.9.1.2 TSCC Response to Multi-part Voice Call Set-up 
Multi-part voice call setup is not supported by the full-duplex MS to MS voice call service. 

6.6.9.1.3 Acknowledgements Sent by the TSCC to the Calling MS (voice) 
The TSCC may send acknowledgement PDUs following the random access voice service request to indicate the progress of the call, to terminate the call or indicate call-back. The procedures are identical to those described in clause 6.6.2.1.3. 

6.6.9.1.4 Voice Radio Check 
The TSCC shall check that the called party is in radio contact and will accept the call before a payload channel is allocated. 
The TSCC shall check availability of the called party by sending a C_AHOY PDU to that called party. If the message is C_AHOY Service_Kind = 10102 Service_Kind_Flag = 02 then the TSCC is checking that the MS is in radio contact and can accept this call immediately. If the message is C_AHOY Service_Kind = 10102 Service_Kind_Flag = 12 then the TSCC is checking that MS is RFC. 
Checking availability by sending a multi-block UDT with supplementary_user data is not possible for full duplex MS to MS, as the full-duplex property of the requested call cannot be signalled. 
If a response is not received from the called party the TSCC may repeat the C_AHOY. 
The availability check demands a response from the called party: 
 
If the response is C_NACKU, the TSCC shall send an appropriate call failed response to the calling MS and echo the Reason in the C_NACKD PDU (mirrored_reason). 

 
If the response is C_ACKU(Reason = CallBack), the TSCC shall send an appropriate CallBack response to the calling MS, C_ACKD (mirrored_reason = 0100 01012). 

 
If the response is C_ACKU(Reason = Message_Accepted), the TSCC shall progress the service request and allocate a payload channel by transmitting appropriate Channel Grant PDUs. 

 
If the called MS is FOACSU enabled, a valid response to C_AHOY Service_Kind = 10102 Service_Kind_Flag = 12 is C_ACKU(Reason = MS_ALERTING), i.e. MS alerting but not yet RFC. 




6.6.9.2 Full-Duplex MS to MS Voice Call Procedures for MS 
6.6.9.2.0 Full-Duplex MS to MS Voice Call Procedures for MS -Introduction 
An MS is able to request a full-duplex MS to MS voice call service to another individual MS using a single-part service request. 
An MS requests a full-duplex MS to MS voice service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer - set appropriately as prescribed in table 6.73. 
Table 6.73: C_RAND Information Elements for a Full-duplex MS to MS Voice Call Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  02  Non-emergency service  
12  Emergency service  
1  02  Privacy (see note 1)  
1  SUPED_SV  02  No Supplementary_user data Transfer Service required for this call  
12  Supplementary_user data Transfer Service requested for this call  
1  BCAST_SV  02  Not applicable to full-duplex MS to MS voice calls  
1  Reserved  02  
2  PRIORTY_SV (see note 2)  002  Normal (low) priority  
012  Medium Priority  
102  High Priority  
112  Highest Priority  
Proxy Flag  1  PROXY  02  Not applicable to full-duplex MS to MS voice calls  
Appended_ Supplementary_Data  2  SUPED_VAL  Value  Number of appended UDTs required to transport supplementary_user data  
Ambient Listening Service  1  ALS_SERV  02  Ambient Listening Service not requested  
12  Ambient Listening Service requested  
Reserved  1  02  
Service_Kind  4  IND_V_SRV_DX  10102  Full-Duplex MS to MS Individual Voice Call Service  
Target_address  24  Value  Target Individual address  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE 1: Privacy is not defined in the present document. NOTE 2: If EMERG = 12 then PRIORTY_SV is set to 002. NOTE 3: If SUPED_SV = 02 then SUPED_VAL = 002.  


6.6.9.2.1 Initiating a Single-part Voice Call Service 
For a full-duplex MS to MS voice service request to an individual MS, the destination address is completely expressed by the Target Address information element in the random access PDU. The Service_Kind is always set to 10102 to indicate full-duplex MS to MS individual call service. 

6.6.9.2.2 Response to the Single-part Voice Service Request 
MS shall accept the following PDUs as valid response to the single-part voice service request: 
a) 
an acknowledgement C_WACKD, C_QACKD, C_NACKD, C_NACKD(mirrored_reason);C_ACKD(mirrored_reason = callback); 

b) 
a C_AHOY called party radio check; 

c) 
a UDT header + appended UDT block. UDT Header Source_Address = DIVERTI (conveying a diverted address) Supplementary Flag = 12 and (A) = 02; 

d) 
a Channel Grant PDU (PV_GRANT_DX); 

e) 
if the Service_Options SUPED_SV = 12 a C_AHOY from SUPLI to upload the supplementary_user data from the calling MS. 



6.6.9.2.3 Response to the Multi-part Voice Service Request 
Multi-part voice call setup is not supported by the full-duplex MS to MS voice call service. 

6.6.9.2.4 Acknowledgements Received by the Calling MS (voice) 
At some time after sending the voice service request random access PDU the calling MS may receive an acknowledgement. On receiving the acknowledgement, the MS shall start or restart a waiting timer, TP_Timer. (The TSCC maintains a similar timer). 
The MS shall take the actions prescribed: 
a) 
Progress PDUs for a single-part voice call Service Request are: 

1) C_WACKD: Intermediate acknowledgement. More PDUs to follow. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the user; 
2) C_QACKD: Called MS engaged in another call. The MS shall wait TP_Timer for further signalling; 
3) C_QACKD: Call is queued because the resource is in use at the moment. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the user. 

b) 
(The MS may choose to differentiate between 1), 2) and 3) by providing the user with a visual or audible indication for each of the conditions.) 

c) 
Termination PDUs are selected from an appropriate Reason information element in a C_NACKD PDU (see clause 7.2.8). If the call was rejected by the called party, the termination PDU sent by the TS shall be a C_NACKD(mirrored_reason): 

1) C_NACKD: Call refused and terminated. The C_NACKD PDU provides a versatile range of Reason codes and mirrored reason codes to indicate to the calling party why the Service request was terminated. The calling party shall return to the idle state. 
2) C_NACKD(mirrored_reason = MS_Duplex_Not_Supported): The called MS indicates, that it does not support the full-duplex MS to MS voice call service. The calling MS should try to set up another call using individual voice call service with the same properties. 

d) 
Call-Back PDU to indicate to the calling MS that the voice call service has been accepted by the called party for call back. Service concluded. The calling party shall return to the idle state: 

1) C_ACKD(mirrored_reason = CallBack). 

e) 
If the TS has previously accepted a call diversion indicating that this type of service request be directed to another called party, a UDT Head + Appended data indicating the diverted address. 



6.6.9.2.5 Availability Check to the Called Party (voice) 
For a full-duplex MS to MS call set-up, the called MS shall receive a radio check to which it shall respond with an appropriate acknowledgement: 
 
The called party shall respond C_NACKU, if it cannot accept the call (the TSCC shall send an appropriate call failed response to the calling MS): 

-If the called MS does not support full-duplex MS to MS calls, it shall set the reason code to MS_Duplex_Not_Supported. The calling radio may then try to set up the call using individual voice call service. 

 
The called party shall respond C_ACKU(Reason = CallBack), if the called MS wishes to return the call at some future time (the TSCC shall send an appropriate CallBack response (mirrored reason) to the calling MS). 

 
The called party shall respond C_ACKU(Reason = MS_Accepted), if the call is accepted and the MS can accept the call immediately (the TSCC shall progress the service request and allocate a payload channel by transmitting appropriate Channel Grant PDUs). 

 
If the MS is FOACSU enabled and the message to which the MS is sending the acknowledgment is C_AHOY 


Service_Kind = 10102 Service_Kind_Flag = 12 then a valid response is C_ACKU(Reason = 
MS_ALERTING), i.e. MS alerting but not yet RFC. After sending the acknowledgment the MS may indicate 
RFC by sending a C_RAND (Answer Call Service, ACCEPT = 02). If the called MS is alerting but the user 
does not wish to accept the call the MS shall send a C_RAND(Answer Call Service, ACCEPT = 12) to reject the call. 

6.6.9.2.6 Payload Channel Allocation 
MS shall check the address information elements received in Duplex Private Voice Channel Grant PDUs. If it is determined that the Channel Grant PDU is applicable then it shall retune to the indicated physical/logical payload channel to commence the Voice Service. 
If an MS receives a Duplex Private Voice Channel Grant PDU (PV_GRANT_DX) where the Target Address information element matches its individual address then that PDU is applicable. 
The TSCC may send two PV_GRANT_DX PDUs for a given call, one for each participant. The MSs shall expect their own MS ID in the target field to accept a PV_GRANT_DX. 

6.6.9.2.7 Calling MS in Single Part Voice Call Setup SDL 
The SDL defined in clause 6.6.2.2.8 (figures 6.53 and 6.54) shall be interpreted accordingly. 

6.6.9.2.8 Call Set-up MSC that also Transfers Supplementary_user Data. 
The MSC defined in clause 6.6.2.2.9 (figure 6.55) shall be interpreted accordingly. 


6.6.9.3 Timing Requirements for the Allocation of a Payload Channel 
The requirements defined in clause 6.6.1.6.2 shall apply for full-duplex MS to MS calls. 

6.6.9.4 Procedures for the Voice Payload Channel 
6.6.9.4.0 Procedures for the Voice Payload Channel - Introduction 
MSs are directed to a voice payload physical/logical channel on the TSCC. When the voice call is terminated, MS returns to the TSCC and the payload channel is reassigned to another call. 
A voice call may extend over several MS PTT items for the duration of the call (unless the call is terminated prematurely by the expiry of the voice payload timer or by means of Transmit Interrupt) if the system has assigned the call as "message trunking". If the system has assigned the call as pure "transmission trunking" the call shall be terminated after the end of each PTT item. A third possibility is that the call has been assigned as "quasi-transmission trunking". In this case a short interval timer (TV_Hangtime) between PTT items holds the payload channel. If this short interval timer expires, the call is terminated and the next PTT item sets up a new call. Separate PPT item timers are defined for non-emergency calls, emergency calls, non-emergency ALS calls and emergency ALS calls (see table A.1). 
For full-duplex MS to MS individual voice call service, the timing model shall be offset timing as defined in ETSI TS 102 361-1 [5]. 
The procedures for TS/MS behaviour on the voice payload channel are described in ETSI TS 102 361-2 [6]. In the trunked environment however, call maintenance PDUs are exchanged between MS and TS in addition to the PDUs described in ETSI TS 102 361-2 [6]. 
Full-duplex MS to MS calls utilize Time Division Duplex (TDD) timing as described in ETSI TS 102 361-1 [5], clause 5.1.4.4. 
When active, a payload channel shall transmit the CACH in the same form as described in ETSI TS 102 361-2 [6], clause 7.1.3.2. 
The beginning of a call shall use PATCS method (see ETSI TS 102 361-2 [6], clause 5.2.2.1). For an individual MS call service, the called party will already have had a radio check as part of the call set-up procedure. 

6.6.9.4.1 TS Procedures for the Voice Payload Channel 
The TS procedures for the full-duplex MS to MS voice payload channel shall follow the definitions in clause 6.6.2.3.1. 

6.6.9.4.2 MS Procedures for the Voice Payload Channel 
The MS procedures for the full-duplex MS to MS voice payload channel shall follow the definitions in clause 6.6.2.3.2. 



6.6.10 Full-Duplex MS to MS Packet Data Call Procedures 
6.6.10.0 Full-Duplex MS to MS Packet Data Call Procedures -Introduction 
Full-duplex MS to MS packet data calls require a payload channel over which the call is conducted. Calls may be transacted between the entities in table 6.74. 
Table 6.74: Packet Data Call Services 
Mode  Originator  Recipient  
Packet Data  MS  MS  

A full-duplex packet data payload channel may support multiple simultaneous calls. 

6.6.10.1 Full-Duplex MS to MS Packet Data Call Procedures for the TSCC 
6.6.10.1.0 Full-Duplex MS to MS Packet Data Call Procedures for the TSCC -Introduction 
An MS requests a Tier III service by generating a C_RAND random access request PDU with the Target Address set to an individual MS address (single-part call setup). 
When the TSCC responds to the random access request, it shall start a timer (TP_Timer). This timer shall be refreshed if the TSCC sends further call progress PDUs to the calling party. 

6.6.10.1.1 TSCC Response to Single-part packet Call Set-up 
When a random access packet data PDU is received on the TSCC, the TSCC shall send a response in accordance with the random access procedures prescribed in clause 6.2. 
The PDUs that represent a valid response to the packet call single-part service random access request are: 
a) 
An acknowledgement PDU C_NACKD, C_QACKD, C_WACKD. 

b) 
A UDT Head + appended block(s) (packet data call is diverted) UDT Header PDUs Source_Address = DIVERTI (conveying a diverted address) Supplementary Flag = 12 and (A) = 02. 

c) 
A C_AHOY PDU (called party radio check) (C_AHOY Source address = calling party MS ID, Destination address = called party MS ID) (see clause 6.6.2.1.4). 

d) 
A C_AHOY PDU, Source Address = Authentication Challenge Value (MS authentication check). 

e) 
A C_AHOY PDU from SUPLI to upload supplementary data from calling MS. 


f) A Channel Grant PDU(s) for this call (PD_GRANT_DX). The order in which c), d) and e) shall be sent is prescribed in clause 6.4.13. 

6.6.10.1.2 TSCC Response to Multi-part Packet Call Setup 
Multi-part packet data call setup is not supported by the full-duplex MS to MS packet data call service. 

6.6.10.1.3 Acknowledgements Sent on the TSCC to the Calling MS (packet) 
The TSCC may send acknowledgement PDUs following the random access data packet service request to indicate the progress of the call, to terminate the call. The procedures are identical to those described in clause 6.6.3.1.3. 

6.6.10.1.4 Radio Check for Packet Data 
For calls to individual MS, the TSCC shall check that the called party is in radio contact and shall accept the call before a payload channel is allocated. The radio check may also indicate that the called party data terminal equipment is ready. The TSCC shall check availability of the called party by sending a C_AHOY PDU to that called party. If a response is not received from the calling party the TSCC may repeat the C_AHOY. The availability check demands a response from the called party: 
 
If the response is C_NACKU, the TSCC shall send an appropriate call failed response to the calling MS and echo the Reason in the C_NACKD PDU. 

 
If the response is C_ACKU(Reason = Message_Accepted), the TSCC shall progress the service request and allocate a payload channel by transmitting appropriate Channel Grant PDUs. 




6.6.10.2 Full-Duplex MS to MS Packet Data Call Procedures for MS 
6.6.10.2.0 Full-Duplex MS to MS Packet Data Call Procedures for MS -Introduction 
An MS is able to request a full-duplex MS to MS packet data call service to another individual MS or a talkgroup using a single-part service request. 
An MS requests a full-duplex MS to MS packet data service by sending a C_RAND random access request complying with the random access procedures in clause 6.2. The information elements in the random access request are passed to the CC layer - set appropriately as prescribed in table 6.75. 
Table 6.75: C_RAND Information Elements for a Packet Data Call Service 

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Service_Options  7  1  EMERG  02  Non-emergency service  
12  Emergency service  
1  02  Privacy (see note 1)  
1  SUPED_SV  02  No Supplementary Data Transfer Service required for this call  
12  Supplementary Data Transfer Service requested for this call  
1  HI_RATE  02  Not applicable for full-duplex MS to MS packet data  
1  Reserved  02  
2  PRIORTY_SV (see note 2)  002  Normal (low) priority  
012  Medium Priority  
102  High Priority  
112  Highest Priority  
Proxy Flag  1  PROXY  02  Not applicable for full-duplex MS to MS packet data  

Information Element (IE)  IE Length  length  Alias  Value  Remark  
Appended_ Supplementary_Data  2  SUPED_VAL  Value  Number of appended UDTs required to transport supplementary data  
Appended_UDT Short Data  2  SDATA_VAL  002  Not Applicable for Packet Data  
Service_Kind  4  IND_D_SRV_DX  10112  Individual Packet Data Call Service  
Target_address  24  Value  Target Individual address  
Source_address  24  Value  Individual Address of the requesting MS  
NOTE 1: Privacy is not defined in the present document. NOTE 2: If EMERG = 12 then PRIORTY_SV is set to 002. NOTE 3: If SUPED_SV = 02 then SUPED_VAL = 002.  


6.6.10.2.1 Initiating a Single-part Packet Data Call Service 
For a full-duplex MS to MS packet data service request to an individual MS, the destination address is completely expressed by the Target Address information element in the random access PDU. The Service_Kind is always set to 10112 to indicate full-duplex MS to MS packet data service. 

6.6.10.2.2 Response to the Single-part Packet Service Request 
MS shall accept the following PDUs as valid response to the single-part data packet service request: 
a) 
an acknowledgement C_WACKD, C_QACKD, C_NACKD; 

b) 
a C_AHOY from the calling party MS ID - called party radio check; 

c) 
a Channel Grant PDU (PD_GRANT_DX); 

d) 
if the Service_Options SUPED_SV = 12 a C_AHOY from SUPLI to upload the supplementary data from the calling MS; 

e) 
a UDT Head + appended blocks UDT Header PDUs Source_Address = DIVERTI, Supplementary_Flag = 12. 



6.6.10.2.3 Response to the Multi-part Packet Data Service Request 
Multi-part packet data call setup is not supported by the full-duplex MS to MS packet data call service. 

6.6.10.2.4 Acknowledgements Received by the Calling MS (packet data) 
At some time after sending the packet data service request random access PDU the calling MS may receive an acknowledgement. On receiving the acknowledgement, the MS shall start or restart a waiting timer, TP_Timer. (The TSCC maintains a similar timer.) 
The MS shall take the actions prescribed: 
a) 
Progress PDUs for a single-part data packet call Service Request are: 

1) C_WACKD: Intermediate acknowledgement. More PDUs to follow. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the calling MS; 
2) C_QACKD (Reason = Queued_for_Busy): Called MS engaged in another call. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the calling MS; 
3) C_QACKD (Reason = Queued_for_Resource): Call is queued because the resource is in use at the moment. The MS shall wait TP_Timer for further signalling and may indicate a possible delay to the calling MS. The MS may choose to differentiate between 1), 2) and 3) by providing the calling MS with a particular indication for each of the conditions. 

b) 
Termination PDUs are selected from an appropriate Reason information element in a C_NACKD PDU (see clause 7.2.8): 


1) C_NACKD: Call refused and terminated. The C_NACKD PDU provides a versatile range of Reason codes to indicate to the calling party why the Service request was terminated. The calling party shall return to the idle state. If the call was rejected by the calling party, the termination PDU sent by the TS shall be a C_NACKD(mirrored_reason). 
2) C_NACKD(mirrored_reason = MS_Duplex_Not_Suppported): The called MS indicates, that it does not support the full-duplex MS to MS packet data service. The calling MS may try to set up a call using packet data service with the same properties. 

6.6.10.2.5 Availability Check to the Called MS (packet data) 
For a full-duplex MS to MS call set-up, the called MS shall receive a radio check to which it shall respond with an appropriate acknowledgement: 
 
The called party shall respond C_NACKU, if it cannot accept the call or its data terminal equipment is not ready (the TSCC shall send an appropriate call failed response to the calling MS (mirrored_reason)). 

 
The calling party shall respond C_ACKU (Reason = Message_Accepted), if the call is accepted (the TSCC shall progress the service request and allocate a payload channel by transmitting appropriate Channel Grant PDUs). 



6.6.10.2.6 Payload Channel Allocation 
MS shall check the address information elements received in Duplex Packet Data Channel Grant PDUs. If it is determined that the Channel Grant PDU is applicable then it shall retune to the indicated physical/logical payload channel to commence the Packet Data Service. 
If an MS receives a Duplex Private Channel Grant PDU where the Target Address information element matches its individual address then that PDU is applicable. 
The TSCC may send two PD_GRANT_DX PDUs for a given call, one for each participant. The MSs shall expect their own MS ID in the target field to accept a PD_GRANT_DX PDU. 


6.6.10.3 Procedures for the Packet Data Payload Channel 
6.6.10.3.0 Procedures for the Packet Data Payload Channel - Introduction 
MSs are directed to a Packet Data payload physical/logical channel on the TSCC. When the Packet Data call is terminated by either the TS or MS, the MS shall return to the TSCC. When a physical channel has been assigned, data PDUs of arbitrary length are transferred over the DMR Air Interface using the packet technique described in ETSI TS 102 361-1 [5] and ETSI TS 102 361-3 [7]. 
A Packet Data call may continue unless the call is terminated by a) the MS or b) the TS or c) terminated prematurely as a result of the expiry of an overall payload call payload timer. 
The full-duplex MS to MS packet data service does not support the high-speed data mode. 
The procedures for TS/MS behaviour on the Packet Data payload channel are described in ETSI TS 102 361-3 [7]. In the trunked environment however, additional call maintenance PDUs are exchanged between MS and TS in addition to the PDUs described in ETSI TS 102 361-3 [7]. 
Full-duplex MS to MS calls utilize Time Division Duplex (TDD) timing as described in ETSI TS 102 361-1 [5], clause 5.1.4.4. 
When active on a payload channel, the TS shall transmit the CACH in the same form as described in ETSI TS 102 361-2 [6], clause 7.1.3.2. 
The system may direct a number of independent Packet Data calls to the same Packet Data channel. MSs may then share that channel, but it shall be noted that while MS are away from the TSCC, they are unable to receive new calls. New Packet Data calls directed to an MS that is active on a Packet Data channel may either be queued by the system or such a call may be directed to the Packet Data channel and share the channel with other ongoing calls. 
If an MS receives a packet data call set-up from an ipv4 or ipv6 address, the UDT protocol is able to send the full calling party IP address as part of the call set-up using the supplementary data transfer service [5]. The system may then use IPI as the source address for the packet data call. 

6.6.10.3.1 TS Procedures for the Packet Data Payload Channel 
The TS procedures for the full-duplex MS to MS packet data payload channel shall follow the definitions in clause 6.6.3.3.1. 

6.6.10.3.2 MS Procedures for the Packet Data Payload Channel 
The MS procedures for the full-duplex MS to MS packet data payload channel shall follow the definitions in clause 6.6.3.3.2. 



6.6.11 Unified Single Block Data Polling Service 
6.6.11.0 Unified Single Block Data Polling Service - Introduction 
The Unified Single Block Data Polling Service enables data to be polled from an MS on either the TSCC or the TSCCAS. Up to 68 bits of data may be transported from an MS in the Poll Response PDU. The Poll Request PDU is capable of sending the polled MS up to 48 bits of data. The format of the information elements in the different USBD PDUs is implied as the Poll Request PDU is an outbound only PDU and the Poll Response PDU is an inbound only PDU. 

AC EG 
TSCC Outbound 
MS(A) Inbound 
MS(B) Inbound 
MS(C) Inbound 
MS(x) Inbound 

Aloha 
Recipient of message 
AL 

TSCC 

Alternate TSCC 

Unified Single Block Data 
Figure 6.69: Example of Unified Single Block Data Polling Service on TSCCAS using Offset Timing (Response Delay = 002) 
ACE G 

TSCC Outbound 



B 
MS(A) Inbound 
MS(B) Inbound 
MS(C) Inbound 
MS(x) Inbound 
Aloha 
Recipient of message 
AL 

TSCC 

Alternate TSCC 

Unified Single Block Data 
Figure 6.70: Example of Unified Single Block Data Polling. Response Delay = 90 mS using Aligned Timing (Response Delay = 012) 
Figures 6.68, 6.69 and 6.70 illustrate examples of the USBD Polling Service on a TSCCAS: 
a)  "A" is a Poll Request PDU from TSCCAS to MS(A);  
b)  "B" is a PDU Response PDU from MS(A);  
c)  "C" is a Poll Request PDU from TSCCAS to MS(B) and occurs at the same time as "B";  
d)  "D" is a PDU Response PDU from MS(B);  
e)  "E" is a Poll Request PDU from TSCCAS to MS(C) and occurs at the same time as "D";  

f) 
"F" is a PDU Response PDU from MS(C); 

g) 
"G" is a Poll Request PDU from TSCCAS to MS(x) and occurs at the same time as "F"; 

h) 
"H" is a PDU Response PDU from MS(x). 


NOTE:  In these examples the Response Delay information element and the channel timing type dictate when the  
MS responds.  
6.6.11.1  USBD Polling Service Procedures for TSCC and TSCCAS  

For a USBD polling request to an individual MS, the destination address is completely expressed by the Target Address in the USBD Poll Request PDU. The Service Type Information Element permits up to 16 different polling types. The Respond Delay specifies in which slot the Poll Response is expected. 
Table 6.76: USBD Poll Request PDU 

Information element  Length  Value  Remark  
Service Type  4  00002  Short Location Request  
00012 to 01112  Reserved  
10002 to 11112  Manufacturer Specific Service  
Response Delay (see note)  2  Aligned Timing  Offset Timing  
002  30 ms delay. Poll response expected in the following TDMA frame  60 ms delay. Poll response expected in the following TDMA frame + 1 timeslot  
012  90 ms delay. Two TDMA frames delay  120 ms delay. Two TDMA frames + 1 timeslot delay  
102  150 ms delay. Three TDMA frames delay  180 ms delay. Three TDMA frames + 1 timeslot delay  
112  210 ms delay. Four TDMA frames delay  240 ms delay. Four TDMA frames + 1 timeslot delay  
PC  1  Payload Contents  
Reserved  1  02  
Parameters  48  Depends on Service Type  
24  MS Target Address  
NOTE: See figures 6.68, 6.69 and 6.70.  

If the Polling Request is sent on a TSCC, the TSCC shall ensure that the slot in which the response is expected is withdrawn from Random Access. 

6.6.11.2 USBD Polling Service Procedures for MS 
If A MS receives an applicable USBD Poll Request, the MS shall note the value of the Response Delay to calculate the correct slot for a USBD response PDU. 
If A MS receives an applicable USBD Poll Request, and the MS supports the particular Service Type in the Poll Request, the MS shall respond with the appropriate response. 
If MS supports Poll Service but does not support the Service Type in the Poll Request PDU, the MS may respond in the reserved slot with a C_NACK with an Answer Response = MSNot_Supported (0000 00002). 

6.6.11.3 Unified Single Block Data Polling Service - Location Information Protocol 
6.6.11.3.0 General 
The USBD Polling Service supports a valuable subset of the Location Information Protocol (LIP) as defined in ETSI TS 100 392-18-1 [14]. This subset is Immediate Reporting and combined with the USBD Polling Service provides a highly efficient method of supporting large quantities of location updates. The USBD Poll Request is utilized as a compressed LIP Immediate Location Update Request and the Poll Response is utilized as the LIP Short Location Report. 
To support LIP end to end: 
 
LIP Immediate Location Update Request is compressed into a Poll Request PDU. 

 
Upon reception of Poll Request PDU, MS decompresses to reconstruct LIP Immediate Location Request. 

 
The Short Location Report response to an Immediate Location Update Request from the MS is compressed to a Poll Response PDU. 

 
Upon reception of Poll Response PDU, TSCC or TSCCAS decompresses to reconstruct LIP Short Location Report. 

 
All other LIP messages are sent as UDTs on the control channel. 


It should be noted that end to end LIP support is not a requirement to utilize the USBD Polling Service for Location. The Poll Request and Poll Response PDUs may be used without supporting LIP end to end. 

6.6.11.3.1 USBD Polling Service Poll Request PDU for LIP 
When supporting end to end LIP the TSCC or TSCCAS receives the LIP Immediate Location Request and sends a Poll Request PDU for LIP to the destination MS as listed in table 6.77. 
Table 6.77: USBD Poll Request PDU for LIP 

Information element  Length  Remark  
Service Type  4  00002 = Location Information Protocol (LIP)  
Response Delay  2  
Payload Contents  1  
Reserved  1  02  
Payload Elements  
Payload  48  0x000000 when PC = 02  
Addressing Element  
Logical Link ID (LLID)  24  Destination  

The LIP Immediate Location Request information elements are not sent in the Poll Request PDU. Upon reception of the Poll Request PDU for LIP, a MS supporting end to end LIP decompresses the Poll Request to form a LIP Immediate Location Update Request. These LIP Immediate Location Update Request information elements that are not contained in the Poll Request PDU are added as part of the LIP Immediate Location Update decompression process and are listed in table 6.78. 
Table 6.78: LIP Immediate Location Update Request Information Element Decompression 

Information element  Length  Remark  
PDU Type  2  002 = Short Location Request  
PDU Type Extension  4  00012 = Immediate Location Report Request  
Request/Response  1  02 = Request  
Report Type  2  112 = Short Location Report Preferred  
Direction of Travel and Direction of Travel Accuracy  3  0002 = Direction of Travel Required  
Horizontal Position and Horizontal Position Accuracy  4  00002 = Horizontal Position Required  
Horizontal Velocity and Horizontal Velocity Accuracy  3  0002 = Horizontal Velocity Required  
Maximum Information Age  7  11111112 = Best Effort (see note)  
NOTE: This value is the default value, though MS configuration may change this to any valid value as defined in ETSI TS 100 392-18-1 [14].  


6.6.11.3.2 USBD Polling Service Poll Response PDU for LIP 
Upon reception of a Poll Request PDU for LIP, the MS responds in the appropriate reserved burst with a LIP Poll Response PDU as listed in table 6.79. 
Table 6.79: USBD Poll Response PDU content for Location (LIP) Service 

Information element  Length  Remark  
Service Type  4  00002 - Location (LIP)  
Payload Elements  
Time Elapsed  2  Defined in ETSI TS 100 392-18-1 [14]  
Longitude  25  Defined in ETSI TS 100 392-18-1 [14]  
Latitude  24  Defined in ETSI TS 100 392-18-1 [14]  
Position Error  3  Defined in ETSI TS 100 392-18-1 [14]  
Horizontal Velocity  7  Defined in ETSI TS 100 392-18-1 [14]  
Direction of Travel  4  Defined in ETSI TS 100 392-18-1 [14]  
Reason for Sending  3  0002  
Addressing Element  
Hashed Source Address  8  Compressed MS Source Address (see note)  
NOTE: Hashed algorithm uses the 8-bit CRC calculation algorithm as defined in clause B.3.7 of ETSI TS 102 361-1 [5].  

The Reason for Sending information element in the Poll Response PDU does not include all options supported by LIP. Upon reception of the Poll Response PDU for LIP, a TSCC or TSCCAS supporting end to end LIP, decompresses the PDU by translating the received Reason for Sending Information element to the appropriate LIP Reason for Sending information element value. 

6.6.11.3.3 Reason for Sending Information Element 
In the USBD Poll Response the MS indicates the reason for sending the PDU as listed in table 6.80. 
Table 6.80: Type of Additional Data information element 

Information element  Length  Value  Remark  
0002  Response to Immediate Request (LIP value = 32)  
Reason for Sending  3  0012 to 1112  Reserved  

6.7  System Management Procedures  
6.7.1  Network System Announcements  
6.7.1.0  Network System Announcements - Introduction  

Announcement PDUs are transmitted by a TSCC and contain information about system parameters for either this TS or another TS. Announcement PDUs may be transmitted frequently and therefore contain the System Identity Code for TSCC identification. 
Announcement_type (BCASTTYP) specifies which system parameters are being broadcast: 
a) 
Announce/Withdraw TSCC. 

b) 
Specify Call Timer Parameters. 

c) 
Vote Now Advice. 

d) 
Announce Local Time. 

e) 
Mass registration. 


f)  Announce a logical/physical frequency plan relationship.  
g)  Adjacent site information.  
h)  General Site Parameters.  



6.7.1.1 Announce/Withdraw TSCC 
This announcement adds and/or withdraws a TSCC radio channel that is active in a wide area system. The announcement PDU carries up to two Logical Physical Channel Number Elements. If only one Logical Channel Number is announced, the remaining element shall be set to CHNULL. MSs shall add/withdraw the logical channel(s) to/from their Short Hunt list of physical channels to hunt (see Annex D). 

6.7.1.2 Specify Call Timer parameters 
This PDU specifies the call timer parameters for: 
a) 
Calls between MS and MS or MS and a talkgroup. 

b) 
Calls between a Line Connected Service and an MS or Talkgroup. 

c) 
Calls that use the Packet Data Service. 

d) 
Emergency Calls. 



6.7.1.3 Vote Now Advice 
The Network System Announcements (Vote Now Advice) PDU gives an opportunity to idle MSs to assess the signal quality of another TSCC specified by the announcement. The PDU provides a sub-set of the system identity code (C_SYSCode), and the logical channel number (CH_VOTE) of the TSCC the MS is being invited to assess for improved signal quality. 
While MSs are assessing an adjacent TSCC, they are not able to receive call set-up PDUs. The TSCC shall therefore not use the next VOTE_BLK TDMA frames (see clause A.2) to signal to MSs that are likely to be assessing the adjacent site. Only the following PDUs may be transmitted on the TSCC in the VOTE_BLK slots following transmission of a Vote Now Advice announcement: 
a) 
An Aloha PDU with MS Address = ADRNULL and Mask = 24. 

b) 
A C_WACKD. 


The trunked radio network may wish to influence on which TSCC an MS acquires. This may not be the site that is offering the best quality signal (as measured by signal strength, BER or other means).  Two strategies of operation may be employed: 
1) 'Radiated Preference Strategy'. The priorities of the sites are radiated in the Vote Now Advice. The MS shall use these priorities in conjunction with signal quality to determine which TSCC to acquire or remain on.  
2) 'No Radiated Preference Strategy'. The priorities of the sites are not radiated in the Vote Now Advice and the MS is free to use whatever criteria it is customized with to acquire or remain on a site. For example this may be a simple comparison of signal quality or it may utilize programmed values of priority per TSCC (Ch_Pref) (see clause A.2). 
The strategy to be utilized is indicated by a combination of fields in the Vote Now Advice. These are explained below. (their position in the Broadcast Parms field is described in clause 7.2.19.3). 
System Identity Code (14 bits) - The MS 14 bits of the C_SYSCode radiated on the adjacent site. This can be used by the confirmed MS to determine the C_SYSCode being radiated by the adjacent site without having to tune to that TSCC and sample it. 
Channel Number (12 bits) -The physical channel number of the adjacent site to be sampled. If the Channel Number is in the range 1 to 4 094, the Channel Number represents a logical channel number for the physical transmitter and receiver frequency. If the value of the Channel Number is 4 095 the Channel Number defines a multi-block MBC where the absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.2.19.3.1). 
Active Connection Available Flag (1 bit) -This flag is set if the status of the adjacent sites network connection is known and available. This is necessary because this information may not be known by the confirmed site (for example if it has lost its own network connection). If set the MS may utilize the 'Active Connection' flag in its analysis of the adjacent site. If this flag is clear the MS shall ignore the Active Connection flag. 
Active Connection Flag (1 bit) - Defined elsewhere in the present document. Indicates that the adjacent site has full connectivity with the rest of the network. The radio may utilize this information when assessing the suitability of the adjacent site. 
Confirmed Channel Priority (3 bits) and Adjacent Channel Priority (3 bits) - These fields convey the priority of the current (confirmed) site and the priority of the adjacent site to be sampled. The values contained in these fields are described in table 6.81. 
Table 6.81: Channel Priority 

Value  Meaning  
1  Preferred Site - Highest Priority  
2  Preferred Site - Priority 2  
3  Preferred Site - Priority 3  
4  Preferred Site - Priority 4  
5  Preferred Site - Priority 5  
6  Preferred Site - Priority 6  
7  Preferred Site - Lowest Priority  
0  Non-Preferred Site  

The MS may utilize these priorities in determining which site to acquire or remain on. The exact algorithm to be utilized is manufacturer proprietary and hence is not specified in the present document. 
The value 0 (non-preferred) is used to indicate that no preference data will be radiated and the MS is free to utilize its own methods of determining priorities by use of Ch_Pref data. Normally therefore a TS will either radiate all Vote Now Advice broadcasts with preference priorities or it shall radiate all Vote Now Advice broadcasts with no preference priority. The consequences of mixing them would have to be carefully understood or otherwise it could lead to very unpredictable behaviour. 
It should be noted that by using Vote Now Advice messages with the Syscode and Channel Number set as appropriate and all other fields set to 0, this re-creates the format of the Vote Now Advice broadcasts as specified in ETSI TS 102 361-4 [i.1] (V1.4.1) and earlier. That is, there will be no indication of Active Connection and both confirmed and adjacent site priorities are non-preferred. 

6.7.1.4 Announce Local Time 
This PDU transmits the local date and time to MSs. The PDU permits the date and UTC_OFFSET to be omitted from the announcement. 
If UTC offset is to be omitted from the announcement, then UTC_OFFSET shall be set to 11112. 
If UTC offset is to be transmitted, then this shall represent the difference in hours and minutes from UTC to the local time, represented by B_HOURS, B_MINS, B_SEC. Local times that lead UTC shall have a positive UTC offset, and those that lag UTC shall have a negative offset. This aligns with UTC conventions. 
UTC offset, where transmitted in the announcement, shall be conveyed as a 4-bit unsigned number (UTC_OFFSET) representing whole hours, a fractional component (UTC_OFFSET_FRACTION) representing additional 15 minute increments, and a sign field (UTC_OFFSET_SIGN). The UTC_OFFSET_SIGN unambiguously determines whether local time leads Coordinated Universal Time (positive UTC offset), or lags Coordinated Universal Time (negative UTC offset) time. UTC time is calculated by subtracting the overall signed UTC offset (including fractional component) from local time. 
DAY, MONTH, & DATE shall be adjusted accordingly on underflow or overflow. 
The following examples illustrate how these fields shall be used: 
 
e.g. if UTC_OFFSET = 01002, UTC_OFFSET_FRACTION = 102, and UTC_OFFSET_SIGN = 02, the combined UTC offset for the current location shall be interpreted as +4 hours:30 minutes. For a local time broadcast of 11:00:00, Coordinated Universal Time shall be determined to be 06:30:00 (same day). 

 
e.g. if UTC_OFFSET = 01102, UTC_OFFSET_FRACTION = 112, and UTC_OFFSET_SIGN =12, the combined UTC offset for the current location shall be interpreted as -6 hours:45 minutes. For a local time broadcast of 20:00:00, Coordinated Universal Time shall be determined to be 02:45:00 (next day). 



6.7.1.5 Mass Registration 
This PDU invites all MS or a sub-set of MS to register over a short or extended time period. The description and procedures are specified in the registration clause 6.4.5. 

6.7.1.6 Announce a Logical Physical Channel Relationship 
This PDU announces a logical to physical channel relationship. The PDU defines the physical transmitter and receiver frequencies to be assigned to a logical channel. 

6.7.1.7 Adjacent Site Information 
This PDU announces information about the TSCCs in use on radio sites in the vicinity of this TSCC to assist MS to acquire an appropriate TSCC if the MS moves out of radio contact with the current TSCC. 
The broadcast PDU contains both the logical channel number and C_SYScode which is being transmitted by the announced TSCC. 
The action to be taken by the MS on receipt of this PDU is not prescribed in the present document but the following comments are offered for the benefit of designers implementing processes that use Adjacent Site information: 
 When searching for a valid TSCC the MS hunts through a list of candidate physical channels until an appropriate TSCC is selected and confirmed. The physical channel number (CH_ADJ) received in the Adjacent Site PDU may be used to modify the TSCC search in favour of radio channels which are more likely to provide a satisfactory service than other radio channels which the search parameters may specify. 

6.7.1.8 General Site Parameters 
This PDU contains information that is relevant to MS regardless of which site they may acquiring or confirmed upon. As such, the information may be specific to the current site, or to the network as a whole. 
Information elements that pertain to the current site shall persist only for the currently confirmed site or until such time a new General Site Parameters PDU is received with different information. 
Information elements that pertain to the network as a whole shall persist between site changes or until such time a new General Site Parameters PDU is received with different information. 
7 PDU description 



7.0 PDU description - Introduction 
This clause describes the PDUs which apply to the DMR layer 3, the Tier III trunking services and facilities protocol. 
The following clauses contain descriptions of the PDUs and the information elements contained within them. The structure of the PDU definition represented by the tables is as follows: 
 
the information element column gives the name of the contained element(s); 

 
the element length column defines the length of the element in bits; 

 
the Alias used in the description of the procedures; 


 the remarks column contains other information on the information element. The elements shall be transmitted in the order specified by ETSI TS 102 361-1 [5]. 

7.1 Layer 3 PDUs 
7.1.0 Layer 3 PDUs -Introduction 
Due to the nature of DMR, with close interaction between layers 2 and 3, and with a high degree of information about the state of the channel being needed, the layer 3 PDUs detailed in the following clauses may include two element types: 
 
Message dependent elements: 

-These elements are visible to layer 2 and may be used by any MS (that is able to decode them), irrespective of addressing. These elements depend on the message type element. Some are generated by layer 2 when it constructs the complete message whereas others are generated by layer 3. 

 
Facility elements: 


-These are "true" layer 3 elements. They are only processed by the MSs to which they are addressed. Where both types exist in the PDU they are illustrated separately. 

7.1.1 Control Signalling Block (CSBK/MBC/UDT) PDUs 
7.1.1.0 Control Signalling Block (CSBK/MBC/UDT) PDUs - Introduction 
CSBK/MBC and UDT PDUs form a core part of the Tier III protocol. The control signalling PDUs are classified into their core functionality. 
The Call Control Layer 3 requires three Data Type bursts (see ETSI TS 102 361-1 [5], clause 6.2). These are listed in: 
 
table 7.1 for TSCC outbound PDUs; 

 
table 7.2 for TSCC inbound PDUs; 

 
table 7.3 for Payload channel outbound PDUs; and 

 
table 7.4 for Payload inbound PDUs. 


Table 7.1: TSCC Outbound Channel PDU Structure 
Class  Alias  Function  Opcode  Data Type  Value  
Broadcast  PV_GRANT  Private Voice Channel Grant (logical)  11 00002  CSBK  00112  
Private Voice Channel Grant (absolute)  MBC Header  01002  
Talkgroup Voice Channel Grant (logical)  CSBK  00112  
Broadcast  TV_GRANT  Talkgroup Voice Channel Grant (absolute)  11 00012  MBC Header  01002  
Broadcast  BTV_GRANT  Broadcast Talkgroup Voice Channel Grant (logical)  11 00102  CSBK  00112  
Broadcast Talkgroup Voice Channel Grant (absolute)  MBC Header  01002  
Class  Alias  Function  Opcode  Data Type  Value  
Broadcast  PD_GRANT  Private Data Channel Grant (logical)  11 00112  CSBK  00112  
Private Data Channel Grant (absolute)  MBC Header  01002  
Broadcast  TD_GRANT  Talkgroup Data Channel Grant (logical)  11 01002  CSBK  00112  
Talkgroup Data Channel Grant (absolute)  MBC Header  01002  
Broadcast  PV_GRANT_ DX  Duplex Private Voice Channel Grant (logical)  11 01012  CSBK  00112  
Duplex Private Voice Channel Grant (absolute)  MBC Header  01002  
Broadcast  PD_GRANT_ DX  Duplex Private Data Channel Grant (logical)  11 01102  CSBK  00112  
Duplex Private Data Channel Grant (absolute)  MBC Header  01002  
Broadcast  CG_AP  Channel Grant Appended MBC  Value from header  MBC Continuation  01012  
Broadcast  C_MOVE  Move TSCC (logical)  11 10012  CSBK  00112  
Move TSCC (absolute)  MBC Header  01002  
Broadcast  MV_AP  Move Appended MBC  11 10012  MBC Continuation  01012  
Broadcast  C_ALOHA  Aloha  01 10012  CSBK  00112  
Broadcast (C_BCAST)  Ann_WD _TSCC  Announce/Withdraw TSCC (logical)  10 10002  CSBK  00112  
Announce/Withdraw TSCC (absolute)  MBC Header+MBC Continuation  01002  
CallTimer _Parms  Specify Call Timer Parameters  CSBK  00112  
Vote_Now  Vote Now Advice  CSBK  00112  
Local_Time  Broadcast Local Time  CSBK  00112  
MassReg  Broadcast Mass Registration  CSBK  00112  
Chan_Freq  Announce a logical channel/frequency relationship  MBC Header+MBC Continuation  01002  
Adjacent Site  Broadcast Adjacent Site Information  CSBK  00112  
Gen_Site_Par ams  General Site Parameters information  CSBK  00112  
Broadcast  BC_AP  Broadcast Appended MBC  10 10002  MBC Continuation  01012  
Ahoy (AHOY)  AHOY  Stun/Revive/Kill Poll MS MS Check  01 11002  CSBK  00112  
Acknowledgements  C_ACKD C_NACKD C_QACKD C_WACKD  Positive Acknowledgement Negative Acknowledgement The call is queued Wait - further PDUs follow  10 00002  CSBK  00112  
Unified Data Transport  C_UDTHD  Unified Data Transport Header  N/A  Data Header (UDT)  01102  
Unified Data Transport  UDT  Unified Data Transport Appended Data  N/A  Unconfirmed Data Continuation  01112  

Table 7.2: TSCC Inbound Channel PDU Structure 

Class  Alias  Function  Opcode  Data Type  Value  
Random Access  C_RAND  Random Access Requests  01 11112  CSBK  00112  
Ackvitation  C_ACKVIT  Ackvitation  01 11102  CSBK  00112  
Acknowledgement  C_ACKU C_NACKU  Acknowledgement  10 00012  CSBK  00112  
Unified Data Transport  C_UDTHD  Unified Data Transport Header  N/A  Data Header (UDT)  01102  
Unified Data Transport  UDT  Unified Data Transport Appended Data  N/A  Unconfirmed Data Continuation  01112  

Table 7.3: Payload Outbound channel PDU Structure 
Class  Alias  Function  Opcode  Data Type  Value  
Broadcast  P_GRANT  Channel Grant (logical)  Value from Chan Grant  CSBK  00112  
Channel Grant (absolute)  MBC Header  01002  
Broadcast (Clear)  P_CLEAR  Clear the call from the payload channel. MS return to the TSCC  10 11102  CSBK  00112  
Broadcast (Protect)  P_PROTECT  Channel Protection  10 11112  CSBK  00112  
AHOY  P_AHOY  MS Check  01 11002  CSBK  00112  
Acknowledgements  P_ACKD P_NACKD  Positive Acknowledgement Negative Acknowledgement  10 00102  CSBK  00112  

Table 7.4: Payload Inbound Channel PDU Structure 
Class  Alias  Function  Opcode  Data Type  Value  
Random Access  P_RAND  Random Access Include Request  01 11112  CSBK  00112  
Acknowledgement  P_ACKU  Acknowledgement  10 00112  CSBK  00112  
Maintenance  P_MAINT  Call Maintenance  10 10102  CSBK  00112  

Figure 7.1 illustrates the hierarchy of the TSCC outbound channel PDU structure. 

Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 
CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
The top level of the structure describes a basic behaviour illustrated in table 7.5. 
Table 7.5: Top Level Structure for TSCC Outbound Channel CSBKs/MBCs/UDTs 
Broadcasts  PDUs sent by a TSCC to manage the channel access, transfer MS or talkgroups to payload channels and announce information about the TS  
Ahoys  To demand a response from MS and also to acknowledge random access channel access  
Acknowledgments  To provide responses to UDT  
UDT  To transport information between TSCC and MS  

A similar structure exists for the inbound channel illustrated in figure 7.2. 

ETSI 
The basic PDU behaviour for the inbound channel is illustrated in table 7.6. 
Table 7.6: Top-level Structure for MS on the TSCC Inbound 
Random Access  Used for channel access and request Tier III services  
Acknowledgments  To provide responses to Ahoys and UDT  
UDT  To transport information between MS and TSCC  

A payload channel outbound channel is illustrated in figure 7.3. 
Individual 
Channel Grant 
Talkgroup 
(swap) 
All Call 
P_BCAST 
P_CLEAR 
P_PROTECT MS Check 



Single & Multi-Block CSBK 

CSBK P_AHOY 
Auth Challenge Talkgroup Check 






Single Block CSBK 




P_ACK 
P_ACK 
P_NACK 
Acknowledgements 
Figure 7.3: Hierarchy for Outbound Channel CSBKs/MBCs on a Payload Channel 
The top level of the structure describes a basic behaviour illustrated in table 7.7. 
Table 7.7: Top level structure for MS inbound Channel CSBKs on a Control Channel 

Broadcasts  PDUs sent by TS to manage the payload channel - swap MS to a new channel, clear the participants from the channel and protect the channel during breaks in MS transmission items  
Ahoys  For polling MS - demands a response  
Acknowledgments  To provide responses to Ahoys and UDT  

The payload inbound channel. 

The basic PDU behaviour for the inbound channel is illustrated in table 7.8. 
Table 7.8: Top-level Structure for MS on the Payload Channel Inbound Channel 
Random Access  Used to request an include call service  
Acknowledgments  To provide responses to Ahoys and UDT  
Maintenance  To provide call maintenance PDUs  


7.1.1.1 TSCC Outbound channel CSBK/MBC/UDT 
7.1.1.1.1 Channel Grant CSBK/MBC PDU 
7.1.1.1.1.1 Private Voice Channel Grant CSBK/MBC PDUs 
7.1.1.1.1.1.1 Private Voice Channel Grant (PV_GRANT) CSBK/MBC PDU 
Octets 0 and 1 of the Private Voice Channel Grant CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Private Voice Channel Grant specific information illustrated in table 7.9. The Private Voice Channel Grant is transmitted by the TS and does not solicit a response. The Private Voice Channel Grant PDU is transmitted on the TSCC or a payload channel either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Private Voice Channel Grant PDU is transmitted on the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a multi-block MBC where the absolute 


transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 

Table 7.9: Private Voice Channel Grant PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 11 00002  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Payload Channel for the Call or an indicator that the absolute Tx and Rx frequency is specified in an appended CSBK block  
Logical Channel Number  1  02 - TDMA channel 1 12 - TDMA channel 2  
Reserved  1  02 - Reserved  
Emergency  1  02 - not an emergency call 12 - emergency call  
Offset  1  02 - Payload Channel uses aligned timing 12 - Payload Channel uses offset timing  
Target Address  24  Called party Individual MS Address or Gateway  
Source Address  24  Calling Party or Gateway  


7.1.1.1.1.1.2 Duplex Private Voice Channel Grant (PV_GRANT_DX) CSBK/MBC PDU 
Octets 0 and 1 of the Duplex Private Voice Channel Grant CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Duplex Private Voice Channel Grant specific information illustrated in table 7.10. The Duplex Private Voice Channel Grant is transmitted by the TS and does not solicit a response. The Duplex Private Voice Channel Grant PDU is transmitted on the TSCC or a payload channel either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Duplex Private Voice Channel Grant PDU is transmitted on the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a multi-block MBC where the absolute 


transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 


Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 
CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 11 01012  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Payload Channel for the Call or an indicator that the absolute Tx and Rx frequency is specified in an appended CSBK block  
Logical Channel Number  1  02 - TDMA channel 1 12 - TDMA channel 2  
Reserved  1  02  
Emergency  1  02 - not an emergency call 12 - emergency call  
Call Direction  1  02 - Target Address is called MS 12 - Target Address is calling MS  
Target Address  24  Target MS ID for this grant  
Source Address  24  MS ID of the call partner  
NOTE: Payload channels signalled by Duplex Private Voice Channel Grant always use offset timing mode.  



7.1.1.1.1.2 Talkgroup Voice Channel Grant (TV_GRANT) CSBK/MBC PDU 
Octets 0 and 1 of the Talkgroup Voice Channel Grant CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Talkgroup Voice Channel Grant specific information illustrated in table 7.11. The Talkgroup Voice Channel Grant is transmitted by the TS. The Talkgroup Voice Channel Grant is transmitted by the TS and does not solicit a response. The Talkgroup Voice Channel Grant PDU is transmitted on the TSCC or a payload channel either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Talkgroup Voice Channel Grant PDU is transmitted on the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a Multi Block Control (MBC) where the 


absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 

Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 

SLOT CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Figure 7.7: Structure Highlight Table 7.11: Talkgroup Voice Channel Grant PDU content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 11 00012  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Payload Channel for the Call or an indicator that the absolute Tx and Rx frequency is specified in an appended CSBK block  
Logical Channel Number  1  02 - TDMA channel 1 12 - TDMA channel 2  
Late_Entry  1  02 - Channel Grant sent as part of a call set-up 12 - Channel Grant sent following a call set-up  
Emergency  1  02 - not an emergency call 12 - emergency call  
Offset  1  02 - Payload Channel uses aligned timing 12 - Payload Channel uses offset timing  
Target Address  24  MS Talkgroup Address  
Source Address  24  Calling Party or Gateway  

If the Target Address is ALLMSIDL, ALLMSIDZ or ALLMSID (see clause A.4), then an MS shall interpret this PDU as a broadcast. 

7.1.1.1.1.3 Broadcast Talkgroup Voice Channel Grant (BTV_GRANT) CSBK/MBC PDU 
Octets 0 and 1 of the Broadcast Talkgroup Voice Channel Grant CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Broadcast Talkgroup Voice Channel Grant specific information illustrated in table 7.12. The Broadcast Talkgroup Voice Channel Grant is transmitted by the TS and does not solicit a response. The Broadcast Talkgroup Voice Channel Grant PDU is transmitted on the TSCC or a payload channel either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Broadcast Talkgroup Voice Channel Grant is transmitted on the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a Multi-Block Control (MBC) where the 


absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 
Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 

SLOT 
CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Figure 7.8: Structure Highlight Table 7.12: Broadcast Talkgroup Voice Channel Grant PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 11 00102  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Payload Channel for the Call or an indicator that the absolute Tx and Rx frequency is specified in an appended CSBK block  
Logical Channel Number  1  02 - TDMA channel 1 12 - TDMA channel 2  

Information element  Length  Remark  
Late Entry  1  02 - Channel Grant sent as part of a call set-up 12 - Channel Grant sent following a call set-up  
Emergency_Flag  1  12 - if an emergency call  
Offset  1  02 - Payload Channel uses aligned timing 12 - Payload Channel uses offset timing  
Destination_Address  24  MS Talkgroup Address. See note  
Source_address  24  Calling Party or Gateway  
NOTE: Addresses for All Call are ALLMSID, ALLMSIDZ and ALLMSIDL.  


7.1.1.1.1.4 Private Data Channel Grant CSBK/MBC PDUs 
7.1.1.1.1.4.1 Private Data Channel Grant (PD_GRANT) CSBK/MBC PDU 
Octets 0 and 1 of the Private Data Channel Grant CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Private Channel Grant specific information illustrated in table 7.13. The Private Data Channel Grant is transmitted by the TS and does not solicit a response. The Private Data Channel Grant PDU is transmitted on the TSCC or a payload channel either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Private Data Channel Grant PDU is transmitted on the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a Multi Block Control (MBC) where the 


absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 
Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 

SLOT 
CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Figure 7.9: Structure Highlight 
Table 7.13: Private Data Channel Grant PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Single Item Data shall be set to 11 00112 Multi-Item Data shall be set to 11 01112  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Payload Channel for the Call or an indicator that the absolute Tx and Rx frequency is specified in an appended CSBK block  
Logical Channel Number  1  02 - TDMA channel 1 12 - TDMA channel 2  
HI_RATE  1  02 - Payload Channel uses single slot data 12 - Payload Channel uses dual slot data  
Emergency  1  02 - not an emergency call 12 - emergency call  
Offset  1  02 - Payload Channel uses aligned timing 12 - Payload Channel uses offset timing  
Destination_Address  24  Called party Individual MS Address or Gateway  
Source_address  24  Calling Party or Gateway  


7.1.1.1.1.4.2 Duplex Private Data Channel Grant (PD_GRANT_DX) CSBK/MBC PDU 
Octets 0 and 1 of the Duplex Private Data Channel Grant CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Duplex Private Channel Grant specific information illustrated in table 7.14. The Duplex Private Data Channel Grant is transmitted by the TS and does not solicit a response. The Private Data Channel Grant PDU is transmitted on the TSCC or a payload channel either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Duplex Private Data Channel Grant PDU is transmitted on the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a Multi Block Control (MBC) where the 


absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 


Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 
CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 11 01102  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Payload Channel for the Call or an indicator that the absolute Tx and Rx frequency is specified in an appended CSBK block  
Logical Channel Number  1  02 - TDMA channel 1 12 - TDMA channel 2  
HI_RATE  1  02 - Duplex Payload Channel always uses single slot data  
Emergency  1  02 - not an emergency call 12 - emergency call  
Call Direction  1  02 - Destination_Address is called MS 12 - Destination_Address is calling MS  
Destination_Address  24  Target MS ID for this grant  
Source_address  24  MS ID of the call partner  
NOTE: Payload channels signalled by Duplex Private Data Channel Grant always use offset timing mode.  



7.1.1.1.1.5 Talkgroup Data Channel Grant (TD_GRANT) CSBK/MBC PDU 
Octets 0 and 1 of the Talkgroup Data Channel Grant CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Talkgroup Data Channel Grant specific information illustrated in table 7.15. The Talkgroup Data Channel Grant is transmitted by the TS and does not solicit a response. The Talkgroup Data Channel Grant PDU is transmitted on the TSCC or a payload channel either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Talkgroup Data Channel Grant PDU is transmitted on the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a Multi Block Control (MBC) where the 


absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 

Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 

SLOT CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Figure 7.11: Structure Highlight Table 7.15: Talkgroup Data Channel Grant PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Single Item Data shall be set to 11 01002 Multi-Item Data shall be set to 11 10002  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Payload Channel for the Call or an indicator that the absolute Tx and Rx frequency is specified in an appended CSBK block  
Logical Channel Number  1  02 - TDMA channel 1 12 - TDMA channel 2  
HI_RATE  1  02 - Payload Channel uses single slot data 12 - Payload Channel uses dual slot data  
Emergency  1  02 - not an emergency call 12 - emergency call  
Offset  1  02 - Payload Channel uses aligned timing 12 - Payload Channel uses offset timing  
Destination_Address  24  MS Talkgroup Address  
Source_address  24  Calling Party or Gateway  



7.1.1.1.2 Channel Grant Absolute Parameters (CG_AP) Appended MBC PDU 
The second (continuation) block of the multi-block Channel Grant MBC conforms to the format specified in table 7.16. The CdefParms PDU is specified in clause 7.2.42 and the physical characteristics described in Annex C. 
Table 7.16: CG_AP Appended MBC PDU content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 because this PDU is appended to either a an applicable Channel Grant MBC Header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to the CSBKO of the first block of the MBC  
Reserved  4  00002  
Colour Code  4  Colour Code used for the destination physical channel  
Cdeftype  4  Meaning of CdefParms (see clause 7.2.42)  
Reserved  2  002  
CdefParms  58  Information elements describing the logical/physical channel frequency relationship  


7.1.1.1.3 Move TSCC (C_MOVE) CSBK/MBC PDU 
7.1.1.1.3.0 Move TSCC (C_MOVE) - Introduction 
Octets 0 and 1 of the Move TSCC CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Move TSCC specific information illustrated in table 7.17. The Move PDU is transmitted on the TSCC either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Move PDU is transmitted on the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a Multi Block Control (MBC) where the 


absolute transmitter and receiver frequency is defined in a second block concatenated to this block (see clause 7.1.1.1.3.1). 

Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 

SLOT CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Figure 7.12: Structure Highlight Table 7.17: Move TSCC PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last First block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 11 10012  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Reserved  9  0 0000 00002  
Mask  5  
Reserved  5  0 00002  
Reg  1  This bit is set if the TSCC demands MS register before becoming active  
Backoff  4  Backoff Number  
Reserved  4  00002  
Physical Channel Number  12  TSCC Channel or an indicator that the absolute Tx & Rx frequency is specified in an appended CSBK block  
MS address  24  MS Individual Address  


7.1.1.1.3.1 Move Absolute Parameters Appended (MV_AP) MBC PDU 
The second block of the Multi Block Move MBC conforms to the format specified in table 7.18. The CdefParms PDU is specified in clause 7.2.42 and the physical characteristics described in Annex C. 
Table 7.18: MV_AP Appended Move MBC PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 because this PDU is appended to an applicable Move MBC Header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to the CSBKO of the first block of the MBC  
Reserved  4  00002  
Colour Code  4  Colour Code used for the destination physical channel  
Cdeftype  4  Meaning of CdefParms (see clause 7.2.42)  
Reserved  2  002  
CdefParms  58  information elements describing the logical/physical channel frequency relationship  



7.1.1.1.4 Aloha (C_ALOHA) CSBK PDU 
Octets 0 and 1 of the C_ALOHA CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the C_ALOHA PDU specific information. The C_ALOHA PDU is illustrated in table 7.19. C_ALOHA PDUs are transmitted by a TSCC. 

Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 

SLOT CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Figure 7.13: Highlight Structure 
Table 7.19: C_ALOHA PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 01 10012  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Reserved  1  Shall be set to 0  
TSCCAS  1  02 - This TSCC is not currently supporting a TSCCAS 12 - This TSCC is currently supporting a TSCCAS  
Site Timeslot Synchronization  1  02 - TSCC and all payload channels at site are not timeslot synchronized  
12 - TSCC and all payload channels at site are timeslot synchronized  
Version  3  Document Version Control  
Offset  1  02 - TSCC uses aligned timing  
12 - TSCC uses offset timing  
Active_Connection  1  02 - The TS does not have a connection with the network 12 - The TS has a connection with the network  
Mask  5  
Service Function  2  
NRand_Wait  4  
Reg  1  This bit is set if the TSCC demands MS register before becoming active  
Backoff  4  Backoff Number  
System Identity Code  16  
MS Address  24  MS Individual Address  

The C_ALOHA PDU contains the Information Element Version to advise MS of the version number of ETSI TS 102 361-4 [i.1] to which the system is compliant (see clause 7.2.32). 

7.1.1.1.5 Announcements (C_BCAST) CSBK/MBC PDU 
7.1.1.1.5.0 Announcements (C_BCAST) - Introduction 
Octets 0 and 1 of the C_BCAST PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the C_BCAST PDU specific information. The C_BCAST PDU is transmitted on the TSCC either as a single block CSBK or a Multi Block Control (MBC). 
The C_BCAST PDU is illustrated in table 7.20. 


Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 
CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 10 10002  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Announcement_type  5  Defines which system parameters are being broadcast  
Broadcast Parms 1  14  
Reg  1  This bit is set if the TSCC demands MS register before becoming active  
Backoff  4  Backoff Number  
System Identity Code  16  
Broadcast Parms 2  24  

The Announcement_type PDU determines the category of Announcements: 
a)  Announce/Withdraw TSCC.  
b)  Specify call Timers.  
c)  Vote now advice.  
d)  Announce local time.  
e)  Broadcast Mass Registration.  
f)  Announce a logical physical channel relationship.  
g)  Announce adjacent site information.  
h)  General Site Parameters.  


7.1.1.1.5.1 Broadcast Absolute Parameters (BC_AP) appended MBC PDU 
The second block of the multi-block Broadcast Absolute Parameters MBC (announce a logical/absolute frequency relationship) and Announce/Withdraw TSCC(Ann_WD_TSCC) conforms to the format specified in table 7.21. The CdefParms PDU is specified in clause 7.2.42 and the physical characteristics described in Annex C. 
Table 7.21: BC_AP Appended Broadcast MBC PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 because this PDU is appended to an applicable Announcement MBC Header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to the CSBKO of the first block of the MBC  
Reserved  8  0000 00002  
Cdeftype  4  
Reserved  2  002  
CdefParms  58  Information elements describing the logical/physical channel frequency relationship  



7.1.1.1.6 Ahoy (C_AHOY) CSBK PDU 
Octets 0 and 1 of the AHOY CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the C_AHOY specific information. The generic AHOY PDU is illustrated in table 7.22. AHOY PDUs are transmitted by the TS. 
The AHOY PDU is transmitted by the TS as a single block CSBK. 


Individual Talkgroup All Call 
Add TSCC Call Timers Vote Now Real Time Clock Mass Reg Add TxRx Chan Adj Site 
CSBK / MBC / UDT 
CSBK 
CLI System Message Individual Talkgroup All Call 
Table 7.22: AHOY PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 01 11002  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Service_Options_Mirror  7  See note 2  
Service_Kind_Flag  1  Meaning dependent on Service_Kind  
Ambient Listening Service  1  02 - The calling party has not requested ALS  
12 - The calling party has requested ALS (see note 1)  
G/I  1  02 - The Target address is an MS individual ID  
12 - The Target address is a talkgroup  
Appended_Blocks (STATUS(2))  2  For a demand to the MS to send a UDT, the number of appended data blocks (see note 2)  
Service_Kind  4  Service for which this C_AHOY is supporting  
Target address  24  Address of Called MS or talkgroup  
Source Address or Gateway  24  Address of calling party MS or gateway, or Authentication challenge value or TSI for the unsolicited Radio Check (see clause 6.4.12)  
NOTE 1: ALS is only applicable for an individual MS voice call. NOTE 2: For the status service: Appended_Blocks contains the two least significant bits of the status value. The Service_Options_Mirror contains the most significant 5 bits of the status value.  


7.1.1.1.7 Acknowledgement (C_ACKD) TSCC Response CSBK PDU 
Octets 0 and 1 of the Acknowledge Response (C_ACKD) CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Acknowledge Response specific information. The generic Acknowledge Response PDU is illustrated in table 7.23. 
SLOT 

NOTE: Acknowledgement Responses are transmitted by both TS and MS. 
Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to10 00002  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Response_Info  7  Supplementary response information  
Reason Code  8  
Reserved  1  This bit shall be set to 02  
Target address  24  Individual Address of the MS originating the request  
Additional Information (Source Address)  24  Address of the request's destination or gateway  

Acknowledge Response PDUs are arranged into classes: C_ACKD -Positive Acknowledgement. C_NACKD -Negative Acknowledgement. C_QACKD -Queued. C_WACKD -Intermediate Acknowledgement. 

7.1.1.1.8 Unified Data Transport Outbound Header (C_UDTHD) UDT PDU 
This PDU is a multi-block UDT conforming to the format specified in table 7.24. The number of UDT Appended data blocks is indicated by the Appended Blocks (UAB) information element. 
The UDT Appended Data Format is prescribed in Annex B. 
SLOT 

NOTE: UDT Headers are transmitted by both TS and MS. 
Table 7.24: Unified Data Transport Outbound Header PDU Content 

Information element  Length  Remark  
Feature elements  
Elements defined in ETSI TS 102 361-1 [5]  
G/I  1  02 = Destination is an individual MS address  
12 = Destination is a Talkgroup address. Response not expected  
A (see tables 6.35 and 6.36)  1  02 = Response not expected  
12 = Response demanded  
Emergency  1  02 = This PDU is not supporting an emergency priority call  
12 = This PDU is supporting an emergency priority call  
UDT_Option_Flag  1  See table 7.51  
Data Packet Format  4  00002  
SAP Identifier  4  Service Access Point - 00002 for UDT  
UDT_Format  4  Format of the data following the UDT Header  
Target_address or Gateway  24  
Source_address or Gateway  24  
Pad Nibble  5  
Reserved  1  02  
Appended_Blocks(UAB)  2  Number of Blocks appended to this UDT Header 002 = 1 Appended Data UDT block 012 = 2 Appended Data UDT blocks 102 = 3 Appended Data UDT blocks 112 = 4 Appended Data UDT blocks  
Supplementary_Flag(SF)  1  02 = This UDT Header is carrying the data for a user initiated service (UDT Short Data, UDT Short Data Polling) 12 = This UDT Header is carrying supplementary data, supporting another Tier III service.  
Protect Flag (PF)  1  Reserved for Future Use - 02  
Opcode (UDTHD)  6  
NOTE: Shaded rows are information elements that are defined in ETSI TS 102 361-1 [5].  



7.1.1.2 TSCC Inbound Channel CSBKs/UDTs Transmitted by MS 
7.1.1.2.1 Random Access Request (C_RAND) PDU 
Octets 0 and 1 of the Random Access CSBK (C_RAND_CSBK) PDU conform to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Random Access Request specific information specified in table 7.25. Random Access Requests are sent by MS. 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 01 11112  
Manufacturers Feature ID  8  Shall be set to 0000 00002  
Service_Options  7  
Proxy Flag  1  02 - Number of Extended BCD digits for addressing through a gateway = 1 to 20 when Target Address = PSTNI, PABXI, LINEI or DISPATI or when the Target Address = PSTNI, PABXI, LINEI or DISPATI 12 - Number of Extended BCD digits for addressing through a gateway = 21 to 44 when the Target Address = PSTNI, PABXI, LINEI or DISPATI  
4  Contents dependant on the service being supported  
Service_Kind  4  Service requested  
Target_address or Gateway  24  
Source_address  24  Address of the requesting MS  


7.1.1.2.2 C_Ackvitation (C_ACKVIT) CSBK PDU 
Octets 0 and 1 of the C_ACKVIT CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the C_Ackvitation specific information. The generic C_Ackvitation PDU is illustrated in table 7.26. C_Ackvitation PDUs are transmitted by MS. 
The C_Ackvitation PDU is transmitted by the MS as a single block CSBK. 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 for an all but the last block of a MBC  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 01 11102  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Service_Options_Mirror  7  
Service_Kind_Flag  1  Meaning dependent on Service_Kind  
Reserved  2  002  
Appended_Blocks (UAB)  2  002  
Service_Kind  4  Service for which this C_Ackvitation is supporting  
Target address  24  Authentication Challenge value  
Source Address  24  MS Individual Address  


7.1.1.2.3 C_Acknowledge (C_ACKU) MS Response CSBK PDU 
Octets 0 and 1 of the Acknowledge Response CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the Acknowledge Response specific information. The generic Acknowledge Response PDU is illustrated in table 7.27. 

NOTE: Acknowledgement Responses are transmitted by both TS and MS. 
Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1   This bit shall be set to 12  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 10 00012  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Response_Info  7  Supplementary response information  
Reason Code  8  
Reserved  1  This bit shall be set to 02  
Target address or Authentication  24  The Source Address from the TS PDU for which this acknowledgement is being transmitted or authentication challenge response if this acknowledgement is being transmitted as part of authentication challenge  
Additional Information (Source Address)  24  MS individual address that is transmitting the acknowledgement  

Acknowledge Response PDUs are arranged into classes: C_ACKU -Positive Acknowledgement. C_NACKU -Negative Acknowledgement. 

7.1.1.2.4 Unified Data Transport Inbound Channel Header (C_UDTHU) UDT PDU 
C_UDT PDUs are sent by TS and MS. This PDU is a multi-block UDT conforming to the format specified in table 7.28. The number of UDT Appended data blocks is indicated by the Appended Blocks (UAB) information element. 

NOTE: UDT Headers are transmitted by both TS and MS. 
Information element  Length  Remark  
Feature elements  
Elements defined in ETSI TS 102 361-1 [5]  
G/I  1  02 = Destination is an individual MS address  
12 = Destination is a Talkgroup address  
A (see tables 6.35 and 6.36)  1  02 = Response not expected  
12 = Response demanded  
Reserved  1  02  
UDT_DIV  1  02 = This UDT is not carrying Call Diversion destination information  
12 = This UDT is carrying Call Diversion destination information  
Data Packet Format  4  00002  
SAP Identifier  4  Service Access Point - 00002 for UDT  
UDT_Format  4  Format of the data following the UDT Header  
Target_address or Gateway  24  Target address shall identify called MS or gateway In Talkgroup Subscription/Attachment List request, Target address = TATTSI  
Source_address or Gateway  24  
Pad Nibble  5  
Reserved  1  02  
Appended_Blocks(UAB)  2  Number of Blocks appended to this UDT Header 002 = 1 Appended Data UDT block 012 = 2 Appended Data UDT blocks 102 = 3 Appended Data UDT blocks 112 = 4 Appended Data UDT blocks  
Supplementary_Flag(SF)  1  02 = This UDT Header is carrying the data for a user initiated service (UDT Short Data, UDT Short Data Polling) 12 = This UDT Header is carrying supplementary data, supporting another Tier III service  
Protect Flag (PF)  1  Reserved for Future Use  
Opcode (UDTHU)  6  
NOTE: Shaded rows are information elements that are defined in ETSI TS 102 361-1 [5].  



7.1.1.3 Outbound Channel CSBKs Transmitted on a Payload Channel by a TS 
7.1.1.3.1 Channel Grant (P_GRANT) CSBK/MBC PDU 
Channel Grant PDUs transmitted on the payload channel conform to the same structure as channel grant PDUs transmitted on the TSCC. When transmitting such a PDU on the payload channel for the purpose of swapping a call to a new payload channel, the TS shall retain all Information Elements to the value from the TSCC channel grant PDU except the logical channel number (and absolute frequency if the channel grant PDU has an appended CSBK block) (see table 7.29). When transmitting such a PDU on the payload channel for the purpose of announcing the current call before the call's first transmission, the TS shall retain all Information Elements to the value from the TSCC channel grant PDU. When transmitting such a PDU on a payload channel for the purpose of announcing a new call, the TS shall use the Information Elements to the value used on the TSCC for the new call. 
The Payload Channel Grant PDU is transmitted by the TSCC either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the Physical Channel number is invalid. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Private Data Channel Grant PDU is transmitted by the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a MBC where the absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 



Individual Talkgroup All Call 
Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 for a single block CSBK or 02 if this is a MBC header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to the value from the Channel Grant sent by the TSCC that directed this MS to the traffic channel  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Payload Channel for the Call or an indicator that the absolute Tx & Rx frequency is specified in an appended CSBK block  
Logical Channel Number  1  02 - TDMA channel 1 12 - TDMA channel 2  
HI_RATE Emergency Offset  3  HI_RATE in the case of data, Emergency and Offset (offset or aligned timing) from the TSCC that directed this MS to the traffic channel  
Destination_Address  24  Called party Individual MS Address, Gateway or Talkgroup  
Source_address  24  Calling Party or Gateway  


7.1.1.3.2 Clear (P_CLEAR) CSBK PDU 
Octets 0 and 1 of the P_CLEAR CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the P_Clear specific information illustrated in table 7.30. P_Clear is transmitted by the TS on a payload channel only and does not solicit a response. 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 10 11102  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Logical Physical Channel Number  12  Channel to which the addressed party(s) shall move or an indicator that the absolute Tx and Rx frequency is specified in an appended CSBK block  
Reserved  1  02  
Reserved  2  002  
G/I  1  02 - The Target Address is an MS ID  
12 - The Target address is a talkgroup  
Target Address  24  Target MS ID, Talkgroup or ALLMSI (see note)  
Source Address  24  TSI  
NOTE: If the target address is ALLMSI then G/I = 02.  

The P_Clear PDU is transmitted by the TS either as a single block CSBK or a Multi Block Control (MBC). For the Physical Channel Number Information Element: 
a) 
If the value = 0000 0000 00002 the applicable MS(s) shall move to the channel number of the control channel on which the MS was last confirmed. 

b) 
If the value = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical channel 

number for the physical transmitter and receiver frequency. The Clear PDU is transmitted by the TSCC as a single block CSBK. 

c) 
If the value = 1111 1111 11112, the Physical Channel number defines a Multi Block Control (MBC) where the 


absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.1.1.1.2). 
In most Tier III networks the P_Clear PDU is used to clear all MS and talkgroups from a traffic channel so the traffic channel may be re-allocated for a new call. To effect this behaviour the Target Address is set to ALLMSI. 

7.1.1.3.3 Protect (P_PROTECT) CSBK PDU 
Octets 0 and 1 of the P_Protect CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the P_Protect specific information illustrated in table 7.31. P_Protect is transmitted by the TS on a payload channel only and does not solicit a response. The P_Protect PDU is transmitted by the TS as a single block CSBK. 

Individual Talkgroup All Call 
Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 10 11112  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Reserved  12  0000 0000 00002  
Protect_Kind  3  
G/I  1  
Target Address  24  Target Address  
Source Address  24  Source Address  


7.1.1.3.4 Ahoy (P_AHOY) CSBK PDU 
7.1.1.3.4.0 Ahoy (P_AHOY) - Introduction 
Octets 0 and 1 of the AHOY CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the P_AHOY specific information illustrated in table 7.22. 


7.1.1.3.4.1 MS Presence Check 
The TS may send an MS Presence Check P_AHOY on the payload channel to check if an individually addressed MS is present on the payload channel. 

7.1.1.3.4.2 MS Authentication Check 
The TS may send an MS Authentication Check P_AHOY on the payload channel to challenge an MS. 

7.1.1.3.4.3 Talkgroup Presence Check 
The TS may send a Talkgroup Presence Check P_AHOY on the payload channel to check if at least one talkgroup is present on the payload channel. 


7.1.1.3.5 P_Acknowledgement Response 
Acknowledgement PDUs transmitted on the payload channel conform to the same structure as acknowledgement PDUs transmitted on the TSCC. 



7.1.1.4 Inbound Channel CSBKs Transmitted on a Payload Channel by MS(s) 
7.1.1.4.1 Random Access Request PDU 
Random Access PDUs transmitted on the payload channel conform to the same structure as Random Access PDUs transmitted on the TSCC. However the only random access Service _Kind permitted on the payload channel shall be to request an include service. 

ETSI 

7.1.1.4.2 P_ACK Acknowledgements 
Acknowledgement PDUs transmitted on the payload channel conform to the same structure as acknowledgement PDUs transmitted on the TSCC. 


7.1.1.4.3 P_MAINT Maintenance PDUs 
Octets 0 and 1 of the P_MAINT CSBK PDU conforms to the LC format structure as defined in figure 7.1 in ETSI TS 102 361-1 [5] with the CSBKO replacing the FLCO. Octets 2 to 9 contain the P_MAINT specific information illustrated in table 7.32. P_MAINT is transmitted by MS on a payload channel only. The P_MAINT PDU is transmitted by MS as a single block CSBK. 
P_RAND 

Include 
Random Access 
P_ACK 
P_ACK 
CSBK 
P_NACK 
Acknowledgements 
P_DISC 
Figure 7.29: Structure Highlight Table 7.32: P_MAINT PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to 10 10102  
Feature set ID (FID)  8  Shall be set to 0000 00002  
Reserved  12  0000 0000 00002  
Maint Kind  3  
Reserved  1  02  
Target Address  24  TSI  
Source Address  24  MS Address  




7.1.2 Short Link Control PDUs 
7.1.2.1 Control Channel System Parameters 
Bits 0 to 3 of Octet 0 of the Control Channel System Parameters (C_SYS_Parms) Short LC PDU conform to the Short LC format structure as defined in figure 7.2 of clause 7.1 in ETSI TS 102 361-1 [5]. Octets 1 to 3 contain the System Parameters specific information. The C_SYS_Parms PDU is illustrated in table 7.33. 
Table 7.33: C_SYS_Parms PDU Content 
Information element  Length  Value  Remark  
Elements  
Short LC Opcode (SLCO)  4  00102  
MODEL  2  002  Tiny Network Model  
012  Small Network Model  
102  Large Network Model  
112  Huge Network Model  
NET  12  Network and Site Definition  
SITE  
Reg  1  02  This TSCC does not require the MS to register before becoming active  
12  This TSCC requires the MS to register before becoming active  
Common_Slot_Counter  9  Common Slot Counter  

The C_SYS_Parms PDU is broadcast in the CACH when either one timeslot or both timeslots of the physical channel are a TSCC. This includes the composite control channel scenario where one timeslot of the physical channel is a TSCC and the other timeslot is a payload channel. It is never transmitted when neither of the timeslots of the physical channel are a TSCC. 

7.1.2.2 Payload Channel System Parameters 
Bits 0 to 3 of Octet 0 of the Payload Channel System Parameters (P_SYS_Parms) Short LC PDU conform to the Short LC format structure as defined in figure 7.2 of clause 7.1 in ETSI TS 102 361-1 [5]. Octets 1 to 3 contain the System Parameters specific information. The P_SYS_Parms PDU is illustrated in table 7.34. 
Table 7.34: P_SYS_Parms PDU Content 
Information element  Length  Value  Remark  
Elements  
Short LC Opcode (SLCO)  4  00112  
MODEL  2  002  Tiny Network Model  
012  Small Network Model  
102  Large Network Model  
112  Huge Network Model  
NET  12  Network and Site Definition  
SITE  
Payload Channel Type  1  02  Normal Payload Channel  
12  Payload Channel is Composite Control Channel  
Common_Slot_Counter  9  Common Slot Counter  

The P_SYS_Parms PDU is broadcast in the CACH when both timeslots of the physical channel are payload channels. This includes the composite control channel scenario where one timeslot of the physical channel is a TSCC that has become a payload channel and the other timeslot is a payload channel. It is never transmitted when one of the timeslots of the physical channel are a TSCC. 



7.2 Layer 3 Information Element Coding 
7.2.0 Layer 3 Information Element Coding - Introduction 
The following clauses contain descriptions of the information elements contained within layer 3 PDUs, and provide a description of what the elements represent in relation to their bit representation. The structure of the tables is as follows: 
 
the information element column gives the name of the element; 

 
the element length column defines the length of the element in bits; 

 
the value column denotes fixed values or a range of values; 

 
the remarks column defines the meaning of the information element against each of its bit represented values. 



7.2.1 Mask 
The Mask information element has a length of 5 bits and is illustrated in table 7.35. 
Table 7.35: Mask 
Information element  Length  Value  Remark  
Mask  5  0 to 24  Value in the range 0 to 24 (decimal)  


7.2.2 Service Function 
The Service Type information element has a length of 2 bits and is illustrated in table 7.36. 
Table 7.36: Service Function 

Information element  Length  Value  Remark  
002  Random Access invited for all Services  
012  Random Access Invited for Services that require a payload channel Random Access Invited for registration requests  
Service Function  2  102  Random Access Invited for Services that do not require a payload channel Random Access Invited for registration requests  
112  Random Access invited for random access registration requests only  


7.2.3 NRand_Wait 
The Nrand_Wait information element has a length of 4 bits and is illustrated in table 7.37. The TSCC shall specify, using NRand_Wait, the delay (in TDMA-frames) an MS shall wait before deciding to retransmit and choose another slot from a new random-access-frame. 
Table 7.37: NRand_Wait 

Information element  Length  Value  Remark  
NRand_Wait  4  0 to 15  TSCC response to a Random Access Request 0 = response in the next TDMA-frame 1 - MS shall wait for 1 TDMA frame 2 - MS shall wait for 2 TDMA frames 3 - MS shall wait for 3 TDMA frames 4 - MS shall wait for 4 TDMA frames 5 - MS shall wait for 5 TDMA frames 6 - MS shall wait for 6 TDMA frames 7 - MS shall wait for 7 TDMA frames 8 - MS shall wait for 8 TDMA frame 9 - MS shall wait for 9 TDMA frames 10 - MS shall wait for 10 TDMA frames 11 - MS shall wait for 11 TDMA frames 12 - MS shall wait for 12 TDMA frames 13 - MS shall wait for 13 TDMA frames 14 - MS shall wait for 15 TDMA frames 15 - MS shall wait for 24 TDMA frames  


7.2.4 Reg 
The Reg information element has a length of 1 bit and is illustrated in table 7.38. 
Table 7.38: Reg 
Information element  Length  Value  Remark  
Reg  1  02  MSs are not required to register  
12  MSs are required to register  


7.2.5 Backoff 
The Backoff information element has a length of 4 bits and is illustrated in table 7.39. 
Table 7.39: Backoff Number 

Information element  Length  Value  Remark  
Backoff  4  0  0 - Reserved  
1  Backoff TDMA Frame length = 1  
2  Backoff TDMA Frame length = 2  
3  Backoff TDMA Frame length = 3  
4  Backoff TDMA Frame length = 4  
5  Backoff TDMA Frame length = 5  
6  Backoff TDMA Frame length = 8  
7  Backoff TDMA Frame length = 11  
8  Backoff TDMA Frame length = 15  
9  Backoff TDMA Frame length = 20  
10  Backoff TDMA Frame length = 26  
11  Backoff TDMA Frame length = 33  
12  Backoff TDMA Frame length = 41  
13  Backoff TDMA Frame length = 50  
14  Backoff TDMA Frame length = 70  
15  Backoff TDMA Frame length = 100  


7.2.6 System Identity Code 
The System Identity Code information element has a length of 16 bits and is illustrated in table 7.40. 
ETSI 
Table 7.40: System Identity Code 
Information element  Length  Value  Remark  
System Identity Code C_SYScode  16  value  System identity Code transmitted on the TSCC  


7.2.7 Response_Info 
The Response_Info information element contains supplementary information in acknowledgement PDUs. It has a length of 7 bits and is illustrated in table 7.41. 
Table 7.41: Response_Info 

Information element  Length  Alias/value  Remark  
Acknowledgement Reason Code = Reg_Accepted (0110 00102)  
Response_Info  7  PowerSAve_Offset  Acknowledgement to a random access registration request that invokes power save (see clause 6.4.7). The target address is an MS individual ID  
Acknowledgement Reason Code = Accepted for the Status Polling Service (0110 00112)  
Status  7  Status value  Outbound acknowledgement The target address is an individual MS  
Acknowledgement Reason Code = Talkgroup Subscription/Attachment Service (0110 01012)  
Response_Info  7  Index pattern  Pattern indicates talkgroups that have been accepted/refused  
All other acknowledgement Reason Codes  
G/I  1  02  The Target address is an MS individual ID or Gateway  
12  The Target address is a talkgroup  
Response_Check  6  Value  The six least significant bits from the NET + SITE elements of the C_SYScode transmitted by the TSCC (see note)  
NOTE: The bits are 8, 7, 6, 5, 4 and 3 illustrated in figure 6.19.  


7.2.8 Reason 
7.2.8.0 Reason - Introduction 
The Reason information element has a length of 8 bits and is illustrated in tables 7.42 to 45. Separate tables are illustrated for the classifications C_ACK, C_NACK, C_QACK, C_WACK. The Reason bits are set out as t t d a a a a a. tt -ACK type, 002 = NACK; 012 = ACK; 102 = QACK; 112 = WACK. 
d - direction, 12 = TS to MS; 02 = MS to TS, or transmitted by a TS to mirror the acknowledgement sent by an MS to other applicable parties. 
a a a a a - acknowledgement reason. 
There are instances whereby the Reason Code for an acknowledgement from an MS shall be retransmitted by the TS. In this case the reason code from the MS is mirrored exactly by the TS. Such an acknowledgement is described in the present document as a Mirrored_Reason. 

7.2.8.1 Acknowledgements C_ACK 
Table 7.42 illustrates positive final acknowledgements. 
Table 7.42: Answer Response C_ACK 

Information element  Length  Value  Alias  Remark  
Acknowledgement Transmitted by a TS Message Accepted by the MS  
Reason  8  0110 00002  Message_Accepted  Message accepted by TS - Proceed  
0110 00012  Store_Forward  Call is placed in store and forward buffer for onward transmission when the called MS registers  
0110 00102  Reg_Accepted  Request from MS to register has been accepted  
0110 00112  Accepted for the Status Polling Service  Message accepted for the Status Poll Service. Response_Info contains the Status value  
0110 01002  Authentication Response  TS Response to an Authentication Challenge  
0110 01012  Reg_Subscription/Atta chment service  Response to a request from MS to register with Subscription/Attachment  
Acknowledgement Transmitted by an MS Message Accepted by the TS (may be forwarded by the TS)  
0100 01002  MS_Accepted  Message accepted by MS (or mirrored by the TS)  
0100 01012  CallBack  Called MS is indicating to the TS that it will call back later (or mirrored by the TS)  
0100 01102  MS_ALERTING  MS alerting but not yet RFC (or mirrored by the TS)  
0100 01112  Accepted for the Status Polling Service  Message accepted for the Status Poll Service. Response_Info contains the Status value  
0100 10002  Authentication Response  MS Response to an Authentication Challenge  

There are some PDU exchanges between the MS and TSCC whereby an acknowledgement transmitted by an MS is retransmitted by the TS using an identical reason code. This acknowledgement is a mirrored reason code and is identified as mirrored in the detailed call procedures. 

7.2.8.2 Acknowledgements C_NACK 
Table 7.43 illustrates rejection final acknowledgements: 
a) For Messages/Services rejected by the network: 
-Not Supported (0010 00002) 
The MS is registered with the network and has made a random access request for a service that the network does not support. 
-Perm_User_Refused (0010 00012) 
The MS is registered with the network and has made a random access request for a service that the network does not permit for this user. 
-Temp_User_Refused (0010 00102) 
The MS is registered with the network and has made a random access request for a service that the network supports but for some reason the network cannot connect call at this time. (An example may be that the network offers PSTN access but the connection between the system and the PSTN is malfunctioning). 
-Transient_Sys_Refused (0010 00112) 
Request refused because the service is not available to this network at this time. 
-NoregMSaway_Refused (0010 01002) 
The MS is registered with the network and has made a random access request for a service that the network supports. The called party is also valid on the network but is not registered at this time. (The present document supports deregistration when an MS is switched off). 
-MSaway_Refused (0010 01012) 
The MS is registered with the network and has made a random access request for a service that the network supports. The called party is also valid on the network and is registered. However when the network has completed a called party radio check the called MS did not respond and was assumed to be not in radio contact. 
-Div_Cause_Fail (0010 01102) 
An MS has polled another MS for UDT Short Data but the polled MS has diverted its calls so the poll cannot proceed (see clause 6.6.5.1.1). 
-SYSbusy_Refused (0010 01112) 
The MS is registered with the network and has made a random access request for a service that the network supports. The request has been refused because the network is experiencing such a high rate of congestion that the service cannot be provided at this time. 
-SYS_NotReady (0010 10002) 
The MS is registered with the network and has made a random access request for a service. The request has been refused because the network is not ready at this time. The system may be under maintenance or under construction. 
-Call_Cancel_Refused (0010 10012) 
The MS is registered with the network and has made a random access request for a service. The system has sent an C_QACK or C_WACK acknowledgement. Following this acknowledgement the calling MS has sent a further random access request to cancel the call. The network cannot cancel the call and sends this PDU to inform the calling party that the call cannot be cancelled. 
-Reg_Refused (0010 10102) 
See clause 6.4.4. 
-Reg_Denied (0010 10112) 
See clause 6.4.4. 
-IP_Connection_failed (0010 11002) 
See clauses 6.4.11.1.4 and 6.4.11.2. 
-MS_Not_Registered (0010 11012) 
This system demands that an MS registers with the TSCC before attempting any service request. The MS has violated the system requirement and has therefore been refused service. 
-Called_Party_Busy (0010 11102) 
The MS is registered with the network and has made a random access request for a service. The called party is busy. The system does not wish to queue the call. 
-Called_Group_Not_Allowed (0010 11112) 
The MS is registered with the network and has made a random access request for a talkgroup service. The talkgroup ID is not allowed by the TSCC. 
-CRC error in the UDT Upload phase (0011 00002) The MS has requested a service that demands a UDT Upload. A CRC error in the UDT has prevented the call from proceedings. -Duplex_Congestion (0011 00012) The System does not have enough resources to connect the requested call as a duplex call. The MS may attempt to make a half duplex call instead. -Refused_Reason_Unknown (001111112) The MS is registered with the network and has made a random access request for a service. The call has been refused but the reason is not known. 
b) For Messages/Services rejected by MS: -MSNot_Supported (0000 00002) The TSCC has send a PDU to the MS that demands a response. The particular service that is being call for is not supported by the MS. -LineNot_Supported (0001 00012) The TSCC has attempted a transaction that requires the MS to have additional equipment available. If that equipment is not installed this is an appropriate response. -StackFull_Refused (0001 00102) The TSCC has attempted to send some information that the MS shall store. The MS store is full and the MS cannot therefore accept the information. For example an MS may hold the address of calling parties where that call has not been answered and that called part stores the calling party address. If the store is full the Stack_Full_Refused is an appropriate response. -EquipBusy_Refused (0001 00112) The TSCC has attempted a transaction that requires the MS to have additional equipment available and ready. If that equipment is busy this is an appropriate response. -Recipient_Refused (0001 01002) The TSCC has attempted a call or transaction that the called party MS does not wish to accept. -Custom_Refused (0001 01012) This response is for any manufacturer specific reason for refusal of a call or transaction but excluding registration procedures. -MS_Duplex_Not_Supported (0001 01102) The TSCC has sent a full-duplex MS to MS radio check to an MS that does not support MS to MS full-duplex connections.  
-Refused_Reason_Unknown (0001 11112) The PDU to the MS has been refused but the reason is unknown. 
Table 7.43: Answer Response C_NACK 

Information element  Length  Value  Mnemonic  Remark  
Message/Service rejected by network (TS)  
Reason  8  0010 00002  Not_Supported  Network does not support this service  
0010 00012  Perm_User_Refused  Request refused because service has not been authorized for this user (permanent) (Meaning of permanent is manufacturer specific)  
0010 00102  Temp_User_Refused  Request refused because service is not currently authorized for this user (temporary) (Meaning of temporary is manufacturer specific)  
0010 00112  Transient_Sys_Refused  Request refused because the service is not available to this network at this time  
0010 01002  NoregMSaway_Refused  Request refused because called party is not in radio contact (and is not registered with the network)  
0010 01012  MSaway_Refused  Request refused because called party is not in radio contact (but is registered with the network)  
0010 01102  Div_Cause_Fail  Call cannot be processed because the MS has diverted its calls  
0010 01112  SYSbusy_Refused  Request refused because the network is experiencing congestion (Network Overload)  
0010 10002  SYS_NotReady  Request refused because the network is not ready (try later)  
0010 10012  Call_Cancel_Refused  Request to cancel a call has been refused i.e. the call may still mature  
0010 10102  Reg_Refused  Request from an MS to register has been refused  
0010 10112  Reg_Denied  Request from an MS to register has been denied  
0010 11002  IP_Connection_failed  Request from an MS to inform IP connection advice failed  
0010 11012  MS_Not_Registered  This system requires MS to be registered before accepting a user service request. The MS is not registered  
0010 11102  Called_Party_Busy  The called party is busy and the network does not wish to queue the call  
0010 11112  Called_Group_Not_Allowed  The talkgroup ID is not allowed by the TSCC  
0011 00002  CRC_error_in_the_UDT_Upload _phase  A CRC has been detected in the UDT Upload Phase  
0011 00012  Duplex_Congestion  The infrastructure does not have enough free resources to connect a duplex call  
0011 11112  Refused_Reason_Unknown  The request has been refused but the reason is unknown  

Information element  Length  Value  Mnemonic  Remark  
Message/Service rejected by network (TS)  
Message/Service rejected by MS (may be forwarded by TS)  
0000 00002  MSNot_Supported  MS does not support this service or feature  
0001 00012  LineNot_Supported  Request refused because service is not supported by the called party (Line)  
0001 00102  StackFull_Refused  Request refused because the called party's internal call stack is full and is not employing a FIFO  
0001 00112  EquipBusy_Refused  Request refused because called party ancillary equipment is busy  
0001 01002  Recipient_Refused  Request refused by called party user (like in FOACSU)  
0001 01012  Custom_Refused  Request refused due to custom-defined reason  
0001 11112  Refused_Reason_Unknown   The PDU to the MS has been refused but the reason is unknown  

7.2.8.3 Acknowledgements C_QACK, C_WACK 
Table 7.44: Answer Response C_QACK 

Information  Length  Value  Alias  Remark  
element  Acknowledgement Transmitted by a TS  
Reason  8  1010 00002  Queued-for-resource (e.g. payload channel)  Message accepted by TS - more signalling to follow  
1010 00012  Queued-for-busy  Called party is engaged in another call  

Table 7.45: Answer Response C_WACK 
Information  Length  Value  Alias  Remark  
element  Acknowledgement Transmitted by a TS  
Reason  8  1110 00002  Wait  Message accepted by TS - more signalling to follow  



7.2.9 Digits 
The Digits information element represents dialled digits coded as table 7.46. 
Table 7.46: Digits 

Information element  Length  Value  Alias  Remark  
Digits  4  00002  Digit '0'  
00012  Digit '1'  
00102  Digit '2'  
00112  Digit '3'  
01002  Digit '4'  
01012  Digit '5'  
01102  Digit '6'  
01112  Digit '7'  
10002  Digit '8'  
10012  Digit '9'  
10102  Digit '*'  * character  
10112  Digit '#'  # character  
11002  Reserved  
11012  Reserved  
11102  Reserved  
11112  DigitNULL  


7.2.10 Active_Connection 
This information element specifies if the TS has an active network connection with the rest of the network, 
i.e. communication with other radio sites is possible. 
Table 7.47: Active_Connection 

Information element  Length  Value  Alias  Remark  
Active_Connection  1  02  02 - The TS does not have a connection with the network  
12  12 - The TS has a connection with the network  


7.2.11 HI_RATE 
The HI_RATE information element has a length of 1 bit and is illustrated in table 7.48. 
Table 7.48: Packet Mode 
Information element  Length  Value  Alias  Remark  
HI_RATE  1  02  02 - Payload Channel uses single slot data  
12  12 - Payload Channel uses dual slot data  


7.2.12 Service_Kind 
7.2.12.0 Service_Kind - Introduction 
The Service_Kind information element has a length of 4 bits and is illustrated in table 7.49. 
Table 7.49: Service_Kind Information Element 

Information element  Length  Value  Remark  
Service_Kind  4  00002  Individual Voice Call Service (Include Voice Individual Call Service if sent on a payload channel)  
00012  Talkgroup Voice Call Service (Include Voice Talkgroup Call Service if sent on a payload channel)  
00102  Individual Packet Data Call Service  
00112  Packet Data Call Service to a talkgroup  
01002  Individual UDT Short Data Call Service  
01012  Talkgroup UDT Short Data Call Service  
01102  UDT Short Data Polling Service  
01112  Status Transport Service  
10002  Call Diversion Service  
10012  Call Answer Service  
10102  Full-Duplex MS to MS Voice Call Service  
10112  Full-Duplex MS to MS Packet Data Call Service  
11002  Reserved  
11012  Supplementary Service  
11102  Registration/Authentication Service (and deregistration)/MS Radio Check  
11112  Cancel Call Service  


7.2.12.1 Service_Kind_Flag 
The Service_Kind_Flag information element has a length of 1 bit and is illustrated in table 7.50. The meaning of Service_Kind_Flag supports the Service_Kind information element. The meaning of the Service_Kind_Flag depends on the message containing this information element. 
Table 7.50: Service_Kind_Flag Information Element 

Service_ Kind  Message  Service_ Kind_Flag_ Value  Remark  
TSCC Channel  
00002  C_AHOY Voice Service Individual Radio Check  call to an MS  02  Check if called MS is in radio contact and can accept this call immediately. (OACSU)  
12  checks whether called MS is ready to accept speech or data call. (FOACSU)  
C_AHOY Voice Service Individual Call to a line connected destination  C_AHOY to upload destination digits  02  
00012  C_AHOY Voice Service Talkgroup Radio Check  02  Check if at least one member of the called talkgroup is in radio contact  
00102  C_AHOY Packet Data individual radio check  02  Check if called MS is in radio contact  
00112  C_AHOY Packet Data talkgroup radio check  02  Check if at least one member of the called talkgroup is in radio contact  
01002  Individual UDT Short Data Call Service  02  Not Applicable  
01012  Talkgroup UDT Short Data Call Service  02  Not Applicable  
01102  UDT Short Data Polling Service  02  Not Applicable  
01112  Status Transport Service  02  Not Applicable  

Service_ Kind  Message  Service_ Kind_Flag_ Value  Remark  
TSCC Channel  
10002  Call Diversion Service  02  Not Applicable  
10012  P_AHOY Radio Check to an individual MS address  02  General check for presence irrespective of the Service being supported  
P_AHOY Radio Check to a talkgroup  12  
10102  C_AHOY Full-Duplex MS to MS Voice Service Individual Radio Check  02  Check if called MS is in radio contact and can accept this call immediately. (OACSU)  
12  checks whether called MS is ready to accept speech or data call. (FOACSU)  
10112  C_AHOY Full-Duplex MS to MS Packet Data individual radio check  02  Check if called MS is in radio contact  
11002  Reserved  02  Reserved  
11012 (see note)  C_AHOY Stun/Revive  02  Stun  
12  Revive  
C_AHOY Kill  02  Not Applicable  
C_AHOY DGNA  02  Not Applicable  
11102  Registration/Authentication Challenge/MS radio check  02  Not Applicable  
Talk Group Subscription Data  12  
11112  Cancel Call Service  02  Not Applicable  
Payload Channel  
00002  P_AHOY Voice Service Individual Radio Check  02  
00012  P_AHOY Voice Service Talkgroup Radio Check  02  
00102  P_AHOY Packet Data individual radio check  02  
00112  P_AHOY Packet Data talkgroup radio check  02  
10012  P_AHOY Radio Check to an individual MS address  02  General check for presence irrespective of the Service being supported  
P_AHOY Radio Check to a talkgroup  12  
11112  P_AHOY clear an individual MS from a voice payload channel  02  02 Indicates that the target is an individual Address  
11112  P_AHOY clear a talkgroup from a voice payload channel  12  12 Indicates that the target is a talkgroup  
NOTE: Service_Kind = 11012 is the supplementary data service. The purpose is further defined by the Gateway ID defined in that PDU.  


7.2.12.2 UDT_Option_Flag 
Clause 6.4.13 describes the Supplementary_user data service. In clause 6.4.13.2, figure 6.37 illustrates an example of a voice call that includes supplementary data. In this case the UDT download phase requires an acknowledgement from the called party and may therefore replace an AHOY called party check. The AHOY PDU has an Information Element (Service_Kind_Flag) that indicates if the call is OACSU or FOACSU. The UDT_Option_Flag has the same purpose. 
Table 7.51: UDT_Option_Flag Information Element 
UDT is supporting  Message  UDT_Option _Flag_Value  Remark  
Voice Service (Service Kind -00002) Packet Data (Service_Kind - 00102)  UDTHD Outbound PDU carrying Supplementary Data  02  Check if called MS is in radio contact and can accept this call immediately. (OACSU)  
12  checks whether called MS is ready to accept speech or data call. (FOACSU)  
All other Services  UDTHD  02  Reserved  



7.2.13 Service_Options 
7.2.13.0 Service Options - Introduction 
The number of Service_Options that are applicable is dependent on the DMR service requested. The Service_Options information element has a length of 7 bits and is illustrated for each applicable service in clauses 7.2.13.1 to 7.2.13.9. 

7.2.13.1 Service_Options for a Voice Service Request 
The Service_Options information for the Voice Service request is illustrated in table 7.52. 
Table 7.52: Service_Options for Voice Service Request 

Information element  Length  Value  Remark  
Emergency  1  02  Non-emergency service  
12  Emergency service  
Privacy  1  02  (See note 1)  
Supplementary Data (see note 4)  1  02  No Supplementary Data Transfer Service required for this call  
12  Supplementary Data Transfer Service requested for this call   
Broadcast  1  02  Non-broadcast service  
12  Broadcast service (see note 3)  
Reserved  1  02  Reserved  
Priority level  2  002  Normal (low) priority  
012  Priority 1 (see note 2)  
102  Priority 2 (see note 2)  
112  Priority 3 (see note 2)  
NOTE 1: Privacy is not defined in the present document. NOTE 2: Priority 3 is the highest priority. NOTE 3: Broadcast is applicable to talkgroups. NOTE 4: This information element is not used to indicate extended addressing through a gateway ID.  


7.2.13.2 Service_Options for a Packet Data Service Request 
The Service_Options information for the Packet Data Service request is illustrated in table 7.53. 
Table 7.53: Service_Options for Packet Data Service Request 

Information element  Length  Value  Remark  
Emergency  1  02  Non-emergency service  
12  Emergency service  
Privacy  1  02  Privacy (see note 1)  
Supplementary Data (see note 3)  1  02  No Supplementary Data Transfer Service required for this call  
12  Supplementary Data Transfer Service requested for this call   
Hi Rate  1  02  Payload channel expects single slot data timing  
12  Payload channel expects dual slot data timing  
Single Item Multi-Item data  1  02  Single Item Data  
12  Multi-Item Data  

Information element  Length  Value  Remark  
Priority level  2  002  Normal (low)_priority  
012  Priority 1 (see note 2)  
102  Priority 2 (see note 2)  
112  Priority 3 (see note 2)  
NOTE 1: Privacy is not defined in the present document. NOTE 2: Priority 3 is the highest priority. NOTE 3: This information element is not used to indicate extended addressing through a gateway ID.  


7.2.13.3 Service_Options for a Call Diversion Service Request 
The Service_Options information for the call diversion Service request is illustrated in table 7.54. The Divert Kind information element determines to which call service the call diversion shall be applicable. 
Table 7.54: Service_Options for Call Diversion Service Request 
Information element  Length  Value  Remark  
Emergency  1  02  Not applicable  
Privacy  1  02  See note  
Divert On/Off  1  02  Clear Call Diversion  
12  Set Call Diversion  
Divert Kind  1  Active 12 Inactive 02  Divert applicable to Voice Calls  
1  Divert applicable to Packet Data Calls  
1  Divert applicable to UDT Short Data Calls  
1  Divert applicable to Status Calls  
NOTE: Privacy is not defined in the present document.  


7.2.13.4 Service_Options for a Registration Service Request 
The Service_Options information for the registration service request is illustrated in table 7.55. 
Table 7.55: Service_Options for the Registration Service 

Information element  Length  Value  Remark  
Reserved  1  02  
Privacy  1  02  (See note)  
IP_Inform  1  02  MS is not advising IP connection  
12  MS is advising IP connection  
PowerSave_RQ  3  0002  Power Save not requested  
0012 to 1112  Power Save requested  
Reg_Dereg  1  02  If IP_Inform = 02 the MS is attempting to de-register If IP_Inform = 12 the MS is deleting an IP connection  
12  If IP_Inform = 02 the MS is attempting to register If IP_Inform = 12 the MS is attempting to register and/or adding an IP connection  
NOTE: Privacy is not defined in the present document.  


7.2.13.5 Service_Options for an Include Call Service Request 
The Service_Options information for the include service request is illustrated in table 7.56. Include call service requests shall be restricted to the payload channel.  
Table 7.56: Service_Options for the Include Call Service 

Information element  Length  Value  Remark  
Reserved  1  02  
Privacy  1  02  See note  
Reserved  5  0 00002  
NOTE: Privacy is not defined in the present document.  


7.2.13.6 Service_Options for a Status Transport Request 
The Service_Options information for the Status Transport Request is illustrated in table 7.57. The Status Transport call service requests shall be restricted to the control channel. 
Table 7.57: Service_Options for the Status Transport Service 

Information element  Length  Value  Remark  
G/I  1  02  The target address is an MS individual ID  
12  The target address is a talkgroup  
Supplementary_user Data  1  02  No supplementary_user data transfer requested  
12  Supplementary_user data is requested for this call  
Status (most significant 5 bits)  5  value  Most significant 5 bits of the status to be transported, (see note)  
NOTE: The status is not part of the Service options but is illustrated in this clause for clarity.  


7.2.13.7 Service_Options for the UDT Short Data Service 
The Service_Options information for the UDT Short Data Service request is illustrated in table 7.58. 
Table 7.58: Service_Options for UDT Short Data Service Request 

Information element  Length  Value  Remark  
Emergency  1  02  Not applicable - 02  
Privacy  1  02  Privacy (see note)  
Supplementary Data  1  02  No Supplementary Data Transfer Service required for this call  
12  Supplementary Data Transfer Service requested for this call   
BCAST_SV  1  02  Not applicable - 02  
Reserved  1  02  Not applicable - 02  
PRIORITY  2  002  Not applicable - 002  
NOTE: Privacy is not defined in the present document.  


7.2.13.8 Service Options for the Supplementary Data Service 
The Service_Options information for the Supplementary Data Service request is illustrated in table 7.59. 
Table 7.59: Service_Options for Supplementary Data Service Request 

Information element  Length  Value  Remark  
Emergency  1  02  Not applicable - 02  
Privacy  1  02  Privacy (see note) 
 1  02  Not applicable - 02 
 1  02  Not applicable - 02 
 1  02  Not applicable - 02  
PRIORITY  2  002  Not applicable - 002  
NOTE: Privacy is not defined in the present document.  


7.2.13.9 Service Options for a UDT Short Data Polling Request 
The Service_Options information for the UDT Short Data Polling Service request is illustrated in table 7.60. 
Table 7.60: Service_Options for UDT Short Data Polling Service Request 

Information element  Length  Value  Remark  
Emergency  1  02  Not applicable - 02  
Privacy  1  02  Privacy (see note)  
Supplementary Data  1  02  Not applicable - 02  
Polling Format  4  02  Format of the data to be polled  
NOTE: Privacy is not defined in the present document.  



7.2.14 Service_Options_Mirror 
7.2.14.0 Service_Options_Mirror - Introduction 
The Service_Options_Mirror information element is transmitted in C_AHOY PDUs. 
If the C_AHOY PDU has been transmitted as an immediate (or delayed) acknowledgement to a C_RAND Service request, the Service_Options_Mirror is set to the Service_Options information element from the C_RAND PDU. 

7.2.14.1 Service_Options_Mirror for MS Authentication 
If the C_AHOY PDU has been transmitted as the result of a polling PDU from the TSCC for Authentication, then the Service_Option_Mirror shall be set to the values specified in table 7.61. 
Table 7.61: Service_Options_Mirror for MS Authentication Poll 

Information element  Length  Value  Remark  
Service_Options_Mirror  Reserved  1  02  
Privacy  1  02  See note  
Reserved  5  0 00002  
NOTE: Privacy is not defined in the present document.  


7.2.14.2 Service_Options_Mirror for MS Stun/Revive 
If the C_AHOY PDU has been transmitted as the result of a polling PDU from the TSCC for MS stun/revive then the Service_Option_Mirror shall be set to the values specified in table 7.62. 
Table 7.62: Service_Options_Mirror for MS Stun/Revive Poll 

Information element  Length  Value  Remark  
Service_Options_Mirror  Reserved  1  02  
Privacy  1  02  See note  
Reserved  5  0 00002  
NOTE: Privacy is not defined in the present document.  

NOTE: Stun/Revive is a secondary service.  

7.2.14.3 Service_Options_Mirror for MS Kill 
If the C_AHOY PDU has been transmitted as the result of a polling PDU from the TSCC for MS Kill then the Service_Option_Mirror shall be set to the values specified in table 7.63. 
Table 7.63: Service_Options_Mirror for MS Kill 

Information element  Length  Value  Remark  
Service_Options_Mirror  Reserved  1  02  
Privacy  1  02  See note  
Reserved  5  0 00002  
NOTE: Privacy is not defined in the present document.  



7.2.15 Proxy Flag 
For calls to destinations connected through a TS gateway, the proxy flag indicates the number of Appended Data UDTs needed to upload the address of the final destination. For a call to a PABX or the PSTN, one appended data UDT will carry up to 20 dialled digits and two appended data UDTs will carry up to 44 dialled digits. 
Table 7.64: Proxy Flag information element 

Information element  Length  Value  Remark  
Proxy Flag  1  02  Number of appended data UDTs needed to upload the final destination address = 1 Number of Extended BCD digits for addressing through a PSTN/PABX gateway = 1 to 20. For IP gateway extended_address is IPV4  
12  Number of appended data UDTs needed to upload the final destination address = 2 Number of Extended BCD digits for addressing through a PSTN/PABX gateway = 21 to 44. For IP gateway extended_address is IPV6Number  


7.2.16 POL_FMT 
For all POL_FMT values in the range 00002 to 10012, POL_FMT specifies the format of polled data from the UDT Short Data Polling procedures specified in clause 6.6.5.3. POL_FMT = 10102 identifies the Status Polling Service specified in clause 6.6.6.2. 
Table 7.65: POL_FMT information element 

Information element  Length  Value  Remark  
POL_FMT  4  00002  Binary  
00012  MS Addresses  
00102  4 bit BCD  
00112  ISO 7 bit character set (ISO/IEC 646 [11])  
01002  ISO 8 bit character set (ISO/IEC 8859 [12])  
01012  NMEA location information  
01102  IP address  
01112  16 bit UTF-16BE Unicode characters  
10002  Custom Coded (manufacturer specific)  
10012  Custom Coded (manufacturer specific)  
10102  Status  
10112  Reserved  
11002  Reserved  
11012  Reserved  
11102  Reserved  
11112  Reserved  


7.2.17 Appended_Block 
If the Supplementary Data Service has been invoked as an option with other voice or data services, the Appended Supplementary Data information element is used to pass the number of Appended Data UDTs needed to upload the Supplementary Data. 
If the UDT Short Data Service has been invoked, the Appended UDT Short Data information element is used by an MS to pass the number of Appended Data UDTs needed to upload the UDT Short Data. 
Table 7.66: Appended Supplementary Data Information Element 

Information element  Length  Alias  Value  Remark  
002  Number of appended data UDTs needed to upload the supplementary data = 1  
Appended_Block  2  UAB  012  Number of appended data UDTs needed to upload the supplementary data = 2  
102  Number of appended data UDTs needed to upload the supplementary data = 3  
112  Number of appended data UDTs needed to upload the supplementary data = 4  


7.2.18 Opcode 
The Opcode information element specifies the function of a CSBK/MBC/UDT Header. 
Table 7.67: Opcode 
Information element  Length  Value  Remark  
Opcode  6  See clause B.1  
Other values not defined in clause B.1 Reserved  


7.2.19 Announcement_type 
7.2.19.0 Announcement_type -Introduction 
The Announcement_type Format Code information element has a length of 5 bits and is illustrated in table 7.68. 
Table 7.68: Announcement_type 

Information element  Length  Value  Alias  Remark  
Announcement_type  5  0 00002  Ann_WD_TSCC  Announce/Withdraw TSCC  
0 00012  CallTimer_Parms  Specify Call Timer Parameters  
0 00102  Vote_Now  Vote Now Advice  
0 00112  Local_Time  Broadcast Local Time  
0 01002  MassReg  Mass_Registration  
0 01012  Chan_Freq  Announce a logical channel/frequency relationship  
0 01102  Adjacent_Site  Adjacent Site information  
0 01112  Gen_Site_Params  General Site Parameters information  
0 10002 to 1 11012  Reserved  
1 11102  Manufacturer Specific  
1 11112  Manufacturer Specific  


7.2.19.1 Announce/Withdraw TSCC (Ann_WD_TSCC) 
To Announce/Withdraw a TSCC (where the TSCC is specified as a Logical Physical Channel Number), the PDU may be transmitted as a CSBK. In this case, the parameters are specified by table 7.69. Up to two TSCCs may be specified by this PDU. If only one TSCC is being announced/withdrawn then: 
a) 
Colour Code for CH_1 contains the applicable colour code (announce only, else 00002); 

b) 
BCAST_CH2 = CHNULL; 

c) 
Colour Code for CH_2 = 00002; or 


If the Ann_WD_TSCC requires the absolute TSCC frequencies to be specified, the Ann_WD_TSCC PDU is transmitted as a Multi Block Header MBC followed by a Multi Block Continuation BC_AP that specifies the absolute frequencies (see clause 7.1.1.1.5.1 and clause 7.2.42). The parameters are specified by table 7.103. In this case one TSCC may be announced/withdrawn and: 
a) 
Colour Code for CH_1 contains the applicable colour code (announce only, else 00002); 

b) 
AW_FLAG determines if the channel is added to the hunt list. 


The frequency information is specified in the second block of the MBC, a Multi Block Continuation BC_AP specified in clause 7.2.42. 
Table 7.69: Announce/Withdraw TSCC 

Information element  Length  Value  Alias  Remark  
4  02  Reserved  
4  Value  Colour code for CH_1 (default = 00002)  
Broadcast Parms 1  4  Value  Colour Code for CH_2 (default = 00002)  
1  02  AW_FLAG1  Add BCAST_CH1 to hunt list  
12  Withdraw BCAST_CH1 from hunt list  
1  02  AW_FLAG2  Add BCAST_CH2 to hunt list  
12  Withdraw BCAST_CH2 from hunt list  
Broadcast  12  0 or 1 to 4 095  BCAST_CH1  CHNULL or Logical Physical Channel Number  
Parms 2  12  0 or 1 to 4 095  BCAST_CH2  CHNULL or Logical Physical Channel Number  

7.2.19.2 Specify Call Timer Parameters (CallTimer_Parms) 
Table 7.70: Specify Call Timer Parameters 
Information element  Length  Value  Alias  Remark  
Broadcast Parms 1  9  02  T_EMERG_TIMER  MS uses its Internal Emergency Timer   
1 to 510  Call Timer for Emergency Calls. See clause A.1  
511  Emergency Call Timer is Infinity  
5  0  T_PACKET_TIMER  MS uses its Internal Packet Timer  
1 to 30  Call Timer for Packet Data. See clause A.1  
31  Packet Call Timer is Infinity  
Broadcast Parms 2  12  0  T_MS-MS_TIMER  MS uses its Internal Timer for MS to MS calls  
1 to 4 094  Call Timer for MS to MS Calls. See clause A.1  
4 095  MS to MS Call Timer is Infinity  
12  0  T_MS-LINE_TIMER  MS uses its Internal Timer for line connected calls  
1 to 4 094  Call Timer for Line Connected calls. See clause A.1  
4 095  Line Connected Call Timer is Infinity  

7.2.19.3  Vote Now Advice (Vote_Now)  
7.2.19.3.0  Vote Now -Introduction  
Table 7.71: Vote Now Advice  

Information element  Length  Value  Alias  Remark  
Broadcast Parms 1  14  Most Significant 14 bits of the System Identity Code of the TSCC being assessed  
1  If 1, Active_connection information available, if 0, Active_connection information not available.  
Broadcast  1  Active_connection  
Parms 2  3  Confirmed channel priority  
3  Adjacent channel priority  
4  0000  Reserved  
12  1 to 4 095  CH_VOTE  Physical Channel Number to be assessed  

a) If CH_VOTE = 0000 0000 00002 the Physical Channel number is invalid. 
b) 
If CH_VOTE = 0000 0000 00012 to 1111 1111 11102, the Physical Channel number represent a logical 

channel number for the physical transmitter and receiver frequency. The Vote Now Advice PDU is transmitted on the TSCC as a single block CSBK. 

c) 
If CH_VOTE = 1111 1111 11112, the Physical Channel number defines a multi-block MBC where the 


absolute transmitter and receiver frequency is defined in a second block concatenated to this block (defined in clause 7.2.19.3.1). 
7.2.19.3.1 Vote Now Absolute Parameters (VN_AP) Appended MBC PDU 
The second (continuation) block of the multi-block Vote Now MBC conforms to the format specified in table 72. The CdefParms PDU is specified in clause 7.2.42 and the physical characteristics described in Annex C. 
Table 7.72: VN_AP Appended MBC PDU Content 

Information element  Length  Remark  
Message dependent elements  
Last block (LB)  1  This bit shall be set to 12 because this PDU is appended to either a an applicable Channel Grant MBC Header  
Protect Flag (PF)  1  
Feature elements  
CSBK Opcode (CSBKO)  6  Shall be set to the CSBKO of the first block of the MBC  
Reserved  4  00002  
Colour Code  4  Colour Code used for the destination physical channel  
Cdeftype  4  Meaning of CdefParms (see clause 7.2.42)  
Reserved  2  002  
CdefParms  58  information elements describing the logical/physical channel frequency relationship  

7.2.19.4  Broadcast Local Time (Local_Time)  
7.2.19.4.0  Broadcast Local Time - Introduction  
Table 7.73: Broadcast Local Time  

Information element  Length  Value  Alias  Remark  
Broadcast Parms 1  5  B_DAY  Day of the Month 1 to 31 (or 0 if date is not being broadcast)  
4  B_MONTH  Month 1 to 12 (or 0 if month is not being broadcast)  
4  UTC_OFFSET  Offset between local hours and UTC hours as an unsigned number in the range 0 to 14 (or 11112 if offset is not being broadcast)  
1  02  UTC_OFFSET_SI GN  02 - local time leads Coordinated Universal Time (UTC offset is positive)  
12  12 - local time lags Coordinated Universal Time (UTC offset is negative)  
Broadcast Parms 2  5  B_HOURS  Hours 0 to 23  
6  B_MINS  Minutes 0 to 59  
6  B_SECS  Seconds 0 to 59  
3  DAYOF_WEEK  The day of the week (or 0 if the day of week is not being broadcast)  
2  002  UTC_OFFSET_FR ACTION  No additional offset  
012  Add 15 minutes  
102  Add 30 minutes  
112  Add 45 minutes  
2  002  Reserved  

The information element meaning of B_MONTH and DAYOF_WEEK values are specified in tables 7.74 and 7.75. The method for calculating UTC time is defined in clause 6.7.1.4. 
7.2.19.4.1 Broadcast Local Time -Month (B_MONTH) 
Table 7.74: B_MONTH Information Element 

Information element  Length  Value  Remark  
B_MONTH  4  00002  <Month not broadcast>  
00012  January  
00102  February  
00112  March  
01002  April  
01012  May  
01102  June  
01112  July  
10002  August  
10012  September  
10102  October  
10112  November  
11002  December  

7.2.19.4.2 Broadcast Local Time -Day of Week (DAYSOF_WEEK) 
Table 7.75: DAYSOF_WEEK information element 

Information element  Length  Value  Remark  
0002  <Days of Week not broadcast>  
0012  Sunday  
0102  Monday  
DAYSOF_WEEK  3  0112  Tuesday  
1002  Wednesday  
1012  Thursday  
1102  Friday  
1112  Saturday  



7.2.19.5 Broadcast Mass Registration (MassReg) 
7.2.19.5.0 Broadcast Mass Registration - Introduction 
Table 7.76: Mass Registration 

Information element  Length  Value  Alias  Remark  
Broadcast Parms 1  5  0 00002  Reserved  
4  Reg_Window  
5  Aloha Mask  
Broadcast Parms 2  24  ADRNULL or MS Individual Address  

7.2.19.5.1 Reg_Window 
Table 7.77: Reg_Window 

Information element  Length  Value  Treg_Window  Remark  
Reg_Window  4  0  <Cancel Mass Registration>  
1  0,5  Values in seconds  
2  1  
3  2  
4  5  
5  10  
6  20  
7  30  
8  100  
9  300  
10  1 000  
11  3 000  
12  10 000  
13  30 000  
14  100 000  
15  200 000  



7.2.19.6 Broadcast a Logical Channel/Frequency Relationship 
The Broadcast a Logical/Frequency Channel relationship is transmitted as a Multi Block Header _ Multi Block Continuation. The Multi Block Header Information Elements are specified in table 7.78. This PDU is followed by a Multi Block Continuation as specified in clause 7.1.1.1.5.1. 
Table 7.78: Broadcast Logical Channel/Frequency Relationship 

Information element  Length  Value  Alias  Remark  
Broadcast Parms 1  14  00 0000 0000 00002  Reserved  
Broadcast  12  0000 0000 00002  Reserved  
Parms 2  12  1 to 4 095  CH_ADJ  Physical Channel Number of the Channel being Announced  

7.2.19.7 Broadcast Adjacent Site information 7.2.19.8 Broadcast General Site Parameters information 
Table 7.79: Broadcast Adjacent Site Information 

Information element  Length  Value  Alias  Remark  
Broadcast Parms 1  14  Most Significant 14 bits of the System Identity Code of the TSCC being assessed  
1  If 1, Active_connection information available, if 0, Active_connection information not available  
1  Active_connection  
Broadcast  3  Confirmed channel priority  
Parms 2  3  Adjacent channel priority  
4  00002  Reserved  
12  1 to 4 095  CH_ADJ  Physical Channel Number of the Adjacent Site to be assessed  

Table 7.80: Broadcast General Site information 

Information element  Length  Value  Alias  Remark  
Broadcast Parms 1  14  Reserved  
Broadcast  8   Current (Confirmed Site Information  Refer to clause 7.2.40  
Parms 2  8  Reserved  
8  Network Information  Refer to clause 7.2.41  



7.2.20 Individual/Group G/I 
G/I is defined in ETSI TS 102 361-1 [5]. 
Table 7.81: G/I Information Element Definition 

Information element  Length  Value  Remark  
G/I  1  02  The Target Address information element in the PDU represents an individual MS address  
12  The Target Address information element in the PDU represents a talkgroup  

7.2.21 Protect_Kind 7.2.22 Maint_Kind 
Table 7.82: Protect_Kind Information Element Definition 

Information element  Length  Value  Alias  Remark  
0002  DIS_PTT  Disable Target MS or Talkgroup transmission  
0012  EN_PTT  Enable Target MS or Talkgroup transmission  
0102  ILLEGALLY_PARKED  Clear down from the payload channel, MS whose address does not match Source or Target Address  
Protect_Kind  3  0112  EN_PTT_ONE_MS  Enable PTT for the MS matched by the Target Address. All other MS are disabled  
1002  Reserved  
1012  Reserved  
1102  Reserved  
1112  Reserved  

Table 7.83: Maint_Kind Information Element Definition 

Information element  Length  Value  Alias  Remark  
0002  DISCON  Disconnect. End of payload channel use  
0012  Reserved  
0102  Reserved  
Maint_Kind  3  0112  Reserved  
1002  Reserved  
1012  Reserved  
1102  Reserved  
1112  Reserved  

7.2.23 Response expected (A) 
Table 7.84: A Information Element Definition 

Information element  Length  Value  Alias  Remark  
A  1  02  Response not expected  
12  Response expected  


7.2.24 Data Packet Format 
The Data packet Format is defined in ETSI TS 102 361-1 [5]. Only one value is used in the present document. 
Table 7.85: Format Information Element 

Information element  Length  Value  Remark  
Data Packet  4  00002  Header for UDT  
Format  others  See ETSI TS 102 361-1 [5]  

7.2.25 SAP Identifier 
Table 7.86: SAP Identifier Information Element 

Information element  Length  Value  Remark  
SAP Identifier  4  00002  UDT  
00012  See ETSI TS 102 361-1 [5]  
00102  See ETSI TS 102 361-1 [5]  
00112  See ETSI TS 102 361-1 [5]  
01002  See ETSI TS 102 361-1 [5]  
01012  See ETSI TS 102 361-1 [5]  
01102  See ETSI TS 102 361-1 [5]  
01112  See ETSI TS 102 361-1 [5]  
10002  See ETSI TS 102 361-1 [5]  
10012  See ETSI TS 102 361-1 [5]  
10102  See ETSI TS 102 361-1 [5]  
10112  See ETSI TS 102 361-1 [5]  
11002  See ETSI TS 102 361-1 [5]  
11012  See ETSI TS 102 361-1 [5]  
11102  See ETSI TS 102 361-1 [5]  
11112  See ETSI TS 102 361-1 [5]  


7.2.26 Pad Nibble (PN) 
The Pad Nibble is defined in ETSI TS 102 361-1 [5]. 
The PN information element specifies the number of pad nibbles which have been appended to the data to form an integer number of blocks. The number of pad nibbles for each of the UDT data formats is specified in Annex B. 
Table 7.87: Pad Nibble 
Information element  Length  Value  Remark  
Pad Nibble  5  Value  Number of pad nibbles appended to the data  


7.2.27 UDT Format 
Specifies the format of the user or system data carried in UDTs for the UDT mechanism. 
Table 7.88: UDT_Format Information Element 

Information element  Length  Value  Remark  
UDT Format  4  00002  Binary  
00012  MS or TG Address  
00102  4 bit BCD  
00112  ISO 7 bit character set (ISO/IEC 646 [11])  
01002  ISO 8 bit character set (ISO/IEC 8859 [12])  
01012  NMEA location coded (IEC 61162-1 [8])  
01102  IP address  
01112  16 bit UTF-16BE Unicode characters  
10002  Manufacturer Specific  
10012  Manufacturer Specific  
10102  Mixed. Appended blocks contain an address and 16 bit UTF­16BE Unicode characters  
10112  Location Information Protocol (LIP [14])  
11002  Reserved  
11012  Reserved  
11102  Reserved  
11112  Reserved  


7.2.28 Offset 
On the outbound channel, specifies if the payload channel shall use offset or aligned timing. 
Table 7.89: Offset Information Element 
Information element  Length  Value  Remark  
Offset  1  02  The payload channel shall use aligned timing  
12  The payload channel shall use offset timing  

7.2.29 Protect Flag (PF) The Protect Flag is described in table 7.90. Table 7.90: Protect Flag  
7.2.30 Privacy Privacy is described in table 7.91. Table 7.91: Privacy  

Information element  Length  Value  Remark  
Protect Flag (PF)  1  02  Defined in ETSI TS 102 361-1 [5] Air Interface  


Information element  Length  Value  Remark  
Privacy  1  02  Defined in ETSI TS 102 361-1 [5] Air Interface  

7.2.31 STATUS 
Table 7.92: STATUS 

Information element  Length  Value  Remark  
000 00002 to 110 00112  Status Values valid for the Status Delivery Service  
110 01002 to 111 10102  Reserved  
STATUS  7  111 10112  Status Value for Call termination of Transmit Interrupt Service (see clause 6.4.14.3.4)  
111 11002  Status Value for Cancel the Emergency Alarm  
111 11012  Status Value for Payload interrupt of Transmit Interrupt Service (see clause 6.4.14.3.3)  
111 11102  Status Value for the Emergency Alarm  
111 11112  Status Value for the Status Polling Service  


7.2.32 Version 
The Version Information element indicates the version number to which the system is compliant. 
Table 7.93: Version 

Information element  Length  Value  Remark  
0002  This system is compliant with ETSI TS 102 361-4 [i.1] up to and including version 1.5.1  
0012  This system is compliant with ETSI TS 102 361-4 [i.1] version 1.6.1  
Version  3  0102  This system is compliant with ETSI TS 102 361-4 [i.1] version 1.7.1, 1.8.1, 1.9.1 and 1.9.2  
0112  This system is compliant with ETSI TS 102 361-4 [i.1] version 1.10.1  
1002  This system is compliant with ETSI TS 102 361-4 [i.1] version 1.11.1  
1012 to 1112  Reserved  


7.2.33 Target Address Contents 
The Registration Service Target Address Contents information element specifies the contents of the Target Address or Gateway information element in a registration service request. 
Table 7.94: Trg_Adr_Cnts Information Element 

Information element  Length  Value  Remark  
002  000000002 + C_SYSCode  
TRGT_ADR_CNTS  2  012  Subscription Talk Group ID  
102  TATTSI  
112  Reserved  


7.2.34 Payload Channel Type 
The Payload Channel Type information element specifies if a payload channel is a normal payload channel or a composite control channel as illustrated in table 7.95. 
Table 7.95: Payload Channel Type 

Information element  Length  Value  Remark  
02  Normal Payload Channel  
Payload Channel Type  1  12  Payload Channel is Composite Control Channel  


7.2.35 Site Timeslot Synchronization 
The Site Timeslot Synchronization information element has a length of 1 bit and is illustrated in table 7.96. The TSCC shall only broadcast Site Timeslot Synchronization when all BS units at the site are timeslot synchronized.  
Table 7.96: Site Timeslot Synchronization 

Information element  Length  Value  Alias  Remark  
Site Timeslot  1  02  02 - TSCC and all payload channels at site are not timeslot synchronized  
Synchronization  12  12 - TSCC and all payload channels at site are timeslot synchronized  


7.2.36 One Key Format Flag (OK) 
The One Key format flag is described in table 7.97. The One Key flag is applicable to the DGNA service. 
Table 7.97: One Key format flag Information Element 

Information element  Length  Value  Appended Data Address Format  Appended Data Mixed Format  
One Key format flag (OK)  1  02  ADDRESS1 in the UDT Appended data Addressing Format is not the One­Key_talkgroup  ADDRESS in the UDT Appended data Mixed Format is not the One­Key_talkgroup  
12  ADDRESS1 in the UDT Appended data Addressing Format is the One­Key_talkgroup  ADDRESS in the UDT Appended data Mixed Format is the One-Key_talkgroup  


7.2.37 Single Item Multi-Item(SIMI) Data 
The Single Item Multi-Item (SIMI) data information element has a length of 1 bit and is illustrated in table 7.98. 
Table 7.98: Single Item Multi-Item Data 

Information element  Length  Value  Alias  Remark  
Single Item Multi-Item data  1  02  02 - Single Item data  
12  12 - Multi-Item data  


7.2.38 Response Delay (RD) 
The Response Delay information element is a function of the channel timing, specifies the time duration between receiving the end of a USBD Poll and initiating a USBD Poll Response and is illustrated in table 7.99. 
Table 7.99: Response Delay Information Element 

Information element  Length  Value  Remark  
002  30 ms for aligned timing 60 ms for offset timing  
Response Delay  2  012  90 ms for aligned timing 120 ms for offset timing  
102  150 ms for aligned timing 180 ms for offset timing  
112  210 ms for aligned timing 240 ms for offset timing  


7.2.39 Payload Contents (PC) 
The Payload Contents information element specifies the type of information sent in a USBD Poll to the target MS and is illustrated in table 7.100. 
Table 7.100: Payload Contents Information Element 

Information element  Length  Value  Remark  
USBD Payload Contents  1  02  Data to polled MS  
12  Privacy (see note)  
NOTE: Privacy is not defined in the present document.  


7.2.40 Current (confirmed) Site Information 
The Current (Confirmed) Site information element is illustrated in table 7.101 
Table 7.101: Current (confirmed) Site Information 

Information element  Length  Value  Alias  Remark  
Reserved  1  
Hibernating_Flag  1  02 - The TSCC is not about to hibernate  
12 - The TSCC is about to hibernate  
Reserved  6  


7.2.41 Network Information 
The Network information element illustrated in table 7.102 applies to the network as a whole and persists between site changes, or until such time new advice is received in General Site Parameters PDU. 
Table 7.102: Network Information 

Information element  Length  Value  Alias  Remark  
Reg and TG Subscription  1  02 - MS sends TG Subscription/Attachment TG(s) during registration process  
12 - MS sends Reg without TG Subscription/Attachment TG(s) during registration process (see note)  
Reserved  7  
NOTE: MS shall send TG Subscription/Attachment TG(s) during the first registration process from power up.  

7.2.42 CdefParms Absolute Frequency Relationship 
Table 7.103: CdefParms Information Element Definition 

CdefParms  Information element  Length  Value  Alias  Remark  
CdefParms  
Cdeftype = 00002  Logical Physical Channel Number  12  CHAN  
Absolute transmitter frequency - integer MHz  10  TXMHz  Absolute transmitter frequency -integer MHz  
Absolute transmitter frequency  13  TXKHz  Part transmitter MHz in 125 Hz steps   
Absolute receiver frequency - integer MHz  10  RXMHz  Absolute transmitter frequency -integer MHz  
Absolute receiver frequency  13  RXKHz  Part receiver MHz in 125 Hz steps  
CdefParms  
Cdeftype = 00012 to 11112  58  Reserved  

The mechanism for calculating the absolute frequency is defined in Annex C. 
Annex A (normative): Timers, constants levels and addresses 
A.0 Timers, constants levels and addresses - Introduction 
This annex lists the timers and constants in a DMR MS. 
Where indicated, a value should be chosen from within the specified range. For other timers and constants, a default value may be specified and the value of these timers and constants shall be configurable within the DMR entity (MS, BS or TS). 


A.1 Layer 3 timers 
Table A.1: Layer 3 Timers 

Mnemonic  Value  Description  
Trand_TC  2 s to 60 s  Timeout for MS attempting Random Access  
T_Nosig  1 s to 15 s  Timeout for entering hunting procedures if no TSCC is received  
T_EMERG_TIMER  1 to 510 s  Emergency Timer. See table A.2  
511 s  Emergency Timer is Infinity  
T_PACKET_TIMER  1 to 30 s  Packet Timer. See table A.3  
31 s  Packet Timer is Infinity  
T_MS-MS_TIMER  1 to 4 094 s  MS to MS Timer. See table A.4  
4 095 s  MS to MS Timer is Infinity  
T_MS-LINE_TIMER  1 to 4 094 s  MS-Line Timer. See table A.5  
4 095 s  MS-Line Timer is Infinity  
TP_Timer  4 s to 60 s  Timeout for a calling MS waiting for a call that requires a payload channel  
TNP_Timer  2 s to 60 s  Timeout for a calling MS waiting for a call that does not require a payload channel  
T_Awake  0,1 s to 60 s  Time MS stays awake after receiving a PDU (in steps of 0,1 s)  
TV_Hangtime  1 s to 60 s  Payload Voice Hangtime timer  
TV_Item  10 s to 60 s  Payload Voice Maximum Item Timer  
TV_Inactive  0 s to 20 s  Payload Voice Inactivity Timer  
TD_Inactive  0 s to 20 s  Payload Data inactivity Timer  
TD_Item  1 s to 60 s  Payload Packet Data Maximum Item Timer  
TD_Hangtime  1 s to 60 s  Payload Data Hangtime timer  
T_AnswerCall  2 s to 60 s  Timeout for called MS after receiving AHOY for FOASCU  
T_Pending  2 s to 60 s  Timeout for called MS after receiving AHOY for OACSU  
T_dereg  0,2 s to 2 s  Timer to de-register before abandon in 0,1 s steps  
T_BS_Inactive  1 s to 300 s  Timer to hibernate if no inbound activity on an unregulated TSCC  
T_DENREG  0  The denied registration timer is inactive  
1 to 1 000 (i.e. 10 s to  10 000 s)  Denied registration lifetime in steps of 10 s (i.e. 1 = 10 s, 2 = 20 s, etc.)  
T_Late  Deprecated timer from version 1.9.1  
T_ALS  10 s to 300 s  Ambient Listening Service Timer for normal priority calls  
T_ALS_E  10 s to 14 400 s  Ambient Listening Service Timer for emergency priority calls  
T_ALS_REQUEST_LIFE_SPAN  1 s to 10 s  Maximum delay between C_AHOY and subsequent C_GRANT before the called MS cancels ALS request  
T_ALS_RETRANSMIT_DELAY  0 s to 5 s  Minimum delay before an ALS target MS re-keys after being interrupted by the ALS initiating party  

Table A.2: Call Timer Tokens T_EMERG_TIMER 

Alias  Value  Meaning  
1 to 10  Call Timer in seconds  
11 to 20  Call timer in increments of 5 s from: 11 = 15 s to 20 = 60 s  
21 to 28  Call timer in increments of 15 s from: 21 = 75 s to 28 = 180 s  
T_EMERG_TIMER  29 to 40  Call timer in increments of 30 s from: 29 = 3,5 minutes to 40 = 9 minutes  
41 to 51  Call timer in increments of 1 minute from: 41 = 10 minutes to 51 = 20 minutes  
52 to 510  Call timer in increments of 5 minutes from: 52 = 25 minutes to 510 = 2 315 minutes  
511  Call timer is infinity  

Table A.3: Call Timer Tokens T_PACKET_TIMER 
Alias  Value  Meaning  
1 to 5  Call Timer in seconds  
6 to 10  Call timer in increments of 5 s from: 6 = 10 s to 10 = 30 s  
11 to 12  Call timer in increments of 15 s from: 11 = 45 s to 12 = 60 s  
T_PACKET_TIMER  13 to 20  Call timer in increments of 30 s from: 13 = 1,5 minutes to 20 = 5 minutes  
21 to 25  Call timer in increments of 1 minute from: 21 = 6 minutes to 25 = 10 minutes  
26 to 30  Call timer in increments of 5 minutes from: 26 = 15 minutes to 30 = 35 minutes  
31  Call timer is infinity  
Table A.4: Call Timer Tokens T_MS-MS_TIMER 


Alias  Value  Meaning  
1 to 59  Call Timer in seconds  
60 to 107  Call timer in increments of 5 s from: 60 = 60 s to 107 = 295 s  
T_MS-MS_TIMER  108 to 138  Call timer in increments of 30 s from: 108 = 5 minutes to 138 = 20 minutes  
139 to 4 094  Call timer in increments of 1 minute from: 139 = 21 minutes to 4 094 = 3 976 minutes  
4 095  Call timer is infinity  

Table A.5: Call Timer Tokens T_MS-LINE_TIMER 

Alias  Value  Meaning  
1 to 59  Call Timer in seconds  
60 to 107  Call timer in increments of 5 s from: 60 = 60 s to 107 = 295 s  
T_MS-LINE_TIMER  108 to 138  Call timer in increments of 30 s from: 108 = 5 minutes to 138 = 20 minutes  
139 to 4 094  Call timer in increments of 1 minute from: 139 = 21 minutes to 4 094 = 3 976 minutes  
4 095  Call timer is infinity  

A.2 Layer 3 constants 
Table A.6: Layer 3 Constants 

Mnemonic  Value  Description  
NDefault_NW  5  NRand_Wait at MS switch on  
NRand_NR  6  Number of random access attempts for a normal and high priority service  
NRand_NE  10  Number of random access attempts for an emergency priority service  
N_Maint  4  Number of P_MAINT PDUs transmitted by an MS to clear down the payload channel  
Nmax_Ch  50  Minimum Number of channels in Short Hunt List  
Ch_Pref  50  Channels that are marked as Preferred TSCC for Vote_Now  
Low_Comp_Ch  1 to 4 095  Lowest logical channel in use by the network  
High_Comp_Ch  Low_Comp_Ch to 4 095  Highest logical channel in use by the network  
Comp_Flag  True/False  Suppress Comprehensive Hunt (see annex D)  
NSYSerr  1 to 3  Number of C_SYScodes received that differ from the value verified  
DMRLA  1 to 10  Length of SYS_AREA information field from the C_SYScode  
VOTE_BLK  2 to 10  Number of TDMA frames that the TSCC withdraws random access activity after a Vote Now Advice  

A.3 Layer 3 levels 
Table A.7: Layer 3 Signal Levels 

Mnemonic  Value  Description  
L_Upper_SHort  The threshold of signal quality above which will be sampled first in a short hunt  
L_Lower_SHort  Units and values are manufacturer  The threshold of signal quality below which the MS shall be unable to become active  
L_Squelch  specific  Signal level (or equivalent) below which physical channels are to be rejected because the received signal quality is inadequate  
L_Power_Hi  Units and values are manufacturer  Lower limit of signal strength sample received by the TS for power control  
L_Power_Low  specific  Upper limit of signal strength sample received by the TS for power control  

A.4 Tier III Gateways/Identifiers 
Table A.8: Gateways/Identifiers 

DMR ID  Alias  Remark  
FFFEC016  PSTNI  Gateway address for services to the PSTN using payload aligned timing  
FFFEC116  PABXI  Gateway address for services to the PABX using payload aligned timing  
FFFEC216  LINEI  Address for services to a Line Gateway using payload aligned timing  
FFFEC316  IPI  Address for services to an IP Gateway using payload aligned timing  
FFFEC416  SUPLI  Address used to identify an supplementary data service  
FFFEC516  SDMI  Address used to identify a UDT Short Data service  
FFFEC616  REGI  Address used to identify a registration service  
FFFEC716  MSI  Gateway Address for Call Diversion to an MS  
FFFEC816  Reserved  
FFFEC916  DIVERTI  Address used to identify a call diversion cancellation  
FFFECA16  TSI  Address of the TS  
FFFECB16  DISPATI  Address of the system dispatcher using payload aligned timing  
FFFECC16  STUNI  MS Stun/Revive Identifier  
FFFECD16  AUTHI  Authentication Identifier  
FFFECE16  GPI  Gateway Address for Call Diversion to a Talkgroup  
FFFECF16  KILLI  MS KILL Identifier  
FFFED016  PSTNDI  Gateway address for services to the PSTN using payload offset timing  
FFFED116  PABXDI  Gateway address for services to the PABX using payload offset timing  
FFFED216  LINEDI  Address for services to a Line Gateway using payload offset timing  
FFFED316  DISPATDI  Address of the system dispatcher using payload offset timing  
FFFED416  ALLMSI  The totality of all individual MS and talkgroups  
FFFED516  IPDI  Address for services to an IP gateway using payload offset timing  
FFFED616  DGNAI  Address to identify the Dynamic Group Number Assignment  
FFFED716  TATTSI  Address to identify the Talkgroup Subscription/Attachment Service  
FFFFFD16  ALLMSIDL  ID used to address all MS at one site as a talkgroup  
FFFFFE16  ALLMSIDZ  ID used to address all MS in a subset of the system's sites as a talkgroup  
FFFFFF16  ALLMSID  ID used to address all MS (AllCall) in every site in the system as a talkgroup  

DMR VALUE  Alias  Remark  
00000016  ADRNULL  An ID that is not assigned to any entity  
00016  CHNULL  A logical physical channel that is not assigned  
11112  DigitNULL  An identifier that is used to fill unused BCD Information Elements  

Annex B (normative): Opcode Reference Lists 

B.1 CSBK/MBC/UDT Opcode List 
Table B.1: CSBK/MBC/UDT Opcode List 

OPCODE  OPCODE2  Description  Alias  
Channel Grant  
48  11 00002  Private Voice Channel Grant  PV_GRANT  
49  11 00012  Talkgroup Voice Channel Grant  TV_GRANT  
50  11 00102  Private Broadcast Voice Channel Grant  BTV_GRANT  
51  11 00112  Private Data Channel Grant: Single Item  PD_GRANT  
52  11 01002  Talkgroup Data Channel Grant: Single Item  TD_GRANT  
53  11 01012  Duplex Private Voice Channel Grant  PV_GRANT_ DX  
54  11 01102  Duplex Private Data Channel Grant  PD_GRANT_ DX  
55  11 01112  Private Data Channel Grant: Multi-Item  PD_GRANT_ MI  
56  11 10002  Talkgroup Data Channel Grant: Multi-Item  TD_GRANT_ MI  
Move  
57  11 10012  Move PDUs  C_MOVE  
Aloha  
25  01 10012  Aloha PDUs for the random access protocol  C_ALOHA  
Announcements  
40  10 10002  Announcement PDUs that shall not demand a response.  Announce/Withdraw TSCC Specify call Timers Vote now advice Announce local time Broadcast Mass Registration Announce a logical physical channel relationship Announce adjacent site information  C_BCAST  
46  10 11102  Clear  P_CLEAR  
47  10 11112  Protect  P_PROTECT  
AHOY PDUs  
28  01 11002  Ahoy - enquiry from the TSCC that demands a response from MS  C_AHOY P_AHOY  
Acknowledgements  
32  10 00002  Acknowledgement response outbound TSCC  C_ACKD  
33  10 00012  Acknowledgement response inbound TSCC  C_ACKU  
34  10 00102  Acknowledgement response outbound Payload  P_ACKD  
35  10 00112  Acknowledgement response inbound Payload  P_ACKU  
UDT Header  
26  01 10102  Unified Data Transport outbound Header  C_UDTHD  
27  01 10112  Unified Data Transport inbound Header  C_UDTHU  
36  10 01002  Unified Data Transport for DGNA outbound Header  C_DGNAHD  
37  10 01012  Unified Data Transport for DGNA inbound Header  C_DGNAHU  
Random Access Service Request  
31  01 11112  Random Access Service Request  C_RAND  
Ackvitation  
30  01 11102  Ackvitation PDU  C_ACKVIT  
Maintenance PDU  
42  10 10102  Maintenance  P_MAINT  
BS Outbound Activation  

56  11 10002  BS Outbound Activation (see TS102 361-2 [6])  BS_Dwn_Act  

B.2 Short Link Control Opcode List 
Table B.2: SLCO Opcode List 

SLCO  Description  Alias  
00002  Null Message  (see note)  
00012  Activity Update  (see note)  
00102  Control Channel System Parameters and slot counter  SYS_Parm  
00112  Payload Channel System Parameters  P_SYS_Parms  
01002 to 10112  Reserved  
11002 to 11112  Manufacturer Selectable  
NOTE: Defined in ETSI TS 102 361-2 [6].  


B.3 Appended Data Information Elements 
B.3.0 Appended Data Information Elements - Introduction 
A UDT PDU may carry information elements. A UDT header PDU carries the source and destination addresses and a UDT Format information element that prescribes the format of the appended data. 
The UDT Header is the first block of a multi-block UDT. The number of blocks making up the multi-block UDT is specified by the UAB information element. All PDUs are specified in clause 7.2. 
UDT HEADER  

 7  6  5  4  3  2  1  0  
Octet  0  IG  A  RSVD  FORMAT  
Octet  1  SAP  UDT FORMAT  
Octet  2  TARGET ADDRESS OR GATEWAY(24)  
Octet  3  
Octet  4  
Octet  5  SOURCE ADDRESS OR GATEWAY(24)  
Octet  6  
Octet  7  
Octet  8  PAD NIBBLE  0  UAB  
Octet  9  SF  PF  OPCODE  

HEADER BLOCK 
Figure B.1: UDT Header Block 

B.3.1 Appended Data Binary Format 
Appended data is binary coded. Up to four appended UDT blocks may be concatenated with the UDT header to form a multi-block UDT PDU. Up to 368 bits may be transported. For binary format transport the Pad Nibble information element in the UDT header is set to 0 00002. If variable length binary data is being transported, the last bit of the user 
data may identified as follows: 
 A 02 is appended to the user data and the remaining bits to fill a UDT block are set to 12. The UDT header and appended blocks are then transmitted. 
 The receiver may identify the end of user data by counting backwards until the first 02 is reached. That point is one bit past the user data. 
 In this case the maximum number of applicable data bits is 96 + 96 + 96 + 79 = 367. Figures B.2, B.3, B.4 and B.5 assume variable length binary data is being transmitted. 
APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(80)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  

APPENDED UDT #1 
Figure B.2: Unified Data Transport Format (Binary) 1 bit to 79 bits 
One appended UDT may transport from 1 bit to 79 bits (because the last user bit shall be identified by adding a 02 to the end of the user data). 
APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(96)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  
Octet 10  
Octet 11  

APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(80)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  

APPENDED UDT #2 
APPENDED UDT #1 
Figure B.3: Unified Data Transport Format (Binary) 80 bits to 175 bits 
Two appended UDTs may transport from 80 bits to (96 + 79) = 175 bits. 
APPENDED UDT #1 APPENDED UDT #2 
Figure B.4: Unified Data Transport Format (Binary) 176 bits to 271 bits 
ETSI 
APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(96)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  
Octet 10  
Octet 11  

APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(96)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  
Octet 10  
Octet 11  

APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(80)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  

APPENDED UDT #3 
Three appended UDTs may transport from 176 bits to (96 + 96 + 79) = 271 bits. 
APPENDED UDT #1 APPENDED UDT #2 APPENDED UDT #3 
Figure B.5: Unified Data Transport Format (Binary) 272 bits to 367 bits 
Four appended UDTs may transport from 272 bits to (96 + 96 + 96 + 79) = 367 bits. 

B.3.2 Appended Data Addressing Format 
Appended data is 24 bit address coded. One appended data UDTs may be concatenated with a UDT appended data header to form a multi-block UDT PDU. Up to three addresses may be transported appending a single block, seven addresses appending two blocks, eleven addresses appending three blocks and 15 addresses appending four blocks. 
Unused address information elements are filled with ADRNULL. 
APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(96)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  
Octet 10  
Octet 11  

APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(96)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  
Octet 10  
Octet 11  

APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(96)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  
Octet 10  
Octet 11  

APPENDED DATA UDTF=00002  

 7  6  5  4  3  2  1  0  
Octet 0  Binary(80)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  

APPENDED UDT #4 
APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  
RSVD(7)  OK  
Octet 1  ADDRESS1(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS2(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS3(24)  
Octet 8  
Octet 9  

APPENDED UDT #1 
Figure B.6: Appended Data Address Format (3 addresses) 
APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  RSVD(7)  OK  
Octet 1  ADDRESS1(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS2(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS3(24)  
Octet 8  
Octet 9  
Octet 10  ADDRESS4[part](16)  
Octet 11  

APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  ADDRESS4[part](8)  
Octet 1  ADDRESS5(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS6(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS7(24)  
Octet 8  
Octet 9  

APPENDED UDT #2 
APPENDED UDT #1 
Figure B.7: Appended Data Address Format (7 addresses) 
ETSI 
APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  RSVD(4)  OK  
Octet 1  ADDRESS1(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS2(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS3(24)  
Octet 8  
Octet 9  
Octet 10  ADDRESS4[part](16)  
Octet 11  

APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  ADDRESS4[part](8)  
Octet 1  ADDRESS5(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS6(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS7(24)  
Octet 8  
Octet 9  
Octet 10  ADDRESS8[part](16)  
Octet 11  

APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  ADDRESS8[part](8)  
Octet 1  ADDRESS9(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS10(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS11(24)  
Octet 8  
Octet 9  

APPENDED UDT #3 
APPENDED UDT #1 APPENDED UDT #2 
Figure B.8: Appended Data Address Format (11 addresses) 
APPENDED UDT #1 APPENDED UDT #2 APPENDED UDT #3 
Figure B.9: Appended Data Address Format (15 addresses) 

B.3.3 Appended Data BCD Format 
Appended data is BCD coded. Up to four appended data UDTs may be concatenated with UDT appended data header to form a multi-block UDT PDU. Up to 92 BCD digits may be transported. The Pad Nibble information element in the UDT header specifies the number of 4 bit nibbles (11112) that have been padded to the user digits to completely fill a 
block. 
The number of user BCD digits and the corresponding value of UAB and Pad Nibble is given by table B.3. 
Clause 7.2.9 lists the abbreviated coding if the BCD digits represent telephone dialled strings. The BCD digits are transmitted in the dialled order (i.e. octet 0 bits 7 to 4 in figure B.7 is the earliest digit in the dialling order). 
APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  RSVD(7)  OK  
Octet 1  ADDRESS1(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS2(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS3(24)  
Octet 8  
Octet 9  
Octet 10  ADDRESS4[part](16)  
Octet 11  

APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  ADDRESS4[part](8)  
Octet 1  ADDRESS5(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS6(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS7(24)  
Octet 8  
Octet 9  
Octet 10  ADDRESS8[part](16)  
Octet 11  

APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  ADDRESS8[part](8)  
Octet 1  ADDRESS9(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS10(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS11(24)  
Octet 8  
Octet 9  
Octet 10  ADDRESS12[part](16)  
Octet 11  

APPENDED DATA UDTF=00012  

 7  6  5  4  3  2  1  0  
Octet 0  ADDRESS12[part](8)  
Octet 1  ADDRESS13(24)  
Octet 2  
Octet 3  
Octet 4  ADDRESS14(24)  
Octet 5  
Octet 6  
Octet 7  ADDRESS15(24)  
Octet 8  
Octet 9  

APPENDED UDT #4 
APPENDED DATA UDTF=00102  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4) Digit(4) Digit(4)  Digit(4) Digit(4) Digit(4)  
Octet 4  
Octet 5  
Octet 6  Digit(4)  Digit(4)  
Octet 7  Digit(4) Digit(4)  Digit(4) Digit(4)  
Octet 8  
Octet 9  

Table B.3: Relationship of User BCD digits, UAB and Pad Nibble Information Elements 
User BCD Digits  UAB  Pad Nibble  
1  0  19  
2  0  18  
3  0  17  
4  0  16  
5  0  15  
6  0  14  
7  0  13  
8  0  12  
9  0  11  
10  0  10  
11  0  9  
12  0  8  
13  0  7  
14  0  6  
15  0  5  
16  0  4  
17  0  3  
18  0  2  
19  0  1  
20  0  0  
21  1  23  
22  1  22  
23  1  21  
24  1  20  
25  1  19  
26  1  18  
27  1  17  
28  1  16  
29  1  15  
30  1  14  
31  1  13  

User BCD Digits  UAB  Pad Nibble  
32  1  12  
33  1  11  
34  1  10  
35  1  9  
36  1  8  
37  1  7  
38  1  6  
39  1  5  
40  1  4  
41  1  3  
42  1  2  
43  1  1  
44  1  0  
45  2  23  
46  2  22  
47  2  21  
48  2  20  
49  2  19  
50  2  18  
51  2  17  
52  2  16  
53  2  15  
54  2  14  
55  2  13  
56  2  12  
57  2  11  
58  2  10  
59  2  9  
60  2  8  
61  2  7  
62  2  6  

User BCD Digits  UAB  Pad Nibble  
63  2  5  
64  2  4  
65  2  3  
66  2  2  
67  2  1  
68  2  0  
69  3  23  
70  3  22  
71  3  21  
72  3  20  
73  3  19  
74  3  18  
75  3  17  
76  3  16  
77  3  15  
78  3  14  
79  3  13  
80  3  12  
81  3  11  
82  3  10  
83  3  9  
84  3  8  
85  3  7  
86  3  6  
87  3  5  
88  3  4  
89  3  3  
90  3  2  
91  3  1  
92  3  0  

Digit(4) Digit(4) 
APPENDED UDT #1 
Figure B.10: Unified Data Transport Format (BCD) 1 digit to 20 digits 
APPENDED DATA UDTF=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4) Digit(4)  Digit(4) Digit(4)  
Octet 4  
Octet 5  
Octet 6  Digit(4) Digit(4)  Digit(4) Digit(4)  
Octet 7  Digit(4)  Digit(4)  
Octet 8  Digit(4)  Digit(4)  
Octet 9  Digit(4)  Digit(4)  
Octet 10  Digit(4)  Digit(4)  
Octet 11  

APPENDED DATA UDT F=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4) Digit(4)  Digit(4) Digit(4)  
Octet 4  
Octet 5  
Octet 6  Digit(4) Digit(4)  Digit(4) Digit(4)  
Octet 7  Digit(4)  Digit(4)  
Octet 8  
Octet 9  Digit(4)  Digit(4)  

APPENDED DATA UDTF=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4)  Digit(4)  
Octet 4  Digit(4)  Digit(4)  
Octet 5  Digit(4)  Digit(4)  
Octet 6  Digit(4)  Digit(4)  
Octet 7  Digit(4)  Digit(4)  
Octet 8  Digit(4)  Digit(4)  
Octet 9  Digit(4)  Digit(4)  
Octet 10  Digit(4)  Digit(4)  
Octet 11  
Figure B.12: Unified Data Transport Format (BCD) 45 digits to 65 digits 


APPENDED DATA UDTF=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4)  Digit(4)  
Octet 4  Digit(4)  Digit(4)  
Octet 5  Digit(4)  Digit(4)  
Octet 6  Digit(4)  Digit(4)  
Octet 7  Digit(4)  Digit(4)  
Octet 8  Digit(4)  Digit(4)  
Octet 9  Digit(4)  Digit(4)  
Octet 10  Digit(4)  Digit(4)  
Octet 11  

APPENDED DATA UDT F=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4)  Digit(4)  
Octet 4  Digit(4)  Digit(4)  
Octet 5  Digit(4)  Digit(4)  
Octet 6  Digit(4)  Digit(4)  
Octet 7  Digit(4) Digit(4)  Digit(4) Digit(4)  
Octet 8  
Octet 9  

APPENDED DATA UDT F=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4) Digit(4) Digit(4)  Digit(4) Digit(4) Digit(4)  
Octet 4  
Octet 5  
Octet 6  Digit(4)  Digit(4)  
Octet 7  Digit(4)  Digit(4)  
Octet 8  Digit(4)  Digit(4)  
Octet 9  Digit(4)  Digit(4)  
Octet 10  Digit(4)  Digit(4)  
Octet 11  

APPENDED DATA UDTF=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4) Digit(4) Digit(4)  Digit(4) Digit(4) Digit(4)  
Octet 4  
Octet 5  
Octet 6  Digit(4)  Digit(4)  
Octet 7  Digit(4)  Digit(4)  
Octet 8  Digit(4)  Digit(4)  
Octet 9  Digit(4)  Digit(4)  
Octet 10  Digit(4)  Digit(4)  
Octet 11  

APPENDED DATA UDT F=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4) Digit(4) Digit(4)  Digit(4) Digit(4) Digit(4)  
Octet 4  
Octet 5  
Octet 6  Digit(4)  Digit(4)  
Octet 7  Digit(4)  Digit(4)  
Octet 8  Digit(4)  Digit(4)  
Octet 9  Digit(4)  Digit(4)  
Octet 10  Digit(4)  Digit(4)  
Octet 11  

APPENDED DATA UDTF=00102  
7  6  5  4  3  2  1  0  
Octet 0  Digit(4)  Digit(4)  
Octet 1  Digit(4)  Digit(4)  
Octet 2  Digit(4)  Digit(4)  
Octet 3  Digit(4) Digit(4) Digit(4)  Digit(4) Digit(4) Digit(4)  
Octet 4  
Octet 5  
Octet 6  Digit(4)  Digit(4)  
Octet 7  Digit(4)  Digit(4)  
Octet 8  
Octet 9  Digit(4)  
Digit(4)  

286 ETSI TS 102 361-4 V1.12.1 (2023-07) 
Digit(4) Digit(4) 
APPENDED UDT #2 
Digit(4) Digit(4) 
APPENDED UDT #1 
Figure B.11: Unified Data Transport Format (BCD) 21 digits to 44 digits 
Digit(4) Digit(4) 
APPENDED UDT #3 
Digit(4) Digit(4) Digit(4) Digit(4) 
APPENDED UDT #1 APPENDED UDT #2 
Digit(4) Digit(4) 
Digit(4) Digit(4) Digit(4) Digit(4) Digit(4) Digit(4) 
APPENDED UDT #1 APPENDED UDT #2 APPENDED UDT #3 
Figure B.13: Unified Data Transport Format (BCD) 66 digits to 92 digits 

B.3.4 Appended Data ISO 7 bit character set Format 
Appended data is coded ISO 7 bit character set (ISO/IEC 646 [11]). Up to four appended data UDTs may be concatenated with a UDT appended data header to form a multi-block UDT PDU. Up to 52 ISO 7 bit characters may be transported. The Pad Nibble information element in the UDT header specifies the number of 4 bit nibbles (11112) that 
have been padded to the 7 bit character symbols to completely fill a block. An exact fit of pad nibbles is not always possible but there is sufficient indication to unambiguously specify the number of text symbols. 
The number of user 7 bit character symbols, and the corresponding value of UAB and Pad Nibble is given by table B.4. 
APPENDED UDT #4 
ETSI 
APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  
 
Octet 1  Digit(7)  
Octet 2  Digit(7)  
 
Octet 3  Digit(7)  Digit(7)  
Octet 4  
 Digit(7)--­ 
Octet 5  Digit(7)  
Octet 6  
 Digit(7)  
Octet 7  Digit(7)  
 
Octet 8  Digit(7)  ---­ 
Octet 9  
 1  1  1  
Figure B.14: Unified Data Transport Format (ISO 7 bit) 1 text symbol to 11 text symbols 


APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  
 
Octet 1  Digit(7)  
Octet 2  Digit(7)  
 
Octet 3  Digit(7)  Digit(7)  
Octet 4  
 Digit(7)­-­ 
Octet 5  Digit(7)  
Octet 6  
 Digit(7)  
Octet 7  Digit(7)  
 
Octet 8  Digit(7)  ---­ 
Octet 9  Digit(7)  
 
Octet 10  Digit(7)  Digit(7)  
Octet 11  -­ 
Figure B.15: Unified Data Transport Format (ISO 7 bit) 12 text symbols to 25 text symbols 


APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  
Octet 1  
 Digit(7)  
Octet 2  Digit(7)  
 
Octet 3  Digit(7)  ---­ 
Octet 4  Digit(7)  
Octet 5  Digit(7)  Digit(7)  
Octet 6  
 Digit(7)--­ 
Octet 7  Digit(7)  
Octet 8  
 Digit(7)  
Octet 9  
 1  

Table B.4: Relationship of ISO 7 bit Symbols, UAB and Pad Nibble Information Elements 
User 7 bit Symbols  UAB  Pad Nibble  
1  0  18  
2  0  16 
3  0  14 
4  0  13 
5  0  11 
6  0  9  
7  0  7  
8  0  6  
9  0  4  
10  0  2  
11  0  0  
12  1  23  
13  1  21  
14  1  19  
15  1  17  
16  1  16 
17  1  14  
18  1  12  

User 7 bit Symbols  UAB  Pad Nibble  
19  1  10  
20  1  9  
21  1  7  
22  1  5  
23  1  3  
24  1  2  
25  1  0  
26  2  22 
 27  2  20 
 28  2  19 
 29  2  17 
30  2  15  
31  2  13  
32  2  12  
33  2  10  
34  2  8  
35  2  6  
36  2  5  


Digit(7) 
APPENDED UDT #1 
Digit(7) 
APPENDED UDT #2 
Digit(7)­
APPENDED UDT #1 
APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  
 
Octet 1  Digit(7)  
Octet 2  Digit(7)  
 
Octet 3  Digit(7)  Digit(7)  
Octet 4  
 Digit(7)--­ 
Octet 5  
Octet 6  
 Digit(7) Digit(7)  
Octet 7  Digit(7)  
 
Octet 8  Digit(7)  ---­ 
Octet 9  Digit(7)  
 
Octet 10  Digit(7)  Digit(7)  
Octet 11  
 
Figure B.16: Unified Data Transport Format (ISO 7 bit) 26 text symbols to 38 text symbols 


APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  
Octet 1  
 Digit(7)  
Octet 2  Digit(7)  
 
Octet 3  Digit(7)  ---­ 
Octet 4  Digit(7)  
Octet 5  
 
Octet 6  
Digit(7)  Digit(7) Digit(7)-­- 
Octet 7  Digit(7)  
Octet 8  
 Digit(7)  
Octet 9  Digit(7)  
 
Octet 10  Digit(7)  
 
Octet 11  
 
 

APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  
 
Octet 1  Digit(7)  
Octet 2  Digit(7)  
 
Octet 3  Digit(7)  Digit(7)  
Octet 4  Digit(7)--­ 
Octet 5  Digit(7)  
Octet 6  
 Digit(7)  
Octet 7  Digit(7)  
 
Octet 8  Digit(7)  ---­ 
Octet 9  Digit(7)  
 
Octet 10  Digit(7)  Digit(7)  
Octet 11  --­ 
Figure B.17: Unified Data Transport Format (ISO 7 bit) 39 text symbols to 52 text symbols 


APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  
Octet 1  
 Digit(7)  
Octet 2  Digit(7)  
 
Octet 3  Digit(7)  ---­ 
Octet 4  Digit(7)  
Octet 5  Digit(7)  Digit(7)  
Octet 6  Digit(7)--­ 
Octet 7  Digit(7)  
Octet 8  
 Digit(7)  
Octet 9  Digit(7)  
 
Octet 10  Digit(7)  
 
Octet 11  
 
 

APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  Digit(7)  
Octet 1  Digit(7)--­ 
Octet 2  Digit(7)  
Octet 3  
 Digit(7)  
Octet 4  Digit(7)  
 
Octet 5  Digit(7)  
 
Octet 6  Digit(7)  
Octet 7  Digit(7)  Digit(7)  
Octet 8  Digit(7)--­ 
Octet 9  Digit(7)  
Octet 10  
 Digit(7)  
Octet 11  
 
 

APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  ---­ 
Octet 1  Digit(7)  
Octet 2  Digit(7)  Digit(7)  
Octet 3  Digit(7)--­ 
Octet 4  Digit(7)  
Octet 5  
 Digit(7)  
Octet 6  Digit(7)  
 
Octet 7  Digit(7)  
 
Octet 8  Digit(7)  
 
Octet 9  
 1  1  1  1  

288 ETSI TS 102 361-4 V1.12.1 (2023-07) 
APPENDED DATA UDTF=00112  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(7)  Digit(7)  
Octet 1  Digit(7)-­- 
Octet 2  Digit(7)  
Octet 3  
 Digit(7)  
Octet 4  
 
Octet 5  Digit(7) Digit(7)  ---­ 
Octet 6  Digit(7)  
Octet 7  Digit(7)  Digit(7)  
Octet 8  Digit(7)-­- 
Octet 9  
 1  1  
 

APPENDED UDT #3 
Digit(7)--­Digit(7) 
APPENDED UDT #1 APPENDED UDT #2 
Digit(7) 
APPENDED UDT #4 
Digit(7) Digit(7) Digit(7) 
APPENDED UDT #1 APPENDED UDT #2 APPENDED UDT #3 

B.3.5 Appended Data ISO 8 bit Character Format 
Appended data is coded ISO 8 bit character format (ISO/IEC 8859 [12]). Up to four appended data UDTs may be concatenated with UDT appended data header to form a multi-block UDT PDU. Up to 46 ISO 8 bit characters may be transported. The Pad Nibble information element in the UDT header specifies the number of 4 bit nibbles (11112) that 
have been padded to the Character symbols to completely fill a block. 
The number of user 8 bit characters, and the corresponding value of UAB and Pad Nibble is given by table B.5. 
ETSI 
APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(8)  
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  
 
Figure B.18: Unified Data Transport Format (8 bit character) 1 character symbol to 10 character symbols 


APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  
 
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  Digit(8)  
Octet 10  Digit(8)  
Octet 11  Digit(8)  
Figure B.19: Unified Data Transport Format (8 bit character) 11 character symbols to 22 character symbols 


APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  
 
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  Digit(8)  

Table B.5: Relationship of 8 bit Character Symbols, UAB and Pad Nibble Information Elements 
User Character Symbols  UAB  Pad Nibble  
1  0  18  
2  0  16 
3  0  14 
4  0  12 
5  0  10 
6  0  8  
7  0  6  
8  0  4  
9  0  2  
10  0  0  
11  1  22  
12  1  20  
13  1  18  
14  1  16 
15  1  14  
16  1  12  

User Character Symbols  UAB  Pad Nibble  
17  1  10  
18  1  8  
19  1  6  
20  1  4  
21  1  2  
22  1  0  
23  2  22 
 24  2  20 
 25  2  18 
 26  2  16 
27  2  14  
28  2  12  
29  2  10  
30  2  8  
31  2  6  
32  2  4  


Digit(8) 
APPENDED UDT #1 
Digit(8) 
APPENDED UDT #2 
Digit(8) 
APPENDED UDT #1 
APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  
 
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  
Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  Digit(8)  
Octet 10  Digit(8)  
Octet 11  Digit(8)  
Figure B.20: Unified Data Transport Format (8 bit character) 23 character symbols to 34 character symbols 


APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  
 
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  
Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  Digit(8)  
Octet 10  Digit(8)  
Octet 11  Digit(8)  

APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  
 
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  Digit(8)  

APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(8)  
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  Digit(8)  
Octet 10  Digit(8)  
Octet 11  
 
Figure B.21: Unified Data Transport Format (8 bit character) 35 character symbols to 46 character symbols 


APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(8)  
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  Digit(8)  
Octet 10  Digit(8)  
Octet 11  
 

APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(8)  
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  Digit(8)  
Octet 10  Digit(8)  
Octet 11  
 

APPENDED DATA UDTF=01002  

 7  6  5  4  3  2  1  0  
Octet 0  Digit(8)  
Octet 1  Digit(8)  
Octet 2  Digit(8)  
Octet 3  Digit(8)  
Octet 4  Digit(8)  
Octet 5  Digit(8)  
Octet 6  Digit(8)  
Octet 7  Digit(8)  
Octet 8  Digit(8)  
Octet 9  
 

Digit(8) 
APPENDED UDT #3 
Digit(8) Digit(8) 
APPENDED UDT #1 APPENDED UDT #2 
Digit(8) 
APPENDED UDT #4 
Digit(8) Digit(8) Digit(8) 
APPENDED UDT #1 APPENDED UDT #2 APPENDED UDT #3 

B.3.6 Appended Data NMEA (IEC 61162-1) Format 
B.3.6.0 Appended Data NMEA - Introduction 
Appended data is with essential data elements for NMEA formatted (IEC 61162-1 [8]) coordinates. Up to two appended data UDTs may be concatenated with a UDT appended data header to form a multi-block UDT PDU. Three formats are described, a short NMEA format where the NMEA data is contained in one appended UDT, and a long format where two appended blocks either enable additional NMEA data to be carried or permit manufacturers to implement a customized format.  
For the NMEA format UDT the Pad Nibble information element in the UDT header shall be set to 0 00002. If the appended blocks represent the Short NMEA format then UAB in the UDT header shall be set to 002. If the appended blocks represent the long specified NMEA format then UAB shall be set to 012. If the appended blocks represent the long unspecified NMEA format then UAB shall be set to 102. The information elements for the appended blocks are described in table B.7. 
Table B.6 specifies the value of UAB and Pad Nibble. 
APPENDED DATA UDTF=01012  

 7  6  5  4  3  2  1  0  
Octet 0  C  NS  EW  Q  SPEED(7)--­ 
Octet 1  -­ 
NDEG(7)--­ 
Octet 2  -­ NMIN(6)  
Octet 3  NMINF(14)--­ 
Octet 4  -------­ --­ 
Octet 5  ---EDEG(8)  -­ 
Octet 6  --EMINmm(6)  --­ 
Octet 7  ----EMINF(14)---­ 
Octet 8  --- 
UTChh(5)  - 
Octet 9  
 
 
Figure B.22: Appended Data Short NMEA Format 


APPENDED DATA UDTF=01012  

 7  6  5  4  3  2  1  0  
Octet 0  C  NS  EW  Q  
 
Octet 1  -­ SPEED(7)--­-­- 
Octet 2  -­ NDEG(7) 
Octet 3  NMIN(6) --­ 
Octet 4  NMINF(14)-------­ -­- 
Octet 5  
 -­ 
Octet 6  ---EDEG( 8) -­- 
Octet 7  --EMINmm(6) -­ 
Octet 8  --­ --EMINF(14)----UTChh - 
Octet 9  
UTCmm (5)  
Octet 10  -­ (6) UTCss6(6)  
Octet 11  Spare(5)  
Figure B.23: Appended Data Long NMEA Format Specified 


Table B.6: Relationship of NMEA Format and UAB 

NMEA Format  UAB  Pad Nibble  
Short Format  002  0  
Long Format (format specified)  012  0  
Long Format (format unspecified)  102  0  
Reserved  112  0  


B.3.6.1 Short NMEA (IEC 61162-1) Format 
UAB in the UDT header is set to 002. The NMEA data is carried in one appended UDT. The UTCss3 information element carries the time in increments of 10 s. 
UTCmm(6) UTCss3(3) 
APPENDED UDT #1 

B.3.6.2 Long NMEA (IEC 61162-1) Format Specified 
UAB in the UDT header is set to 012. The NMEA data is carried in two appended UDTs. The UTCss6 information element carries the time in increments of 1 s. MFID is set to SFID (0000 00002). 
APPENDED DATA UDTF=01012  

 7  6  5  4  3  2  1  0  
Octet 0  
 -­- 
Octet 1  Spare(7)  
Octet 2  ---COG(9) SPARE(64)  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  

APPENDED UDT #2 
Spare(8) 
APPENDED UDT #1 

B.3.6.3 Long NMEA (IEC 61162-1) Format Unspecified 
UAB in the UDT header is set to 102. The NMEA data is carried in two appended UDTs. MFID is set to the manufacturers FID. 
APPENDED DATA UDTF=01012  

 7  6  5  4  3  2  1  0  
Octet 0  SPARE(88)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  
Octet 10  
Octet 11  
 

APPENDED DATA UDTF=01012  

 7  6  5  4  3  2  1  0  
Octet 0  SPARE(80)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  

APPENDED UDT #2 
MFID(8) 
APPENDED UDT #1 
Figure B.24: Appended Data Long NMEA Format Unspecified Table B.7: Appended Data NMEA Elements 
Alias  Length  Value  Description  
C  1  0  Data is not encrypted  
1  Data is encrypted  
NS  1  0  Latitude Direction - South  
1  Latitude Direction - North  
EW  1  0  Longitude Direction - West  
1  Longitude Direction - East  
Q  1  0  GPS Quality Indicator - No fix  
1  GPS Quality Indicator - Fix Valid  
SPEED  7  Speed in knots (0 to 126)  127 = greater than 126 knots  
NDEG  7  Latitude Degrees (00 to 89)  
NMINmm  6  Latitude Minutes (00 to 59)  
NMINF  14  Latitude Fractions of minutes (0000 to 9999)  
EDEG  8  Longitude Degrees (000 to 179)  
EMINmm  6  Longitude Minutes (00 to 59)  
EMINF  14  Longitude Fractions of minutes (0000 to 9999)  
UTChh  5  UTC time hours (00 to 23)  
UTCmm  6  UTC time minutes (00 to 59)  
UTCss3  3  UTC time 10's seconds ([0 to 5] x 10)  
UTCss6  6  UTC time seconds (00 to 59)  
DOP  5  Dilution of Precision (1 to 31)  
COG  9  Course over ground in degrees (0 to 359)  
Spare  Freely Available for manufacturers  
MFID  8  Manufacturers Feature Set ID (see ETSI TS 102 361-1 [5], Annex H)  



B.3.7 UDT DMR IP Format 
The UDT IP format is illustrated in figures B.25 and B.26. 
APPENDED DATA UDTF=01102  

 7  6  5  4  3  2  1  0  
Octet 0  IPV4 ADDRESS(32)  
Octet 1  
Octet 2  
Octet 3  
Octet 4  RSVD(48)  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  

APPENDED UDT #1 
Figure B.25: Appended Data IPV4 Format 
APPENDED DATA UDTF=01102  

 7  6  5  4  3  2  1  0  
Octet 0  IPV6 ADDRESS(96)---­ 
Octet 1  
Octet 2  
Octet 3  
Octet 4  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  
Octet 10  
Octet 11  

APPEN DED DATA UDTF=01102  

 7  6  5  4  3  2  1  0  
Octet 0  IPV6 ADDRESS(32)---­ 
Octet 1  
Octet 2  
Octet 3  
Octet 4  RSVD(48)  
Octet 5  
Octet 6  
Octet 7  
Octet 8  
Octet 9  

APPENDED UDT #2 
APPENDED UDT #1 
Figure B.26: Appended Data IPV6 Format 
B.3.8 Appended Data Unicode 16 bit UTF-16BE Character Format 
Appended data is coded UTF-16BE Unicode (IEC 61162-1 [8]) 16 bit character format. Up to four appended data UDTs may be concatenated with UDT appended data header to form a multi-block UDT PDU. Up to 23 Unicode characters may be transported. The Pad Nibble information element in the UDT header specifies the number of 4 bit nibbles (11112) that have been padded to the Unicode Characters to completely fill a block. 
The number of user Unicode 16 bit symbols, and the corresponding value of UAB and Pad Nibble is given by table B.8. 
Table B.8: Relationship of 16 bit Unicode Character Symbols, UAB and Pad Nibble Information Elements 

User Character Symbols  UAB  Pad Nibble  
1  0  16  
2  0  12 
3  0  8  
4  0  4  
5  0  0  
6  1  20  
7  1  16 
8  1  12  

User Character Symbols  UAB  Pad Nibble  
9  1  8  
10  1  4  
11  1  0  
12  2  20 
 13  2  16 
14  2  12  
15  2  8  
16  2  4  

User Character Symbols  UAB  Pad Nibble  
17  2  0  
18  3  20  
19  3  16  
20  3  12  
21  3  8  
22  3  4  
23  3  0  

294 ETSI TS 102 361-4 V1.12.1 (2023-07) 
APPENDED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  

APPENDED UDT #1 
Figure B.27: Unified Data Transport Format (16 bit character) 1 character symbol to 5 character symbols 
APPENDED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  
Octet 10  Character Encoding(16)  
Octet 11  

APPENDED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  

APPENDED UDT #2 
APPENDED UDT #1 
Figure B.28: Unified Data Transport Format (16 bit character) 6 character symbols to 11 character symbols 
APPENDED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  
Octet 10  Character Encoding(16)  
Octet 11  

APPENDED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  
Octet 10  Character Encoding(16)  
Octet 11  

APPEN DED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  

APPENDED UDT #3 
APPENDED UDT #1 APPENDED UDT #2 
Figure B.29: Unified Data Transport Format (16 bit character) 12 character symbols to 17 character symbols 
ETSI 
295 ETSI TS 102 361-4 V1.12.1 (2023-07) 
APPENDED UDT #1 APPENDED UDT #2 APPENDED UDT #3 
Figure B.30: Unified Data Transport Format (16 bit character) 18 character symbols to 23 character symbols 

B.3.9 Appended Data Mixed Format 
Appended data is coded with one 24 bit address and UTF-16BE Unicode (IEC 61162-1 [8]) 16 bit character format. Up to four appended data UDTs may be concatenated with UDT appended data header to form a multi-block UDT PDU. One 24 bit address and up to 21 Unicode characters may be transported. The Pad Nibble information element in the UDT header specifies the number of 4 bit nibbles (11112) that have been padded to the Unicode Characters to 
completely fill a block. 
The number of user 16 bit symbols, and the corresponding value of UAB and Pad Nibble for the Appended data Mixed Format is given by table B.9. 
APPENDED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  
Octet 10  Character Encoding(16)  
Octet 11  

APPENDED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  
Octet 10  Character Encoding(16)  
Octet 11  

APPEN DED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  
Octet 10  Character Encoding(16)  
Octet 11  

APPENDED DATA UDTF=01112  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding(16)  
Octet 1  
Octet 2  Character Encoding(16)  
Octet 3  
Octet 4  Character Encoding(16)  
Octet 5  
Octet 6  Character Encoding(16)  
Octet 7  
Octet 8  Character Encoding(16)  
Octet 9  

APPENDED UDT #4 
Table B.9: Relationship of 16 bit Unicode Character Symbols, UAB and Pad Nibble Information Elements 

User Character Symbols  UAB  Pad Nibble  
1  0  8  
2  0  4  
3  0  0  
4  1  20  
5  1  16  
6  1  12  
7  1  8  
8  1  4  

User Character Symbols  UAB  Pad Nibble  
9  1  0  
10  2  20  
11  2  16  
12  2  12  
13  2  8  
14  2  4  
15  2  0  
16  3  20  

User Character Symbols  UAB  Pad Nibble  
17  3  16  
18  3  12  
19  3  8  
20  3  4  
21  3  0  




APPEN DED DATA UDTF=10102  

 7  6  5  4  3  2  1  0  
Octet 0  RESERVED(7)  OK  
Octet 1  ADDRESS(24)  
Octet 2  
Octet 3  
Octet 4  Character Encoding1(16)  
Octet 5  
Octet 6  Character Encoding2(16)  
Octet 7  
Octet 8  Character Encoding3(16)  
Octet 9  

APPENDED UDT #1 
Figure B.31: Appended data Mixed Format. One address + 16 bit characters. 1 character symbol to 3 character symbols 
ETSI 
296 ETSI TS 102 361-4 V1.12.1 (2023-07) 
APPEN DE7  D D6  AT5  A U4  DTF=3  102  102 1  0  
Octet 0  OK  
Octet 1  RESERVED(7) ADDRESS(24)  
Octet 2  
Octet 3  
Octet 4  Character Encoding1(16)  
Octet 5  
Octet 6  Character Encoding2(16)  
Octet 7  
Octet 8  Character Encoding3(16)  
Octet 9  
Octet 10  Character Encoding4(16)  
Octet 11  

APPE NDE7  D D6  AT5  A U4  DT3  F=102  102 1  0  
Octet 0  Character Encoding5(16)  
Octet 1  
Octet 2  Character Encoding6(16)  
Octet 3  
Octet 4  Character Encoding7(16)  
Octet 5  
Octet 6  Character Encoding8(16)  
Octet 7  
Octet 8  Character Encoding9(16)  
Octet 9  

APPENDED UDT #2 
APPENDED UDT #1 
Figure B.32: Appended data Mixed Format. One address + 16 bit characters. 4 character symbols to 9 character symbols 
APPENDED DATA UDTF=10102  

 7  6  5  4  3  2  1  0  
Octet 0  RESERVED(7)  OK  
Octet 1  ADDRESS(24)  
Octet 2  
Octet 3  
Octet 4  Character Encoding1(16)  
Octet 5  
Octet 6  Character Encoding2(16)  
Octet 7  
Octet 8  Character Encoding3(16)  
Octet 9  
Octet 10  Character Encoding4(16)  
Octet 11  

APPENDED DATA UDTF=10102  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding5(16)  
Octet 1  
Octet 2  Character Encoding6(16)  
Octet 3  
Octet 4  Character Encoding7(16)  
Octet 5  
Octet 6  Character Encoding8(16)  
Octet 7  
Octet 8  Character Encoding9(16)  
Octet 9  
Octet 10  Character Encoding10(16)  
Octet 11  

APPENDED DATA UDTF=10102  

 7  6  5  4  3  2  1  0  
Octet 0  Character Encoding11(16)  
Octet 1  
Octet 2  Character Encoding12(16)  
Octet 3  
Octet 4  Character Encoding13(16)  
Octet 5  
Octet 6  Character Encoding14(16)  
Octet 7  
Octet 8  Character Encoding15(16)  
Octet 9  

APPENDED UDT #3 
APPENDED UDT #1 APPENDED UDT #2 
Figure B.33: Unified Appended data Mixed Format. One address + 16 bit characters. 10 character symbols to 15 character symbols 
APPEN DE7  D D6  AT5  A U4  DT3  F=102  102 1  0  
Octet 0  R ESE RV 7)  OK  
Octet 1  ED(ADDRESS(24)  
Octet 2  
Octet 3  
Octet 4  Character Encoding1(16)  
Octet 5  
Octet 6  Character Encoding2(16)  
Octet 7  
Octet 8  Character Encoding3(16)  
Octet 9  
Octet 10  Character Encoding4(16)  
Octet 11  

APPEN DE7  D D6  AT5  A U4  DT3  F=102  102 1  0  
Octet 0  Character Encoding5(16)  
Octet 1  
Octet 2  Character Encoding6(16)  
Octet 3  
Octet 4  Character Encoding7(16)  
Octet 5  
Octet 6  Character Encoding8(16)  
Octet 7  
Octet 8  Character Encoding9(16)  
Octet 9  
Octet 10  Character Encoding10(16)  
Octet 11  

APPEN DE7  D D6  AT5  A U4  DTF=3  102  102 1  0  
Octet 0  Character Encoding11(16)  
Octet 1  
Octet 2  Character Encoding12(16)  
Octet 3  
Octet 4  Character Encoding13(16)  
Octet 5  
Octet 6  Character Encoding14(16)  
Octet 7  
Octet 8  Character Encoding15(16)  
Octet 9  
Octet 10  Character Encoding16(16)  
Octet 11  

APPEN DE7  D D6  AT5  A U4  DTF=3  102  102 1  0  
Octet 0  Character Encoding17(16)  
Octet 1  
Octet 2  Character Encoding18(16)  
Octet 3  
Octet 4  Character Encoding19(16)  
Octet 5  
Octet 6  Character Enco ding20(16)  
Octet 7  
Octet 8  Character Encoding21(16)  
Octet 9  

APPENDED UDT #4 
APPENDED UDT #1 APPENDED UDT #2 APPENDED UDT #3 
Figure B.34: Appended data Mixed Format. One address + 16 bit characters. 16 character symbols to 21 character symbols 

B.3.10 Location Information Protocol (LIP) 
A UDT is capable of transporting up to 46 bytes of Location Information Protocol (LIP) application data. The data formatting in the appended blocks is defined in ETSI TS 100 392-18-1 [14]. 
ETSI 
Annex C (informative): Physical Channel Plan 


C.1 Transmission and Reception 
C.1.1 RF carriers 
C.1.1.1 Nominal Carriers Frequencies 
The nominal carrier frequencies for DMR may be allocated in any of the frequency bands in the range 50 MHz to 999 MHz. Upper layers of the protocol stack define a single logical channel number that equates to a transmitter and receiver frequencies in the range 1 to 4 094. Since the DMR Standard supports re-assigning of existing analogue channels, flexibility may be provided where prescribed channel plans are suitable. 
DMR may therefore support: 
 
a number of fixed channel plans where the MS transmit frequency, the split between transmit and receive, the channel separation and if the receiver is high or low relative to the transmitter; 

 
a flexible channel plan whereby each logical channel may represent a transmitter and receiver frequency pair; 

 
a broadcast PDU that enables the TSCC to announce a logical/physical transmitter and receiver relationship; 

 
an extended channel grant PDU that specifies the physical transmitter and receiver frequencies. 


The higher DMR layers only have the logical CHAN SDU to define the physical frequencies. The additional parameters (type of channel plan, Tx/Rx separation, etc.) exist in the physical layer only and are programmed during personalization or manufacture of the equipment. A National Administration may mandate certain limitations on particular frequencies (such as transmitter power). 

C.1.1.2 Fixed Channel Plan 
The nominal MS Tx frequency fMS_Tx corresponds to its logical carrier number, CHAN, which is defined as: 
fMS_Tx - MS transmit frequency (MHz) 
fbase - The lowest frequency in a particular band relating to logical CHAN = 1 (MHz) 
fseparation -The frequency separation between two adjacent channels (kHz) 
fduplexsplit -The difference between MS Tx and MS Rx [for clarity MS Tx minus MS Rx] (±MHz) 
fMS_Tx = fbase + ((CHAN-1) × (fseparation/1 000)) MHz 
fMS_Rx = fMS_Tx ± fduplexsplit MHz 
fduplexsplit = 0 MHz to 50 MHz in 2,5 kHz steps 
fseparation - Definition 
Table C.1: Frequency Separation 

SDU Code (SEP)  Separation (kHz)  
00002  5  
00012  6,25  
00102  10  
00112  12,5  
01002  15  
01012  20  
01102  25  
01112  30  
1xxx2  reserved  

fsplit - The difference between MS Tx and MS Rx [for clarity MS Tx minus MS Rx] (±MHz) 
Table C.2: Frequency Split high/low 

SDU Code (TXRX_SPLIT)  
02  MS Tx is high of MS Rx  
12  MS Tx is low of MS Rx  

fduplexsplit - Definition 
Table C.3: Frequency Split 

SDU Code (DUPLEX_SPLIT)  Duplex Split (kHz)  
000 0000 0000 00002  0  
000 0000 0000 00012  2,5  
..  
000 0111 0011 00002  4 600 (4,6 MHz)  
..  
000 1100 1000 00002  8 000 (8 MHz)  
..  
000 1111 1010 00002  10 000 (10 MHz)  
..  
100 0110 0101 00002  45 000 (45 MHz)  

fbase - Band Definition chan - Logical Channel Numbers 
Table C.4: Band Definition 

SDU Code (BAND)  fbase MHz  
000 00112  30  
000 01002  40  
000 01012  50  
000 01102  60  
000 01112  70 
 ..  
010 11012  450 
 ..  
101 00002  800  
110 01002  1 000  

Table C.5: Logical Channel Numbers 

Channel Number  SDU Code (CHAN)  Colour Code (see note)  
1  0000 0000 00012  Value  
..  ..  
4 094  1111 1111 11102  Value  
NOTE: The default colour code = 00002.  


C.1.1.3 Flexible Channel Plan 
Each logical channel number has the transmitter and receiver frequency defined. 
Table C.6: Flexible Channel Plan 

Channel Number  SDU Code (CHAN)  Transmitter Frequency  Receiver Frequency  Colour Code (see note)  
1  0000 0000 00012  Value  
..  ..  
4 094  1111 1111 11102  Value  
NOTE: The default colour code = 00002.  

C.1.1.4 Determination of Transmitter and Receiver frequency from CdefParms 
The MS absolute transmitter and receiver frequency is defined in 125 Hz steps as illustrated in table C.7. 
Table C.7: Absolute Transmitter and Receiver SDUs 

ALIAS  SDU Code  Transmitter/Receiver Frequency  
TXMHz RXMHz  00 0011 00102  50 MHz  
11 1110 01112  999 MHz  
0 0000 0000 00002  0 Hz  
TXKHz  0 0000 0000 00012  +125 Hz  
RXKHz  0 0000 0000 00102  +250 Hz  
1 1111 0011 11112  +999 875 Hz  

The absolute transmitter frequency (MHz) = TXMHz + (TXKHz × 125) / 1 000 000. The absolute receiver frequency (MHz) = RXMHz + (RXKHz × 125) / 1 000 000. 
Annex D (informative): Control Channel Hunting Procedures 



D.1 Control Channel Hunting Procedures 
D.1.0 Introduction 
In order to locate a valid TSCC, the MS hunts through a list candidate physical channels until an appropriate TSCC is selected and confirmed. This TSCC hunting may involve a variety of hunting sequences depending on the circumstances of the hunt. This annex illustrates a framework for MS hunting strategy. 
Since two logical TDMA channels occupy one physical channel, the MS can appraise both logical channels concurrently when sampling a physical channel. The MS may use information from the CACH or PDUs that contain a C_SYScode information element to use for verification tests specified in clause 6.3.2.2.1. 
The Control Channel Hunting Procedure stages are: 
a) 
The "resuming a TSCC hunt channel" allows an MS, after a period of activity on a payload physical channel, to resume the TSCC on which it was last confirmed prior to the payload Channel Grant PDU. 

b) 
The "commanded TSCC hunt channel" is employed when an MS is directed on the TSCC to a particular TSCC (from a C_MOVE or P_CLEAR PDU) or seeks to regain a TSCC after a period of inactivity on the selected network (due to being switched off or a user-initiated change of selected network when details of the last confirmed TSCC number have been stored by the MS in non-volatile storage). 

c) 
"Short Hunt Sequence": A hunting sequence, which samples all physical channel numbers likely to be employed as TSCCs by the selected network. A list of Nmax_Ch likely logical candidate physical channel numbers is held in MS fixed non-volatile storage for the selected network. The MS should have the storage for up to 64 values of the logical physical channel number information element defining the extent of the "short hunt sequence". Unused storage locations are marked such that the MS may ignore them. Particular Physical channel numbers may be stored in the list numerous times to provide a bias to that particular TSCC. 

d) 
"Comprehensive Hunt Sequence". A hunting sequence, that samples all possible physical channel numbers in use by the network. This hunting sequence provides a contingency to allow TSCCs to be acquired even when physical channel numbers not normally employed for this purpose are in use. The "comprehensive hunt sequence" may be temporarily suspended to sample likely physical channels or repeat a "short hunt sequence". The lowest Low_Comp_Ch and highest High_Comp_Ch is held in the MS fixed non-volatile storage. 


NOTE 1: The "Comprehensive Hunt Sequence" may be suppressed by network personalization. 
When carrying out a "resuming a TSCC hunt channel" or "commanded TSCC hunt channel" the hunting procedure is considered complete when the MS has tuned directly to the physical channel and has carried out the appropriate verification and confirmation procedures specified in clause 6.3. 

Channel # 
Channel #+. Channel #+2 Channel #+1 
Channel # 
COMPREHENSIVE 
SHORT HUNT Sig > L_short SHORT HUNT Sig < L_short HUNT 
Figure D.1 illustrates a possible implementation of the "Short Hunt Sequence" and "Comprehensive Hunt" Sequence. If the MS needs to search for an appropriate TSCC, this process searches the most likely physical channel candidates first. This example of a possible implementation carries out the short hunt twice, the first loop being exercised looking for a TSCC whose signal strength exceeds a defined value (L_SigShort). 
A hunting sequence may be considered complete when either: 
a) 
a physical channel is found that satisfies the TSCC verification and confirmation tests specified in clause 6.3. (The hunting procedure was successful); 

b) 
all physical channel numbers within the scope of the hunting sequence have been tested without a physical channel being found which satisfies the TSCC confirmation tests specified in clause 6.3 (the hunting sequence failed). 


The MS carries out the hunting procedure in the order described in this clause. If a hunting sequence is unsuccessfully completed, then the MS starts the next hunting sequence. The final hunting sequence is the "comprehensive hunt sequence". If this hunting sequence cannot be completed, the MS stays in this hunting sequence until a TSCC is confirmed. However, the foregoing provisions of this clause may be relaxed in the following circumstances: 
 
the "comprehensive hunt sequence" may be suppressed by MS personalization for a network; 

 
an MS in a "comprehensive hunt sequence" may elect to perform complete hunting sequences of any other type, returning to the "comprehensive hunt sequence" in the event of failure to confirm an appropriate TSCC; 

 
an MS may elect to sample any physical channel that may satisfy the TSCC verification and confirmation tests specified in clause 6.3. 


Where a hunting stage involves more than one physical channel the order in which physical channels are sampled is not specified. However, in order to guard against bias towards certain physical channels, MSs should ensure randomness in the order in which physical channels are sampled by one of the following: 
 
hunting physical channel numbers sequentially (e.g. from lowest to highest number) but beginning the hunting stage at a random position in the sequence of physical channel numbers; 

 
hunting physical channel numbers in a random fashion. 


The procedures defined in the present document are intended to provide a comprehensive range of methods that may be used as a basis for the design of MSs. 
NOTE 2: The specified mechanism is a framework for MSs. The use of additional or differing procedures is not prohibited provided that they satisfy the verification and confirmation procedures defined in the present document. 
EXAMPLE: An MS locating a physical channel which satisfies the TSCC confirmation tests specified in clause 6.3 may continue the hunt in anticipation that an alternative TSCC may be found with a higher received signal quality or level. Also, MSs need not limit the hunting procedures to the receiver sensitivity threshold levels specified and may conduct additional hunts at other levels. 

D.1.1 Resuming a TSCC Hunt Channel 
When "resuming a TSCC hunt channel" the MS retunes to the logical physical channel number of the TSCC on which it was last confirmed. The MS should be capable of receiving on the TSCC outbound channel, which it is resuming within two TDMA-frames of the following instants: 
a) 
the end of any P_CLEAR PDU, which requires the MS to cease activity on the payload channel to which it is currently tuned; 

b) 
the end of the last payload disconnect PDU P_MAINT (Maint_Kind = DISCON) sent by the MS on a payload channel; 

c) 
the end of any call authorization check PDU (P_AUTH) received on a payload channel where the MS address information element in the P_AUTH PDU does NOT match one of the addresses from the Channel Grant PDU that directed the MS to the payload channel; 

d) 
the operation of the any user initiated "call end request" by the user during a talkgroup call when the MS was not the call originator of the call. 


Before confirming the TSCC the MS should verify any C_SYScode received on the channel in accordance with the procedures of clause 6.3.2.2.1. In the event of the C_SYScode fails the verification procedures, the hunting sequence is considered unsuccessfully completed and the MS enters the "short hunt sequence". 

D.1.2 Commanded TSCC Hunt Channel 
D.1.2.1 Conditions to Enter a Commanded TSCC Hunt 
A "single channel hunt" applies when the MS is directed to a TSCC other than the one on which it was last confirmed, or when it is switched on whilst still retaining valid network information from previous activity on the selected network, or the user initiates a change of selected network and the MS still retains valid information of previous activity on the new selected network. The MS should be able to receive the nominated physical channel within 3 TDMA slots of the following instants: 
a) 
the end of any valid C_MOVE PDU that is applicable to the MS; 

b) 
the MS being switched on, provided that the unit holds a valid record of the channel number on which the MS was most recently confirmed; 

c) 
a change of selected network being initiated by the user, provided that the MS holds a valid record of the channel number on which the MS was most recently confirmed on the new selected network. 



D.1.2.2 Nominated Channel for the Single Channel Hunt 
The nominated channel is: 
a) 
the logical physical channel number indicated in the CONT information element of the P_CLEAR PDU; or 

b) 
the channel number indicated in the CONT information element the C_MOVE PDU; or 

c) 
the channel number held in the MSs read/write storage as the TSCC on which the unit was most recently confirmed on the selected network. 


The MS does not make any transmissions on a TSCC until it has confirmed the channel in accordance with the procedure specified in clause 6.3. In the event of a failure of the TSCC to meet the channel confirmation criteria the hunting sequence is considered unsuccessfully completed. Upon unsuccessful completion of the "commanded TSCC hunt channel" the MS enters the "short hunt sequence". 

D.1.2.3 Short Hunt Sequence 
D.1.2.3.0 Short Hunt Sequence - Introduction 
A "Short Hunt Sequence" samples all physical channels most likely to be employed as TSCCs by the selected network. There are many strategies that may be employed but all strategies search from a shortlist of candidates as follows: 
a) 
A list of likely physical channels will be specified by an external agency stored in MS fixed non-volatile storage. 

b) 
The MS may modify the scope of the shortlist of physical channels from information broadcast from the network and held in its non-volatile storage as follows: 


1) by adding to the compass of the hunting sequence channel numbers received in C_BCAST (Announce/Withdraw) PDU from the selected network; 
2) by removing from the compass of the hunting sequence channel numbers received in C_BCAST (Announce/Withdraw) PDUs from the selected network. 
One strategy illustrated in figure D.1 entails hunting the list of physical channel numbers sequentially (e.g. from the randomly chosen list position to the highest then circling to the lowest list position) but beginning the hunting stage at a random position in the sequence of physical channel numbers. The shortlist is sampled twice, the first loop being exercised looking for a TSCC whose signal strength exceeds a defined value (L_Short). 
Another possible strategy entails hunting the complete shortlist of physical channel numbers sequentially (e.g. from lowest list position to highest list position) recording the signal strength and/or BER. After sampling all channels in the list the MS chooses the most appropriate TSCC. 

D.1.2.3.1 Conditions to Enter a Short Channel Hunt 
An MS enters the "short hunt sequence": 
a) 
immediately after switch-on, provided that the MS holds no valid information of previous activity on the selected network; 

b) 
when the user indicates a change of selected network, provided that the MS holds no valid information of previous activity on the selected network. 


The MS may enter the "short hunt sequence" at any time during the "comprehensive hunt sequence", at the MSs discretion. 
The MS should not make any transmissions on a TSCC located during the "short hunt sequence" until it has verified and confirmed the channel in accordance with the procedures specified in clause 6.3. 
Upon unsuccessful completion of the "short hunt sequence" the MS enters the "comprehensive hunt sequence", except when the "comprehensive hunt sequence" has been suppressed by MS personalization for a network. 


D.1.2.4 Comprehensive Hunt Sequence 
D.1.2.4.0 Comprehensive Hunt Sequence - Introduction 
The "comprehensive hunt sequence" includes every channel within the range set by the lowest and highest channel numbers set by the network personalization, held in the MSs fixed non-volatile storage. 

D.1.2.4.1 Conditions to Enter a Comprehensive Channel Hunt 
An MS enters the "comprehensive hunt sequence" when a "short hunt sequence" has been unsuccessfully completed. 
An MS may repeat the "comprehensive hunt stage" until such a time as a physical channel which satisfies the TSCC confirmation tests specified in clause 6.3 is found. 
The MS does not make any transmissions on a TSCC located during the "comprehensive hunt sequence" until it has confirmed the channel in accordance with the procedures specified in clause 6.3. 
At any time during the "comprehensive hunt sequence" an MS may undertake a "short hunt sequence", or sample any physical channels that the MS is able to determine may be successful, returning to the "comprehensive hunt sequence" in the event that these choices is unsuccessful. 
It is possible to suppress the "comprehensive hunt sequence" by MS network personalization. In this case the MS remains in the "short hunt sequence" with the acquisition threshold set to a level L Squelch until such time as a channel which satisfies the TSCC confirmation tests specified in clause 6.3. 


D.1.2.5 Receiver Sensitivity During Control Channel Acquisition 
The MS should not attempt to become active on any physical channel for which the received signal level (or signal quality) is less than the specified acquisition threshold. 
The acquisition threshold L_SHort is set to a signal level within the range L_Upper_SHort to L_Lower_SHort at the input of the receiver (or an equivalent if the receiver measures signal quality). 
L_Squelch is set at a level determined by the MS manufacturer which enables unsuitable physical channels to be rejected on which the received signal is inadequate for a suitable grade of service (or an equivalent if the receiver measures signal quality). 
NOTE: The MS may be unable to determine the received signal level but may use other methods such as bit error measurements to determine the signal quality. 
Annex E (informative): Fleet numbering and dialling plan 



E.1 Introduction 
This annex describes a fleet dialling plan whereby an MS that is equipped with a CCITT keypad may address called entities and select many of the available features and facilities. 
It is recognized that manufacturers of MSs will wish to exercise design independence in their products and, accordingly, the requirements of these clauses are informative only. 
This clause is intended to: 
 
define the user visible numbering (User Interface domain); and 

 
dialling in an MS for accessing other MS(s) or other entity(ies) over the AI; and 

 
describe how the visible user numbering and dial strings may be mapped on to the AI. 


The Man Machine Interface (MMI) issues have been addressed in these clauses only to the extent of those strictly related to fleet numbering and dialling. 
It should be ensured in the MS implementation, that no non-deterministic user input results in an ambiguous call set-up attempt over the Air Interface. For example, if a user inputs a dialled string of digits that is not assigned to any of the presented dialling algorithms, then the MS should not try to establish the call and appropriate feedback or alert should be given to the user. 
As not to restrict manufacturer's independence, it is envisaged that dialling selection may be initiated in many ways. Some methods are: 
a) 
direct number entry via a keypad; 

b) 
mode selection buttons; and 

c) 
soft key menu selection. 


The dialling method may vary according to the MS terminal type. This annex is applicable to MSs with a basic CCITT number keypad, as illustrated in figure E.1 and/or with a display capable of displaying the decimal numbers "0" to "9" and the keys "*" and "#". However, manufacturers may employ other keypad layouts. 
1  2  3  
4  5  6  
7  8  9  
*  0  #  
Figure E.1: CCITT Keypad Layout 


ETSI 
The primary use for the keypad is to enable the user to select the destination address, the type of service, and to initiate calls from the MS. The destination may be other MS(s), to line connected entities via gateways (e.g. a PABX exchange) and to subscribers on the Public Switched Telephone Network (PSTN). Other services may be requested by dialling "call modifier" strings prior to entering the destination address. 
The user input in case of establishing a call is defined for the purposes of this annex as two sequential events: 
a) 
user dials digits; and 

b) 
user initiates call. 


The call initiation is the event, which terminates the user input related to the digits and normally causes a call set-up. The call initiation event itself may be either when the user presses the "#" key or Push-To-Talk (PTT) or other method that may be manufacturer or implementation specific. 
NOTE: This definition of the user input for call establishment is valid only for the cases when a user dials a number using the number keypad or selects a number e.g. from a list of predefined numbers. There may be methods to combine all the three events so that e.g. PTT causes a call establishment using a predefined dialling algorithm to a predefined address requiring no explicit dialling event. 
Manufacturers may implement barring of certain types of call or restrict calls to certain addresses. However, such constraints are outside the scope of these clauses. It should be noted that some of the DMR services that may be initiated in these clauses are only applicable to MSs that are communicating through a DMR Tier III repeater. 
The MS may contain predefined parameters prescribing the minimum and maximum length of the user dial string. By limiting the length of the dialled string the address range the MS is able to dial is restricted. The minimum length parameter may be set according to the user needs, e.g. to disable accidental 1-digit dialling. 
The (User Interface) address that an individual MS is assigned (its own address) may be defined by the dialled digits another MS would dial to reach that MS rather than the Air Interface binary number. If the algorithm specified in this annex were implemented, an MS individual address would be fully specified by seven decimal digits. Similarly, if an MS was personalized with one or more talkgroup addresses, they may be specified at the user interface by seven decimal digits. 
E.2  Subscriber Mapping  
E.2.0  Subscriber Mapping - Introduction  
E.2.1  User Interface - Air Interface  

Dialled digits are represented in decimal notation and utilize the numbers "0" to "9" and the keys "*" and "#". For an MS fitted with a keypad, the "#" key may initiate a call (although other initiate methods may be implemented by a manufacturer). Dialled digits that represent a destination address are translated to a form for the Air Interface by algorithms prescribed in these clauses. This is illustrated in figure E.2. 
Bi- Directional Algorithm 
Dialled Digits 
Signalling Bits 
= Variable Length Strings = Fixed Length Data = Decimal Representation = Binary Representation = CCITT Keypad - 24 Bits Digits 0 to 9 - call modifier flags Digits * and # 
Figure E.2: Number Conversion 
Address fields in the Air-Interface domain structure has a length of 24 bits. The content of a 24-bit AI MS address field may represent: 
 
an MS individual address; 

 
an MS group address; 

 
a gateway address; or 

 
a special identifier. 


The Air Interface provides call services for voice and data. The AI also permits the call services to be modified to (for example) provide priority and emergency calling. The application that converts the User Interface to the Air Interface recognizes the "call modifier" and requests the lower layers to set appropriate bits in the PDUs carried between the entities. At the User Interface, the "call modifier" is indicated by preceding the destination address digits with additional "call modifier" digits. 

E.3 Numbering Plan 
E.3.0 Numbering Plan - Introduction 
Each call is made to a numeric address. The mapping between the User-Interface domain and the Air Interface uses a number of reversible coding algorithms. 
The MS equipment may contain predefined parameters prescribing the minimum and maximum length of the user dial string. By limiting the length of the dialled string, the address range that the MS is able to dial is restricted. 
The present document permits Calls from an MS to be initiated with a number of call and priority options: 
 
Emergency service: 

-Emergency calls take precedence over all other calls. Emergency call may be pre-emptive causing another call to be cleared down if the resource requested for the emergency call is not available. 

 
Broadcast service: -The Broadcast Call service provides a one-way voice call from any user to a predetermined talkgroup. 

 
Priority: 


-The priority option permits the originator to select one of four levels of priority. The TSCC may manage and manipulate a call queue to cause calls with a higher priority to mature faster. (The procedures the TSCC may employ are not prescribed in the present document). In the present document one call modifier (High Priority (Alias PRIORTY_SV = 102) is defined to select the high priority call service. If a 
priority is not selected during dialling of a destination address and call service, Normal (low) Priority is assumed. 
 
Call to All MS: 

-A call may be made to all MS. In this case, the MS or Gateway selects dialled digits that transpose to the Identifier ALLMSID, ALLMSIDL, or ALLMSIDZ (see clause E.3.4) as the destination address. The call uses the Broadcast Service. 

 
Full Duplex Call: 


-MS to MS full duplex individual calls. 

E.3.1 Definition of User Number and Address 
E.3.1.0 User Number - Introduction 
The user numbering method and corresponding relation of user dialled strings and air interface addresses are specified in this clause. All dialled strings specified in this clause are read from left to right and are dialled in the sequence in which they are read. 
Dialled strings that begin with an asterisk (*) provide secondary uses for the MS such as the raising of a call priority, to originate calls other than voice calls, and to access other facilities (call diversion, cancel call, etc.). 
All dialled strings that the MS does not recognize are rejected and the user is informed by a number unobtainable or service unobtainable indication. 

E.3.1.1 Definition of Air Interface User Address 
The length of an AI address is 24 bits. AI addresses are split into two parts. The first 9 bits represent the Network Area Identity (NAI), the second 15 bits represent the Short Subscriber Identity (SSI) or Short Group Identity (SGI) as illustrated in table E.1. 
Table E.1: Air interface address 
Class  Alias  Bits  
Network Area Identity  NAI  9  
Short Subscriber Identity Short Group Identity  SSI SGI  15  

NOTE: An AI address (ADRNULL) = 0 is reserved. Individual call addresses in the range 1 to 1 048 575(0FFFFF16) are reserved for MPT1327 migration. 
Table E.2: Address space occupied by DMR MS 

Class  NAI  SSI SGI  
Bits  9  15  
Range  32 to 511(note 1)  0 to 32 767 (note 2)  
NOTE 1: NAI values of 0 to 31 are reserved for MPT1327 for migration. NOTE 2: SSI and SGI values of 0 are reserved and thus invalid.  

Addresses 1 048 576(100 00016) to 16 777 215(FFFFFF16) are DMR individual MS addresses. (See table E.2.) 

E.3.1.2 Network Prefix (NP) 
An NAI value in the range 32 to 510 is assigned to DMR MS Number Prefix (NP). An NP value of 511 is assigned to a special gateway. The relationship between the MS NP and NAI is: NP = NAI + 296 The permissible NP range is 328 to 806, 479 values in total. The DMR MS NP values between 200 to 327 are reserved for MPT1327 migration. 

E.3.1.3 Individual Number 
E.3.1.3.1 Short Subscriber Identity (SSI) 
The length of the SSI is 15 bits, in the range 0 to 32 767. 0 refers to a NULL address that is reserved and thus invalid. Values of 1 to 32 200 represent a Short Subscriber Identity SSI. The values 32 201 to 32 767 are special Short Subscriber Identities. 

E.3.1.3.2 Fleet Individual Identity 
The complete MS Fleet Individual Identity is represented by 8 digits, represented as a Number Prefix(NP) concatenated with a Fleet Individual Number (FIN) concatenated with an Individual Number (IN):  NP (3 digits) ¦ FIN (2 digits) ¦ IN (3 digits). NOTE 1: indicates concatenation 
¦ 
A shortened 5 digit MS is represented as: FIN (2 digits) ¦ IN (3 digits). NOTE 2: indicates concatenation 
¦ 
A shortened 3 digit MS is represented as: 
IN (3 digits) The range of FIN is 20 to 89. Every NP may therefore encompass 70 individual fleets. Every fleet number in the range 20 to 41 may encompass 700 INs. For each FIN the range of IN values is 200 to 899. Every fleet in number in the range 42 to 89 may encompass 350 INs. For each FIN, the range of IN values is 200 to 
549. 

E.3.1.3.3 Algorithm to Convert an Individual Number to an AI Address 
All NPs have same fleet structure. The relationship of NP, FIN, IN and the AI MS address is as follows: For dialled FIN 20 to 41: AI MS address = (NP - 328) × 8 00016 + (FIN - 20) × 700 + (IN - 200) + 100 00116 
For dialled FIN 42 to 89: AI MS address = (NP - 328) × 8 00016 + (FIN - 42) × 350 + (IN - 200) + 103C2916 


E.3.1.4 Group Number 
E.3.1.4.1 Group Identity 
The length of SGI is 15 bits. SGI = 0 is reserved. The range of values from 1 to 7 000 represents a group identity. 32 767 is all call identity to the entire fleet. Unlike other All Call types (Site, Multi-Site and All Site) that are routed based on sites, this is essentially a TG call that is routed to all sites where the Fleet's MS units are registered. All other values are reserved. 

E.3.1.4.2 Fleet Group Identity 
Complete group identity consists of 8 digits consisting of: NP (3 digits) ¦ FGN (2 digits) ¦ GN (3 digits). NOTE 1: indicates concatenation. 
¦ 
A shortened 5 digits group identity is represented as: FGN (2 digits) ¦ GN (3 digits). NOTE 2: indicates concatenation. 
¦ 
A shortened 3 digits group identity is represented as: 
GN (3 digits). The range of FGN is 20 to 89. Every NP consists of 70 group fleets (corresponding with FIN). The range of GN is 900 to 999. Every group fleet consists of 100 GN. The total number of fleet group numbers for each NP is 7 000. 

E.3.1.4.3 Algorithm to Convert a Group Number to a CAI Address 
All NP have same fleet structure. The relationship of NP, FGN, GN and an CAI address is as follows: ID = (NP - 328) × 8 00016 + (FGN - 20) × 100 + (GN - 900) + 100 00116 



E.3.2 Dispatcher 
Dispatchers are six digit dialled strings. Calls to the dispatcher use the individual address space. The individual AI address is 6 digits (where n is a number from 0 to 9) calculated from: NP (three digits) ¦ 10n (three digits) = (NP - 328) × 8 00016 + 32 481 + n + 100 00016 
NOTE: indicates concatenation. 
¦ 
For a local dispatcher the NP may be pre-defined. In this case the dispatcher may be addressed by dialling three digits. 
Table E.3: Address Space Occupied by Dispatchers 

Dialled Digits  ID  
NP ¦100  (NP-328) × 8 00016 + 32 481 + 100 00016  
NP ¦101  (NP-328) × 8 00016 + 32 482 + 100 00016  
NP ¦102  (NP-328) × 8 00016 + 32 483 + 100 00016  
NP ¦103  (NP-328) × 8 00016 + 32 484 + 100 00016  
NP ¦104  (NP-328) × 8 00016 + 32 485 + 100 00016  
NP ¦105  (NP-328) × 8 00016 + 32 486 + 100 00016  
NP ¦106  (NP-328) × 8 00016 + 32 487 + 100 00016  
NP ¦107  (NP-328) × 8 00016 + 32 488 + 100 00016  
NP ¦108  (NP-328) × 8 00016 + 32 489 + 100 00016  
NP ¦109  (NP-328) × 8 00016 + 32 490 + 100 00016  
NOTE: ¦ indicates concatenation.  


E.3.3 Short Dispatcher Dialling 
The dispatcher is selected by dialling a single digit in the range 0 to 9. The call type is a normal priority call to an individual identity. The MS may hold a list of up to ten predefined individual identities for each of the dialled digits 0 to 9. If the calling party dials a dispatcher for which there is no corresponding address, the MS indicates to the user that the call cannot be established. 
If the dispatcher wishes to initially queue incoming calls, the dispatcher may invoke the callback state. 

E.3.4 All Call Dialled Strings 
E.3.4.0 All Call Dialled Strings Introduction 
DMR specifies three classes of all calls. Each class is defined at the AI by a separate DMR ID. Table E.4 illustrates the three classes ALLMSID, ALLMSIDZ and ALLMSIDL. 
All Calls use the group ID space. 
Table E.4: All Call Classes 

AI Address  Alias  Description  
FFFFFD16  ALLMSIDL  ID used to address all MS at one site as a talkgroup (All call to a Site ID)  
FFFFFE16  ALLMSIDZ  ID used to address all MS in a subset of the system's sites as a talkgroup (All call to a Location ID)  
FFFFFF16  ALLMSID  ID used to address all MS (AllCall) in every site in the system as a talkgroup (All Call to a Network ID)  


E.3.4.1 Dialled Strings for Local All Calls 
Table E.5 illustrates the dialled string for Local All Calls. Local all calls are restricted to the radio site on which the MS is registered. 
Table E.5: Local All Calls 

Dialled String  Dialled String  DMR ID  
High Priority All Call  *1961  FFFFFD16  
Emergency All Call  *1962  FFFFFD16  
Reserved  *1963  FFFFFD16  
Emergency Data All Call  *1964  FFFFFD16  
UDT Short Data All Call  *1965  FFFFFD16  
Normal All call  *1967  FFFFFD16  

E.3.4.2 Dialled Strings Used to Address all MS in a Subset of the System's Radio Sites as a Talkgroup 
Table E.6 illustrates the dialled string for ID used to address all MS in a subset of the system's sites as a talkgroup. 
Table E.6: Subset of System All Calls 

Dialled String  Dialled String  DMR ID  
High Priority All Call  *1971  FFFFFE16  
Emergency All Call  *1972  FFFFFE16  
Reserved  *1973  FFFFFE16  
Emergency Data All Call  *1974  FFFFFE16  
UDT Short Data All Call  *1975  FFFFFE16  
Normal All call  *1977  FFFFFE16  

E.3.4.3 Dialled Strings Used to Address all MS in the System as a Talkgroup 
Table E.7 illustrates the dialled string for ID used to address all MS in the system as a talkgroup. 
Table E.7: System Wide All Calls 

Dialled String  Dialled String  DMR ID  
High Priority All Call  *1981  FFFFFF16  
Emergency All Call  *1982  FFFFFF16  
Reserved  *1983  FFFFFF16  
Emergency Data All Call  *1984  FFFFFF16  
UDT Short Data All Call  *1985  FFFFFF16  
Normal All call  *1987  FFFFFF16  



E.3.5 Call Modifiers 
Functions such as the modification of call requests to change to type of service request, and the implementation of other facilities (status, broadcast, etc.), are initiated using the syntax in the following clauses. The call modifier is defined by the dialled string by adding extra digits to the dialled destination in the form: 
* <call modifier code> * destination #. Codes which modify the call precede the dialled number and are separated from the number by the use if the '*' key. 
Codes that change a function between two states (such as set call diversion and clear call diversion) initiate the state with *, and reset the state by the same code commencing with #. 
Table E.8: Summary of Call Modifiers 

Dialled Digits  Call Modifier  
*11*nn#  Broadcast Call  
*8*nn#  Priority Call  
*8*1*nn#  Priority Level 1 Call  
*8*2*nn#  Priority Level 2 Call  
*8*3*nn#  Priority Level 3 Call  
*9*nn#  Emergency Call  
*12*nn.#  Full Duplex MS to MS call  
*0ss*nn#  Status Delivery Call. Status ss is delivered to MS nnn.  
*41*nn#  Divert Own Call to number nn..  
#41#  Cancel Divert Own call  
*2*nn*dddd#  UDT Short Data to nnn.. with data d (UDT transfer)  
*7*i...*i...*i...*i...#  Call to IP destination i... i i i. (see note 1)  
NOTE 1: The dotted IP address may be defined with sufficient digits to be unambiguous/ e.g. 213.048.132.002 may be dialled by 213.48.132.2. NOTE 2: Encryption is not defined in the present document.  

Dialling with control code begins with "*", and start the call with pressing "#" or PTT. "*" is used as a separation among control code, subscriber number (wire or wireless), and attached data. Subscribers may combine call modifiers if 
they do not conflict.  
EXAMPLE:  
Individual high priority call to MS  *8*234#  
Individual level 1 priority call to MS  *8*1*234#  
Individual high priority broadcast call to Group  *18*934#  
Individual level 1 priority broadcast call to Group  *18*1*934#  
Send status 57 to MS  *057*234#  

MS ensures that a conflicting call modifiers cannot be dialled. For example *9 may not be concatenated with *8. 

E.3.6 Dialled Function Strings 
This is a list of dialled strings that have a particular function: *# Abandon call (TSCC - if the MS has not yet made a random access transmission; cancel call if the 
MS has made at least one random access transmission. Traffic Channel - cancel the call *47# Display Own Number *48# Set call back (voice calls only) #48# Cancel Call Back (voice calls only) #, PTT Receive call when ringing #0# Cancel call back request *46# Toggle the encryption on/off (see note) *461# Turn Encryption Off (see note) *462# Turn Encryption On (see note) NOTE: Encryption is not defined in the present document. 

E.3.7 Calls to Line Connected Destinations 
E.3.7.1 Calls to the PABX and PSTN 
E.3.7.1.0 Calls to the PABX and PSTN - Introduction 
Table E.9 illustrates calls to the PABX and PSTN. 
Table E.9: Calls to PABX and PSTN 

Starting dial  Remark  
01 followed by 4 digits (nnn..) to a maximum of 44 digits  Dial PSTN to nnnn..  
02 followed by 4 digits (nnn..) to a maximum of 44 digits  Dial PABX to nnnn..  
1 000 to 8 999, 4 digits abbreviated dialling  Reserved for future definition  
9 600 to 9 699, 4 digits dialling  Reserved for future definition  

Note that in the case of a SIP implementation for line connected access there may be no distinction between PSTN and PABX calls. 

E.3.7.1.1 Calls to the PSTN 
Dialled strings of six or more digits with leading digit 01 cause the MS to send a Voice Call random access request to the PSTNI gateway. The dialled digits are transported by the UDT mechanism. The leading '0' is included in the UDT appended data. For example, if the user dials 0112345. The number 0112345 is uploaded via the UDT mechanism. 

E.3.7.1.2 Calls to the PABX 
Dialled strings of six or more digits with leading digit 02 cause the MS to send a Voice Call random access request to the PABXI gateway. The dialled digits are transported by the UDT mechanism. The leading '02' is included in the UDT appended data. For example, if the user dials 02 1234. The number 021234 is uploaded via the UDT mechanism. 
Annex F (informative): Use of MSC and SDL diagrams 




F.1 Introduction 
The present document makes use of SDL and MSC diagrams to complement textual behaviour descriptions in DMR Part Trunking Services and Facilities Protocol. 

F.2 Principle 
The MSC and SDL diagrams express the same behaviour (requirement) as defined by the textual description so they only complement the textual description in order to provide an alternative perspective on a requirement. The development of these diagrams also may also support validation of the textual description, e.g. identifying missing stop of a timer when other expected behaviour occurs before timeout. 

F.3 Notation 
The MSC-diagrams make use of the following constructs illustrated in figure F.1. 

Figure F.1: SDL Notation  
1)  Message exchange between instances (line with arrow associated with message name and parameters in parentheses).  
2)  Start timer (horizontal line with hour-glass).  
3)  Stop timer, (horizontal line with 'x').  
4)  Timeout (horizontal line with arrow and hour-glass).  
5)  The optional inline construct, (rectangle with keyword 'opt' in upper left corner). The meaning of the optional inline construct is that the contained behaviour is optional to occur.  
6)  The alternative inline construct (rectangle with keyword 'alt' in upper left corner and dotted separation lines). The meaning of this construct is that each of the alternatives divided by the dotted line is a possible behaviour of which exactly one is to occur for the MSC.  

In the SDL diagrams only basic process behaviour symbols are used, that is state, input, output, decision, timer start, and timer stop symbols. 
Annex G (normative): MS Native Addressing Plan 

G.1 Introduction 
To ensure interoperability between different manufacturers MS, each MS shall be capable of calling all valid IDs within the DMR addressing range. 
The full requirement is: 
1) the ability to personalize an MS terminal with MS addresses (see clause 4.3) that may be anywhere within the addressable range 000 001 to 16 776 415; 
2) the ability to address a called party (individual or talkgroup) for all call services supported by the MS within the addressable range 00 000 001 to 16 776 415; and 
3) if supported by the MS, the ability to address ALLMSIDL (16 777 213), ALLMSIDZ (16 777 214), ALLMSID (16 777 215). 
Annex H (informative): Bibliography 
 ETSI TR 102 335-2: "Electromagnetic compatibility and Radio spectrum Matters (ERM); System reference document for harmonized use of Digital Mobile Radio (DMR); Part 2: Systems operating under individual licences in the existing land mobile service spectrum bands". 
History 
Document history  
V1.1.1  January 2006  Publication  
V1.2.1  September 2006  Publication  
V1.3.1  June 2010  Publication  
V1.4.1  January 2012  Publication  
V1.5.1  February 2013  Publication  
V1.6.1  June 2014  Publication  
V1.7.1  July 2015  Publication  
V1.8.1  February 2016  Publication  
V1.9.1  October 2017  Publication  
V1.9.2  April 2018  Publication  
V1.10.1  August 2019  Publication  
V1.11.1  January 2021  Publication  
V1.12.1  July 2023  Publication  



